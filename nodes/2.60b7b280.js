var kl=Object.defineProperty;var wl=(l,d,_)=>d in l?kl(l,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):l[d]=_;var mt=(l,d,_)=>(wl(l,typeof d!="symbol"?d+"":d,_),_);import{J as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,k as element,l as claim_element,m as children,h as detach,n as attr,b as insert_hydration,K as listen,H as noop,I as component_subscribe,L as set_store_value,q as text,r as claim_text,u as set_data,e as empty,o as onMount,M as onDestroy,a as space,c as claim_space,G as append_hydration,N as destroy_each,O as run_all,P as set_input_value,g as transition_in,v as group_outros,f as check_outros,d as transition_out,y as create_component,z as claim_component,A as mount_component,B as destroy_component,p as set_style,Q as null_to_empty,w as binding_callbacks}from"../chunks/index.59366b1b.js";import{w as writable}from"../chunks/index.9b70e426.js";class ref{}mt(ref,"colors",{default:"#ffffff",gems:"text-red-500",gold:"text-yellow-500",orbs:"text-neutral-400",key1:"text-green-400",key2:"text-blue-400",key3:"text-pink-400",key4:"text-violet-400",key5:"text-amber-400",beacons:"text-sky-500",beaconPower:"text-cyan-300",fame:"text-orange-400",crystals:"text-sky-300",energy:"text-emerald-400",sigils:"text-fuchsia-600",slurry:"text-teal-400",artifacts:"text-slate-200",challengePoints:"text-amber-500",warp:"text-emerald-600",trophies:"text-amber-500",dust:"text-indigo-600",fragments:"text-sky-600",stars:"text-transparent text-stone-100 bg-clip-text bg-gradient-to-br from-fuchsia-300 to-violet-700",efire:"text-orange-400 text-shadow-gray",eearth:"text-emerald-200 text-shadow-gray",emagic:"text-amber-200 text-shadow-gray",ewater:"text-sky-300 text-shadow-gray",ecelestial:"text-violet-300 text-shadow-gray",radium:"text-lime-300",antimatter:"text-transparent text-stone-100 bg-clip-text bg-gradient-to-br from-blue-500 to-indigo-800",void:"text-gray-800",layer:"text-yellow-300"}),mt(ref,"essenceBgColors",["bg-red-500","bg-emerald-400","bg-sky-400","bg-amber-400","bg-violet-400","bg-indigo-500"]),mt(ref,"essenceTextColors",["text-red-500","text-emerald-400","text-sky-400","text-amber-400","text-violet-400","text-indigo-500"]),mt(ref,"challengePointValues",{default:0,beaconPower:.025,gems:.37,key1:1,key2:36,key3:850,key4:2375,beaconLevels:10}),mt(ref,"displayNames",{key1:"[*] key",key2:"[**] key",key3:"[***] key",key4:"[****] key",key5:"[*****] key",beaconPower:"Beacon Power",efire:"[@] fire",eearth:"[@] earth",ewater:"[@] water",ecelestial:"[@] celestial",emagic:"[@] magic",stars:"*stars*",energy:"energy"}),mt(ref,"walletExclude",{totalFame:!0,challengePoints:!0,totalAntimatter:!0,beaconPower:!0,mastery:!0,totalTrophies:!0}),mt(ref,"dropTiers",{default:1,fragments:999,gems:0,gold:1,key1:1,orbs:1,crystals:2,beacons:2,fame:2,energy:2,dust:3,slurry:3,sigils:3,radium:3,stars:3,key2:4,artifacts:4,warp:4,trophies:4,key3:5,key4:5,efire:5,eearth:5,emagic:5,ewater:5,ecelestial:5,antimatter:5,void:6}),mt(ref,"keyMainNames",{1:"T1 [*]",2:"T2 [**]",3:"T3 [***]",4:"T4 [****]",5:"T5 [*****]"}),mt(ref,"dropTierColors",{0:"text-white",1:"text-white",2:"text-green-200",3:"text-blue-300",4:"text-purple-300"}),mt(ref,"tabs",["mining","keys","beacons","reactor","relocate","enchants","augments","mastery","artifacts","ascension"]),mt(ref,"tabNotUnlockedText",{beacons:"Find a beacon while mining to unlock.",sigils:"Find a sigil while mining to unlock.",relocate:"Use 200 total keys to unlock.",enchants:"Relocate and gain at least 100 fame to unlock.",automation:"Relocate and gain at least 1 fame to unlock.",mastery:"Buy mastery with fame to unlock.",artifacts:"Find an artifact to unlock.",ascension:"Obtain 1e13 fame.",button:"Reach Mining Level 8 to unlock.",augments:"Relocate once to unlock."}),mt(ref,"miningUpgradeSortOrder",{haste:1,efficiency:2,fortune:3,shiny:4,"[*] key finder":5,"lootmaster i":6,"[**] key finder":7,"lootmaster ii":8,"[***] key finder":9,"lootmaster iii":10,"key mastery":11,legendary:12,"efficiency ii":13,hardened:14,"legendary ii":14.02,hoarder:17,spelunker:18,paladin:19,demon:20,lockpicks:21,"efficiency iii":21.2,kleptomaniac:21.4,overload:22,"cerium decomposition":22.5,excavator:24,"fortune ii":25,isotopes:26,"blinding lights":27,"elusive minerals":926,"ethereal box":927,"phantom legend":928,"negative mass":950,default:1e300}),mt(ref,"tutorialModeDescriptions",{default:"[not yet implemented]",gems:"Gain gems on each mining cycle and from keys.",gold:"Gain gold from random drops while mining and from keys.",key1:"Gain keys from random drops while mining, and the Key Finder upgrade. Keys can be opened for rewards or broken down into slurry.",key2:"Gain keys from random drops while mining, and the Key Finder upgrade. Keys can be opened for rewards or broken down into slurry.",key3:"Gain keys from random drops while mining, and the Key Finder upgrade. Keys can be opened for rewards or broken down into slurry.",key4:"Gain keys from random drops while mining, and the Key Finder upgrade. Keys can be opened for rewards or broken down into slurry.",key5:"Gain keys from random drops while mining, and the Key Finder upgrade. Keys can be opened for rewards or broken down into slurry.",orbs:"Gain orbs from random drops while mining and from keys.",crystals:"Gain crystals from random drops while mining, from keys, and from the reactor.",beacons:"Gain beacons from random drops while mining and from keys.",fame:"Gain fame from relocating, and rarely from keys.",slurry:"Gain slurry from breaking down keys.",sigils:"Gain sigils from random drops while mining and from keys.",artifacts:"Very rarely gain artifacts from keys, the reactor, and random drops while mining. Artifacts unlock powerful passive bonuses.",warp:"Gain warp from mastery.",trophies:"Gain trophies from mastery.",dust:"Gain dust very rarely while mining.",radium:"Gain radium from clicking the reactor. Radium produces crystals.",goldenSigils:"Gain golden sigils from crafting.",energy:"Enables you to craft powerful items.",efire:"Gained from crafting or enchants. Used in ascension.",eearth:"Gained from crafting or enchants. Used in ascension.",ewater:"Gained from crafting or enchants. Used in ascension.",ecelestial:"Gained from crafting or enchants.Used in ascension.",emagic:"Gained from crafting or enchants. Used in ascension."}),mt(ref,"buttonBaseRewards",{okay:1e3,good:3e3,great:6e3,excellent:11e3,incredible:18e3,perfect:3e4}),mt(ref,"buttonColors",{okay:"text-gray-500",good:"text-green-500",great:"text-sky-500",excellent:"text-violet-500",incredible:"text-pink-500",perfect:"text-amber-500"}),mt(ref,"buttonDistances",{good:10,great:7,excellent:4,incredible:2,perfect:1}),mt(ref,"slurryGainFromKeys",[.001,.1,10,1e4,1e9]);function getDefaultExportFromCjs(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var padEnd=function(l,d,_){if(l==null||d==null)return l;var m=String(l),y=typeof d=="number"?d:parseInt(d,10);if(isNaN(y)||!isFinite(y))return m;var g=m.length;if(g>=y)return m;var v=_==null?"":String(_);v===""&&(v=" ");for(var b=y-g;v.length<b;)v+=v;var k=v.length>b?v.substr(0,b):v;return m+k};const t=getDefaultExportFromCjs(padEnd);var n=9e15,e=function(){for(var l=[],d=-323;d<=308;d++)l.push(+("1e"+d));return function(_){return l[_+323]}}(),r=function(l){return l instanceof a?l:new a(l)},i=function(l,d){return new a().fromMantissaExponent(l,d)},o=function(l,d){return new a().fromMantissaExponent_noNormalize(l,d)};function u(l,d,_,m){var y=d.mul(_.pow(m));return a.floor(l.div(y).mul(_.sub(1)).add(1).log10()/_.log10())}function s(l,d,_,m){return d.mul(_.pow(m)).mul(a.sub(1,_.pow(l))).div(a.sub(1,_))}var a=function(){function l(d){this.mantissa=NaN,this.exponent=NaN,d===void 0?(this.m=0,this.e=0):d instanceof l?this.fromDecimal(d):typeof d=="number"?this.fromNumber(d):this.fromString(d)}return Object.defineProperty(l.prototype,"m",{get:function(){return this.mantissa},set:function(d){this.mantissa=d},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"e",{get:function(){return this.exponent},set:function(d){this.exponent=d},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"s",{get:function(){return this.sign()},set:function(d){if(d===0)return this.e=0,void(this.m=0);this.sgn()!==d&&(this.m=-this.m)},enumerable:!1,configurable:!0}),l.fromMantissaExponent=function(d,_){return new l().fromMantissaExponent(d,_)},l.fromMantissaExponent_noNormalize=function(d,_){return new l().fromMantissaExponent_noNormalize(d,_)},l.fromDecimal=function(d){return new l().fromDecimal(d)},l.fromNumber=function(d){return new l().fromNumber(d)},l.fromString=function(d){return new l().fromString(d)},l.fromValue=function(d){return new l().fromValue(d)},l.fromValue_noAlloc=function(d){return d instanceof l?d:new l(d)},l.abs=function(d){return r(d).abs()},l.neg=function(d){return r(d).neg()},l.negate=function(d){return r(d).neg()},l.negated=function(d){return r(d).neg()},l.sign=function(d){return r(d).sign()},l.sgn=function(d){return r(d).sign()},l.round=function(d){return r(d).round()},l.floor=function(d){return r(d).floor()},l.ceil=function(d){return r(d).ceil()},l.trunc=function(d){return r(d).trunc()},l.add=function(d,_){return r(d).add(_)},l.plus=function(d,_){return r(d).add(_)},l.sub=function(d,_){return r(d).sub(_)},l.subtract=function(d,_){return r(d).sub(_)},l.minus=function(d,_){return r(d).sub(_)},l.mul=function(d,_){return r(d).mul(_)},l.multiply=function(d,_){return r(d).mul(_)},l.times=function(d,_){return r(d).mul(_)},l.div=function(d,_){return r(d).div(_)},l.divide=function(d,_){return r(d).div(_)},l.recip=function(d){return r(d).recip()},l.reciprocal=function(d){return r(d).recip()},l.reciprocate=function(d){return r(d).reciprocate()},l.cmp=function(d,_){return r(d).cmp(_)},l.compare=function(d,_){return r(d).cmp(_)},l.eq=function(d,_){return r(d).eq(_)},l.equals=function(d,_){return r(d).eq(_)},l.neq=function(d,_){return r(d).neq(_)},l.notEquals=function(d,_){return r(d).notEquals(_)},l.lt=function(d,_){return r(d).lt(_)},l.lte=function(d,_){return r(d).lte(_)},l.gt=function(d,_){return r(d).gt(_)},l.gte=function(d,_){return r(d).gte(_)},l.max=function(d,_){return r(d).max(_)},l.min=function(d,_){return r(d).min(_)},l.clamp=function(d,_,m){return r(d).clamp(_,m)},l.clampMin=function(d,_){return r(d).clampMin(_)},l.clampMax=function(d,_){return r(d).clampMax(_)},l.cmp_tolerance=function(d,_,m){return r(d).cmp_tolerance(_,m)},l.compare_tolerance=function(d,_,m){return r(d).cmp_tolerance(_,m)},l.eq_tolerance=function(d,_,m){return r(d).eq_tolerance(_,m)},l.equals_tolerance=function(d,_,m){return r(d).eq_tolerance(_,m)},l.neq_tolerance=function(d,_,m){return r(d).neq_tolerance(_,m)},l.notEquals_tolerance=function(d,_,m){return r(d).notEquals_tolerance(_,m)},l.lt_tolerance=function(d,_,m){return r(d).lt_tolerance(_,m)},l.lte_tolerance=function(d,_,m){return r(d).lte_tolerance(_,m)},l.gt_tolerance=function(d,_,m){return r(d).gt_tolerance(_,m)},l.gte_tolerance=function(d,_,m){return r(d).gte_tolerance(_,m)},l.log10=function(d){return r(d).log10()},l.absLog10=function(d){return r(d).absLog10()},l.pLog10=function(d){return r(d).pLog10()},l.log=function(d,_){return r(d).log(_)},l.log2=function(d){return r(d).log2()},l.ln=function(d){return r(d).ln()},l.logarithm=function(d,_){return r(d).logarithm(_)},l.pow10=function(d){return Number.isInteger(d)?o(1,d):i(Math.pow(10,d%1),Math.trunc(d))},l.pow=function(d,_){return typeof d=="number"&&d===10&&typeof _=="number"&&Number.isInteger(_)?o(1,_):r(d).pow(_)},l.exp=function(d){return r(d).exp()},l.sqr=function(d){return r(d).sqr()},l.sqrt=function(d){return r(d).sqrt()},l.cube=function(d){return r(d).cube()},l.cbrt=function(d){return r(d).cbrt()},l.dp=function(d){return r(d).dp()},l.decimalPlaces=function(d){return r(d).dp()},l.affordGeometricSeries=function(d,_,m,y){return u(r(d),r(_),r(m),y)},l.sumGeometricSeries=function(d,_,m,y){return s(d,r(_),r(m),y)},l.affordArithmeticSeries=function(d,_,m,y){return function(g,v,b,k){var x=v.add(k.mul(b)).sub(b.div(2)),w=x.pow(2);return x.neg().add(w.add(b.mul(g).mul(2)).sqrt()).div(b).floor()}(r(d),r(_),r(m),r(y))},l.sumArithmeticSeries=function(d,_,m,y){return function(g,v,b,k){var x=v.add(k.mul(b));return g.div(2).mul(x.mul(2).plus(g.sub(1).mul(b)))}(r(d),r(_),r(m),r(y))},l.efficiencyOfPurchase=function(d,_,m){return function(y,g,v){return y.div(g).add(y.div(v))}(r(d),r(_),r(m))},l.randomDecimalForTesting=function(d){if(20*Math.random()<1)return o(0,0);var _=10*Math.random();10*Math.random()<1&&(_=Math.round(_)),_*=Math.sign(2*Math.random()-1);var m=Math.floor(Math.random()*d*2)-d;return i(_,m)},l.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var d=Math.floor(Math.log10(Math.abs(this.m)));return this.m=d===-324?10*this.m/1e-323:this.m/e(d),this.e+=d,this},l.prototype.fromMantissaExponent=function(d,_){return isFinite(d)&&isFinite(_)?(this.m=d,this.e=_,this.normalize(),this):(d=Number.NaN,_=Number.NaN,this)},l.prototype.fromMantissaExponent_noNormalize=function(d,_){return this.m=d,this.e=_,this},l.prototype.fromDecimal=function(d){return this.m=d.m,this.e=d.e,this},l.prototype.fromNumber=function(d){return isNaN(d)?(this.m=Number.NaN,this.e=Number.NaN):d===Number.POSITIVE_INFINITY?(this.m=1,this.e=n):d===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=n):d===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(d))),this.m=this.e===-324?10*d/1e-323:d/e(this.e),this.normalize()),this},l.prototype.fromString=function(d){if(d.indexOf("e")!==-1){var _=d.split("e");this.m=parseFloat(_[0]),this.e=parseFloat(_[1]),this.normalize()}else if(d==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(d)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+d);return this},l.prototype.fromValue=function(d){return d instanceof l?this.fromDecimal(d):typeof d=="number"?this.fromNumber(d):typeof d=="string"?this.fromString(d):(this.m=0,this.e=0,this)},l.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var d=this.m*e(this.e);if(!isFinite(d)||this.e<0)return d;var _=Math.round(d);return Math.abs(_-d)<1e-10?_:d},l.prototype.mantissaWithDecimalPlaces=function(d){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var _=d+1,m=Math.ceil(Math.log10(Math.abs(this.m))),y=Math.round(this.m*Math.pow(10,_-m))*Math.pow(10,m-_);return parseFloat(y.toFixed(Math.max(_-m,0)))},l.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=n?this.m>0?"Infinity":"-Infinity":this.e<=-n||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},l.prototype.toExponential=function(d){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=n)return this.m>0?"Infinity":"-Infinity";if(this.e<=-n||this.m===0)return"0"+(d>0?t(".",d+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(d);isFinite(d)||(d=17);var _=d+1,m=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,_-m))*Math.pow(10,m-_)).toFixed(Math.max(_-m,0))+"e"+(this.e>=0?"+":"")+this.e},l.prototype.toFixed=function(d){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=n?this.m>0?"Infinity":"-Infinity":this.e<=-n||this.m===0?"0"+(d>0?t(".",d+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(d>0?t(".",d+1,"0"):""):this.toNumber().toFixed(d)},l.prototype.toPrecision=function(d){return this.e<=-7?this.toExponential(d-1):d>this.e?this.toFixed(d-this.e-1):this.toExponential(d-1)},l.prototype.valueOf=function(){return this.toString()},l.prototype.toJSON=function(){return this.toString()},l.prototype.toStringWithDecimalPlaces=function(d){return this.toExponential(d)},l.prototype.abs=function(){return o(Math.abs(this.m),this.e)},l.prototype.neg=function(){return o(-this.m,this.e)},l.prototype.negate=function(){return this.neg()},l.prototype.negated=function(){return this.neg()},l.prototype.sign=function(){return Math.sign(this.m)},l.prototype.sgn=function(){return this.sign()},l.prototype.round=function(){return this.e<-1?new l(0):this.e<17?new l(Math.round(this.toNumber())):this},l.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new l(0):new l(-1):this.e<17?new l(Math.floor(this.toNumber())):this},l.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new l(1):new l(0):this.e<17?new l(Math.ceil(this.toNumber())):this},l.prototype.trunc=function(){return this.e<0?new l(0):this.e<17?new l(Math.trunc(this.toNumber())):this},l.prototype.add=function(d){var _,m,y=r(d);if(this.m===0)return y;if(y.m===0)return this;if(this.e>=y.e?(_=this,m=y):(_=y,m=this),_.e-m.e>17)return _;var g=Math.round(1e14*_.m+1e14*m.m*e(m.e-_.e));return i(g,_.e-14)},l.prototype.plus=function(d){return this.add(d)},l.prototype.sub=function(d){return this.add(r(d).neg())},l.prototype.subtract=function(d){return this.sub(d)},l.prototype.minus=function(d){return this.sub(d)},l.prototype.mul=function(d){if(typeof d=="number")return d<1e307&&d>-1e307?i(this.m*d,this.e):i(1e-307*this.m*d,this.e+307);var _=typeof d=="string"?new l(d):d;return i(this.m*_.m,this.e+_.e)},l.prototype.multiply=function(d){return this.mul(d)},l.prototype.times=function(d){return this.mul(d)},l.prototype.div=function(d){return this.mul(r(d).recip())},l.prototype.divide=function(d){return this.div(d)},l.prototype.divideBy=function(d){return this.div(d)},l.prototype.dividedBy=function(d){return this.div(d)},l.prototype.recip=function(){return i(1/this.m,-this.e)},l.prototype.reciprocal=function(){return this.recip()},l.prototype.reciprocate=function(){return this.recip()},l.prototype.cmp=function(d){var _=r(d);if(this.m===0){if(_.m===0)return 0;if(_.m<0)return 1;if(_.m>0)return-1}if(_.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return _.m<0||this.e>_.e?1:this.e<_.e?-1:this.m>_.m?1:this.m<_.m?-1:0;if(this.m<0)return _.m>0||this.e>_.e?-1:this.e<_.e||this.m>_.m?1:this.m<_.m?-1:0;throw Error("Unreachable code")},l.prototype.compare=function(d){return this.cmp(d)},l.prototype.eq=function(d){var _=r(d);return this.e===_.e&&this.m===_.m},l.prototype.equals=function(d){return this.eq(d)},l.prototype.neq=function(d){return!this.eq(d)},l.prototype.notEquals=function(d){return this.neq(d)},l.prototype.lt=function(d){var _=r(d);return this.m===0?_.m>0:_.m===0?this.m<=0:this.e===_.e?this.m<_.m:this.m>0?_.m>0&&this.e<_.e:_.m>0||this.e>_.e},l.prototype.lte=function(d){return!this.gt(d)},l.prototype.gt=function(d){var _=r(d);return this.m===0?_.m<0:_.m===0?this.m>0:this.e===_.e?this.m>_.m:this.m>0?_.m<0||this.e>_.e:_.m<0&&this.e<_.e},l.prototype.gte=function(d){return!this.lt(d)},l.prototype.max=function(d){var _=r(d);return this.lt(_)?_:this},l.prototype.min=function(d){var _=r(d);return this.gt(_)?_:this},l.prototype.clamp=function(d,_){return this.max(d).min(_)},l.prototype.clampMin=function(d){return this.max(d)},l.prototype.clampMax=function(d){return this.min(d)},l.prototype.cmp_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)?0:this.cmp(m)},l.prototype.compare_tolerance=function(d,_){return this.cmp_tolerance(d,_)},l.prototype.eq_tolerance=function(d,_){var m=r(d);return l.lte(this.sub(m).abs(),l.max(this.abs(),m.abs()).mul(_))},l.prototype.equals_tolerance=function(d,_){return this.eq_tolerance(d,_)},l.prototype.neq_tolerance=function(d,_){return!this.eq_tolerance(d,_)},l.prototype.notEquals_tolerance=function(d,_){return this.neq_tolerance(d,_)},l.prototype.lt_tolerance=function(d,_){var m=r(d);return!this.eq_tolerance(m,_)&&this.lt(m)},l.prototype.lte_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)||this.lt(m)},l.prototype.gt_tolerance=function(d,_){var m=r(d);return!this.eq_tolerance(m,_)&&this.gt(m)},l.prototype.gte_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)||this.gt(m)},l.prototype.log10=function(){return this.e+Math.log10(this.m)},l.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},l.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},l.prototype.log=function(d){return Math.LN10/Math.log(d)*this.log10()},l.prototype.log2=function(){return 3.321928094887362*this.log10()},l.prototype.ln=function(){return 2.302585092994045*this.log10()},l.prototype.logarithm=function(d){return this.log(d)},l.prototype.pow=function(d){var _,m=d instanceof l?d.toNumber():d,y=this.e*m;if(Number.isSafeInteger(y)&&(_=Math.pow(this.m,m),isFinite(_)&&_!==0))return i(_,y);var g=Math.trunc(y),v=y-g;if(_=Math.pow(10,m*Math.log10(this.m)+v),isFinite(_)&&_!==0)return i(_,g);var b=l.pow10(m*this.absLog10());return this.sign()===-1?Math.abs(m%2)===1?b.neg():Math.abs(m%2)===0?b:new l(Number.NaN):b},l.prototype.pow_base=function(d){return r(d).pow(this)},l.prototype.factorial=function(){var d=this.toNumber()+1;return l.pow(d/Math.E*Math.sqrt(d*Math.sinh(1/d)+1/(810*Math.pow(d,6))),d).mul(Math.sqrt(2*Math.PI/d))},l.prototype.exp=function(){var d=this.toNumber();return-706<d&&d<709?l.fromNumber(Math.exp(d)):l.pow(Math.E,d)},l.prototype.sqr=function(){return i(Math.pow(this.m,2),2*this.e)},l.prototype.sqrt=function(){return this.m<0?new l(Number.NaN):this.e%2!=0?i(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):i(Math.sqrt(this.m),Math.floor(this.e/2))},l.prototype.cube=function(){return i(Math.pow(this.m,3),3*this.e)},l.prototype.cbrt=function(){var d=1,_=this.m;_<0&&(d=-1,_=-_);var m=d*Math.pow(_,1/3),y=this.e%3;return i(y===1||y===-1?2.154434690031883*m:y!==0?4.641588833612778*m:m,Math.floor(this.e/3))},l.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},l.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},l.prototype.tanh=function(){return this.sinh().div(this.cosh())},l.prototype.asinh=function(){return l.ln(this.add(this.sqr().add(1).sqrt()))},l.prototype.acosh=function(){return l.ln(this.add(this.sqr().sub(1).sqrt()))},l.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:l.ln(this.add(1).div(new l(1).sub(this)))/2},l.prototype.ascensionPenalty=function(d){return d===0?this:this.pow(Math.pow(10,-d))},l.prototype.egg=function(){return this.add(9)},l.prototype.lessThanOrEqualTo=function(d){return this.cmp(d)<1},l.prototype.lessThan=function(d){return this.cmp(d)<0},l.prototype.greaterThanOrEqualTo=function(d){return this.cmp(d)>-1},l.prototype.greaterThan=function(d){return this.cmp(d)>0},l.prototype.decimalPlaces=function(){return this.dp()},l.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var d=this.mantissa,_=-this.exponent,m=1;Math.abs(Math.round(d*m)/m-d)>1e-10;)m*=10,_++;return _>0?_:0},Object.defineProperty(l,"MAX_VALUE",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(l,"MIN_VALUE",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(l,"NUMBER_MAX_VALUE",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(l,"NUMBER_MIN_VALUE",{get:function(){return f},enumerable:!1,configurable:!0}),l}(),h=o(1,n),c=o(1,-n),p=r(Number.MAX_VALUE),f=r(Number.MIN_VALUE);function array$7(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}function object$6(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g,v){m(b=>(b[g]=v,b))},add(g,v){m(b=>(b[g]+=v,b))},sub(g,v,b=!1){m(k=>(b?k[g]-=v:k[g]=Math.max(k[g],0),k))},multiply(g,v){m(b=>(b[g]*=v,b))},divide(g,v){m(b=>(b[g]/=v,b))}}}function ascFormulaGetter(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y,g){m(v=>(v[y]=g,v))},refresh(y){},getVal(y){return l[y](get_store_value(ascensionLevels)[y][0])},getValAt(y,g){return l[y](g)}}}const elementNames=array$7(["Path of Fire","Path of Earth","Path of Water","Path of Magic","Path of the Stars","Antimatter"]),elementDescriptions=array$7(["Engulf your mines with the fury of flames, increasing your speed.","Fortify your mines with the earth, giving yourself more access to its wealth.","Empower your mines with the relentlessness of water, improving your challenge power.","Enchant your mines with the magic of the arcane, increasing the frequency of enchants.","Harness the power of the stars themselves, unlocking incredible beacon powers.","Your prowess creates unstable, but lucrative, ripples of antimatter through the universe."]),elementBonusText=array$7([{prefix:"+",suffix:"",text:"speed softcap",isPercent:!0},{prefix:"+",suffix:"",text:"crystal production",isPercent:!0},{prefix:"+",suffix:"",text:"warp gain",isPercent:!0},{prefix:"+",suffix:"",text:"enchant proc speed",isPercent:!0},{prefix:"",suffix:"",text:"starting layer",isPercent:!1},{prefix:"+",suffix:"",isPercent:!0,text:"antimatter bonuses"}]),ascensionConstants=object$6({levelFormula:l=>2+Math.pow(l,2)*.14,levelFormulaNums:{multi:{fire:.14,earth:.14,water:.14,magic:.14,celestial:.14},const:{fire:2,earth:2,water:2,magic:2,celestial:2}},antimatterLevelFormula:l=>35+Math.pow(l,2)*3,antimatterLevelFormulaNums:{multi:3,const:35}}),ascensionElements=array$7(["fire","earth","water","magic","celestial","antimatter"]),ascFormula=ascFormulaGetter({fire:l=>1+.3*Math.pow(l-1,.6),earth:l=>1+.3*Math.pow(l-1,.8),water:l=>1+.13*Math.pow(l-1,.7),magic:l=>1+.04*Math.pow(l-1,.8),celestial:l=>l==1?0:l<20?l*20:400+Math.pow(l,.9)*15,antimatter:l=>1+.25*Math.pow(l-1,.75)}),antimatterBonusAscensionReqs=array$7([1,2,3,5,7,10,16,25,35,60,100]),antimatterBonusText=object$6(["Mining Speed","Key Droprate","Passive Radioactivity Gain","Slurry Gain","Dust Droprate"].concat(Array(20).fill("[to be implemented]")));function single$4(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(v=>g?v-y:Math.max(v,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function array$6(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(v=>g?v-y:Math.max(v,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}const beaconBonuses=array$6(Array(30).fill(1)),beaconNameText=array$6(["Beacon Power Multiplier","Mine Speed Multiplier","Droprate Multiplier I","Gem Bonus","Fame Bonus","Key Finder Yield","Crafting Yield","Key Droprate","Droprate Multiplier II","Antimatter Gain on Ascension"].concat(Array(26).fill(""))),beaconMiningLevelReqs=array$6([0,0,0,12,14,16,24,27,36,40]),beaconFormulas=array$6([function(l){return 1+Math.pow(l,.65)*.01},function(l){return 1+(l<1e4?l*2e-4:2+Math.pow((l-1e4)*3e-4,.55))},function(l){return 1+Math.pow(l,.8)*.0035},function(l){return 1+Math.pow(l,.9)*.02},function(l){return 1+Math.pow(l,.5)*.02},function(l){return 1+Math.pow(l,.5)*.05},function(l){return 1+Math.pow(l,1.2)*25e-6},function(l){return 1+Math.pow(l,.6)*.003},function(l){return 1+Math.pow(l,.5)*.001},function(l){return 1+Math.pow(l,.65)*.004}].concat(Array(25).fill(function(l){return 1}))),beaconNextReqs=array$6(Array(3).fill(250).concat(Array(3).fill(5e7)).concat(Array(2).fill(1e11).concat(Array(2).fill(1e17)))),baseBeaconNextReqs=array$6(Array(3).fill(250).concat(Array(3).fill(5e7)).concat(Array(2).fill(1e11).concat(Array(2).fill(1e17)))),beaconNums=array$6(Array(3).fill([250,1.0005]).concat(Array(3).fill([5e7,1.0005]).concat(Array(2).fill([1e11,1.0005]).concat(Array(2).fill([1e17,1.0005]))))),beaconMaxLevels=array$6(Array(10).fill(1e6)),beaconSpendAmt=single$4(1),beaconPowerFlavorText=single$4(1),beaconUpgrades=array$6([{index:0,name:"Supercharged",description:"Increases all beacon path progress.",cost:{beaconPower:5e3},ratio:1.33,formula:l=>l>100?26+Math.pow(l-100,.6)*.2:1+.25*l,mineLevelReq:0,unlockAt:()=>!0,isPercent:!0,prefix:"+",maxLevel:300,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{index:1,name:"Shining Light",description:"Increases the droprate for beacons (mining only).",cost:{beaconPower:1e4},ratio:2,formula:l=>1+.1*l,mineLevelReq:6,unlockAt:()=>!0,isPercent:!1,prefix:"x",suffix:"  droprate",maxLevel:100,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{index:2,name:"Ramping Power",description:"Unspent beacon power boosts beacon path progress. Upgrades multiply this amount.",cost:{beaconPower:25e5},ratio:4,formula:l=>l===0?1:1+Math.log((l+1)*get_store_value(wallet).beaconPower/1e3+1)/Math.log(5),mineLevelReq:12,unlockAt:()=>!0,isPercent:!0,suffix:" bonus",maxLevel:10,notes:""},{index:3,name:"Angelic Intervention",description:"Glory, oh glory. Beacons gain additional power based on the path's level.",cost:{antimatter:8},ratio:2,formula:l=>1+l*.001,mineLevelReq:12,unlockAt:()=>ascFormula.getVal("celestial")>=2,isPercent:!0,suffix:" per level",noResetAscension:!0,maxLevel:50,notes:"",isCelestial:!0},{index:4,name:"Divine Blessing",description:"Dramatically increases the effect of beacon levels on beacon power.",cost:{antimatter:96},ratio:1.65,formula:l=>1+l*.33,mineLevelReq:12,unlockAt:()=>ascFormula.getVal("celestial")>=2,isPercent:!0,suffix:" increased level effectiveness",noResetAscension:!0,maxLevel:50,notes:"",isCelestial:!0},{index:5,name:"[???]",description:"[coming soon]",cost:{antimatter:8294},ratio:1.65,formula:l=>l*.33,mineLevelReq:12,unlockAt:()=>ascFormula.getVal("celestial")>=3,isPercent:!0,suffix:" ???",noResetAscension:!0,maxLevel:50,notes:"",isCelestial:!0}]);function object$5(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g,v){m(b=>(b[g]=v,b))},add(g,v){m(b=>(b[g]+=v,b))},sub(g,v,b=!1){m(k=>(b?k[g]-=v:k[g]=Math.max(k[g],0),k))},multiply(g,v){m(b=>(b[g]*=v,b))},divide(g,v){m(b=>(b[g]/=v,b))}}}const allMultipliers=object$5({startLayer:{description:"Starting layer increased to",prefix:"",unlockAt:1,formula:l=>1+Math.min(l/4,100)+Math.min(Math.sqrt(l),300)+Math.pow(l,.25),colorStyle:"layer"},gems:{description:"Multiplying gem gain by",prefix:"x",unlockAt:1,formula:l=>1+.35*Math.pow(l,.96),colorStyle:"gems"},mineSpeed:{description:"Multiplying mining speed by",prefix:"x",unlockAt:1,formula:l=>1+Math.pow(Math.log(l/1e3+1),.75),colorStyle:"gold"},mineXP:{description:"Multiplying mining experience by",prefix:"x",unlockAt:100,formula:l=>1+Math.log10(l/60+1),colorStyle:"artifacts"},artifacts:{description:"Multiplying artifact drop chance by",prefix:"x",unlockAt:1e3,formula:l=>1+Math.pow(Math.log10(l/1e4+1),.33),colorStyle:"artifacts"},radium:{description:"Multiplying passive radioactivity gain by ",prefix:"x",unlockAt:1e4,formula:l=>1+Math.log(Math.pow(l,.8)/1100+1),colorStyle:"radium"},mastery:{description:"Multiplying mastery gain by ",prefix:"x",unlockAt:1e8,formula:l=>1+Math.log10(Math.pow(l,.6)/3795+1),colorStyle:"fame"}});function array$5(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(v=>g?v-y:Math.max(v,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function object$4(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>(g=y,g))},setItem(y,g){m(v=>(v[y.toString().toLowerCase()]=g,v))},add(y,g){m(v=>(v[y.toString().toLowerCase()]+=g,v))},sub(y,g,v=!1){m(b=>(v?b[y]-=g:b[y.toString().toLowerCase()]=Math.max(b[y],0),b))},multiply(y,g){m(v=>(v[y.toString().toLowerCase()]*=g,v))},divide(y,g){m(v=>(v[y.toString().toLowerCase()]/=g,v))}}}function dropTable$1(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y,g){m(v=>(v[y]=g,v))},add(y,g){m(v=>(v[y]+=g,v))},sub(y,g,v=!1){m(b=>(v?b[y]-=g:b[y]=Math.max(b[y],0),b))},multiply(y,g){m(v=>(v[y]*=g,v))},divide(y,g){m(v=>(v[y]/=g,v))},updateTable(){m(y=>{for(let[g,v]of Object.entries(y)){if(g=="tier")continue;if(v==null){delete y[g];continue}let b=v[3]*get_store_value(keyUpgrades)[0].formula(get_store_value(keyUpgradeLevels)[0])*(g==="artifacts"?get_store_value(miningUpgrades)[21].formula(get_store_value(miningUpgradeLevels)[21]):1)*get_store_value(miningUpgrades)[36].formula(get_store_value(miningUpgradeLevels)[36])*get_store_value(beaconBonuses)[7]*formula.getAntimatterBonusAmount(1);y[g]=[Math.min(1,b>v[4]?v[4]+Math.pow(b-v[4],3):b),v[1],v[2],v[3],v[4]||1]}return y})}}}const key1DropTable=dropTable$1({tier:1,gems:[.6,10,200,.6,.9],orbs:[.4,3,10,.4,.9],gold:[.2,10,20,.2,.9],beacons:[.025,1,1,.025,.1],key2:[1/1e3,1,1,1/400,.04]}),key2DropTable=dropTable$1({tier:2,gems:[.25,1e6,1e7,.25,.6],gold:[.15,1e4,1e5,.15,.6],orbs:[.15,3200,18e3,.15,.6],sigils:[.11,1,1,.11,.6],beacons:[.06,250,1e3,.06,.6],artifacts:[1/2e4,1,1,1/2e4,1/1e3]}),key3DropTable=dropTable$1({tier:3,gems:[.25,1e14,1e15,.25,.4],gold:[.15,1e8,5e8,.075,.4],crystals:[.11,1e3,1e4,.11,.25],orbs:[.06,22e5,11e6,.06,.25],beacons:[.04,1e3,3500,.04,.25],sigils:[.035,45,160,.035,.25],artifacts:[1/1250,.65,1,1/1250,.025]}),key4DropTable=dropTable$1({tier:4,gems:[.03,1e26,1e29,.03],gold:[.03,1e14,1e16,.03],crystals:[.02,1e3,1e4,.02],orbs:[.016,5e7,1e9,.016],sigils:[.016,2500,1e4,.016],artifacts:[5e-5,15,50,5e-5],key5:[1/1e11,1,1,1/1e11]}),key5DropTable=dropTable$1({}),keyRewardText=object$4(""),keyGainFlavorText=object$4({});array$5(Array(20).fill(0));const keyUpgrades=array$5([{index:0,name:"Mystic Potion",description:"Concoct a potion that improves key rates for ALL keys.",cost:{slurry:100,sigils:10},ratio:1.3,formula:l=>1+.2*Math.pow(l,.875),unlockAt:()=>get_store_value(permaWallet).slurry>0,isPercent:!1,suffix:"x droprates",maxLevel:600,notes:""},{index:1,name:"Refinery",description:"Increases slurry gain.",cost:{sigils:500},ratio:1.3,formula:l=>1+.2*l,unlockAt:()=>get_store_value(permaWallet).slurry>0,isPercent:!1,suffix:"x slurry",maxLevel:400,notes:""},{index:2,name:"Energizer",description:"Increases crafting yield.",cost:{slurry:1e6},ratio:2,formula:l=>1+Math.pow(l,1.2)*.25,unlockAt:()=>get_store_value(permaWallet).key2>1e4||get_store_value(permaWallet).slurry>2e4,isPercent:!1,prefix:"x",suffix:" yield",maxLevel:40,notes:""},{index:3,name:"Rift Control",description:"[unimplemented] ???",cost:{slurry:1e300},ratio:1.3,formula:l=>.8+.2*l,unlockAt:()=>get_store_value(wallet).antimatter>0||get_store_value(wallet).totalAntimatter>0,isPercent:!0,suffix:" convert sigils",maxLevel:100,notes:""},{index:4,name:"Capacitor",description:"??? [unimplemented]",cost:{slurry:7e29},ratio:10,formula:l=>1+l*.25,unlockAt:()=>get_store_value(wallet).antimatter>=1e290&&get_store_value(wallet).slurry>=1,isPercent:!1,suffix:" craft yields",maxLevel:40,notes:""},{index:5,name:"Fabrication Clocking",description:"Greatly increases key finder yields.",cost:{slurry:1e11},ratio:10,formula:l=>1+l**2,unlockAt:()=>get_store_value(wallet).antimatter>=1e290,isPercent:!0,suffix:" craft bonus",maxLevel:40,notes:""}]),keyCrafts=array$5([{item:"",name:"[Practice Craft]",style:"text-gray-400",stylebg:"bg-gray-400",cost:{slurry:1e3},craftTime:300,min:0,max:0,ratio:1.00002,unlockAt:()=>get_store_value(permaWallet).slurry>0},{item:"relics",name:"Relic",style:"text-transparent bg-clip-text bg-gradient-to-tr from-orange-300 to-amber-300",stylebg:"bg-gradient-to-br from-fuchsia-300 to-violet-700",cost:{fragments:1e5,artifacts:15e3,antimatter:300},craftTime:750,min:1,max:1,ratio:1.33,unlockAt:()=>get_store_value(wallet).fragments>0},{item:"key2",name:"[**] Key",style:"text-blue-400",stylebg:"bg-blue-400",cost:{fame:1e4,slurry:10},craftTime:35,min:1,max:3,ratio:1.04,unlockAt:()=>get_store_value(keysOpened)[0]>1e3||get_store_value(permaWallet).gold>1e6},{item:"key3",name:"[***] Key",style:"text-pink-400",stylebg:"bg-pink-400",cost:{gems:1e15,slurry:1e4,sigils:5e3,warp:2500},craftTime:180,min:3,max:5,ratio:1.04,unlockAt:()=>get_store_value(permaWallet).gems>1e13},{item:"efire",name:"Fire Essence",style:"text-red-500",stylebg:"bg-red-500",cost:{fame:1e13},craftTime:100,min:1,max:5,ratio:1.25,unlockAt:()=>get_store_value(permaWallet).totalFame>1e13},{item:"eearth",name:"Earth Essence",style:"text-emerald-200",stylebg:"bg-emerald-200",cost:{dust:7500},craftTime:100,min:1,max:5,ratio:1.25,unlockAt:()=>get_store_value(permaWallet).dust>750},{item:"ewater",name:"Water Essence",style:"text-sky-300",stylebg:"bg-sky-300",cost:{orbs:125e8},craftTime:100,min:1,max:5,ratio:1.25,unlockAt:()=>get_store_value(permaWallet).orbs>15e8},{item:"emagic",name:"Magic Essence",style:"text-amber-200",stylebg:"bg-amber-200",cost:{sigils:125e5},craftTime:100,min:1,max:5,ratio:1.25,unlockAt:()=>get_store_value(permaWallet).sigils>1e7},{item:"ecelestial",name:"Celestial Essence",style:"text-transparent bg-clip-text bg-gradient-to-br from-fuchsia-300 to-violet-700",stylebg:"bg-gradient-to-br from-fuchsia-300 to-violet-700",cost:{stars:2},craftTime:100,min:1,max:5,ratio:1.25,unlockAt:()=>get_store_value(wallet).stars>=1}]);function single$3(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}function array$4(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}const radiumGainText=single$3(0),thoriumDepositActive=single$3("off"),buttonUpgrades=array$4([{index:0,name:"Heat Sink",description:"Increases the frequency of thorium deposits.",cost:{crystals:100},ratio:1.75,formula:l=>.004+l*.001375,unlockAt:()=>!0,isPercent:!0,suffix:" chance per second",maxLevel:50,notes:""},{index:1,name:"Coolant",description:"Increases passive radioactivity gain.",cost:{crystals:1e3},ratio:1.33,formula:l=>1+Math.pow(l,.925)*.25,unlockAt:()=>!0,suffix:"x radioactivity gain",isPercent:!1,maxLevel:250,notes:""},{index:2,name:"Rich Deposits",description:"Increases thorium deposit amount.",cost:{crystals:1e4},ratio:1.33,formula:l=>1+l*.25,unlockAt:()=>!0,suffix:"x max thorium deposit radioactivity",isPercent:!1,maxLevel:250,notes:""},{index:3,name:"Alpha Decay",description:"Increases radium gain from full radioactivity.",cost:{crystals:1e6},ratio:1.33,formula:l=>1+l*.1,unlockAt:()=>!0,isPercent:!1,suffix:"x radium gain",maxLevel:250,notes:""},{index:4,name:"Nuclear Mining",description:"Excavate additional blocks in the current layer on each mining cycle.",cost:{radium:4},ratio:1.75,formula:l=>l*.25,unlockAt:()=>get_store_value(permaWallet).radium>0,isPercent:!1,prefix:"+",suffix:" layer progress / cycle",isRadiumUpgrade:!0,maxLevel:100,notes:""},{index:5,name:"Plutonium Beaming",description:"When you gain radium from radioactivity, you have a small chance to gain a star.",cost:{radium:1250},ratio:2.5,formula:l=>l*.0075,unlockAt:()=>get_store_value(wallet).totalFame>1e13||get_store_value(wallet).ascensionCount>0,isPercent:!0,isRadiumUpgrade:!0,suffix:" chance",maxLevel:20,notes:""},{index:6,name:"Gamma Radiation",description:"Clicks sometimes give warp.",cost:{crystals:1e8},ratio:2,formula:l=>l*.04,unlockAt:()=>get_store_value(wallet).warp>1e297,isPercent:!0,suffix:" chance",maxLevel:8,notes:""},{index:7,name:"Celestial Shattering",description:"Legends say the perfect click can shatter the fabric of space itself...",cost:{radium:125},ratio:40,formula:l=>111111,unlockAt:()=>get_store_value(wallet).crystals>1e297,isRadiumUpgrade:!0,isPercent:!1,maxLevel:1,notes:""}]);function array$3(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}function object$3(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g,v){m(b=>(b[g]=v,b))},add(g,v){m(b=>(b[g]+=v,b))},sub(g,v,b=!1){m(k=>(b?k[g]-=v:k[g]=Math.max(k[g],0),k))},multiply(g,v){m(b=>(b[g]*=v,b))},divide(g,v){m(b=>(b[g]/=v,b))}}}const enchantThreshold=object$3({t1:100,t2:6475,t3:1e9}),enchantUpgrades=array$3([{name:"Mine Size",description:"Increases the size of your mine, which increases the effect of many enchants below..",cost:{fame:10},tier:1,ratio:1.3,formula:l=>l+5,extFormula:l=>l+5,unlockAt:()=>!0,isPercent:!1,suffix:" tiles square",roundOverride:0,maxLevel:1e3,notes:""},{name:"Mine Quality",description:"Increases the quality of your mine, which increases the effect of many enchants below.",cost:{fame:10},tier:1,ratio:1.3,formula:l=>l+5,extFormula:l=>l+5,unlockAt:()=>!0,isPercent:!1,suffix:" quality rating",roundOverride:0,maxLevel:1e3,notes:""},{index:2,name:"Burst",description:"Has a chance to clear a mine level, instantly giving mining cycles based on mine size.",cost:{fame:30},tier:1,ratio:10,formula:l=>.15/20*l,extFormula:(l,d,_)=>l*d*3,extPrefix:"You will gain ",extSuffix:" mining cycles on proc.",unlockAt:()=>get_store_value(wallet).totalFame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:" chance",maxLevel:20,notes:""},{index:3,name:"Orb Rush",description:"Has a chance to give orbs based on mine quality.",cost:{fame:30},tier:1,ratio:10,formula:l=>.12/20*l,extFormula:(l,d,_)=>l*_**3.8+20*_**2,extPrefix:"You will gain ",extSuffix:" orbs on proc.",unlockAt:()=>get_store_value(wallet).totalFame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:20,notes:""},{index:4,name:"Lightning Blast",description:"Has a chance to significantly increase mining speed for 3 seconds, based on mine size.",cost:{fame:2500},tier:1,ratio:25,formula:l=>.02/20*l,extFormula:(l,d,_)=>2+Math.pow(d,.5),extPrefix:"Your mining speed will be increased by ",extSuffix:"x for 3 seconds on proc.",unlockAt:()=>get_store_value(wallet).totalFame>=1e3,isPercent:!0,suffix:"  chance",maxLevel:20,notes:""},{index:5,name:"Scavenger",description:"Has a chance to increase a random mining upgrade level by 1.",cost:{fame:2500},tier:1,ratio:25,formula:l=>Math.pow(l/20,2)*.05,extFormula:(l,d,_)=>1,unlockAt:()=>get_store_value(wallet).totalFame>=1e3,isPercent:!0,suffix:"  chance",maxLevel:20,notes:""},{index:6,name:"Nuclear Fission",description:"Gives radioactivity, based on mine size and quality.",cost:{fame:1e11},tier:1,ratio:100,formula:l=>l/30*.025,extFormula:(l,d,_)=>d*_*12,extPrefix:"You will gain ",extSuffix:" radioactivity on proc.",unlockAt:()=>get_store_value(wallet).totalFame>=1e6,isPercent:!0,suffix:"  chance",maxLevel:30,notes:""},{index:7,name:"Key Caller",description:"Gives keys of a random tier 1-3. The amount is based on size and quality.",cost:{fame:1e11},tier:1,ratio:100,formula:l=>l/30*.05+(l>0?.005:0),extFormula:(l,d,_)=>d**1.6*_**1.6*((l+3)/3),unlockAt:()=>get_store_value(wallet).totalFame>=1e6,isPercent:!0,extPrefix:"You will gain ",extSuffix:" [*] keys, reduced for higher tiers.",suffix:"  chance",maxLevel:30,notes:""},{index:8,name:"Rift Tearing",description:"Has a chance to open a rift in the mine, giving essence.",cost:{fame:1e18},tier:2,ratio:1e12,formula:l=>l/10*.16,extFormula:(l,d,_)=>Math.floor(1+Math.pow(d/100,.6)),extPrefix:"You will gain ",extSuffix:" of a random essence on proc.",unlockAt:()=>get_store_value(wallet).totalAntimatter>0||get_store_value(wallet).antimatter>0,isPercent:!0,suffix:"  chance",maxLevel:10,notes:""},{index:9,name:"Double Down",description:"Has a chance to immediately add enchant progress.",cost:{fame:1e18},tier:2,ratio:1e12,formula:l=>l/10*.5,extFormula:(l,d,_)=>Math.floor(1+d/20*(_/20)),extPrefix:"You will gain ",extSuffix:" enchant progress (for all tiers) on proc.",unlockAt:()=>get_store_value(wallet).totalAntimatter>0||get_store_value(wallet).antimatter>0,isPercent:!0,suffix:"  chance",maxLevel:10,notes:""}]),enchantTierUnlockAt=array$3([()=>!0,()=>get_store_value(wallet).antimatter>0||get_store_value(wallet).totalAntimatter>0]),automationUpgrades=array$3([{index:0,name:"Jumpstart",description:"Start with 5000 gems and 100 gold.",cost:{fame:100},unlockAt:()=>get_store_value(wallet).totalFame>=1,isPercent:!0,suffix:" chance"},{index:1,name:"Deep Pockets",description:"Lootmaster I is automatially unlocked and stays unlocked on relocate.",cost:{fame:2150},unlockAt:()=>get_store_value(wallet).totalFame>=1,isPercent:!0,suffix:" chance"},{index:1,name:"Deep Pockets II",description:"Lootmaster II is automatially unlocked and stays unlocked on relocate.",cost:{trophies:5},unlockAt:()=>get_store_value(wallet).trophies>=1&&get_store_value(miningUpgradeLevels)[9]>=1,isPercent:!1,suffix:"---"},{index:1,name:"Deep Pockets III",description:"Lootmaster III is automatially unlocked and stays unlocked on ascension.",cost:{void:5},unlockAt:()=>get_store_value(wallet).void>=1,isPercent:!0,suffix:" chance"},{index:2,name:"Beacon Tools",description:"Unlock the ability to split beacons evenly across all paths, and to recall all beacons at once.",cost:{fame:2500},unlockAt:()=>get_store_value(wallet).totalFame>=1,isPercent:!0,suffix:" chance"},{index:3,name:"Omnipotent",description:"Except for Lootmaster upgrades, mining upgrades are not reset on relocation.",cost:{fame:25e3},unlockAt:()=>get_store_value(wallet).totalFame>=1,isPercent:!0,suffix:" chance"},{index:4,name:"Masterful",description:"Unlocks Mastery.",cost:{fame:1e5},unlockAt:()=>get_store_value(wallet).totalFame>=1,isPercent:!0,suffix:" chance"},{index:5,name:"Another Button",description:'You can now hold enter to click the button really really fast (you will only get "okay" clicks).',cost:{trophies:1},unlockAt:()=>get_store_value(wallet).trophies>=1e297||formula.sumArray(get_store_value(challengesCompleted))>1e20,isPercent:!1},{index:6,name:"Beaconizer",description:"Start each relocation with 50,000 beacons. Gain 15 beacons per second.",cost:{trophies:4},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:7,name:"Beacon Tools II",description:'You can now "smart split" beacons among chosen paths.',cost:{trophies:4},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:8,name:"Unlimited Power!",description:"Beacon power (and its upgrades) are not reset on relocation.",cost:{trophies:2},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:9,name:"Spellcaster",description:"You can trigger enchants 10% faster.",cost:{trophies:5},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:11,name:"Spellcaster II",description:"You can trigger enchants an additional 10% faster.",cost:{dust:1e6,trophies:5},unlockAt:()=>get_store_value(automationItemsUnlocked).spellcaster!==void 0,isPercent:!0},{index:12,name:"[unimplemented]",description:"---",cost:{antimatter:45e5},unlockAt:()=>get_store_value(wallet).antimatter>=1e29||get_store_value(wallet).totalAntimatter>=1e29,isPercent:!0},{index:13,name:"Abundance",description:"Key Finder 1-3 gains a 4,096x / 16x / 2x multiplier to yield.",cost:{antimatter:270},unlockAt:()=>get_store_value(wallet).antimatter>=1||get_store_value(wallet).totalAntimatter>=1,isPercent:!0,noResetAscension:!0},{index:14,name:"Gateway",description:"T2 [**] keys can give T3 [***] keys.",cost:{antimatter:20},unlockAt:()=>get_store_value(wallet).antimatter>=1||get_store_value(wallet).totalAntimatter>=1,isPercent:!0,noResetAscension:!0},{index:15,name:"Auto-fission",description:"Gain 1 radium; start each ascension with 1 radium.",cost:{antimatter:160},unlockAt:()=>get_store_value(wallet).antimatter>=1||get_store_value(wallet).totalAntimatter>=1,isPercent:!0,noResetAscension:!0},{index:16,name:"Robotic",description:"All augments are kept on ascension.",cost:{antimatter:300},unlockAt:()=>get_store_value(wallet).antimatter>=1||get_store_value(wallet).totalAntimatter>=1,isPercent:!0,noResetAscension:!0}]);class formula{static rNorm(d=0,_=1){const m=1-Math.random(),y=Math.random();return Math.sqrt(-2*Math.log(m))*Math.cos(2*Math.PI*y)*_+d}static rNormTest(){console.log("rNorm Bias Test started");const d=Array(400).fill(0),_=Array(400).fill(0),m=Array(5).fill(0);for(let y=0;y<_.length;y++){for(let g=0;g<d.length;g++){for(let v=0;v<m.length;v++)d[v]=this.rNorm();_[g]=formula.sumArray(d)/1e3}m[y]=formula.sumArray(_)/400}return formula.sumArray(m)/5}static gSum(d,_,m){return d*(1-Math.pow(_,m))/(1-_)}static polySum2(d,_=1){return _*(d*(d+1)*(2*d+1)/6)}static polySum3(d,_=1){return _*(d**2*(d+1)**2/4)}static maxNumPoly2(d,_=1){return _===0&&(_=1),Math.sqrt(d/_)}static sumFinitePoly2(d,_,m=1){return m*(_**3-d**3)/3}static maxFinitePoly2(d,_,m,y,g=!1){let v=d,b=_;for(g&&console.log("left: "+v+" q: "+b);v>0;)y=="antimatter"?v-=m.const+m.multi*b**2:v-=m.const[y]+m.multi[y]*b**2,b++,g&&console.log("left: "+v+" q: "+b);return b-1}static maxFinitePoly3(d,_,m,y,g=!1){let v=d,b=_;for(;v>0;)b++,v-=m.const[y]+m.multi[y]*b**3;return b}static sumEssence(){let d=0;for(let _ of Object.keys(get_store_value(wallet)))_.startsWith("e")&&_!=="energy"&&(d+=get_store_value(wallet)[_]||0);return d}static calcAntimatterGain(){return this.sumEssence()*get_store_value(beaconBonuses)[9]}static calcEssenceXPGain(d){return d=="antimatter"?this.sumEssence():get_store_value(wallet)["e"+d]||0}static maxNumGeom(d,_,m){return Math.floor(Math.log(d/_*(m-1)+1)/Math.log(m))}static calculateMaxBuy(d,_,m){const y=1+_/100;return(d*(Math.pow(y,m/d)-1)/(y-1)).toFixed(2)}static sumArray(d){return d.reduce((_,m)=>_+m,0)}static productArray(d){return d.reduce((_,m)=>_*m,1)}static sumObject(d){return Object.values(d).reduce((_,m)=>_+m,0)}static calcFameGainKeys(d){const _=[1,1,1,1,1];_[0]=d[0]<1?1:d[0]<10?1.25+d[0]*.075:d[0]<1e3?2+(d[0]-10)*.004:6.8+Math.pow(d[0]-1e3,.4),2+2*1e4+Math.pow(1e4*((d[0]-1e4)/1e3),.4);for(let m=1;m<d.length;m++)d[m]<1||(d[m]<10?_[m]=1.25+d[m]*.075:d[m]<1e4?_[m]=2+d[m]*(m+1)**2/5e3:_[m]=2+2*(m+1)**2+Math.pow((m+1)*((d[m]-1e4)/1e3),.4));return _}static calcFameGemMulti(d){return Math.log10(d+1)**Math.min(1.25,1+Math.log10(d+1)*.0075)}static calcFameLayerMulti(){const d=get_store_value(layer).layer;return d>1e4?300+Math.pow(d-1e4,.75)*.035:d*.03}static calcFameGainBeacons(d){return d>1e6?51+Math.pow((d-1e6)/1e6,.75):d>150?1+(d-150)/2e4:d/150}static getButtonDistanceVals(){const d=get_store_value(buttonUpgrades)[0].formula(get_store_value(buttonUpgradeLevels)[0]);return{good:Math.floor(10*d*window.devicePixelRatio),great:Math.floor(7+d*window.devicePixelRatio),excellent:Math.floor(3+d*window.devicePixelRatio),incredible:Math.floor(2+d*window.devicePixelRatio),perfect:Math.floor(1+d*window.devicePixelRatio)}}static calcFameTimeMultiplier(d){if(get_store_value(buttonUpgradeLevels)[6]<1)return 1;const _=(Date.now()-d)/1e3;return 1+9*Math.pow(_/86400,2)}static calcMineSize(d){return Math.pow(d+5,2)}static calcMineQuality(d){return 10+d}static calcButtonRewardBonus(){const d=get_store_value(allMultipliers).radium.formula(get_store_value(wallet).radium||0);return 1*get_store_value(buttonUpgrades)[1].formula(get_store_value(buttonUpgradeLevels)[1])*get_store_value(miningUpgrades)[23].formula(get_store_value(miningUpgradeLevels)[23])*(isNaN(d)?1:d)}static calcHardenedGemBonus(d){return get_store_value(miningUpgradeLevels)[20]<1?1:1+.33*get_store_value(miningUpgradeLevels)[20]*(.04*(Math.log(d.good+9)/Math.log(9))+.06*(Math.log(d.great+7)/Math.log(7))+.08*(Math.log(d.excellent+5)/Math.log(5))+.12*(Math.log(d.incredible+3)/Math.log(3))+.16*(Math.log(d.perfect+2)/Math.log(2)))}static dispCalcHardenedGemBonus(d,_){return _<1?1:1+.33*_*(.04*(Math.log(d.good+9)/Math.log(9))+.06*(Math.log(d.great+7)/Math.log(7))+.08*(Math.log(d.excellent+5)/Math.log(5))+.12*(Math.log(d.incredible+3)/Math.log(3))+.16*(Math.log(d.perfect+2)/Math.log(2)))}static calcMasteryNextReq(){const d=get_store_value(wallet).totalTrophies||0,_=1.1+Math.pow(d,.34)*.01;return 1160*d**2*Math.pow(_,d)}static calcKeySlurryGain(d){const m=ref.slurryGainFromKeys.reduce((y,g,v)=>y+(get_store_value(slurryToggles)["key"+(v+1).toString()]?g*(d["key"+(v+1)]||0):0),0)*formula.getAntimatterBonusAmount(3);return isNaN(m)?(alert('note: this feature is bugged, please report this on Discord - reduced slurry gained (using "safe" formula)'),d.key1/8e5):m*get_store_value(keyUpgrades)[1].formula(get_store_value(keyUpgradeLevels)[1])}static calcCraftMasteryNextReq(d){return 35*(d+1)+(d+1)**3}static calcCraftMasterySpeedBonus(d){const _=1+d*.3+d**2*.004+d**3*3e-6;return console.log(_),isNaN(_)?1:_}static calcBeaconPowerMulti(d){return d>1e4?Math.log10(d)-3:1}static calcFragmentGain(d,_){return Math.pow(_/Math.pow(10,6-d),1.1)}static calcKeySigilGain(d){return d<1e3||get_store_value(keyUpgradeLevels)[3]==0?0:d/1e7}static calcKeyCraftAmountGained(d){const _=get_store_value(keyCrafts)[d].min,m=get_store_value(keyCrafts)[d].max;return Math.floor(_+Math.random()*(m-_)*this.getKeyCraftBonuses())}static calcMinMaxCraftAmount(d){const _=get_store_value(keyCrafts)[d].min,m=get_store_value(keyCrafts)[d].max;return[_*this.getKeyCraftBonuses(),m*this.getKeyCraftBonuses()]}static getKeyCraftBonuses(){return 1*get_store_value(beaconBonuses)[6]*get_store_value(keyUpgrades)[2].formula(get_store_value(keyUpgradeLevels)[2])}static calcWarpGainFromMastery(){const d=(get_store_value(wallet).totalTrophies||0)*ascFormula.getVal("water");return .25*d+67e-5*d**2}static getMineXPPerCycle(){const d=get_store_value(allMultipliers).mineXP.formula(get_store_value(wallet).artifacts||0),_=1*(isNaN(d)?1:d)*Math.max(1,Math.log((get_store_value(wallet).totalFame||0)/6+1));return isNaN(_)?1:_}static getLayersPerCycle(){const d=this.sumArray(get_store_value(miningUpgradeLevels)),_=this.sumArray(get_store_value(enchantUpgradeLevels))*3.5,m=this.sumArray(get_store_value(buttonUpgradeLevels))*1.75,y=this.sumArray(get_store_value(keyUpgradeLevels))*2.25;return 1+(d+_+m+y)/150+get_store_value(miningUpgrades)[23].formula(get_store_value(miningUpgradeLevels)[23])+get_store_value(buttonUpgrades)[4].formula(get_store_value(buttonUpgradeLevels)[4])}static getMineSize(){return get_store_value(enchantUpgrades)[0].formula(get_store_value(enchantUpgradeLevels)[0])}static getMineQuality(){return get_store_value(enchantUpgrades)[1].formula(get_store_value(enchantUpgradeLevels)[1])}static getEnchantFormulaValue(d){return get_store_value(enchantUpgrades)[d].extFormula(get_store_value(enchantUpgradeLevels)[d],this.getMineSize(),this.getMineQuality())}static getMiningUpgradeValue(d){return get_store_value(miningUpgrades)[d].formula(get_store_value(miningUpgradeLevels)[d])}static calcAscensionEssenceRequirement(d){const _=[30,200,1200,6e3,2e4,42500,77500,12e4,185e3,26e4];return d<10?_[d]:_[9]+1e5*(d-9)*Math.pow(1.1,d-10)}static calcRadioactivityGain(){const d=get_store_value(layer).layer;let _;return d<=100?_=1:d<=1e5?_=1+1.2*((d-100)*(.0125-d/3e7)):_=1100+Math.pow(d,.75)*.075,_=_*get_store_value(buttonUpgrades)[1].formula(get_store_value(buttonUpgradeLevels)[1])*get_store_value(allMultipliers).radium.formula(get_store_value(wallet).artifacts||0),_}static calcRadiumGainWhenComplete(){return Math.max(1,1*get_store_value(buttonUpgrades)[3].formula(get_store_value(buttonUpgradeLevels)[3]))}static calcThoriumDepositGain(){const _=9e4*get_store_value(buttonUpgrades)[2].formula(get_store_value(buttonUpgradeLevels)[2]);return Math.floor(25e3+Math.random()*(_-25e3))}static calcCrystalGainFromRadium(){const d=get_store_value(wallet).radium||0;if(d==0||isNaN(d))return 0;const _=d<1e3?d+(d/8)**2:256+((d-1e3)/32)**2+(d-1e3)*2.75,m=get_store_value(miningUpgrades)[29].formula(get_store_value(miningUpgradeLevels)[29])*ascFormula.getVal("earth");return _*m}static getAntimatterBonusAmount(d){return get_store_value(ascensionStats).ascensionCount>=get_store_value(antimatterBonusAscensionReqs)[d]?get_store_value(ascFormula).antimatter(get_store_value(ascensionLevels).antimatter[0]):1}static calcEnchantProgressGain(d){return d*ascFormula.getVal("magic")}static calcMiningCostRatio(d){return Math.max(1.025,1+(d-1)*this.calcMiningCostRatioMulti())}static calcMiningCostRatioMulti(){return 1*get_store_value(miningUpgrades)[32].formula(get_store_value(miningUpgradeLevels)[32])*get_store_value(miningUpgrades)[33].formula(get_store_value(miningUpgradeLevels)[33])*get_store_value(miningUpgrades)[34].formula(get_store_value(miningUpgradeLevels)[34])*get_store_value(miningUpgrades)[35].formula(get_store_value(miningUpgradeLevels)[35])}static calcKeyFinderAbundanceBonus(d){return get_store_value(automationItemsUnlocked).abundance?[4096,16,2,1,1][d-1]:1}static calcMasteryGainPerTick(){const d=get_store_value(masteryItemLevels);let _=1,m;for(m of Object.values(d))_*=this.calcMasteryGainMulti(m);return _*=get_store_value(allMultipliers).mastery.formula(get_store_value(wallet).artifacts||0),console.log(_),_}static calcMasteryGainMulti(d){return Math.pow(d+1,.68)}}function single$2(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(v=>g?v-y:Math.max(v,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function array$2(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(v=>g?v-y:Math.max(v,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function object$2(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>(g=y,g))},setItem(y,g){m(v=>(v[y.toString().toLowerCase()]=g,v))},add(y,g){m(v=>(v[y.toString().toLowerCase()]+=g,v))},sub(y,g,v=!1){m(b=>(v?b[y]-=g:b[y.toString().toLowerCase()]=Math.max(b[y],0),b))},multiply(y,g){m(v=>(v[y.toString().toLowerCase()]*=g,v))},divide(y,g){m(v=>(v[y.toString().toLowerCase()]/=g,v))}}}function dropTable(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y,g){m(v=>(v[y]=g,v))},add(y,g){m(v=>(v[y]+=g,v))},sub(y,g,v=!1){m(b=>(v?b[y]-=g:b[y]=Math.max(b[y],0),b))},multiply(y,g){m(v=>(v[y]*=g,v))},divide(y,g){m(v=>(v[y]/=g,v))},updateTable(){m(y=>{y={};for(let[g,v]of Object.entries(get_store_value(baseMiningDropTable))){let b=v[0]*Math.max(get_store_value(miningUpgrades)[2].formula(get_store_value(miningUpgradeLevels)[2]),1)*Math.max(1,get_store_value(miningUpgrades)[6].formula(get_store_value(miningUpgradeLevels)[6]))*Math.max(1,get_store_value(miningUpgrades)[11].formula(get_store_value(miningUpgradeLevels)[11]))*Math.max(1,get_store_value(miningUpgrades)[22].formula(get_store_value(miningUpgradeLevels)[22]))*Math.max(1,get_store_value(beaconBonuses)[2])*(g==="beacons"?get_store_value(beaconUpgrades)[1].formula(get_store_value(beaconUpgradeLevels)[1]):1)*(g==="artifacts"?get_store_value(allMultipliers).artifacts.formula(get_store_value(wallet).artifacts||0):1)*(g==="dust"?formula.getAntimatterBonusAmount(4):1);y[g]=[b>=v[3]?v[3]+Math.pow((b-v[3])/3.5,2.33):b,Math.max(1,v[1]*(g==="gold"||g==="orbs"?get_store_value(miningUpgrades)[7].formula(get_store_value(miningUpgradeLevels)[7])*get_store_value(miningUpgrades)[19].formula(get_store_value(miningUpgradeLevels)[19]):1))*Math.max(1,get_store_value(miningUpgrades)[20].formula(get_store_value(miningUpgradeLevels)[20])),Math.max(1,v[2]*(g==="gold"||g==="orbs"?get_store_value(miningUpgrades)[7].formula(get_store_value(miningUpgradeLevels)[7])*get_store_value(miningUpgrades)[19].formula(get_store_value(miningUpgradeLevels)[19]):1))*Math.max(1,get_store_value(miningUpgrades)[20].formula(get_store_value(miningUpgradeLevels)[20])),v[3],v[4]],get_store_value(miningUpgradeLevels)[15]>0&&y[g][0]>1&&(y[g][1]+=Math.max(0,Math.pow((y[g][0]-1)*y[g][1],.45)),y[g][2]+=Math.max(0,Math.pow((y[g][0]-1)*y[g][1],.45)))}return y})}}}const wallet=object$2({gems:0,gold:0}),permaWallet=object$2({gems:0,gold:0}),resources=object$2({}),unlockedRes=single$2(new Set),visibleTier=single$2(1),progress=object$2({gems:0,key1:0}),miningUpgradeLevelsBought=array$2(Array(200).fill(0)),miningUpgradeLevelsFree=array$2(Array(200).fill(0)),miningUpgradeLevels=array$2(Array(200).fill(0)),miningUpgradeLevelsBoughtTemp=array$2(Array(200).fill(0)),miningUpgradeLevelsFreeTemp=array$2(Array(200).fill(0)),miningUpgradeLevelsTemp=array$2(Array(200).fill(0)),keyUpgradeLevels=array$2(Array(50).fill(0)),baseMiningDropTable=dropTable({gold:[.25,1,3,10,1],key1:[.05,1,1,1,1],orbs:[.035,1,1,.3,1],beacons:[.003,1,2,.1,2],fame:[5e-4,1,3,.025,2],sigils:[15e-6,.08,.27,.02,3],dust:[1e-6,.5,.625,.005,3],key2:[275e-8,.04,.16,.02,4],artifacts:[33e-9,.04,.05,1e-5,4],key3:[2e-7,.01,.03,.004,5],radium:[1e-7,.01,.03,1e-4,5],void:[1e-13,1e-6,3e-6,1e-7,5]}),miningDropTable=dropTable({gold:[.25,1,3,10,1],key1:[.05,1,1,1,1],orbs:[.035,1,1,.3,1],beacons:[.003,1,2,.1,2],fame:[5e-4,1,3,.025,2],sigils:[15e-6,.08,.27,.02,3],dust:[1e-6,.5,.625,.005,3],key2:[275e-8,.04,.16,.02,4],artifacts:[33e-9,.04,.05,1e-5,4],key3:[2e-7,.01,.03,.004,5],radium:[1e-7,.01,.03,1e-4,5],void:[1e-13,1e-6,3e-6,1e-7,5]}),keysOpened=array$2(Array(5).fill(0)),settings=object$2({UPDATE_SPEED:20,buyAmount:1,activeTab:""}),flags=object$2({relocateNavBack:!1,pressButton:!1,costRatioChanged:!1,showMineXPGain:-1}),keyItemsUnlocked=object$2({key1:new Set,key2:new Set,key3:new Set,key4:new Set,key5:new Set}),progressThisTick=object$2({}),progressAverage=object$2({}),sumUpgradeLevels=single$2(0),beaconActivations=array$2(Array(30).fill(0)),beaconLevels=array$2(Array(30).fill(0)),beaconProgress=array$2(Array(30).fill(0)),beaconUpgradeLevels=array$2(Array(20).fill(0)),beaconSmartSplits=array$2(Array(10).fill(0)),enchantUpgradeLevels=array$2(Array(20).fill(0)),automationItemsUnlocked=object$2({}),radiumProgress=array$2([0,1e6]),enchantProgress=object$2({t1:0,t2:0,t3:0}),activityLog=array$2([]),mineLevel=object$2({level:0,xp:0,xpNextReq:100}),layer=object$2({layer:0,blocks:0,blocksNextReq:100}),buttonNumClicks=object$2({okay:0,good:0,great:0,excellent:0,incredible:0,perfect:0}),baseButtonNumClicks=object$2({okay:0,good:0,great:0,excellent:0,incredible:0,perfect:0}),buttonStats=object$2({clicksUntilFame:1e308,totalClicks:0,totalClicksToday:0,todayStartTime:Date.now(),hardenedBonus:1}),baseButtonStats=object$2({clicksUntilFame:1e308,totalClicks:0,totalClicksToday:0,todayStartTime:Date.now(),hardenedBonus:1}),buttonUpgradeLevels=array$2(Array(20).fill(0)),stats=object$2({lastRelocate:Date.now(),relocateCount:0}),totalCrafts=single$2(0),craftMasteryLevel=single$2(1),craftMasteryProgress=single$2(0),craftMasteryNextReq=single$2(35),keyCraftTimes=object$2({energy:[-1,-1],key3:[-1,-1],key4:[-1,-1],key5:[-1,-1],beacons:[-1,-1]}),keyCraftMastery=object$2({energy:[1,0,3],key3:[1,0,100],key4:[1,0,100],key5:[1,0,100],beacons:[1,0,100]}),keyCraftAmount=object$2({energy:0,key3:0,key4:0,key5:0,beacons:0}),antiFlickerFlags=object$2({gems:!1,key1:!1,key2:!1,key3:!1,crafting:!1,beacons:!1}),saveVersion=single$2(0),startOfGame=single$2(Date.now()),activityLogShow=object$2({always:!0}),challengeActive=single$2(0),challengeProgress=single$2(0),challenge3Multi=single$2(1),challengesCompleted=array$2(Array(30).fill(0)),resetLastTimes=object$2({relocate:Date.now(),ascension:Date.now()}),slurryToggles=object$2({key1:!1,key2:!1,key3:!1,key4:!1,key5:!1}),ascensionLevels=object$2({fire:[1,0,2],earth:[1,0,2],water:[1,0,2],magic:[1,0,2],celestial:[1,0,2],antimatter:[1,0,35]}),artifactPermanentBonuses=object$2({}),ascensionStats=object$2({lastAscension:-1,ascensionCount:0}),ascensionUpgradeLevels=array$2(Array(100).fill(0)),masteryItemLevels=object$2({gems:0,gold:0,orbs:0,crystals:0,sigils:0,slurry:0,dust:0,artifacts:0,radium:0});function single$1(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}function array$1(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}function object$1(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g,v){m(b=>(b[g]=v,b))},add(g,v){m(b=>(b[g]+=v,b))},sub(g,v,b=!1){m(k=>(b?k[g]-=v:k[g]=Math.max(k[g],0),k))},multiply(g,v){m(b=>(b[g]*=v,b))},divide(g,v){m(b=>(b[g]/=v,b))}}}const progressThreshold=object$1({gems:250,key1:4e3,key2:37500,key3:12e5}),upgradeSorting=object$1({all:{on:!0,unlockAt:()=>!0},base:{on:!0,unlockAt:()=>!0},lootmaster:{on:!0,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10||get_store_value(miningUpgradeLevels)[6]>0},keys:{on:!0,unlockAt:()=>!0},fame:{on:!0,unlockAt:()=>get_store_value(wallet).totalFame>0},crystals:{on:!0,unlockAt:()=>get_store_value(wallet).crystals>0||get_store_value(miningUpgradeLevels)[20]>0},sigils:{on:!0,unlockAt:()=>get_store_value(wallet).sigils>0},dust:{on:!0,unlockAt:()=>get_store_value(wallet).dust>0},antimatter:{on:!0,unlockAt:()=>get_store_value(wallet).antimatter>0}}),keyFinderBases=object$1({1:18,2:3,3:.04,4:2e-5}),miningUpgrades=array$1([{index:0,sortType:["base"],name:"Haste",description:"Increases base mining speed. This also improves many other aspects of the game that depend on mining cycles.",cost:{gems:5},ratio:2,formula:l=>l>100?21+Math.pow(l-100,.75)*.2:1+l*.2,unlockAt:()=>get_store_value(wallet).gems>=3,suffix:" progress per tick",isPercent:!1,maxLevel:100},{index:1,sortType:["base"],name:"Efficiency",description:"Increases gem yield. Improved after level 100.",cost:{gems:5},ratio:1.15,unlockAt:()=>get_store_value(wallet).gems>=3,formula:l=>l>1e4?1010297+Math.pow(l-1e4,.6)*.1:l*(1+.01*l)*(l>100?1+.03*(l-100):1),isPercent:!1,prefix:"+",suffix:" gems",maxLevel:1e3,notes:"(1 + floor(level/10)) * level^0.6"},{index:2,sortType:["base"],name:"Fortune",description:"Improves mining droprates.",cost:{gold:10},ratio:1.23,unlockAt:()=>get_store_value(wallet).gems>30&&get_store_value(wallet).gold>5,formula:l=>l>1e4?601+Math.pow(l-1e4,.6)*.08:1+l*.06,isPercent:!0,prefix:"+",maxLevel:1e3,notes:"(1 + floor(level/10)) * level^0.6"},{index:3,sortType:["keys","base"],name:"[*] Key Finder",description:`While mining, you will occasionally find a bundle of T1 [*] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:40,key1:10},ratio:1.5,unlockAt:()=>get_store_value(wallet).key1>=1,formula:l=>1+l*.2,isPercent:!1,prefix:"x",suffix:"speed",maxLevel:100,notes:"(1 + floor(level/10)) * level^0.6"},{index:4,sortType:["keys"],name:"[**] Key Finder",description:`While mining, you will occasionally find a bundle of T2 [**] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:1e7,key2:100},ratio:1.5,unlockAt:()=>get_store_value(permaWallet).key2>=10,formula:l=>1+Math.pow(l,.5)*.15,isPercent:!1,prefix:"x",suffix:"speed",maxLevel:100,notes:""},{index:5,sortType:["keys","base"],name:"Key Mastery",description:"Increases the number of keys found when a Key Finder of any rarity triggers.",cost:{orbs:200},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[3]>0,formula:l=>l>1e3?201+Math.pow(l-1e3,.2)*.06:1+l*.2,isPercent:!1,prefix:"x",suffix:"keys",maxLevel:1e3,notes:""},{index:6,sortType:["lootmaster","base"],name:"Lootmaster I",description:"Unlocks a new tier of findable drops. These upgrades are very powerful and sometimes unlock new resources.",cost:{gems:1e4,gold:300,key1:25},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10||get_store_value(miningUpgradeLevels)[6]>0,formula:l=>l,isPercent:!1,maxLevel:1,style:"game-btn-lootmaster",notes:""},{index:7,sortType:["base"],name:"Shiny",description:"Increases the amount of gold and orbs found from mining.",cost:{gems:1150},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10,formula:l=>l>1e4?1501+Math.pow(l-1e4,.7)*.15:1+l*.15,isPercent:!1,prefix:"x",suffix:"gold/orb drops",maxLevel:1e3,notes:""},{index:8,sortType:["base"],name:"Efficiency II",description:"Increases gem yield.",cost:{gems:2500},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[1]>=20,formula:l=>1+l*.1,isPercent:!1,prefix:"x",suffix:" gems",maxLevel:1e3,notes:""},{index:9,sortType:["lootmaster"],name:"Lootmaster II",description:"Unlocks a new tier of findable drops.",cost:{orbs:1e6,crystals:1e4,beacons:2500,key2:150},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[6]>=.9||get_store_value(miningUpgradeLevels)[9]>0||get_store_value(miningUpgradeLevelsBought)[9]>0,formula:l=>0,isPercent:!1,suffix:"",maxLevel:1,style:"game-btn-lootmaster",notes:""},{index:10,sortType:["fame"],name:"Hoarder",description:"Significantly improves gem gains.",cost:{fame:5},ratio:1.4,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(stats).relocateCount>0,formula:l=>(1+l*2)*Math.pow(1.04,l),isPercent:!1,prefix:"x",noResetRelocate:!0,suffix:" gem bonus",maxLevel:100,style:"game-btn-fame",notes:"index 10"},{index:11,sortType:["fame"],name:"Spelunker",description:"Significantly improves mining drop rate.",cost:{fame:5},ratio:1.75,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(stats).relocateCount>0,formula:l=>1+.55*Math.pow(l,.9),isPercent:!1,noResetRelocate:!0,prefix:"x",suffix:"drop rate",maxLevel:100,style:"game-btn-fame",notes:""},{index:12,sortType:["fame"],name:"Paladin",description:"Significantly improves beacon path progress.",cost:{fame:20},ratio:1.4,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(stats).relocateCount>0,formula:l=>(1+.75*l)*Math.pow(1.03,l),isPercent:!1,prefix:"x",suffix:" beacon progress",noResetRelocate:!0,maxLevel:100,style:"game-btn-fame",notes:"index 10"},{index:13,sortType:["fame"],name:"Demon",description:"Multiplies mining speed.",cost:{fame:20},ratio:1.75,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(stats).relocateCount>0,formula:l=>1+.175*Math.pow(l,.85),isPercent:!1,noResetRelocate:!0,prefix:"x",suffix:" mining speed",maxLevel:100,style:"game-btn-fame",notes:""},{index:14,sortType:["lootmaster"],name:"Lootmaster III",description:"Unlocks a new tier of findable drops, and automatically unlocks LM1 and LM2 if they aren't already.",cost:{slurry:1e6,sigils:1e5,key3:1e4,radium:1e3,artifacts:10},ratio:1e90,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(miningUpgradeLevels)[9]>.003||get_store_value(miningUpgradeLevelsBought)[14]>0,formula:l=>0,isPercent:!0,noResetRelocate:!0,suffix:"",maxLevel:1,style:"game-btn-lootmaster",notes:""},{index:15,sortType:["fame"],name:"Overload",description:"Drop chances above 100% increase the amount of drops.",cost:{fame:1200},ratio:200,unlockAt:()=>get_store_value(wallet).totalFame>200&&get_store_value(stats).relocateCount>0,formula:l=>0,noResetRelocate:!0,isPercent:!0,suffix:"  (N/A)",maxLevel:1,style:"game-btn-fame",notes:"index 15"},{index:16,sortType:["base"],name:"Legendary",description:"Increases fame gain on relocation.",cost:{gems:3e5,gold:2500},ratio:1.35,unlockAt:()=>get_store_value(wallet).totalFame>60,formula:l=>1+l*.25,isPercent:!0,suffix:"  fame bonus",maxLevel:100,noResetRelocate:!1,notes:"index 16"},{index:17,sortType:["base"],name:"Legendary II",description:"Increases fame gain on relocation.",cost:{orbs:1e4,crystals:1600},ratio:1.25,unlockAt:()=>get_store_value(wallet).totalFame>15e3,formula:l=>1+l*.15,isPercent:!0,suffix:"  fame bonus",maxLevel:150,noResetRelocate:!1,notes:"index 16"},{index:18,sortType:["keys"],name:"[***] Key Finder",description:`While mining, you will occasionally find a bundle of T3 [***] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:1e9,key3:1e3},ratio:1.5,unlockAt:()=>get_store_value(wallet).key3>0,formula:l=>1+Math.max(0,Math.pow(l-1,.6)*.15),isPercent:!1,prefix:"x",suffix:"speed",maxLevel:100,notes:"(1 + floor(level/10)) * level^0.6"},{index:19,sortType:["sigils"],name:"Kleptomaniac",description:"Increases gold gained from mining drops.",cost:{sigils:1},ratio:3,unlockAt:()=>get_store_value(permaWallet).sigils>0,formula:l=>1+.35*l,isPercent:!1,noResetRelocate:!0,prefix:"x",suffix:"gold drops",style:"game-btn-sigil",maxLevel:25,notes:"(1 + floor(level/10)) * level^0.6"},{index:20,sortType:["crystals"],name:"Hardened",description:"Increases mining drop quantities based on your current layer.",cost:{crystals:1e4},ratio:1.33,unlockAt:()=>get_store_value(permaWallet).crystals>0,formula:l=>l==0?1:1+Math.pow(get_store_value(layer).layer,1+l*.01)*.004+.003*l*get_store_value(layer).layer,isPercent:!1,prefix:"x",suffix:" drop quantity",maxLevel:100,style:"game-btn-crystal",notes:"(1 + floor(level/10)) * level^0.6"},{index:21,sortType:["sigils"],name:"Excavator",description:"Artifact droprate from keys is improved.",cost:{sigils:42500,warp:5e3},ratio:1.33,unlockAt:()=>get_store_value(wallet).artifacts||get_store_value(wallet).sigils>25e3&&get_store_value(wallet).warp>1e4,formula:l=>1+l*.15,noResetRelocate:!0,isPercent:!0,suffix:" droprate bonus",maxLevel:250,style:"game-btn-sigil",notes:""},{index:22,sortType:["base"],name:"Fortune II",description:"Increases all droprates.",cost:{gems:1e13},ratio:1.65,unlockAt:()=>get_store_value(wallet).gems>1e9,formula:l=>1+Math.pow(l,.8)/10,isPercent:!1,prefix:"x",suffix:"droprates",maxLevel:400},{index:23,sortType:["base"],name:"Isotopes",description:"Excavate additional blocks per mining cycle from the current layer.",cost:{gems:1e19},ratio:1.6,unlockAt:()=>get_store_value(wallet).gems>1e13,formula:l=>l*.5,isPercent:!1,prefix:"+",suffix:" blocks per mining cycle",maxLevel:400},{index:24,sortType:["base"],name:"Blinding Lights",description:"Increases beacon path progress.",cost:{gems:1e22},ratio:1.65,unlockAt:()=>get_store_value(wallet).gems>1e17,formula:l=>1+Math.pow(l,.8)/4,isPercent:!0,prefix:"+",suffix:" beacon progress",maxLevel:400},{index:25,sortType:["sigils"],name:"Efficiency III",description:"Increases gem yield.",cost:{sigils:1},ratio:3,unlockAt:()=>get_store_value(wallet).sigils>0,formula:l=>1+l*.75,isPercent:!1,prefix:"x",suffix:" gems",style:"game-btn-sigil",noResetRelocate:!0,maxLevel:25},{index:26,sortType:["fame","keys"],name:"Lockpicks",description:"Significantly increases the speed and yield of Key Master.",cost:{fame:30},ratio:1.4,unlockAt:()=>get_store_value(wallet).totalFame>200,formula:l=>1+l*.1*Math.pow(1.01,l),noResetRelocate:!0,isPercent:!1,prefix:"x",suffix:"speed/amount",maxLevel:100,style:"game-btn-fame",notes:""},{index:27,sortType:["dust"],name:"Cosmic Brilliance",description:"The first four mining upgrades gain 4 free levels that never reset (haste gets 1 level).",cost:{dust:100},ratio:1.25,unlockAt:()=>get_store_value(wallet).dust>0,formula:l=>4*l,noResetRelocate:!0,noResetAscension:!0,isDust:!0,isPercent:!1,suffix:" free levels",maxLevel:200,style:"game-btn-dust",notes:""},{index:28,sortType:["dust"],name:"Regal",description:"Gain fame per second.",cost:{dust:1e4},ratio:10,unlockAt:()=>get_store_value(wallet).dust>0,formula:l=>1e3*Math.pow(10,l)*Math.pow(l,1.75),noResetRelocate:!0,noResetAscension:!0,isDust:!0,isPercent:!1,suffix:" fame / sec",maxLevel:250,style:"game-btn-dust",notes:""},{index:29,sortType:["fame"],name:"Cerium Decomposition",description:"Radium produces more crystals.",cost:{fame:1e5},ratio:1.4,unlockAt:()=>get_store_value(wallet).totalFame>1e5&&get_store_value(stats).relocateCount>0,formula:l=>1+l*.11*Math.pow(1.01,l),noResetRelocate:!0,isPercent:!1,prefix:"x",suffix:"crystal gain",maxLevel:100,style:"game-btn-fame",notes:""},{index:30,sortType:["antimatter"],name:"Elusive Minerals",description:"Increases gem gain.",cost:{antimatter:5},ratio:150,unlockAt:()=>get_store_value(wallet).antimatter>0,formula:l=>1+l*3+Math.pow(l,2.75),noResetRelocate:!0,noResetAscension:!0,isPercent:!1,prefix:"x",suffix:"gem gain",maxLevel:10,style:"game-btn-antimatter",notes:""},{index:31,sortType:["antimatter"],name:"Lootmaster IV [unimplemented]",description:"Unlocks a new tier of findable drops, and automatically unlocks LM1-3 if they aren't already.",cost:{warp:1e7,antimatter:75e3,efire:21e3,eearth:21e3,ewater:21e3,emagic:21e3,ecelestial:21e3,key4:1e4},ratio:1e90,unlockAt:()=>get_store_value(miningUpgradeLevels)[14]>.003||get_store_value(miningUpgradeLevelsBought)[31]>0,formula:l=>0,isPercent:!0,noResetRelocate:!0,noResetAscension:!0,suffix:"",maxLevel:1,style:"game-btn-lootmaster",notes:""},{index:32,sortType:["antimatter"],name:"Negative Mass",description:"Decreases the cost multipliers of mining upgrades.",cost:{antimatter:250},ratio:10,unlockAt:()=>get_store_value(wallet).antimatter>0,formula:l=>1-.15*l,isPercent:!1,noResetRelocate:!0,noResetAscension:!0,costRatioChange:!0,prefix:"x",suffix:"cost multipliers",maxLevel:1,style:"game-btn-antimatter",notes:""},{index:33,sortType:["antimatter"],name:"Collapse",description:"Decreases the cost multipliers of mining upgrades.",cost:{antimatter:16e3},ratio:1e90,unlockAt:()=>get_store_value(miningUpgradeLevels)[32]>.003,formula:l=>1-.1*l,isPercent:!1,noResetRelocate:!0,noResetAscension:!0,costRatioChange:!0,prefix:"x",suffix:"cost multipliers",maxLevel:1,style:"game-btn-antimatter",notes:""},{index:34,sortType:["antimatter"],name:"Event Horizon",description:"Decreases the cost multipliers of mining upgrades.",cost:{antimatter:9e6},ratio:1e90,unlockAt:()=>get_store_value(miningUpgradeLevels)[33]>.003,formula:l=>1-.1*l,isPercent:!1,noResetRelocate:!0,noResetAscension:!0,costRatioChange:!0,prefix:"x",suffix:"cost multipliers",maxLevel:1,style:"game-btn-antimatter",notes:""},{index:35,sortType:["antimatter"],name:"Total Darkness",description:"Decreases the cost multipliers of mining upgrades.",cost:{antimatter:25e7},ratio:1e90,unlockAt:()=>get_store_value(miningUpgradeLevels)[34]>.003,formula:l=>1-.08*l,isPercent:!1,noResetRelocate:!0,noResetAscension:!0,costRatioChange:!0,prefix:"x",suffix:"cost multipliers",maxLevel:1,style:"game-btn-antimatter",notes:""},{index:36,sortType:["antimatter"],name:"Ethereal Box",description:"Increases key droprates.",cost:{antimatter:5},ratio:150,unlockAt:()=>get_store_value(wallet).antimatter>0,formula:l=>1+.95*Math.pow(l,1.65),noResetRelocate:!0,noResetAscension:!0,isPercent:!1,suffix:"x key droprates",maxLevel:10,style:"game-btn-antimatter",notes:""},{index:37,sortType:["antimatter"],name:"Phantom Legend",description:"Increases fame gain on relocation.",cost:{antimatter:5},ratio:150,unlockAt:()=>get_store_value(wallet).antimatter>0,formula:l=>1+.75*Math.pow(l,1.9),noResetRelocate:!0,noResetAscension:!0,isPercent:!1,suffix:"x fame gain",maxLevel:10,style:"game-btn-antimatter",notes:""},{index:38,sortType:["keys","base"],name:"[****] Key Finder",description:`While mining, you will occasionally find a bundle of T4 [****] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:3e19,key4:2500,void:750},ratio:1.3,unlockAt:()=>get_store_value(miningUpgradeLevels)[18]>.003&&get_store_value(wallet).key4>0&&get_store_value(wallet).totalAntimatter>0,formula:l=>1+Math.max(0,Math.pow(l-1,.6)*.15),isPercent:!1,suffix:"x speed",maxLevel:100,notes:"(1 + floor(level/10)) * level^0.6"}]),gemGainFlavorText=single$1(0);function single(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(v=>g)},add(g){m(v=>v+g)},sub(g,v=!1){m(b=>v?b-g:Math.max(b,0))},multiply(g){m(v=>v*g)},divide(g){m(v=>v/g)}}}function object(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y,g){m(v=>(v[y]=g,v))},add(y,g){m(v=>(v[y]+=g,v))},sub(y,g,v=!1){m(b=>(v?b[y]-=g:b[y]=Math.max(b[y],0),b))},multiply(y,g){m(v=>(v[y]*=g,v))},divide(y,g){m(v=>(v[y]/=g,v))}}}const masteryNextReq=single(100),masteryItemInfo=object({gems:{base:1e9,increase:100,cap:1e295},gold:{base:1e7,increase:100,cap:1e295},orbs:{base:1e7,increase:100,cap:1e295},crystals:{base:1e5,increase:100,cap:1e115},sigils:{base:1e3,increase:100,cap:1e115},slurry:{base:1e3,increase:100,cap:1e115},dust:{base:1e3,increase:10,cap:1e78},artifacts:{base:1e3,increase:10,cap:1e78},radium:{base:1e3,increase:10,cap:1e78}}),masteryItemReqs=object({gems:0}),ThoriumDepositButton_svelte_svelte_type_style_lang="";function create_if_block_1$i(l){let d,_=l[2](l[0],0)+"",m,y;return{c(){d=text("+"),m=text(_),y=text(" radioactivity")},l(g){d=claim_text(g,"+"),m=claim_text(g,_),y=claim_text(g," radioactivity")},m(g,v){insert_hydration(g,d,v),insert_hydration(g,m,v),insert_hydration(g,y,v)},p(g,v){v&1&&_!==(_=g[2](g[0],0)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_if_block$m(l){let d;return{c(){d=text("Thorium! Click to collect.")},l(_){d=claim_text(_,"Thorium! Click to collect.")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_fragment$p(l){let d,_,m;function y(b,k){if(b[1]=="on")return create_if_block$m;if(b[1]=="transition")return create_if_block_1$i}let g=y(l),v=g&&g(l);return{c(){d=element("div"),v&&v.c(),this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var k=children(d);v&&v.l(k),k.forEach(detach),this.h()},h(){attr(d,"class","game-btn-thorium pt-1 pb-1 text-small text-center select-none lg:w-[112px] sm:w-[290px] xl:w-full")},m(b,k){insert_hydration(b,d,k),v&&v.m(d,null),_||(m=listen(d,"click",l[4]),_=!0)},p(b,[k]){g===(g=y(b))&&v?v.p(b,k):(v&&v.d(1),v=g&&g(b),v&&(v.c(),v.m(d,null)))},i:noop,o:noop,d(b){b&&detach(d),v&&v.d(),_=!1,m()}}}function instance$q(l,d,_){let m,y;component_subscribe(l,thoriumDepositActive,x=>_(1,m=x)),component_subscribe(l,radiumProgress,x=>_(5,y=x));let g=0;const v=(x,w=0)=>x<1e9?x.toFixed(x<1e3?w:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):x.toExponential(3).toString().replace("+","");function b(){if(m!="on")return;const x=formula.calcThoriumDepositGain();_(0,g=x),set_store_value(radiumProgress,y[0]+=x,y),set_store_value(thoriumDepositActive,m="transition",m),setTimeout(()=>{set_store_value(thoriumDepositActive,m="off",m)},1500)}return[g,m,v,b,()=>b()]}class ThoriumDepositButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$q,create_fragment$p,safe_not_equal,{})}}function array(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(v=>g?v-y:Math.max(v,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)},updateChallengeReqs(){m(y=>{for(let g in y)y[g]=get_store_value(baseChallengeGoals)[g]*Math.pow(get_store_value(challengeMultipliers)[g],get_store_value(challengesCompleted)[g]),console.log(get_store_value(baseChallengeGoals)[g]*Math.pow(get_store_value(challengeMultipliers)[g],get_store_value(challengesCompleted)[g]));return y})}}}array([()=>get_store_value(automationItemsUnlocked)["game on"],()=>get_store_value(automationItemsUnlocked)["game on"],()=>get_store_value(automationItemsUnlocked)["game on"],()=>get_store_value(automationItemsUnlocked).hellfire,()=>get_store_value(automationItemsUnlocked).hellfire,()=>get_store_value(automationItemsUnlocked).hellfire].concat(Array(3).fill(get_store_value(automationItemsUnlocked)["???notimplemented2221391"])).concat(Array(12).fill(!1)));const challengeGoals=array([750,1400,1e4,6e3,6e3,6e3,6e3,6e3,6e3,6e3]),baseChallengeGoals=array([750,1400,1e4,6e3,6e3,6e3,6e3,6e3,6e3,6e3]),challengeMultipliers=array([1.33,1.33,1.175,1.4,1.4,1.2,1.1,1.1,1.1,1.1]),MiningUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$j(l,d,_){const m=l.slice();return m[29]=d[_],m}function create_if_block$l(l){let d,_,m,y=l[5][l[0]].name+"",g,v,b=l[12](l[9][l[0]],0)+"",k,x,w=l[12](l[5][l[0]].maxLevel,0)+"",I,M,E,S,N,D,O=l[5][l[0]].description+"",q,P,A,C,L,G,V=(l[5][l[0]].prefix||"")+"",T,R,Y,Q=(l[5][l[0]].isPercent?l[13](l[5][l[0]].formula(l[7][l[0]]),3,!0):l[12](l[5][l[0]].formula(l[7][l[0]]),3))+"",te,W,z,H,F,X,ae,re,j,$=l[8][l[0]]>0&&create_if_block_9$2(l),ne=(l[6].maxBuy&&l[4]>0||l[4]>1)&&create_if_block_8$3(l);function me(J,se){if(J[5][J[0]].noResetAscension)return create_if_block_6$6;if(J[5][J[0]].noResetRelocate)return create_if_block_7$4}let ce=me(l),oe=ce&&ce(l),U=l[9][l[0]]<l[5][l[0]].maxLevel&&create_if_block_3$b(l);function Z(J,se){return J[9][J[0]]>=J[5][J[0]].maxLevel?create_if_block_1$h:create_else_block$b}let B=Z(l),K=B(l);return{c(){d=element("div"),_=space(),m=element("div"),g=text(y),v=text(" [ "),k=text(b),x=text(" / "),I=text(w),M=space(),$&&$.c(),E=text(`] 
`),ne&&ne.c(),S=space(),N=element("span"),D=element("div"),q=text(O),P=space(),oe&&oe.c(),A=space(),C=element("div"),L=element("div"),G=element("span"),T=text(V),R=space(),Y=element("span"),te=text(Q),W=space(),U&&U.c(),z=space(),H=element("hr"),F=space(),X=element("div"),K.c(),this.h()},l(J){d=claim_element(J,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(J),m=claim_element(J,"DIV",{class:!0});var se=children(m);g=claim_text(se,y),v=claim_text(se," [ "),k=claim_text(se,b),x=claim_text(se," / "),I=claim_text(se,w),M=claim_space(se),$&&$.l(se),E=claim_text(se,`] 
`),ne&&ne.l(se),S=claim_space(se),N=claim_element(se,"SPAN",{class:!0});var de=children(N);D=claim_element(de,"DIV",{class:!0});var _e=children(D);q=claim_text(_e,O),P=claim_space(_e),oe&&oe.l(_e),_e.forEach(detach),A=claim_space(de),C=claim_element(de,"DIV",{class:!0});var pe=children(C);L=claim_element(pe,"DIV",{class:!0});var ue=children(L);G=claim_element(ue,"SPAN",{class:!0});var ie=children(G);T=claim_text(ie,V),ie.forEach(detach),R=claim_space(ue),Y=claim_element(ue,"SPAN",{class:!0});var ge=children(Y);te=claim_text(ge,Q),ge.forEach(detach),W=claim_space(ue),U&&U.l(ue),ue.forEach(detach),pe.forEach(detach),z=claim_space(de),H=claim_element(de,"HR",{}),F=claim_space(de),X=claim_element(de,"DIV",{class:!0});var ye=children(X);K.l(ye),ye.forEach(detach),de.forEach(detach),se.forEach(detach),this.h()},h(){attr(d,"class","pt-1"),attr(D,"class","title text-small-gray items-start text-center pb-1"),attr(G,"class","current text-[#cccccc]"),attr(Y,"class","current text-[#cccccc]"),attr(L,"class","tooltip-text-xs text-[#cccccc]"),attr(C,"class","text-center effect-wrapper"),attr(X,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(N,"class","tooltip tooltip-style svelte-10ri8s1"),attr(m,"class",ae="has-tooltip tooltip-text "+(l[2]&&l[9][l[0]]<l[5][l[0]].maxLevel?l[5][l[0]].style||"game-btn":(l[5][l[0]].style||"game-btn")+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(J,se){insert_hydration(J,d,se),insert_hydration(J,_,se),insert_hydration(J,m,se),append_hydration(m,g),append_hydration(m,v),append_hydration(m,k),append_hydration(m,x),append_hydration(m,I),append_hydration(m,M),$&&$.m(m,null),append_hydration(m,E),ne&&ne.m(m,null),append_hydration(m,S),append_hydration(m,N),append_hydration(N,D),append_hydration(D,q),append_hydration(D,P),oe&&oe.m(D,null),append_hydration(N,A),append_hydration(N,C),append_hydration(C,L),append_hydration(L,G),append_hydration(G,T),append_hydration(L,R),append_hydration(L,Y),append_hydration(Y,te),append_hydration(L,W),U&&U.m(L,null),append_hydration(N,z),append_hydration(N,H),append_hydration(N,F),append_hydration(N,X),K.m(X,null),re||(j=listen(m,"click",l[16]),re=!0)},p(J,se){se[0]&33&&y!==(y=J[5][J[0]].name+"")&&set_data(g,y),se[0]&513&&b!==(b=J[12](J[9][J[0]],0)+"")&&set_data(k,b),se[0]&33&&w!==(w=J[12](J[5][J[0]].maxLevel,0)+"")&&set_data(I,w),J[8][J[0]]>0?$?$.p(J,se):($=create_if_block_9$2(J),$.c(),$.m(m,E)):$&&($.d(1),$=null),J[6].maxBuy&&J[4]>0||J[4]>1?ne?ne.p(J,se):(ne=create_if_block_8$3(J),ne.c(),ne.m(m,S)):ne&&(ne.d(1),ne=null),se[0]&33&&O!==(O=J[5][J[0]].description+"")&&set_data(q,O),ce!==(ce=me(J))&&(oe&&oe.d(1),oe=ce&&ce(J),oe&&(oe.c(),oe.m(D,null))),se[0]&33&&V!==(V=(J[5][J[0]].prefix||"")+"")&&set_data(T,V),se[0]&161&&Q!==(Q=(J[5][J[0]].isPercent?J[13](J[5][J[0]].formula(J[7][J[0]]),3,!0):J[12](J[5][J[0]].formula(J[7][J[0]]),3))+"")&&set_data(te,Q),J[9][J[0]]<J[5][J[0]].maxLevel?U?U.p(J,se):(U=create_if_block_3$b(J),U.c(),U.m(L,null)):U&&(U.d(1),U=null),B===(B=Z(J))&&K?K.p(J,se):(K.d(1),K=B(J),K&&(K.c(),K.m(X,null))),se[0]&549&&ae!==(ae="has-tooltip tooltip-text "+(J[2]&&J[9][J[0]]<J[5][J[0]].maxLevel?J[5][J[0]].style||"game-btn":(J[5][J[0]].style||"game-btn")+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(m,"class",ae)},d(J){J&&detach(d),J&&detach(_),J&&detach(m),$&&$.d(),ne&&ne.d(),oe&&oe.d(),U&&U.d(),K.d(),re=!1,j()}}}function create_if_block_9$2(l){let d,_=l[12](l[8][l[0]],0)+"",m,y;return{c(){d=text("+ "),m=text(_),y=space()},l(g){d=claim_text(g,"+ "),m=claim_text(g,_),y=claim_space(g)},m(g,v){insert_hydration(g,d,v),insert_hydration(g,m,v),insert_hydration(g,y,v)},p(g,v){v[0]&257&&_!==(_=g[12](g[8][g[0]],0)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_if_block_8$3(l){let d,_,m,y;return{c(){d=element("span"),_=text("(x"),m=text(l[4]),y=text(")"),this.h()},l(g){d=claim_element(g,"SPAN",{class:!0});var v=children(d);_=claim_text(v,"(x"),m=claim_text(v,l[4]),y=claim_text(v,")"),v.forEach(detach),this.h()},h(){attr(d,"class","text-gray-400")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),append_hydration(d,m),append_hydration(d,y)},p(g,v){v[0]&16&&set_data(m,g[4])},d(g){g&&detach(d)}}}function create_if_block_7$4(l){let d,_,m,y;return{c(){d=element("br"),_=space(),m=element("div"),y=text("Not reset on relocation"),this.h()},l(g){d=claim_element(g,"BR",{}),_=claim_space(g),m=claim_element(g,"DIV",{class:!0});var v=children(m);y=claim_text(v,"Not reset on relocation"),v.forEach(detach),this.h()},h(){attr(m,"class","text-xs text-orange-300 italic")},m(g,v){insert_hydration(g,d,v),insert_hydration(g,_,v),insert_hydration(g,m,v),append_hydration(m,y)},d(g){g&&detach(d),g&&detach(_),g&&detach(m)}}}function create_if_block_6$6(l){let d,_;return{c(){d=element("div"),_=text("Not reset on ascension or lower"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Not reset on ascension or lower"),y.forEach(detach),this.h()},h(){attr(d,"class","text-xs italic text-indigo-300")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},d(m){m&&detach(d)}}}function create_if_block_3$b(l){let d,_,m=(l[5][l[0]].isPercent?l[13](l[5][l[0]].formula(l[7][l[0]]+Math.max(1,l[4])),3,!0):l[12](l[5][l[0]].formula(l[7][l[0]]+Math.max(1,l[4])),3))+"",y,g,v,b=(l[5][l[0]].suffix||"")+"",k,x,w,I,M,E,S=l[6].maxBuy&&l[4]>=1&&create_if_block_5$8(l),N=l[6].costRatios&&l[5][l[0]].maxLevel>1&&create_if_block_4$9(l);return{c(){d=element("span"),_=text(`=> 
                        `),y=text(m),g=space(),v=element("span"),k=text(b),x=space(),S&&S.c(),w=space(),I=element("br"),M=space(),N&&N.c(),E=empty(),this.h()},l(D){d=claim_element(D,"SPAN",{class:!0});var O=children(d);_=claim_text(O,`=> 
                        `),y=claim_text(O,m),O.forEach(detach),g=claim_space(D),v=claim_element(D,"SPAN",{class:!0});var q=children(v);k=claim_text(q,b),q.forEach(detach),x=claim_space(D),S&&S.l(D),w=claim_space(D),I=claim_element(D,"BR",{}),M=claim_space(D),N&&N.l(D),E=empty(),this.h()},h(){attr(d,"class","current text-[#888888]"),attr(v,"class","current text-[#cccccc]")},m(D,O){insert_hydration(D,d,O),append_hydration(d,_),append_hydration(d,y),insert_hydration(D,g,O),insert_hydration(D,v,O),append_hydration(v,k),insert_hydration(D,x,O),S&&S.m(D,O),insert_hydration(D,w,O),insert_hydration(D,I,O),insert_hydration(D,M,O),N&&N.m(D,O),insert_hydration(D,E,O)},p(D,O){O[0]&177&&m!==(m=(D[5][D[0]].isPercent?D[13](D[5][D[0]].formula(D[7][D[0]]+Math.max(1,D[4])),3,!0):D[12](D[5][D[0]].formula(D[7][D[0]]+Math.max(1,D[4])),3))+"")&&set_data(y,m),O[0]&33&&b!==(b=(D[5][D[0]].suffix||"")+"")&&set_data(k,b),D[6].maxBuy&&D[4]>=1?S?S.p(D,O):(S=create_if_block_5$8(D),S.c(),S.m(w.parentNode,w)):S&&(S.d(1),S=null),D[6].costRatios&&D[5][D[0]].maxLevel>1?N?N.p(D,O):(N=create_if_block_4$9(D),N.c(),N.m(E.parentNode,E)):N&&(N.d(1),N=null)},d(D){D&&detach(d),D&&detach(g),D&&detach(v),D&&detach(x),S&&S.d(D),D&&detach(w),D&&detach(I),D&&detach(M),N&&N.d(D),D&&detach(E)}}}function create_if_block_5$8(l){let d,_,m,y;return{c(){d=element("span"),_=text("(x"),m=text(l[4]),y=text(")"),this.h()},l(g){d=claim_element(g,"SPAN",{class:!0});var v=children(d);_=claim_text(v,"(x"),m=claim_text(v,l[4]),y=claim_text(v,")"),v.forEach(detach),this.h()},h(){attr(d,"class","text-[#888888]")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),append_hydration(d,m),append_hydration(d,y)},p(g,v){v[0]&16&&set_data(m,g[4])},d(g){g&&detach(d)}}}function create_if_block_4$9(l){let d,_,m=l[12](formula.calcMiningCostRatio(l[5][l[0]].ratio),3)+"",y,g;return{c(){d=element("span"),_=text("Cost Multiplier: "),y=text(m),g=text("x"),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var b=children(d);_=claim_text(b,"Cost Multiplier: "),y=claim_text(b,m),g=claim_text(b,"x"),b.forEach(detach),this.h()},h(){attr(d,"class","current text-[#888888]")},m(v,b){insert_hydration(v,d,b),append_hydration(d,_),append_hydration(d,y),append_hydration(d,g)},p(v,b){b[0]&33&&m!==(m=v[12](formula.calcMiningCostRatio(v[5][v[0]].ratio),3)+"")&&set_data(y,m)},d(v){v&&detach(d)}}}function create_else_block$b(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$j(get_each_context$j(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g[0]&23554){_=Object.entries(y[1]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context$j(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block$j(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$h(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#888888]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$e(l){let d,_=(l[10][l[29][0]]||l[11].has(l[29][0])?ref.displayNames[l[29][0]]?ref.displayNames[l[29][0]]:l[29][0]:"???")+"",m,y,g,v,b=l[12](l[29][1])+"",k,x;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(w),v=claim_element(w,"DIV",{class:!0});var M=children(v);k=claim_text(M,b),M.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[29][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-10ri8s1"),attr(v,"class",x="col-span-2 "+(l[14](l[29][0])?"":"text-red-600")+" text-left")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,g,I),insert_hydration(w,v,I),append_hydration(v,k)},p(w,I){I[0]&3074&&_!==(_=(w[10][w[29][0]]||w[11].has(w[29][0])?ref.displayNames[w[29][0]]?ref.displayNames[w[29][0]]:w[29][0]:"???")+"")&&set_data(m,_),I[0]&2&&y!==(y=(ref.colors[w[29][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-10ri8s1")&&attr(d,"class",y),I[0]&2&&b!==(b=w[12](w[29][1])+"")&&set_data(k,b),I[0]&2&&x!==(x="col-span-2 "+(w[14](w[29][0])?"":"text-red-600")+" text-left")&&attr(v,"class",x)},d(w){w&&detach(d),w&&detach(g),w&&detach(v)}}}function create_each_block$j(l){let d,_=l[29][1]>=1&&create_if_block_2$e(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[29][1]>=1?_?_.p(m,y):(_=create_if_block_2$e(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$d(l){let d=l[5][l[0]].unlockAt()||l[3]||l[7][l[0]]>0,_,m=d&&create_if_block$l(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&169&&(d=y[5][y[0]].unlockAt()||y[3]||y[7][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$l(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$o(l){let d=l[3]||l[2]||l[7][l[0]]>0,_,m=create_key_block$d(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&141&&safe_not_equal(d,d=y[3]||y[2]||y[7][y[0]]>0)?(m.d(1),m=create_key_block$d(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$p(l,d,_){let m,y,g,v,b,k,x,w,I,M,E;component_subscribe(l,wallet,W=>_(20,m=W)),component_subscribe(l,miningUpgrades,W=>_(5,y=W)),component_subscribe(l,settings,W=>_(6,g=W)),component_subscribe(l,challengeActive,W=>_(21,v=W)),component_subscribe(l,visibleTier,W=>_(22,b=W)),component_subscribe(l,miningUpgradeLevels,W=>_(7,k=W)),component_subscribe(l,miningUpgradeLevelsFree,W=>_(8,x=W)),component_subscribe(l,miningUpgradeLevelsBought,W=>_(9,w=W)),component_subscribe(l,flags,W=>_(23,I=W)),component_subscribe(l,permaWallet,W=>_(10,M=W)),component_subscribe(l,unlockedRes,W=>_(11,E=W));let{index:S}=d,N=()=>{let W={};for(let[z,H]of Object.entries(y[S].cost))W[z]=G(H);return W},D={},O,q=k[S]>0,P,A=g.buyAmount;onMount(()=>{setTimeout(()=>{_(1,D=N()),_(2,O=Y()),y[S].unlockAt()&&_(3,q=!0),_(3,q=k[S]>0)},50),P=setInterval(()=>{_(2,O=Y()),Q(),y[S].unlockAt()&&_(3,q=!0),g.maxBuy?(_(4,A=T()),_(1,D=N())):_(4,A=g.buyAmount),I.costRatioChange&&(_(1,D=N()),set_store_value(flags,I.costRatioChange=!1,I))},100+Math.random()*20)}),onDestroy(()=>{clearInterval(P)});const C=(W,z=0)=>W<1e9?W.toFixed(W<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):W.toExponential(3).toString().replace("+",""),L=(W,z=3,H=!1)=>(H&&(W-=1),W<1e9?(W*100).toFixed(W*100<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(W*100).toExponential(z).toString().replace("+","")+"%");function G(W){const z=formula.calcMiningCostRatio(y[S].ratio),H=W*Math.pow(z,w[S]),F=Math.max(1,A);return formula.gSum(H,z,F)}function V(W){return m[W]>=D[W]}function T(){const W=y[S].maxLevel-w[S];let z=1e9;for(let[H,F]of Object.entries(y[S].cost)){if(!m[H])return 0;const X=formula.calcMiningCostRatio(y[S].ratio),ae=F*Math.pow(X,w[S]);z=Math.min(z,formula.maxNumGeom(m[H],ae,X))}return Math.min(W,z)}function R(){if(v!==2&&!(w[S]>=y[S].maxLevel)){_(1,D=N());for(let[W,z]of Object.entries(D))if(z>=1&&(!m[W]||m[W]<z-.003))return;for(let[W,z]of Object.entries(D))z>=1&&set_store_value(wallet,m[W]-=z-.003,m);if(set_store_value(miningUpgradeLevels,k[S]+=Math.min(A,y[S].maxLevel-k[S]),k),set_store_value(miningUpgradeLevelsBought,w[S]+=Math.min(A,y[S].maxLevel-w[S]),w),_(1,D=N()),_(3,q=!0),S==27){const W=Math.min(A,y[27].maxLevel-x[27]);set_store_value(miningUpgradeLevelsFree,x[0]+=1*W,x),set_store_value(miningUpgradeLevelsFree,x[1]+=4*W,x),set_store_value(miningUpgradeLevelsFree,x[2]+=4*W,x),set_store_value(miningUpgradeLevelsFree,x[7]+=4*W,x)}set_store_value(miningUpgradeLevels,k=k.map((W,z)=>w[z]+x[z]),k),miningDropTable.updateTable(),(y[S].name||"")=="Lootmaster I"&&set_store_value(visibleTier,b=2,b),(y[S].name||"")=="Lootmaster II"&&set_store_value(visibleTier,b=3,b),(y[S].name||"")=="Lootmaster III"&&(set_store_value(miningUpgradeLevels,k[6]=1,k),set_store_value(miningUpgradeLevels,k[9]=1,k),set_store_value(visibleTier,b=4,b))}}function Y(){if(v===2||g.maxBuy&&A==0)return!1;_(1,D=N());for(let[W,z]of Object.entries(D))if(z>=1&&m[W]<z-.003||!m[W])return!1;return!0}function Q(){for(let[W,z]of Object.entries(y[S].unlockAt))if(m[W]<z)return!1;return!0}const te=()=>R();return l.$$set=W=>{"index"in W&&_(0,S=W.index)},[S,D,O,q,A,y,g,k,x,w,M,E,C,L,V,R,te]}class MiningUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$p,create_fragment$o,safe_not_equal,{index:0},null,[-1,-1])}}function create_fragment$n(l){let d,_,m,y,g,v,b,k;return{c(){d=element("div"),_=element("div"),m=text("-"),y=space(),g=element("div"),v=text("+"),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var w=children(d);_=claim_element(w,"DIV",{class:!0});var I=children(_);m=claim_text(I,"-"),I.forEach(detach),y=claim_space(w),g=claim_element(w,"DIV",{class:!0});var M=children(g);v=claim_text(M,"+"),M.forEach(detach),w.forEach(detach),this.h()},h(){attr(_,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid select-none m-1"),attr(g,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid select-none m-1"),attr(d,"class","grid grid-cols-2")},m(x,w){insert_hydration(x,d,w),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,v),b||(k=[listen(_,"click",l[3]),listen(g,"click",l[4])],b=!0)},p:noop,i:noop,o:noop,d(x){x&&detach(d),b=!1,run_all(k)}}}function instance$o(l,d,_){let m,y,g,v;component_subscribe(l,wallet,M=>_(5,m=M)),component_subscribe(l,miningUpgrades,M=>_(6,M)),component_subscribe(l,beaconActivations,M=>_(7,y=M)),component_subscribe(l,beaconSpendAmt,M=>_(8,g=M)),component_subscribe(l,miningUpgradeLevels,M=>_(9,v=M));let{index:b}=d;v[b]>0,onMount(()=>{}),onDestroy(()=>{});function k(){if((isNaN(g)||g<0||!g)&&set_store_value(beaconSpendAmt,g=1,g),!m.beacons||m.beacons===0)return;const M=Math.min(m.beacons,g);set_store_value(wallet,m.beacons-=M,m),set_store_value(beaconActivations,y[b]+=M,y)}function x(){(isNaN(g)||g<0||!g)&&set_store_value(beaconSpendAmt,g=1,g);const M=Math.min(y[b],g);set_store_value(beaconActivations,y[b]-=M,y),set_store_value(wallet,m.beacons+=M,m)}const w=()=>x(),I=()=>k();return l.$$set=M=>{"index"in M&&_(2,b=M.index)},[k,x,b,w,I]}class BeaconToggleButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$o,create_fragment$n,safe_not_equal,{index:2})}}const BeaconPowerUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$i(l,d,_){const m=l.slice();return m[19]=d[_],m}function create_if_block_3$a(l){let d,_,m;return{c(){d=text("(+"),_=text(l[3]),m=text(")")},l(y){d=claim_text(y,"(+"),_=claim_text(y,l[3]),m=claim_text(y,")")},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),insert_hydration(y,m,g)},p(y,g){g&8&&set_data(_,y[3])},d(y){y&&detach(d),y&&detach(_),y&&detach(m)}}}function create_if_block_2$d(l){let d,_,m;return{c(){d=text("(x"),_=text(l[3]),m=text(")")},l(y){d=claim_text(y,"(x"),_=claim_text(y,l[3]),m=claim_text(y,")")},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),insert_hydration(y,m,g)},p(y,g){g&8&&set_data(_,y[3])},d(y){y&&detach(d),y&&detach(_),y&&detach(m)}}}function create_if_block_1$g(l){let d,_,m,y,g=l[8](l[6][l[0]].ratio,3)+"",v,b;return{c(){d=element("br"),_=space(),m=element("span"),y=text("Cost Multiplier: "),v=text(g),b=text("x"),this.h()},l(k){d=claim_element(k,"BR",{}),_=claim_space(k),m=claim_element(k,"SPAN",{class:!0});var x=children(m);y=claim_text(x,"Cost Multiplier: "),v=claim_text(x,g),b=claim_text(x,"x"),x.forEach(detach),this.h()},h(){attr(m,"class","current text-[#888888]")},m(k,x){insert_hydration(k,d,x),insert_hydration(k,_,x),insert_hydration(k,m,x),append_hydration(m,y),append_hydration(m,v),append_hydration(m,b)},p(k,x){x&65&&g!==(g=k[8](k[6][k[0]].ratio,3)+"")&&set_data(v,g)},d(k){k&&detach(d),k&&detach(_),k&&detach(m)}}}function create_if_block$k(l){let d,_=(ref.displayNames[l[19][0]]?ref.displayNames[l[19][0]]:l[19][0])+"",m,y,g,v,b=l[8](l[19][1])+"",k,x,w;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),x=space(),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var M=children(d);m=claim_text(M,_),M.forEach(detach),g=claim_space(I),v=claim_element(I,"DIV",{class:!0});var E=children(v);k=claim_text(E,b),x=claim_space(E),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[19][0]]||ref.colors.default)+" col-span-3 svelte-4m3301"),attr(v,"class",w="col-span-2 "+(l[4].beaconPower<l[19][1]?"text-red-600":"")+" text-left")},m(I,M){insert_hydration(I,d,M),append_hydration(d,m),insert_hydration(I,g,M),insert_hydration(I,v,M),append_hydration(v,k),append_hydration(v,x)},p(I,M){M&2&&_!==(_=(ref.displayNames[I[19][0]]?ref.displayNames[I[19][0]]:I[19][0])+"")&&set_data(m,_),M&2&&y!==(y=(ref.colors[I[19][0]]||ref.colors.default)+" col-span-3 svelte-4m3301")&&attr(d,"class",y),M&2&&b!==(b=I[8](I[19][1])+"")&&set_data(k,b),M&18&&w!==(w="col-span-2 "+(I[4].beaconPower<I[19][1]?"text-red-600":"")+" text-left")&&attr(v,"class",w)},d(I){I&&detach(d),I&&detach(g),I&&detach(v)}}}function create_each_block$i(l){let d,_=l[19][1]>=1&&create_if_block$k(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[19][1]>=1?_?_.p(m,y):(_=create_if_block$k(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$c(l){let d,_,m=l[6][l[0]].description+"",y,g,v,b,k,x=(l[6][l[0]].prefix||"")+"",w,I,M,E=(l[6][l[0]].isPercent?l[9](l[6][l[0]].formula(l[5][l[0]]),3,!0):l[8](l[6][l[0]].formula(l[5][l[0]]),3))+"",S,N,D,O,q=(l[6][l[0]].isPercent?l[9](l[6][l[0]].formula(l[5][l[0]]+Math.max(1,l[3]),3),3,!0):l[8](l[6][l[0]].formula(l[5][l[0]]+Math.max(1,l[3]),3),3))+"",P,A,C,L=(l[6][l[0]].suffix||"")+"",G,V,T,R,Y,Q,te,W=l[7].maxBuy&&l[3]>=1&&create_if_block_2$d(l),z=l[7].costRatios&&create_if_block_1$g(l),H=Object.entries(l[1]),F=[];for(let X=0;X<H.length;X+=1)F[X]=create_each_block$i(get_each_context$i(l,H,X));return{c(){d=element("span"),_=element("div"),y=text(m),g=space(),v=element("div"),b=element("div"),k=element("span"),w=text(x),I=space(),M=element("span"),S=text(E),N=space(),D=element("span"),O=text(`=>
                        `),P=text(q),A=space(),C=element("span"),G=text(L),V=space(),W&&W.c(),T=space(),z&&z.c(),R=space(),Y=element("hr"),Q=space(),te=element("div");for(let X=0;X<F.length;X+=1)F[X].c();this.h()},l(X){d=claim_element(X,"SPAN",{class:!0});var ae=children(d);_=claim_element(ae,"DIV",{class:!0});var re=children(_);y=claim_text(re,m),re.forEach(detach),g=claim_space(ae),v=claim_element(ae,"DIV",{class:!0});var j=children(v);b=claim_element(j,"DIV",{class:!0});var $=children(b);k=claim_element($,"SPAN",{class:!0});var ne=children(k);w=claim_text(ne,x),ne.forEach(detach),I=claim_space($),M=claim_element($,"SPAN",{class:!0});var me=children(M);S=claim_text(me,E),me.forEach(detach),N=claim_space($),D=claim_element($,"SPAN",{class:!0});var ce=children(D);O=claim_text(ce,`=>
                        `),P=claim_text(ce,q),ce.forEach(detach),A=claim_space($),C=claim_element($,"SPAN",{class:!0});var oe=children(C);G=claim_text(oe,L),oe.forEach(detach),V=claim_space($),W&&W.l($),T=claim_space($),z&&z.l($),$.forEach(detach),j.forEach(detach),R=claim_space(ae),Y=claim_element(ae,"HR",{}),Q=claim_space(ae),te=claim_element(ae,"DIV",{class:!0});var U=children(te);for(let Z=0;Z<F.length;Z+=1)F[Z].l(U);U.forEach(detach),ae.forEach(detach),this.h()},h(){attr(_,"class","title text-small-gray items-start text-center pb-1"),attr(k,"class","current text-[#cccccc]"),attr(M,"class","current text-[#cccccc]"),attr(D,"class","current text-[#888888]"),attr(C,"class","current text-[#cccccc]"),attr(b,"class","tooltip-text-xs text-[#cccccc]"),attr(v,"class","text-center effect-wrapper"),attr(te,"class","pt-1 cost items-start text-center grid grid-cols-5"),attr(d,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-4m3301")},m(X,ae){insert_hydration(X,d,ae),append_hydration(d,_),append_hydration(_,y),append_hydration(d,g),append_hydration(d,v),append_hydration(v,b),append_hydration(b,k),append_hydration(k,w),append_hydration(b,I),append_hydration(b,M),append_hydration(M,S),append_hydration(b,N),append_hydration(b,D),append_hydration(D,O),append_hydration(D,P),append_hydration(b,A),append_hydration(b,C),append_hydration(C,G),append_hydration(b,V),W&&W.m(b,null),append_hydration(b,T),z&&z.m(b,null),append_hydration(d,R),append_hydration(d,Y),append_hydration(d,Q),append_hydration(d,te);for(let re=0;re<F.length;re+=1)F[re]&&F[re].m(te,null)},p(X,ae){if(ae&65&&m!==(m=X[6][X[0]].description+"")&&set_data(y,m),ae&65&&x!==(x=(X[6][X[0]].prefix||"")+"")&&set_data(w,x),ae&97&&E!==(E=(X[6][X[0]].isPercent?X[9](X[6][X[0]].formula(X[5][X[0]]),3,!0):X[8](X[6][X[0]].formula(X[5][X[0]]),3))+"")&&set_data(S,E),ae&105&&q!==(q=(X[6][X[0]].isPercent?X[9](X[6][X[0]].formula(X[5][X[0]]+Math.max(1,X[3]),3),3,!0):X[8](X[6][X[0]].formula(X[5][X[0]]+Math.max(1,X[3]),3),3))+"")&&set_data(P,q),ae&65&&L!==(L=(X[6][X[0]].suffix||"")+"")&&set_data(G,L),X[7].maxBuy&&X[3]>=1?W?W.p(X,ae):(W=create_if_block_2$d(X),W.c(),W.m(b,T)):W&&(W.d(1),W=null),X[7].costRatios?z?z.p(X,ae):(z=create_if_block_1$g(X),z.c(),z.m(b,null)):z&&(z.d(1),z=null),ae&274){H=Object.entries(X[1]);let re;for(re=0;re<H.length;re+=1){const j=get_each_context$i(X,H,re);F[re]?F[re].p(j,ae):(F[re]=create_each_block$i(j),F[re].c(),F[re].m(te,null))}for(;re<F.length;re+=1)F[re].d(1);F.length=H.length}},d(X){X&&detach(d),W&&W.d(),z&&z.d(),destroy_each(F,X)}}}function create_fragment$m(l){let d,_=l[6][l[0]].name+"",m,y,g=l[8](l[5][l[0]],0)+"",v,b,k,x=l[4].beaconPower,w,I,M,E=l[7].maxBuy&&l[3]>=1&&create_if_block_3$a(l),S=create_key_block$c(l);return{c(){d=element("div"),m=text(_),y=text(" ["),v=text(g),b=text(`] 
    `),E&&E.c(),k=space(),S.c(),this.h()},l(N){d=claim_element(N,"DIV",{class:!0});var D=children(d);m=claim_text(D,_),y=claim_text(D," ["),v=claim_text(D,g),b=claim_text(D,`] 
    `),E&&E.l(D),k=claim_space(D),S.l(D),D.forEach(detach),this.h()},h(){attr(d,"class",w="has-tooltip tooltip-text py-1 "+(l[2]?l[6][l[0]].isCelestial?"game-btn-celestial":"game-btn":l[6][l[0]].isCelestial?"game-btn-celestial-noafford":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-4m3301")},m(N,D){insert_hydration(N,d,D),append_hydration(d,m),append_hydration(d,y),append_hydration(d,v),append_hydration(d,b),E&&E.m(d,null),append_hydration(d,k),S.m(d,null),I||(M=listen(d,"click",l[11]),I=!0)},p(N,[D]){D&65&&_!==(_=N[6][N[0]].name+"")&&set_data(m,_),D&33&&g!==(g=N[8](N[5][N[0]],0)+"")&&set_data(v,g),N[7].maxBuy&&N[3]>=1?E?E.p(N,D):(E=create_if_block_3$a(N),E.c(),E.m(d,k)):E&&(E.d(1),E=null),D&16&&safe_not_equal(x,x=N[4].beaconPower)?(S.d(1),S=create_key_block$c(N),S.c(),S.m(d,null)):S.p(N,D),D&69&&w!==(w="has-tooltip tooltip-text py-1 "+(N[2]?N[6][N[0]].isCelestial?"game-btn-celestial":"game-btn":N[6][N[0]].isCelestial?"game-btn-celestial-noafford":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-4m3301")&&attr(d,"class",w)},i:noop,o:noop,d(N){N&&detach(d),E&&E.d(),S.d(N),I=!1,M()}}}function instance$n(l,d,_){let m,y,g,v;component_subscribe(l,wallet,A=>_(4,m=A)),component_subscribe(l,beaconUpgradeLevels,A=>_(5,y=A)),component_subscribe(l,beaconUpgrades,A=>_(6,g=A)),component_subscribe(l,settings,A=>_(7,v=A));let{index:b}=d,k=()=>{let A={};for(let[C,L]of Object.entries(g[b].cost))A[C]=N(L);return A},x={},w;y[b]>0;let I,M;onMount(()=>{setTimeout(()=>{_(1,x=k()),_(2,w=q())},50),I=setInterval(()=>{_(2,w=q()),v.maxBuy?(_(3,M=D()),_(1,x=k())):_(3,M=v.buyAmount)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(I)});const E=(A,C=0)=>A<1e9?A.toFixed(A<1e3?C:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):A.toExponential(3).toString().replace("+",""),S=(A,C=3,L=!1)=>(L&&(A-=1),A<1e9?(A*100).toFixed(A<999?C:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(A*100).toExponential(C).toString().replace("+","")+"%");function N(A){const C=A*Math.pow(g[b].ratio,y[b]),L=g[b].ratio,G=Math.max(1,M);return formula.gSum(C,L,G)}function D(){let A=1e9;for(let[C,L]of Object.entries(g[b].cost)){if(!m[C])return 0;const G=L*Math.pow(g[b].ratio,y[b]);A=Math.min(A,formula.maxNumGeom(m[C],G,g[b].ratio))}return A}function O(){if(!isNaN(m.beaconPower)){_(1,x=k());for(let[A,C]of Object.entries(x))if(A=="beaconPower"&&(!m.beaconPower||m.beaconPower<C)||A!="beaconPower"&&(!m[A]||m[A]<C))return;for(let[A,C]of Object.entries(x))A=="beaconPower"?set_store_value(wallet,m.beaconPower-=C,m):set_store_value(wallet,m[A]-=C,m);set_store_value(beaconUpgradeLevels,y[b]+=M,y),_(1,x=k())}}function q(){if(isNaN(m.beaconPower))return!1;_(1,x=k());for(let[A,C]of Object.entries(x))if(C>=1&&m[A]<C-.003||!m[A])return!1;return!0}const P=()=>O();return l.$$set=A=>{"index"in A&&_(0,b=A.index)},[b,x,w,M,m,y,g,v,E,S,O,P]}class BeaconPowerUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$n,create_fragment$m,safe_not_equal,{index:0})}}function create_fragment$l(l){let d,_,m,y,g,v,b;return{c(){d=element("label"),_=element("input"),m=space(),y=element("span"),g=text("S"),this.h()},l(k){d=claim_element(k,"LABEL",{class:!0});var x=children(d);_=claim_element(x,"INPUT",{type:!0,class:!0}),m=claim_space(x),y=claim_element(x,"SPAN",{class:!0});var w=children(y);g=claim_text(w,"S"),w.forEach(detach),x.forEach(detach),this.h()},h(){attr(_,"type","checkbox"),attr(_,"class","checkbox w-6 h-6"),attr(y,"class","game-text text-med text-center select-none cursor-pointer"),attr(d,"class","input-wrapper mr-3")},m(k,x){insert_hydration(k,d,x),append_hydration(d,_),_.checked=l[1][l[0]],append_hydration(d,m),append_hydration(d,y),append_hydration(y,g),v||(b=[listen(_,"click",l[2]),listen(_,"change",l[3])],v=!0)},p(k,[x]){x&3&&(_.checked=k[1][k[0]])},i:noop,o:noop,d(k){k&&detach(d),v=!1,run_all(b)}}}function instance$m(l,d,_){let m;component_subscribe(l,beaconSmartSplits,b=>_(1,m=b));let{index:y}=d;const g=()=>console.log("clicked");function v(){m[y]=this.checked,beaconSmartSplits.set(m)}return l.$$set=b=>{"index"in b&&_(0,y=b.index)},[y,m,g,v]}class BeaconSmartSplitChecks extends SvelteComponent{constructor(d){super(),init(this,d,instance$m,create_fragment$l,safe_not_equal,{index:0})}}function get_each_context$h(l,d,_){const m=l.slice();return m[32]=d[_],m[34]=_,m}function get_each_context_1$6(l,d,_){const m=l.slice();return m[32]=d[_],m[34]=_,m}function create_else_block_2$1(l){let d;return{c(){d=element("div"),this.h()},l(_){d=claim_element(_,"DIV",{class:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"class","col-span-12")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_6$5(l){let d,_,m,y,g,v,b,k,x,w;function I(S,N){return S[11]["beacon tools ii"]?create_if_block_7$3:create_else_block_1$2}let M=I(l),E=M(l);return{c(){d=element("div"),_=text("Split Beacons Evenly"),m=space(),E.c(),y=space(),g=element("div"),v=text("Recall Beacons"),b=space(),k=element("div"),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var N=children(d);_=claim_text(N,"Split Beacons Evenly"),N.forEach(detach),m=claim_space(S),E.l(S),y=claim_space(S),g=claim_element(S,"DIV",{class:!0});var D=children(g);v=claim_text(D,"Recall Beacons"),D.forEach(detach),b=claim_space(S),k=claim_element(S,"DIV",{class:!0}),children(k).forEach(detach),this.h()},h(){attr(d,"class","game-btn m-1 text-med col-span-3"),attr(g,"class","game-btn m-1 text-med col-span-3"),attr(k,"class","col-span-1")},m(S,N){insert_hydration(S,d,N),append_hydration(d,_),insert_hydration(S,m,N),E.m(S,N),insert_hydration(S,y,N),insert_hydration(S,g,N),append_hydration(g,v),insert_hydration(S,b,N),insert_hydration(S,k,N),x||(w=[listen(d,"click",l[24]),listen(g,"click",l[26])],x=!0)},p(S,N){M===(M=I(S))&&E?E.p(S,N):(E.d(1),E=M(S),E&&(E.c(),E.m(y.parentNode,y)))},d(S){S&&detach(d),S&&detach(m),E.d(S),S&&detach(y),S&&detach(g),S&&detach(b),S&&detach(k),x=!1,run_all(w)}}}function create_else_block_1$2(l){let d;return{c(){d=element("div"),this.h()},l(_){d=claim_element(_,"DIV",{class:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"class","col-span-3")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_7$3(l){let d,_,m,y;return{c(){d=element("div"),_=text("Smart Split Beacons"),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);_=claim_text(v,"Smart Split Beacons"),v.forEach(detach),this.h()},h(){attr(d,"class","game-btn m-1 text-med col-span-3")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),m||(y=listen(d,"click",l[25]),m=!0)},p:noop,d(g){g&&detach(d),m=!1,y()}}}function create_if_block_5$7(l){let d,_,m=l[5][l[34]]+"",y;return{c(){d=element("div"),_=text("Unlock at mining level "),y=text(m),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);_=claim_text(v,"Unlock at mining level "),y=claim_text(v,m),v.forEach(detach),this.h()},h(){attr(d,"class","col-span-12 py-3 text-center text-large "+getTextColor(l[34]))},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),append_hydration(d,y)},p(g,v){v[0]&32&&m!==(m=g[5][g[34]]+"")&&set_data(y,m)},i:noop,o:noop,d(g){g&&detach(d)}}}function create_if_block_1$f(l){let d,_,m=l[34]<10&&create_if_block_2$c(l);return{c(){m&&m.c(),d=empty()},l(y){m&&m.l(y),d=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,d,g),_=!0},p(y,g){y[34]<10&&m.p(y,g)},i(y){_||(transition_in(m),_=!0)},o(y){transition_out(m),_=!1},d(y){m&&m.d(y),y&&detach(d)}}}function create_if_block_2$c(l){let d,_,m,y,g=l[19](l[3][l[34]],0)+"",v,b,k,x,w=l[19](l[9][l[34]],0)+"",I,M,E=l[21](l[12][l[34]],l[12][l[34]]>1e6?1:0)+"",S,N,D,O,q,P=l[20](Math.max(l[1][l[34]],1),2,!0)+"",A,C,L,G,V,T,R,Y,Q=l[13][l[34]]+"",te,W,z,H,F=l[20](l[8][l[34]]/l[7][l[34]],l[8][l[34]]/l[7][l[34]]<1e-4?4:2)+"",X,ae,re,j,$,ne,me;_=new BeaconToggleButton({props:{index:l[34]}});let ce=l[9][l[34]]>1e4&&create_if_block_4$8(l);const oe=[create_if_block_3$9,create_else_block$a],U=[];function Z(B,K){return B[11]["beacon tools ii"]?0:1}return L=Z(l),G=U[L]=oe[L](l),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),y=element("div"),v=text(g),b=space(),k=element("div"),x=element("div"),I=text(w),M=text(" / "),S=text(E),N=space(),ce&&ce.c(),D=space(),O=element("div"),q=text("+"),A=text(P),C=space(),G.c(),V=space(),T=element("div"),R=element("div"),Y=element("div"),te=text(Q),W=space(),z=element("div"),H=text("[ "),X=text(F),ae=text(" ]"),re=space(),j=element("div"),$=element("div"),ne=element("div"),this.h()},l(B){d=claim_element(B,"DIV",{class:!0});var K=children(d);claim_component(_.$$.fragment,K),K.forEach(detach),m=claim_space(B),y=claim_element(B,"DIV",{class:!0});var J=children(y);v=claim_text(J,g),J.forEach(detach),b=claim_space(B),k=claim_element(B,"DIV",{class:!0});var se=children(k);x=claim_element(se,"DIV",{class:!0});var de=children(x);I=claim_text(de,w),M=claim_text(de," / "),S=claim_text(de,E),N=claim_space(de),ce&&ce.l(de),de.forEach(detach),D=claim_space(se),O=claim_element(se,"DIV",{class:!0});var _e=children(O);q=claim_text(_e,"+"),A=claim_text(_e,P),_e.forEach(detach),se.forEach(detach),C=claim_space(B),G.l(B),V=claim_space(B),T=claim_element(B,"DIV",{class:!0});var pe=children(T);R=claim_element(pe,"DIV",{class:!0});var ue=children(R);Y=claim_element(ue,"DIV",{class:!0});var ie=children(Y);te=claim_text(ie,Q),ie.forEach(detach),W=claim_space(ue),z=claim_element(ue,"DIV",{class:!0});var ge=children(z);H=claim_text(ge,"[ "),X=claim_text(ge,F),ae=claim_text(ge," ]"),ge.forEach(detach),ue.forEach(detach),re=claim_space(pe),j=claim_element(pe,"DIV",{class:!0});var ye=children(j);$=claim_element(ye,"DIV",{class:!0});var ve=children($);ne=claim_element(ve,"DIV",{class:!0,style:!0}),children(ne).forEach(detach),ve.forEach(detach),ye.forEach(detach),pe.forEach(detach),this.h()},h(){attr(d,"class","col-span-1"),attr(y,"class","col-span-1 my-1 text-left pl-1 game-text"),attr(x,"class","row-span-1 text-center game-text text-small"),attr(O,"class","row-span-1 text-center game-text text-small"),attr(k,"class","col-span-2 grid grid-rows-2"),attr(Y,"class","col-span-3 "+getTextColor(l[34])+" text-left"),attr(z,"class","col-span-2 text-right"),attr(R,"class","row-span-1 grid grid-cols-5 tooltip-text"),attr(ne,"class",getBgColor(l[34])+" h-1.5 rounded-full"),set_style(ne,"width",(l[14].beacons?"100":l[2][l[34]])+"%"),attr($,"class","w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700"),attr(j,"class","mine-bar-wrapper align-middle"),attr(T,"class","col-span-7 grid grid-rows-2")},m(B,K){insert_hydration(B,d,K),mount_component(_,d,null),insert_hydration(B,m,K),insert_hydration(B,y,K),append_hydration(y,v),insert_hydration(B,b,K),insert_hydration(B,k,K),append_hydration(k,x),append_hydration(x,I),append_hydration(x,M),append_hydration(x,S),append_hydration(x,N),ce&&ce.m(x,null),append_hydration(k,D),append_hydration(k,O),append_hydration(O,q),append_hydration(O,A),insert_hydration(B,C,K),U[L].m(B,K),insert_hydration(B,V,K),insert_hydration(B,T,K),append_hydration(T,R),append_hydration(R,Y),append_hydration(Y,te),append_hydration(R,W),append_hydration(R,z),append_hydration(z,H),append_hydration(z,X),append_hydration(z,ae),append_hydration(T,re),append_hydration(T,j),append_hydration(j,$),append_hydration($,ne),me=!0},p(B,K){(!me||K[0]&8)&&g!==(g=B[19](B[3][B[34]],0)+"")&&set_data(v,g),(!me||K[0]&512)&&w!==(w=B[19](B[9][B[34]],0)+"")&&set_data(I,w),(!me||K[0]&4096)&&E!==(E=B[21](B[12][B[34]],B[12][B[34]]>1e6?1:0)+"")&&set_data(S,E),B[9][B[34]]>1e4?ce?ce.p(B,K):(ce=create_if_block_4$8(B),ce.c(),ce.m(x,null)):ce&&(ce.d(1),ce=null),(!me||K[0]&2)&&P!==(P=B[20](Math.max(B[1][B[34]],1),2,!0)+"")&&set_data(A,P);let J=L;L=Z(B),L!==J&&(group_outros(),transition_out(U[J],1,1,()=>{U[J]=null}),check_outros(),G=U[L],G||(G=U[L]=oe[L](B),G.c()),transition_in(G,1),G.m(V.parentNode,V)),(!me||K[0]&8192)&&Q!==(Q=B[13][B[34]]+"")&&set_data(te,Q),(!me||K[0]&384)&&F!==(F=B[20](B[8][B[34]]/B[7][B[34]],B[8][B[34]]/B[7][B[34]]<1e-4?4:2)+"")&&set_data(X,F),(!me||K[0]&16388)&&set_style(ne,"width",(B[14].beacons?"100":B[2][B[34]])+"%")},i(B){me||(transition_in(_.$$.fragment,B),transition_in(G),me=!0)},o(B){transition_out(_.$$.fragment,B),transition_out(G),me=!1},d(B){B&&detach(d),destroy_component(_),B&&detach(m),B&&detach(y),B&&detach(b),B&&detach(k),ce&&ce.d(),B&&detach(C),U[L].d(B),B&&detach(V),B&&detach(T)}}}function create_if_block_4$8(l){let d,_,m=l[19](formula.calcBeaconPowerMulti(l[9][l[34]]),2)+"",y,g;return{c(){d=element("span"),_=text("(x"),y=text(m),g=text(")"),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var b=children(d);_=claim_text(b,"(x"),y=claim_text(b,m),g=claim_text(b,")"),b.forEach(detach),this.h()},h(){attr(d,"class","text-cyan-300 text-small")},m(v,b){insert_hydration(v,d,b),append_hydration(d,_),append_hydration(d,y),append_hydration(d,g)},p(v,b){b[0]&512&&m!==(m=v[19](formula.calcBeaconPowerMulti(v[9][v[34]]),2)+"")&&set_data(y,m)},d(v){v&&detach(d)}}}function create_else_block$a(l){let d;return{c(){d=element("div"),this.h()},l(_){d=claim_element(_,"DIV",{class:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"class","col-span-1")},m(_,m){insert_hydration(_,d,m)},i:noop,o:noop,d(_){_&&detach(d)}}}function create_if_block_3$9(l){let d,_,m;return _=new BeaconSmartSplitChecks({props:{index:l[34]}}),{c(){d=element("div"),create_component(_.$$.fragment),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var g=children(d);claim_component(_.$$.fragment,g),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-1 py-1 items-center px-1")},m(y,g){insert_hydration(y,d,g),mount_component(_,d,null),m=!0},i(y){m||(transition_in(_.$$.fragment,y),m=!0)},o(y){transition_out(_.$$.fragment,y),m=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_each_block_1$6(l){let d,_,m,y;const g=[create_if_block_1$f,create_if_block_5$7],v=[];function b(k,x){return k[6].level>=k[5][k[34]]?0:k[34]<10?1:-1}return~(d=b(l))&&(_=v[d]=g[d](l)),{c(){_&&_.c(),m=empty()},l(k){_&&_.l(k),m=empty()},m(k,x){~d&&v[d].m(k,x),insert_hydration(k,m,x),y=!0},p(k,x){let w=d;d=b(k),d===w?~d&&v[d].p(k,x):(_&&(group_outros(),transition_out(v[w],1,1,()=>{v[w]=null}),check_outros()),~d?(_=v[d],_?_.p(k,x):(_=v[d]=g[d](k),_.c()),transition_in(_,1),_.m(m.parentNode,m)):_=null)},i(k){y||(transition_in(_),y=!0)},o(k){transition_out(_),y=!1},d(k){~d&&v[d].d(k),k&&detach(m)}}}function create_if_block$j(l){let d,_,m,y;return m=new BeaconPowerUpgradeButton({props:{index:l[34]}}),{c(){d=element("div"),_=space(),create_component(m.$$.fragment),this.h()},l(g){d=claim_element(g,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(g),claim_component(m.$$.fragment,g),this.h()},h(){attr(d,"class","pt-1")},m(g,v){insert_hydration(g,d,v),insert_hydration(g,_,v),mount_component(m,g,v),y=!0},i(g){y||(transition_in(m.$$.fragment,g),y=!0)},o(g){transition_out(m.$$.fragment,g),y=!1},d(g){g&&detach(d),g&&detach(_),destroy_component(m,g)}}}function create_each_block$h(l){let d=l[15][l[34]].unlockAt(),_,m,y=d&&create_if_block$j(l);return{c(){y&&y.c(),_=empty()},l(g){y&&y.l(g),_=empty()},m(g,v){y&&y.m(g,v),insert_hydration(g,_,v),m=!0},p(g,v){v[0]&32768&&(d=g[15][g[34]].unlockAt()),d?y?v[0]&32768&&transition_in(y,1):(y=create_if_block$j(g),y.c(),transition_in(y,1),y.m(_.parentNode,_)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(g){m||(transition_in(y),m=!0)},o(g){transition_out(y),m=!1},d(g){y&&y.d(g),g&&detach(_)}}}function create_fragment$k(l){let d,_,m,y,g=l[19](l[4].beaconPower||0)+"",v,b,k,x,w,I=l[19](25*l[9].reduce(l[22],1)*l[0][0],0)+"",M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F;function X(U,Z){return U[11]["beacon tools"]?create_if_block_6$5:create_else_block_2$1}let ae=X(l),re=ae(l),j=l[9],$=[];for(let U=0;U<j.length;U+=1)$[U]=create_each_block_1$6(get_each_context_1$6(l,j,U));const ne=U=>transition_out($[U],1,1,()=>{$[U]=null});let me=l[15],ce=[];for(let U=0;U<me.length;U+=1)ce[U]=create_each_block$h(get_each_context$h(l,me,U));const oe=U=>transition_out(ce[U],1,1,()=>{ce[U]=null});return{c(){d=element("div"),_=element("div"),m=text("You have "),y=element("span"),v=text(g),b=text(" beacon power."),k=space(),x=element("div"),w=text("+"),M=text(I),E=text(` 
    / sec - multiplied for each beacon path above level 10,000`),S=space(),N=element("div"),D=space(),O=element("div"),q=element("div"),P=element("input"),A=space(),re.c(),C=space();for(let U=0;U<$.length;U+=1)$[U].c();L=space(),G=element("div"),V=space();for(let U=0;U<ce.length;U+=1)ce[U].c();T=space(),R=element("div"),Y=space(),Q=element("div"),te=text("Beacon level progress requirements scale exponentially, not linearly. "),W=element("br"),this.h()},l(U){d=claim_element(U,"DIV",{class:!0});var Z=children(d);_=claim_element(Z,"DIV",{class:!0});var B=children(_);m=claim_text(B,"You have "),y=claim_element(B,"SPAN",{class:!0});var K=children(y);v=claim_text(K,g),K.forEach(detach),b=claim_text(B," beacon power."),B.forEach(detach),k=claim_space(Z),x=claim_element(Z,"DIV",{class:!0});var J=children(x);w=claim_text(J,"+"),M=claim_text(J,I),E=claim_text(J,` 
    / sec - multiplied for each beacon path above level 10,000`),J.forEach(detach),S=claim_space(Z),N=claim_element(Z,"DIV",{class:!0}),children(N).forEach(detach),D=claim_space(Z),O=claim_element(Z,"DIV",{class:!0});var se=children(O);q=claim_element(se,"DIV",{class:!0});var de=children(q);P=claim_element(de,"INPUT",{id:!0,class:!0,placeholder:!0}),de.forEach(detach),A=claim_space(se),re.l(se),C=claim_space(se);for(let pe=0;pe<$.length;pe+=1)$[pe].l(se);L=claim_space(se),G=claim_element(se,"DIV",{class:!0}),children(G).forEach(detach),V=claim_space(se);for(let pe=0;pe<ce.length;pe+=1)ce[pe].l(se);T=claim_space(se),R=claim_element(se,"DIV",{}),children(R).forEach(detach),se.forEach(detach),Z.forEach(detach),Y=claim_space(U),Q=claim_element(U,"DIV",{class:!0});var _e=children(Q);te=claim_text(_e,"Beacon level progress requirements scale exponentially, not linearly. "),W=claim_element(_e,"BR",{}),_e.forEach(detach),this.h()},h(){attr(y,"class","text-cyan-300 font-bold"),attr(_,"class","beacon-power-display text-center text-large game-text"),attr(x,"class","beacon-power-tooltip text-center tooltip-text"),attr(N,"class","py-2"),attr(P,"id","max"),attr(P,"class","content-center w-20 bg-gray-700 text-white"),attr(P,"placeholder","1"),attr(q,"class","p-1 col-span-2"),attr(G,"class","py-2"),attr(O,"class","beacon-assign-grid grid grid-cols-12"),attr(d,"class","wrapper py-2"),attr(Q,"class","pb-16 pt-8 tooltip-text text-center w-full italic")},m(U,Z){insert_hydration(U,d,Z),append_hydration(d,_),append_hydration(_,m),append_hydration(_,y),append_hydration(y,v),append_hydration(_,b),append_hydration(d,k),append_hydration(d,x),append_hydration(x,w),append_hydration(x,M),append_hydration(x,E),append_hydration(d,S),append_hydration(d,N),append_hydration(d,D),append_hydration(d,O),append_hydration(O,q),append_hydration(q,P),set_input_value(P,l[10]),append_hydration(O,A),re.m(O,null),append_hydration(O,C);for(let B=0;B<$.length;B+=1)$[B]&&$[B].m(O,null);append_hydration(O,L),append_hydration(O,G),append_hydration(O,V);for(let B=0;B<ce.length;B+=1)ce[B]&&ce[B].m(O,null);append_hydration(O,T),append_hydration(O,R),insert_hydration(U,Y,Z),insert_hydration(U,Q,Z),append_hydration(Q,te),append_hydration(Q,W),z=!0,H||(F=listen(P,"input",l[23]),H=!0)},p(U,Z){if((!z||Z[0]&16)&&g!==(g=U[19](U[4].beaconPower||0)+"")&&set_data(v,g),(!z||Z[0]&513)&&I!==(I=U[19](25*U[9].reduce(U[22],1)*U[0][0],0)+"")&&set_data(M,I),Z[0]&1024&&P.value!==U[10]&&set_input_value(P,U[10]),ae===(ae=X(U))&&re?re.p(U,Z):(re.d(1),re=ae(U),re&&(re.c(),re.m(O,C))),Z[0]&3701742){j=U[9];let B;for(B=0;B<j.length;B+=1){const K=get_each_context_1$6(U,j,B);$[B]?($[B].p(K,Z),transition_in($[B],1)):($[B]=create_each_block_1$6(K),$[B].c(),transition_in($[B],1),$[B].m(O,L))}for(group_outros(),B=j.length;B<$.length;B+=1)ne(B);check_outros()}if(Z[0]&32768){me=U[15];let B;for(B=0;B<me.length;B+=1){const K=get_each_context$h(U,me,B);ce[B]?(ce[B].p(K,Z),transition_in(ce[B],1)):(ce[B]=create_each_block$h(K),ce[B].c(),transition_in(ce[B],1),ce[B].m(O,T))}for(group_outros(),B=me.length;B<ce.length;B+=1)oe(B);check_outros()}},i(U){if(!z){for(let Z=0;Z<j.length;Z+=1)transition_in($[Z]);for(let Z=0;Z<me.length;Z+=1)transition_in(ce[Z]);z=!0}},o(U){$=$.filter(Boolean);for(let Z=0;Z<$.length;Z+=1)transition_out($[Z]);ce=ce.filter(Boolean);for(let Z=0;Z<ce.length;Z+=1)transition_out(ce[Z]);z=!1},d(U){U&&detach(d),re.d(),destroy_each($,U),destroy_each(ce,U),U&&detach(Y),U&&detach(Q),H=!1,F()}}}function getBgColor(l){return l<3?"bg-emerald-400":l<6?"bg-yellow-400":l<8?"bg-orange-400":"bg-red-400"}function getTextColor(l){return l<3?"text-emerald-400":l<6?"text-amber-200":l<8?"text-orange-400":"text-red-400"}function instance$l(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P;component_subscribe(l,beaconActivations,H=>_(3,y=H)),component_subscribe(l,wallet,H=>_(4,g=H)),component_subscribe(l,beaconSmartSplits,H=>_(27,v=H)),component_subscribe(l,beaconMiningLevelReqs,H=>_(5,b=H)),component_subscribe(l,mineLevel,H=>_(6,k=H)),component_subscribe(l,settings,H=>_(28,x=H)),component_subscribe(l,beaconNextReqs,H=>_(7,w=H)),component_subscribe(l,beaconProgress,H=>_(8,I=H)),component_subscribe(l,beaconBonuses,H=>_(0,M=H)),component_subscribe(l,beaconLevels,H=>_(9,E=H)),component_subscribe(l,beaconSpendAmt,H=>_(10,S=H)),component_subscribe(l,automationItemsUnlocked,H=>_(11,N=H)),component_subscribe(l,beaconMaxLevels,H=>_(12,D=H)),component_subscribe(l,beaconNameText,H=>_(13,O=H)),component_subscribe(l,antiFlickerFlags,H=>_(14,q=H)),component_subscribe(l,beaconUpgrades,H=>_(15,P=H));let A=M;onMount(()=>{_(1,A=M),setInterval(()=>{for(let H=0;H<30;H++)_(2,m[H]=Math.min(100,I[H]/w[H]*100),m);_(2,m)},x.UPDATE_SPEED)}),onDestroy(()=>{});function C(){let H=!1,F=0;for(;!H&&F<10;)k.level<b[F]&&(H=!0),F++;if(F==10&&(F=11),F==1){set_store_value(beaconActivations,y[0]+=g.beacons,y),set_store_value(wallet,g.beacons=0,g);return}for(let re in y)set_store_value(wallet,g.beacons+=y[re],g),set_store_value(beaconActivations,y[re]=0,y);let X=0;const ae=g.beacons;for(let re=0;re<F-1;re++)set_store_value(beaconActivations,y[re]=Math.floor(ae/(F-1)),y),X+=y[re];set_store_value(wallet,g.beacons-=X,g),X<formula.sumArray(y)&&set_store_value(wallet,g.beacons+=Math.floor(formula.sumArray(y)-X),g)}function L(){if(formula.sumArray(v)==0)return;let H=!1,F=0,X=0;for(;!H&&X<10;)k.level<b[X]&&(H=!0),v[X]&&F++,X++;F==10&&(F=11),F==0&&(F=1);for(let j in y)set_store_value(wallet,g.beacons+=y[j],g),set_store_value(beaconActivations,y[j]=0,y);let ae=0;const re=g.beacons;for(let j=0;j<X-1;j++)v[j]&&(set_store_value(beaconActivations,y[j]=Math.floor(re/F),y),ae+=y[j]);set_store_value(wallet,g.beacons-=ae,g),ae<formula.sumArray(y)&&set_store_value(wallet,g.beacons+=Math.floor(formula.sumArray(y)-ae),g),console.log(v)}function G(){for(let H in y)set_store_value(wallet,g.beacons+=y[H],g),set_store_value(beaconActivations,y[H]=0,y)}const V=(H,F=0)=>H<1e9?H.toFixed(H<1e3?F:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):H.toExponential(3).toString().replace("+",""),T=(H,F=3,X=!1)=>(X&&(H-=1),H<1e9?(H*100).toFixed(H*100<1e3?F:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(H*100).toExponential(F).toString().replace("+","")+"%"),R=(H,F=3)=>H.toExponential(F).toString().replace("+",""),Y=(H,F)=>H*(F>1e4?Math.log10(F)-3:1);function Q(){S=this.value,beaconSpendAmt.set(S)}const te=()=>C(),W=()=>L(),z=()=>G();return l.$$.update=()=>{l.$$.dirty[0]&1&&_(1,A=M)},_(2,m=Array(30).fill(0)),[M,A,m,y,g,b,k,w,I,E,S,N,D,O,q,P,C,L,G,V,T,R,Y,Q,te,W,z]}class Beacons extends SvelteComponent{constructor(d){super(),init(this,d,instance$l,create_fragment$k,safe_not_equal,{},null,[-1,-1])}}const PROGRESS_BASE=1,MASTERY_GAIN_UPDATE_AT=11;function instance$k(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae,re,j,$,ne,me,ce,oe,U,Z,B,K,J,se,de,_e,pe,ue,ie,ge,ye,ve;component_subscribe(l,enchantProgress,ee=>_(12,m=ee)),component_subscribe(l,wallet,ee=>_(13,y=ee)),component_subscribe(l,radiumProgress,ee=>_(14,g=ee)),component_subscribe(l,miningUpgrades,ee=>_(15,v=ee)),component_subscribe(l,miningUpgradeLevelsFree,ee=>_(16,b=ee)),component_subscribe(l,miningUpgradeLevels,ee=>_(17,k=ee)),component_subscribe(l,miningUpgradeLevelsBought,ee=>_(18,x=ee)),component_subscribe(l,enchantUpgradeLevels,ee=>_(19,w=ee)),component_subscribe(l,enchantUpgrades,ee=>_(20,I=ee)),component_subscribe(l,masteryItemLevels,ee=>_(21,M=ee)),component_subscribe(l,masteryItemInfo,ee=>_(22,E=ee)),component_subscribe(l,masteryItemReqs,ee=>_(23,S=ee)),component_subscribe(l,automationItemsUnlocked,ee=>_(24,N=ee)),component_subscribe(l,beaconLevels,ee=>_(25,D=ee)),component_subscribe(l,beaconFormulas,ee=>_(26,O=ee)),component_subscribe(l,beaconBonuses,ee=>_(27,q=ee)),component_subscribe(l,beaconPowerFlavorText,ee=>_(28,P=ee)),component_subscribe(l,beaconNums,ee=>_(29,A=ee)),component_subscribe(l,beaconNextReqs,ee=>_(30,C=ee)),component_subscribe(l,beaconProgress,ee=>_(31,L=ee)),component_subscribe(l,beaconUpgradeLevels,ee=>_(32,G=ee)),component_subscribe(l,beaconUpgrades,ee=>_(33,V=ee)),component_subscribe(l,beaconActivations,ee=>_(34,T=ee)),component_subscribe(l,keyCrafts,ee=>_(35,R=ee)),component_subscribe(l,keyCraftMastery,ee=>_(36,Y=ee)),component_subscribe(l,craftMasteryLevel,ee=>_(37,Q=ee)),component_subscribe(l,craftMasteryNextReq,ee=>_(38,te=ee)),component_subscribe(l,craftMasteryProgress,ee=>_(39,W=ee)),component_subscribe(l,keyCraftTimes,ee=>_(40,z=ee)),component_subscribe(l,keyCraftAmount,ee=>_(41,H=ee)),component_subscribe(l,visibleTier,ee=>_(42,F=ee)),component_subscribe(l,miningDropTable,ee=>_(43,X=ee)),component_subscribe(l,keyGainFlavorText,ee=>_(44,ae=ee)),component_subscribe(l,progress,ee=>_(45,re=ee)),component_subscribe(l,keyFinderBases,ee=>_(46,j=ee)),component_subscribe(l,gemGainFlavorText,ee=>_(47,$=ee)),component_subscribe(l,allMultipliers,ee=>_(48,ne=ee)),component_subscribe(l,buttonStats,ee=>_(49,me=ee)),component_subscribe(l,buttonUpgradeLevels,ee=>_(50,ce=ee)),component_subscribe(l,buttonUpgrades,ee=>_(51,oe=ee)),component_subscribe(l,mineLevel,ee=>_(52,U=ee)),component_subscribe(l,layer,ee=>_(53,Z=ee)),component_subscribe(l,progressAverage,ee=>_(54,B=ee)),component_subscribe(l,enchantThreshold,ee=>_(55,K=ee)),component_subscribe(l,progressThisTick,ee=>_(56,J=ee)),component_subscribe(l,settings,ee=>_(57,se=ee)),component_subscribe(l,progressThreshold,ee=>_(58,de=ee)),component_subscribe(l,challengeProgress,ee=>_(59,_e=ee)),component_subscribe(l,masteryNextReq,ee=>_(60,pe=ee)),component_subscribe(l,sumUpgradeLevels,ee=>_(61,ee)),component_subscribe(l,keyUpgradeLevels,ee=>_(62,ee)),component_subscribe(l,thoriumDepositActive,ee=>_(63,ue=ee)),component_subscribe(l,permaWallet,ee=>_(64,ie=ee)),component_subscribe(l,unlockedRes,ee=>_(65,ge=ee)),component_subscribe(l,activityLog,ee=>_(66,ye=ee)),component_subscribe(l,activityLogShow,ee=>_(67,ve=ee));const he=(ee,Ve=0)=>(ee=Math.floor(ee),ee<1e9?ee.toFixed(Ve).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):ee.toExponential(3).toString().replace("+",""));function we(ee,Ve,Ie){if(!ve[Ie])return;const be=["["+new Date().toLocaleTimeString("it-IT")+"] "+ee,Ve];set_store_value(activityLog,ye=[...ye,be],ye),ye.length>100&&ye.shift()}let Me=Date.now();const Ae=se.UPDATE_SPEED;let Ne,xe,Ue=0;onMount(()=>{ut(),Ne=Date.now(),setInterval(()=>{xe=(Date.now()-Ne)/Ae*1,Qe(xe),De(),Oe(),tt(),kt(xe),se.activeTab!=="beacons"?Ue>=10?($e(xe*10,!0),Ue=0):Ue++:($e(xe),Ue++),N.beaconizer&&set_store_value(wallet,y.beacons=(y.beacons||0)+15*(Ae*xe/1e3),y),Ne=Date.now()},Ae),setInterval(()=>{for(let[ee,Ve]of Object.entries(y))Ve>0&&!ge.has(ee)&&ge.add(ee);Ee()},773+Math.random()*227),setInterval(()=>{miningDropTable.updateTable()},5153+Math.random()*139),setInterval(()=>{Ke(xe)},Ae+Math.random()*3),setInterval(()=>{Se()},1003)});function Ee(){for(let ee of Object.keys(y))(!ie[ee]||ie[ee]==null)&&set_store_value(permaWallet,ie[ee]=y[ee],ie),y[ee]&&set_store_value(permaWallet,ie[ee]=y[ee]>ie[ee]?y[ee]:ie[ee],ie)}function Se(){const ee=oe[0].formula(ce[0]);Math.random()<ee&&ue=="off"&&set_store_value(thoriumDepositActive,ue="on",ue)}function Le(){y.mastery>=pe&&(set_store_value(wallet,y.mastery-=pe,y),set_store_value(wallet,y.trophies=(y.trophies||0)+1,y),set_store_value(wallet,y.totalTrophies=(y.totalTrophies||0)+1,y),set_store_value(masteryNextReq,pe=formula.calcMasteryNextReq(),pe))}function De(){if(U.xp>=U.xpNextReq){set_store_value(mineLevel,U.xp-=U.xpNextReq,U),set_store_value(mineLevel,U.level++,U);const ee=U.level,Ve=15e-5;set_store_value(mineLevel,U.xpNextReq=100*ee**2.8*Math.pow(1.01+ee**2.1*Ve,ee)*Math.pow(2+Math.max(0,ee-69)*.3,ee>69?ee:0),U),we("Mining level increased to "+U.level,"text-sky-500","always")}}function Oe(){if(Z.blocks>=Z.blocksNextReq){set_store_value(layer,Z.blocks-=Z.blocksNextReq,Z),set_store_value(layer,Z.layer++,Z);const ee=Z.layer;set_store_value(layer,Z.blocksNextReq=100+ee*10+Math.floor(ee**2*.125)+(ee>1e3?(ee-1e3)**3*.07:1)+(ee>1e4?(ee-1e4)**4*.01:1)+(ee>1e5?(ee-1e5)**5*.004:1)+(ee>1e6?(ee-1e6)**6*.0015:1),Z),we("Layer "+(Z.layer-1)+" mined","text-yellow-300","always")}}let Ce=1;function Ke(ee){let Ve=ne.mineSpeed.formula(y.artifacts||0);const Ie=formula.getAntimatterBonusAmount(0);let fe=v[0].formula(k[0])*v[13].formula(k[13])*Math.max(1,q[1])*oe[3].formula(ce[3])*Ce*Ve*Ie,be=de.gems*(Ae/1e3)*(25*ascFormula.getVal("fire"));fe>be&&(fe=be+Math.sqrt(fe-be)),set_store_value(progressAverage,B.gems=fe,B),set_store_value(progressThisTick,J.gems=fe*ee,J);let Te=(k[3]>0?PROGRESS_BASE*v[3].formula(k[3]):0)*v[26].formula(k[26])*Ce*Ve*Ie;be=de.key1*(Ae/1e3)*25,Te>be&&(Te=be+Math.sqrt(Te-be)),set_store_value(progressAverage,B.key1=Te,B),set_store_value(progressThisTick,J.key1=Te*ee,J);let Je=(k[4]>0?PROGRESS_BASE*v[4].formula(k[4]):0)*v[26].formula(k[26])*Ce*Ve*Ie;be=de.key2*(Ae/1e3)*10,Je>be&&(Je=be+Math.sqrt(Je-be)),set_store_value(progressAverage,B.key2=Je,B),set_store_value(progressThisTick,J.key2=Je*ee,J);let We=(k[18]>0?PROGRESS_BASE*v[18].formula(k[18]):0)*v[26].formula(k[26])*q[5]*Ce*Ve*Ie;be=de.key3*(Ae/1e3)*1,We>be&&(We=be+Math.sqrt(We-be)),set_store_value(progressAverage,B.key3=We,B),set_store_value(progressThisTick,J.key3=We*ee,J);let Ge=(k[38]>0?PROGRESS_BASE*v[38].formula(k[38]):0)*v[26].formula(k[26])*q[5]*Ce*Ve*Ie;be=de.key3*(Ae/1e3)*1,Ge>be&&(Ge=be+Math.sqrt(Ge-be)),set_store_value(progressAverage,B.key4=Ge,B),set_store_value(progressThisTick,J.key4=Ge*ee,J)}let je=0,ze=0,Fe=0;function Xe(){isNaN(m.t1)&&set_store_value(enchantProgress,m.t1=ze,m),isNaN(U.xp)&&set_store_value(mineLevel,U.xp=je,U),isNaN(J.gems)&&set_store_value(progressThisTick,J.gems=0,J),isNaN(J.key1)&&set_store_value(progressThisTick,J.key1=0,J),isNaN(J.key2)&&set_store_value(progressThisTick,J.key2=0,J),isNaN(J.key3)&&set_store_value(progressThisTick,J.key3=0,J),isNaN(J.key4)&&set_store_value(progressThisTick,J.key4=0,J),isNaN(J.key5)&&set_store_value(progressThisTick,J.key5=0,J),isNaN(y.challengePoints)&&set_store_value(wallet,y.challengePoints=Fe,y)}function Qe(ee){ze=m.t1||0,je=U.xp||0,Fe=_e||0;const Ve=de.gems,Ie=[de.key1,de.key2,de.key3,de.key4,de.key5];if(!(ee>6e3&&!se.offlineProgress)){set_store_value(wallet,y.crystals+=se.speed*(ee*formula.calcCrystalGainFromRadium())/Ae/2,y);for(let[fe,be]of Object.entries(J))isNaN(re[fe])&&set_store_value(progress,re[fe]=0,re),set_store_value(progress,re[fe]+=be,re);if(re.gems>=Ve){for(let[fe,be]of Object.entries(m))set_store_value(enchantProgress,m[fe]+=formula.calcEnchantProgressGain(re.gems/Ve),m),m[fe]>=K[fe]&&(yt(Math.floor(m[fe]/K[fe]),fe.substring(1)),set_store_value(enchantProgress,m[fe]%=K[fe],m));He(re.gems/Ve,B.gems),et(Math.floor(re.gems/Ve)),qe(re.gems/Ve),set_store_value(mineLevel,U.xp+=re.gems/Ve*formula.getMineXPPerCycle(),U),set_store_value(layer,Z.blocks+=re.gems/Ve*formula.getLayersPerCycle(),Z),set_store_value(progress,re.gems=0,re)}re.key1>=Ie[0]&&ot(1,Math.floor(re.key1/Ie[0]),Ie),re.key2>=Ie[1]&&ot(2,Math.floor(re.key2/Ie[1]),Ie),re.key3>=Ie[2]&&ot(3,Math.floor(re.key3/Ie[2]),Ie),re.key4>=Ie[3]&&ot(4,Math.floor(re.key4/Ie[3]),Ie),set_store_value(wallet,y.fame=(y.fame||0)+v[28].formula(k[28])*(Ae/1e3),y),Xe()}}function qe(ee){if(!(U.level<8)&&(set_store_value(radiumProgress,g[0]+=ee*formula.calcRadioactivityGain(),g),g[0]>=g[1])){isNaN(y.radium)&&set_store_value(wallet,y.radium=0,y),set_store_value(wallet,y.radium=(y.radium||0)+Math.max(1,Math.floor(g[0]/g[1])*formula.calcRadiumGainWhenComplete()),y),set_store_value(radiumProgress,g[0]%=g[1],g);const Ve=Math.random();console.log(oe[5].formula(ce[5])),console.log(Ve),Ve<oe[5].formula(ce[5])&&(console.log("oi"),set_store_value(wallet,y.stars=(y.stars||0)+1,y))}}let rt=Date.now();function He(ee,Ve){isNaN(ee)&&(ee=1);const fe=(1+v[1].formula(k[1]))*v[8].formula(k[8])*Math.max(1,q[3])*Math.max(1,v[10].formula(k[10]))*Math.max(1,v[20].formula(k[20]))*Math.max(1,v[25].formula(k[25]))*Math.max(1,ne.gems.formula(y.artifacts||0))*Math.max(1,v[30].formula(k[30]))*me.hardenedBonus*ne.gems.formula(y.artifacts||0);Date.now()-rt>1e3&&(set_store_value(gemGainFlavorText,$=fe,$),rt=Date.now()),set_store_value(wallet,y.gems+=fe*ee,y)}function ot(ee,Ve,Ie){const be=j[ee]*q[5]*v[5].formula(k[5])*v[26].formula(k[26])*formula.calcKeyFinderAbundanceBonus(1);set_store_value(wallet,y["key"+ee]=(y["key"+ee]||0)+be*Ve,y),set_store_value(progress,re["key"+ee]%=Ie[0],re),set_store_value(keyGainFlavorText,ae["key"+ee]=be,ae)}function et(ee){let Ve={};for(let[Ie,fe]of Object.entries(X))if(F>=ref.dropTiers[Ie])if(fe[0]>=1){Ve[Ie]=(Ve[Ie]||0)+fe[1]+Math.random()*(fe[2]-fe[1]);continue}else if(ee>1/fe[0]){const be=Math.sqrt(ee*fe[0]*(1-fe[0])),Te=Array.from({length:Math.floor(Math.sqrt(ee))},()=>Math.floor(fe[1]+Math.random()*(fe[2]-fe[1]))),Je=Math.random()*2.83+.01,We=fe[0]*ee+Math.max((Math.random()>.5?1:-1)*be*Math.pow(Je/(Je-5),6),0),Ge=(Te[Math.floor(Math.random()*Te.length)]+Te[Math.floor(Math.random()*Te.length)]+Te[Math.floor(Math.random()*Te.length)])/3;Ve[Ie]=(Ve[Ie]||0)+We*Ge}else{let be=0;const Te=fe[0],Je=ee*Te;if(fe[0]<.1||ee*Te<10||ee*(1-Te)<10){let Ge=Math.exp(-1*Je);const ct=Math.random();let st=0;ct<1-Ge&&(st++,Ge+=Math.exp(-1*ee*Te)*Math.pow(ee*Te,st)/1,ct<1-Ge&&st++),be=st*1.01}else{const Ge=Math.sqrt(ee*Te*(1-Te));formula.rNorm(Je,Ge)}const We=be*(fe[1]+Math.random()*(fe[2]-fe[1]));Ve[Ie]=(Ve[Ie]||0)+We}for(let[Ie,fe]of Object.entries(Ve))set_store_value(wallet,y[Ie]=(y[Ie]||0)+fe,y),Ie=="fame"&&set_store_value(wallet,y.totalFame=(y.totalFame||0)+fe,y)}function tt(){for(let[ee,Ve]of R.entries()){const Ie=Ve.item;if(!z[Ie]){set_store_value(keyCraftTimes,z[Ie]=[-1,-1],z),set_store_value(keyCraftAmount,H[Ie]=0,H),set_store_value(keyCraftMastery,Y[Ie]=[1,0,10],Y);continue}const fe=z[Ie][1];if(Date.now()>fe&&fe!=-1){const be=formula.calcKeyCraftAmountGained(ee);set_store_value(keyCraftAmount,H[Ie]++,H),set_store_value(wallet,y[Ie]=(y[Ie]||0)+be,y),set_store_value(keyCraftTimes,z[Ie][1]=-1,z),set_store_value(craftMasteryProgress,W++,W),W>=te&&(set_store_value(craftMasteryProgress,W-=te,W),set_store_value(craftMasteryLevel,Q++,Q),set_store_value(craftMasteryNextReq,te=formula.calcCraftMasteryNextReq(Q),te),we("[Crafting] Crafting Mastery increased! ("+Q+")","text-amber-500","crafting")),set_store_value(keyCraftMastery,Y[Ie][1]=parseInt(Y[Ie][1]||0)+1,Y),Y[Ie][1]>=Y[Ie][2]&&(set_store_value(keyCraftMastery,Y[Ie][0]++,Y),set_store_value(keyCraftMastery,Y[Ie][1]=0,Y),Ie=="energy"?set_store_value(keyCraftMastery,Y[Ie][2]=3,Y):set_store_value(keyCraftMastery,Y[Ie][2]=10+15*Y[Ie][0]*Math.pow(1.25,Y[Ie][0]),Y),set_store_value(keyCraftMastery,Y[Ie][2]=Math.floor(Y[Ie][2]),Y),we("[Keys] Crafting Mastery for "+Ve.name+" increased! ("+Y[Ie][0]+")","text-amber-400","crafting")),Ie!=""?we("[Crafting] Crafting complete: +"+he(be)+" "+R[ee].name,R[ee].style||"text-white","crafting"):we("[Crafting] Practice craft complete, +1 global mastery.","text-gray-400","crafting")}}}let Ze=new Set;function $e(ee,Ve=!1){isNaN(y.beaconPower)&&set_store_value(wallet,y.beaconPower=0,y);const Ie=T.map((be,Te)=>be*ee*Math.max(1,V[0].formula(G[0]))*Math.max(1,V[2].formula(G[2]))*Math.max(1,v[12].formula(k[12]))*Math.max(1,v[24].formula(k[24]))*Math.max(1,1+(V[3].formula(G[3])-1)*D[Te]));set_store_value(beaconProgress,L=L.map((be,Te)=>be+Ie[Te]),L);for(let be=0;be<10;be++)if(isNaN(L[be])&&set_store_value(beaconProgress,L[be]=0,L),L[be]>=C[be]&&!Ze.has(be)){Ze.add(be);const Te=Math.min(Math.max(1,formula.maxNumGeom(L[be],C[be],A[be][1])),Ve?20:2);set_store_value(beaconProgress,L[be]-=Math.max(C[be],formula.gSum(C[be],A[be][1],Te)),L),set_store_value(beaconLevels,D[be]+=Te,D);const Je=1.0000025;set_store_value(beaconBonuses,q[be]=O[be](D[be])*Math.pow(Je,D[be]),q);const We=1.0005;set_store_value(beaconNextReqs,C[be]=(A[be][0]+1)*D[be]*Math.pow(We,D[be]),C),Date.now()-Me>1e3&&(Me=Date.now(),miningDropTable.updateTable()),Ze.delete(be)}const fe=formula.sumArray(D)<1?0:25*(Ae/1e3)*D.reduce((be,Te)=>be*(Te>1e4?formula.calcBeaconPowerMulti(Te):1),1)*q[0]*ee;set_store_value(wallet,y.beaconPower=(y.beaconPower||0)+fe,y),set_store_value(beaconPowerFlavorText,P=fe,P)}function ut(){for(let ee=0;ee<D.length;ee++)set_store_value(beaconBonuses,q[ee]=O[ee](D[ee]),q)}let at=0,bt=formula.calcMasteryGainPerTick();function kt(ee){at>MASTERY_GAIN_UPDATE_AT&&(bt=formula.calcMasteryGainPerTick(),at=0),N.masterful&&(set_store_value(wallet,y.mastery=(y.mastery||0)+bt,y),set_store_value(wallet,y.warp=(y.warp||0)+ee*formula.calcWarpGainFromMastery()/(1e3/Ae),y),Le(),wt())}function wt(){for(let ee of Object.keys(M))y[ee]>S[ee]&&(console.log(ee),set_store_value(masteryItemLevels,M[ee]++,M),set_store_value(masteryItemReqs,S[ee]=E[ee].base*Math.pow(E[ee].increase,M[ee]),S))}let At=!1;function yt(ee,Ve){if(!(ee>100)){I[0].formula(w[0]),I[1].formula(w[1]);for(let[Ie,fe]of I.entries()){if(fe.tier!=Ve)continue;if(Math.random()/ee<fe.formula(w[Ie])){const Te=formula.getEnchantFormulaValue(Ie);switch(Ie){case 0:break;case 1:break;case 2:He(Te),we("[Burst] +"+he(Te)+" mining cycles","text-violet-300","burst");break;case 3:set_store_value(wallet,y.orbs=(y.orbs||0)+Te,y),we("[Orb Rush] +"+he(Te)+" orbs","text-violet-300","orb rush");break;case 4:if(At)break;Ce=Te,At=!0,setTimeout(()=>{Ce=1,Math.abs(Ce-Math.round(Ce))<.1&&(Ce=Math.round(Ce)),At=!1},3e3),we("[Lightning Blast] "+he(Te,2)+"x mining speed for 3 seconds!","text-violet-300","lightning blast");break;case 5:const Je=[0,1,2,3,4,7,8];let We=!1;for(;!We;){const Be=Math.floor(Math.random()*Je.length),Pe=Je[Be];x[Pe]<v[Pe].maxLevel&&(set_store_value(miningUpgradeLevels,k[Pe]++,k),set_store_value(miningUpgradeLevelsFree,b[Pe]++,b),We=!0,we("[Scavenger] Added 1 level of "+v[Pe].name+"!","text-violet-300","scavenger"))}break;case 6:set_store_value(radiumProgress,g[0]+=Te,g),we("[Nuclear Fission] +"+he(Te)+" radioactivity","text-violet-300","nuclear fission");break;case 7:const Ge=Math.random();let ct;Ge>.9?ct=3:Ge>.6?ct=2:ct=1;let st=Te;ct==2?st/=190:ct==3&&(st/=1e5),st=Math.floor(st),set_store_value(wallet,y["key"+ct]=(y["key"+ct]||0)+st,y),we("[Key Caller] +"+he(st)+" "+ref.displayNames["key"+ct.toString()],"text-violet-300","key caller");break;case 8:const Tt=["efire","eearth","ewater","emagic","ecelestial"],le=Tt[Math.floor(Math.random()*Tt.length)];set_store_value(wallet,y[le]=(y[le]||0)+Te,y),we("[Rift Tearing] +"+he(Te)+" "+le.substring(1)+" essence",ref.colors[le],"rift tearing");break;case 9:for(let Be of Object.keys(m))set_store_value(enchantProgress,m[Be]+=Te,m);we("[Double Down] Added "+he(Te)+" progress to all tiers.","text-violet-300","double down")}}}}}return[]}class Adders extends SvelteComponent{constructor(d){super(),init(this,d,instance$k,null,safe_not_equal,{},null,[-1,-1,-1,-1])}}function get_each_context$g(l,d,_){const m=l.slice();return m[37]=d[_],m}function get_each_context_1$5(l,d,_){const m=l.slice();return m[40]=d[_],m}function get_each_context_2$2(l,d,_){const m=l.slice();return m[43]=d[_],m}function create_if_block_9$1(l){let d,_,m,y=l[24][Math.max(0,ref.dropTiers[l[43][0]]-1)]+"",g,v,b,k,x,w=(l[43][0]in l[15]?ref.displayNames[l[43][0]]||l[43][0]:"???")+"",I,M,E,S,N=l[26](Math.min(1,l[43][1][0]),l[43][1][0]<.001?l[43][1][0]<1e-4?l[43][1][0]<1e-5?6:5:4:3)+"",D,O,q,P,A,C=l[25](l[43][1][1],0)+"",L,G,V=l[25](l[43][1][2],0)+"",T,R;return{c(){d=element("div"),_=element("div"),m=text("["),g=text(y),v=text("]"),k=space(),x=element("div"),I=text(w),E=space(),S=element("div"),D=text(N),q=space(),P=element("div"),A=text("[ "),L=text(C),G=text(" - "),T=text(V),R=text(" ]"),this.h()},l(Y){d=claim_element(Y,"DIV",{class:!0});var Q=children(d);_=claim_element(Q,"DIV",{class:!0});var te=children(_);m=claim_text(te,"["),g=claim_text(te,y),v=claim_text(te,"]"),te.forEach(detach),k=claim_space(Q),x=claim_element(Q,"DIV",{class:!0});var W=children(x);I=claim_text(W,w),W.forEach(detach),E=claim_space(Q),S=claim_element(Q,"DIV",{class:!0});var z=children(S);D=claim_text(z,N),z.forEach(detach),q=claim_space(Q),P=claim_element(Q,"DIV",{class:!0});var H=children(P);A=claim_text(H,"[ "),L=claim_text(H,C),G=claim_text(H," - "),T=claim_text(H,V),R=claim_text(H," ]"),H.forEach(detach),Q.forEach(detach),this.h()},h(){attr(_,"class",b="col-span-1 text-left "+(ref.dropTierColors[ref.dropTiers[l[43][0]]]||"text-white")),attr(x,"class",M="col-span-3 text-left pl-[8px] "+(ref.colors[l[43][0]]||"text-white")),attr(S,"class",O="col-span-3 "+(l[43][1][0]>=l[43][1][3]?"text-amber-200":"")+" text-left pl-1"),attr(P,"class","col-span-2 text-right pl-1"),attr(d,"class","drop-table-disp grid grid-cols-9")},m(Y,Q){insert_hydration(Y,d,Q),append_hydration(d,_),append_hydration(_,m),append_hydration(_,g),append_hydration(_,v),append_hydration(d,k),append_hydration(d,x),append_hydration(x,I),append_hydration(d,E),append_hydration(d,S),append_hydration(S,D),append_hydration(d,q),append_hydration(d,P),append_hydration(P,A),append_hydration(P,L),append_hydration(P,G),append_hydration(P,T),append_hydration(P,R)},p(Y,Q){Q[0]&1&&y!==(y=Y[24][Math.max(0,ref.dropTiers[Y[43][0]]-1)]+"")&&set_data(g,y),Q[0]&1&&b!==(b="col-span-1 text-left "+(ref.dropTierColors[ref.dropTiers[Y[43][0]]]||"text-white"))&&attr(_,"class",b),Q[0]&32769&&w!==(w=(Y[43][0]in Y[15]?ref.displayNames[Y[43][0]]||Y[43][0]:"???")+"")&&set_data(I,w),Q[0]&1&&M!==(M="col-span-3 text-left pl-[8px] "+(ref.colors[Y[43][0]]||"text-white"))&&attr(x,"class",M),Q[0]&1&&N!==(N=Y[26](Math.min(1,Y[43][1][0]),Y[43][1][0]<.001?Y[43][1][0]<1e-4?Y[43][1][0]<1e-5?6:5:4:3)+"")&&set_data(D,N),Q[0]&1&&O!==(O="col-span-3 "+(Y[43][1][0]>=Y[43][1][3]?"text-amber-200":"")+" text-left pl-1")&&attr(S,"class",O),Q[0]&1&&C!==(C=Y[25](Y[43][1][1],0)+"")&&set_data(L,C),Q[0]&1&&V!==(V=Y[25](Y[43][1][2],0)+"")&&set_data(T,V)},d(Y){Y&&detach(d)}}}function create_each_block_2$2(l){let d,_=l[14]>=l[43][1][4]&&create_if_block_9$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[14]>=m[43][1][4]?_?_.p(m,y):(_=create_if_block_9$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block_3(l){let d,_,m,y,g,v,b=Object.entries(l[0]).sort(func),k=[];for(let x=0;x<b.length;x+=1)k[x]=create_each_block_2$2(get_each_context_2$2(l,b,x));return{c(){d=element("div"),_=text(`Hover for Possible Drops
        `),m=element("span");for(let x=0;x<k.length;x+=1)k[x].c();y=space(),g=element("div"),v=text("Yellow values are softcapped, red values are hardcapped."),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var w=children(d);_=claim_text(w,`Hover for Possible Drops
        `),m=claim_element(w,"SPAN",{class:!0});var I=children(m);for(let E=0;E<k.length;E+=1)k[E].l(I);y=claim_space(I),g=claim_element(I,"DIV",{class:!0});var M=children(g);v=claim_text(M,"Yellow values are softcapped, red values are hardcapped."),M.forEach(detach),I.forEach(detach),w.forEach(detach),this.h()},h(){attr(g,"class","pt-1 tooltip-text-xs italic"),attr(m,"class","px-2 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-20 pointer-events-none"),attr(d,"class","has-tooltip mining-flavor game-btn text-med text-center items-right")},m(x,w){insert_hydration(x,d,w),append_hydration(d,_),append_hydration(d,m);for(let I=0;I<k.length;I+=1)k[I]&&k[I].m(m,null);append_hydration(m,y),append_hydration(m,g),append_hydration(g,v)},p(x,w){if(w[0]&117489665){b=Object.entries(x[0]).sort(func);let I;for(I=0;I<b.length;I+=1){const M=get_each_context_2$2(x,b,I);k[I]?k[I].p(M,w):(k[I]=create_each_block_2$2(M),k[I].c(),k[I].m(m,y))}for(;I<k.length;I+=1)k[I].d(1);k.length=b.length}},d(x){x&&detach(d),destroy_each(k,x)}}}function create_if_block_8$2(l){let d,_,m,y,g,v,b,k;return{c(){d=element("div"),_=element("div"),m=text("Mining Upgrades"),y=space(),g=element("div"),v=text("Dust Upgrades"),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var w=children(d);_=claim_element(w,"DIV",{class:!0});var I=children(_);m=claim_text(I,"Mining Upgrades"),I.forEach(detach),y=claim_space(w),g=claim_element(w,"DIV",{class:!0});var M=children(g);v=claim_text(M,"Dust Upgrades"),M.forEach(detach),w.forEach(detach),this.h()},h(){attr(_,"class","mx-1 p-1 col-span-3 game-btn text-med"),attr(g,"class","mx-1 p-1 col-span-3 game-btn text-med"),attr(d,"class","pt-2 grid grid-cols-6")},m(x,w){insert_hydration(x,d,w),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,v),b||(k=[listen(_,"click",l[30]),listen(g,"click",l[31])],b=!0)},p:noop,d(x){x&&detach(d),b=!1,run_all(k)}}}function create_if_block_6$4(l){let d,_=l[4],m=create_key_block_2(l);return{c(){d=element("div"),m.c(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var g=children(d);m.l(g),g.forEach(detach),this.h()},h(){attr(d,"class","pt-2 grid grid-cols-8")},m(y,g){insert_hydration(y,d,g),m.m(d,null)},p(y,g){g[0]&16&&safe_not_equal(_,_=y[4])?(m.d(1),m=create_key_block_2(y),m.c(),m.m(d,null)):m.p(y,g)},d(y){y&&detach(d),m.d(y)}}}function create_if_block_7$2(l){let d,_=l[40][0]+"",m,y,g,v,b;function k(){return l[32](l[40])}return{c(){d=element("div"),m=text(_),y=space(),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var w=children(d);m=claim_text(w,_),y=claim_space(w),w.forEach(detach),this.h()},h(){attr(d,"class",g="m-1 text-center "+(l[10][l[40][0]].on?"control-btn-toggleon":"control-btn")+" col-span-1 tooltip-text select-none")},m(x,w){insert_hydration(x,d,w),append_hydration(d,m),append_hydration(d,y),v||(b=listen(d,"click",k),v=!0)},p(x,w){l=x,w[0]&1024&&_!==(_=l[40][0]+"")&&set_data(m,_),w[0]&1024&&g!==(g="m-1 text-center "+(l[10][l[40][0]].on?"control-btn-toggleon":"control-btn")+" col-span-1 tooltip-text select-none")&&attr(d,"class",g)},d(x){x&&detach(d),v=!1,b()}}}function create_each_block_1$5(l){let d=l[40][1]!==void 0&&l[40][1].unlockAt(),_,m=d&&create_if_block_7$2(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&1024&&(d=y[40][1]!==void 0&&y[40][1].unlockAt()),d?m?m.p(y,g):(m=create_if_block_7$2(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_key_block_2(l){let d,_=Object.entries(l[10]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block_1$5(get_each_context_1$5(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g[0]&8389632){_=Object.entries(y[10]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context_1$5(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block_1$5(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_key_block_1$1(l){let d,_=l[3]==="regular"&&create_if_block_6$4(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[3]==="regular"?_?_.p(m,y):(_=create_if_block_6$4(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_if_block_4$7(l){let d,_=l[21]("gems"),m=_&&create_if_block_5$6(l);return{c(){d=element("span"),m&&m.c(),this.h()},l(y){d=claim_element(y,"SPAN",{class:!0});var g=children(d);m&&m.l(g),g.forEach(detach),this.h()},h(){attr(d,"class","tooltip tooltip-style text-xs text-center")},m(y,g){insert_hydration(y,d,g),m&&m.m(d,null)},p(y,g){_&&m.p(y,g)},d(y){y&&detach(d),m&&m.d()}}}function create_if_block_5$6(l){let d,_,m,y=l[25](25*ascFormula.getVal("fire"),2)+"",g,v;return{c(){d=element("span"),_=text(`Your mining speed is softcapped above 
                    `),m=element("span"),g=text(y),v=text(` 
                    cycles per second. Excess progress is raised to ^0.5.`),this.h()},l(b){d=claim_element(b,"SPAN",{class:!0});var k=children(d);_=claim_text(k,`Your mining speed is softcapped above 
                    `),m=claim_element(k,"SPAN",{class:!0});var x=children(m);g=claim_text(x,y),x.forEach(detach),v=claim_text(k,` 
                    cycles per second. Excess progress is raised to ^0.5.`),k.forEach(detach),this.h()},h(){attr(m,"class","text-amber-200"),attr(d,"class","text-[#aaaaaa] text-xs")},m(b,k){insert_hydration(b,d,k),append_hydration(d,_),append_hydration(d,m),append_hydration(m,g),append_hydration(d,v)},p:noop,d(b){b&&detach(d)}}}function create_if_block_3$8(l){let d,_,m,y,g,v,b,k,x,w=(l[20].key1>1?l[25](l[20].key1,0):"???")+"",I,M,E,S,N=l[25](l[13].key1*(1e3/l[12].UPDATE_SPEED)/l[1].key1,3)+"",D,O,q;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=space(),v=element("div"),b=element("div"),k=text("[*] "),x=element("strong"),I=text(w),M=space(),E=element("span"),S=text("x "),D=text(N),O=text(" / sec"),this.h()},l(P){d=claim_element(P,"DIV",{class:!0});var A=children(d);_=claim_element(A,"DIV",{class:!0});var C=children(_);m=claim_element(C,"DIV",{class:!0});var L=children(m);y=claim_element(L,"DIV",{class:!0,style:!0}),children(y).forEach(detach),L.forEach(detach),C.forEach(detach),A.forEach(detach),g=claim_space(P),v=claim_element(P,"DIV",{class:!0});var G=children(v);b=claim_element(G,"DIV",{class:!0});var V=children(b);k=claim_text(V,"[*] "),x=claim_element(V,"STRONG",{});var T=children(x);I=claim_text(T,w),T.forEach(detach),M=claim_space(V),E=claim_element(V,"SPAN",{class:!0});var R=children(E);S=claim_text(R,"x "),D=claim_text(R,N),O=claim_text(R," / sec"),R.forEach(detach),V.forEach(detach),G.forEach(detach),this.h()},h(){attr(y,"class","bg-emerald-400 h-2.5 rounded-full"),set_style(y,"width",l[18].keyfinder?"100%":l[8]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(E,"class",q=l[13].key1*(1e3/l[12].UPDATE_SPEED)/l[1].key1>25*ascFormula.getVal("fire")?"text-amber-200":""),attr(b,"class","text-[#989898] text-small"),attr(v,"class","col-span-3 pl-1 text-left align-text-middle")},m(P,A){insert_hydration(P,d,A),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(P,g,A),insert_hydration(P,v,A),append_hydration(v,b),append_hydration(b,k),append_hydration(b,x),append_hydration(x,I),append_hydration(b,M),append_hydration(b,E),append_hydration(E,S),append_hydration(E,D),append_hydration(E,O)},p(P,A){A[0]&262400&&set_style(y,"width",P[18].keyfinder?"100%":P[8]),A[0]&1048576&&w!==(w=(P[20].key1>1?P[25](P[20].key1,0):"???")+"")&&set_data(I,w),A[0]&12290&&N!==(N=P[25](P[13].key1*(1e3/P[12].UPDATE_SPEED)/P[1].key1,3)+"")&&set_data(D,N),A[0]&12290&&q!==(q=P[13].key1*(1e3/P[12].UPDATE_SPEED)/P[1].key1>25*ascFormula.getVal("fire")?"text-amber-200":"")&&attr(E,"class",q)},d(P){P&&detach(d),P&&detach(g),P&&detach(v)}}}function create_if_block_2$b(l){let d,_,m,y,g,v,b,k,x,w=(l[20].key2>1?l[25](l[20].key2,0):"???")+"",I,M,E,S,N=l[25](l[13].key2*(1e3/l[12].UPDATE_SPEED)/l[1].key2,3)+"",D,O,q;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=space(),v=element("div"),b=element("div"),k=text("[**] "),x=element("strong"),I=text(w),M=space(),E=element("span"),S=text("x "),D=text(N),O=text(" / sec"),this.h()},l(P){d=claim_element(P,"DIV",{class:!0});var A=children(d);_=claim_element(A,"DIV",{class:!0});var C=children(_);m=claim_element(C,"DIV",{class:!0});var L=children(m);y=claim_element(L,"DIV",{class:!0,style:!0}),children(y).forEach(detach),L.forEach(detach),C.forEach(detach),A.forEach(detach),g=claim_space(P),v=claim_element(P,"DIV",{class:!0});var G=children(v);b=claim_element(G,"DIV",{class:!0});var V=children(b);k=claim_text(V,"[**] "),x=claim_element(V,"STRONG",{});var T=children(x);I=claim_text(T,w),T.forEach(detach),M=claim_space(V),E=claim_element(V,"SPAN",{class:!0});var R=children(E);S=claim_text(R,"x "),D=claim_text(R,N),O=claim_text(R," / sec"),R.forEach(detach),V.forEach(detach),G.forEach(detach),this.h()},h(){attr(y,"class","bg-blue-400 h-2.5 rounded-full"),set_style(y,"width",l[18].keyfinder?"100%":l[7]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(E,"class",q=l[13].key2*(1e3/l[12].UPDATE_SPEED)/l[1].key2>10*ascFormula.getVal("fire")?"text-amber-200":""),attr(b,"class","text-[#989898] text-small"),attr(v,"class","col-span-3 pl-1 text-left align-text-middle")},m(P,A){insert_hydration(P,d,A),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(P,g,A),insert_hydration(P,v,A),append_hydration(v,b),append_hydration(b,k),append_hydration(b,x),append_hydration(x,I),append_hydration(b,M),append_hydration(b,E),append_hydration(E,S),append_hydration(E,D),append_hydration(E,O)},p(P,A){A[0]&262272&&set_style(y,"width",P[18].keyfinder?"100%":P[7]),A[0]&1048576&&w!==(w=(P[20].key2>1?P[25](P[20].key2,0):"???")+"")&&set_data(I,w),A[0]&12290&&N!==(N=P[25](P[13].key2*(1e3/P[12].UPDATE_SPEED)/P[1].key2,3)+"")&&set_data(D,N),A[0]&12290&&q!==(q=P[13].key2*(1e3/P[12].UPDATE_SPEED)/P[1].key2>10*ascFormula.getVal("fire")?"text-amber-200":"")&&attr(E,"class",q)},d(P){P&&detach(d),P&&detach(g),P&&detach(v)}}}function create_if_block_1$e(l){let d,_,m,y,g,v,b,k,x,w=(l[20].key3>1?l[25](l[20].key3,0):"???")+"",I,M,E,S,N=l[25](l[13].key3*(1e3/l[12].UPDATE_SPEED)/l[1].key3,3)+"",D,O,q;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=space(),v=element("div"),b=element("div"),k=text("[***] "),x=element("strong"),I=text(w),M=space(),E=element("span"),S=text("x "),D=text(N),O=text(" / sec"),this.h()},l(P){d=claim_element(P,"DIV",{class:!0});var A=children(d);_=claim_element(A,"DIV",{class:!0});var C=children(_);m=claim_element(C,"DIV",{class:!0});var L=children(m);y=claim_element(L,"DIV",{class:!0,style:!0}),children(y).forEach(detach),L.forEach(detach),C.forEach(detach),A.forEach(detach),g=claim_space(P),v=claim_element(P,"DIV",{class:!0});var G=children(v);b=claim_element(G,"DIV",{class:!0});var V=children(b);k=claim_text(V,"[***] "),x=claim_element(V,"STRONG",{});var T=children(x);I=claim_text(T,w),T.forEach(detach),M=claim_space(V),E=claim_element(V,"SPAN",{class:!0});var R=children(E);S=claim_text(R,"x "),D=claim_text(R,N),O=claim_text(R," / sec"),R.forEach(detach),V.forEach(detach),G.forEach(detach),this.h()},h(){attr(y,"class","bg-pink-400 h-2.5 rounded-full"),set_style(y,"width",l[18].keyfinder?"100%":l[6]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(E,"class",q=l[13].key3*(1e3/l[12].UPDATE_SPEED)/l[1].key3>1*ascFormula.getVal("fire")?"text-amber-200":""),attr(b,"class","text-[#989898] text-small"),attr(v,"class","col-span-3 pl-1 text-left align-text-middle")},m(P,A){insert_hydration(P,d,A),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(P,g,A),insert_hydration(P,v,A),append_hydration(v,b),append_hydration(b,k),append_hydration(b,x),append_hydration(x,I),append_hydration(b,M),append_hydration(b,E),append_hydration(E,S),append_hydration(E,D),append_hydration(E,O)},p(P,A){A[0]&262208&&set_style(y,"width",P[18].keyfinder?"100%":P[6]),A[0]&1048576&&w!==(w=(P[20].key3>1?P[25](P[20].key3,0):"???")+"")&&set_data(I,w),A[0]&12290&&N!==(N=P[25](P[13].key3*(1e3/P[12].UPDATE_SPEED)/P[1].key3,3)+"")&&set_data(D,N),A[0]&12290&&q!==(q=P[13].key3*(1e3/P[12].UPDATE_SPEED)/P[1].key3>1*ascFormula.getVal("fire")?"text-amber-200":"")&&attr(E,"class",q)},d(P){P&&detach(d),P&&detach(g),P&&detach(v)}}}function create_else_block$9(l){return{c:noop,l:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_if_block$i(l){let d,_,m,y;return _=new MiningUpgradeButton({props:{index:l[37]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","w-1/2 mine-upgrade-button-wrapper")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},p(g,v){const b={};v[0]&32&&(b.index=g[37]),_.$set(b)},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$g(l){let d,_,m,y,g;const v=[create_if_block$i,create_else_block$9],b=[];function k(x,w){return w[0]&2088&&(d=null),d==null&&(d=!!((x[3]=="regular"&&!x[11][x[37]].isDust||x[3]=="dust"&&x[11][x[37]].isDust)&&x[27](x[37]))),d?0:1}return _=k(l,[-1,-1]),m=b[_]=v[_](l),{c(){m.c(),y=empty()},l(x){m.l(x),y=empty()},m(x,w){b[_].m(x,w),insert_hydration(x,y,w),g=!0},p(x,w){let I=_;_=k(x,w),_===I?b[_].p(x,w):(group_outros(),transition_out(b[I],1,1,()=>{b[I]=null}),check_outros(),m=b[_],m?m.p(x,w):(m=b[_]=v[_](x),m.c()),transition_in(m,1),m.m(y.parentNode,y))},i(x){g||(transition_in(m),g=!0)},o(x){transition_out(m),g=!1},d(x){b[_].d(x),x&&detach(y)}}}function create_key_block$b(l){let d,_,m,y,g,v,b,k,x,w,I,M,E,S,N,D,O=l[5],q=[];for(let A=0;A<O.length;A+=1)q[A]=create_each_block$g(get_each_context$g(l,O,A));const P=A=>transition_out(q[A],1,1,()=>{q[A]=null});return{c(){d=element("div");for(let A=0;A<q.length;A+=1)q[A].c();_=space(),m=element("div"),y=space(),g=element("div"),v=space(),b=element("div"),k=space(),x=element("div"),w=space(),I=element("div"),M=space(),E=element("div"),S=space(),N=element("div"),this.h()},l(A){d=claim_element(A,"DIV",{class:!0});var C=children(d);for(let L=0;L<q.length;L+=1)q[L].l(C);C.forEach(detach),_=claim_space(A),m=claim_element(A,"DIV",{class:!0}),children(m).forEach(detach),y=claim_space(A),g=claim_element(A,"DIV",{class:!0}),children(g).forEach(detach),v=claim_space(A),b=claim_element(A,"DIV",{class:!0}),children(b).forEach(detach),k=claim_space(A),x=claim_element(A,"DIV",{class:!0}),children(x).forEach(detach),w=claim_space(A),I=claim_element(A,"DIV",{class:!0}),children(I).forEach(detach),M=claim_space(A),E=claim_element(A,"DIV",{class:!0}),children(E).forEach(detach),S=claim_space(A),N=claim_element(A,"DIV",{}),children(N).forEach(detach),this.h()},h(){attr(d,"class","mine-upgrade-wrapper flex flex-wrap"),attr(m,"class","col-span-2 pb-12"),attr(g,"class","col-span-2 pb-12"),attr(b,"class","col-span-2 pb-12"),attr(x,"class","col-span-2 pb-12"),attr(I,"class","col-span-12 pb-16"),attr(E,"class","col-span-12 pb-16")},m(A,C){insert_hydration(A,d,C);for(let L=0;L<q.length;L+=1)q[L]&&q[L].m(d,null);insert_hydration(A,_,C),insert_hydration(A,m,C),insert_hydration(A,y,C),insert_hydration(A,g,C),insert_hydration(A,v,C),insert_hydration(A,b,C),insert_hydration(A,k,C),insert_hydration(A,x,C),insert_hydration(A,w,C),insert_hydration(A,I,C),insert_hydration(A,M,C),insert_hydration(A,E,C),insert_hydration(A,S,C),insert_hydration(A,N,C),D=!0},p(A,C){if(C[0]&134219816){O=A[5];let L;for(L=0;L<O.length;L+=1){const G=get_each_context$g(A,O,L);q[L]?(q[L].p(G,C),transition_in(q[L],1)):(q[L]=create_each_block$g(G),q[L].c(),transition_in(q[L],1),q[L].m(d,null))}for(group_outros(),L=O.length;L<q.length;L+=1)P(L);check_outros()}},i(A){if(!D){for(let C=0;C<O.length;C+=1)transition_in(q[C]);D=!0}},o(A){q=q.filter(Boolean);for(let C=0;C<q.length;C+=1)transition_out(q[C]);D=!1},d(A){A&&detach(d),destroy_each(q,A),A&&detach(_),A&&detach(m),A&&detach(y),A&&detach(g),A&&detach(v),A&&detach(b),A&&detach(k),A&&detach(x),A&&detach(w),A&&detach(I),A&&detach(M),A&&detach(E),A&&detach(S),A&&detach(N)}}}function create_fragment$j(l){let d,_=l[2],m,y,g=l[10],v,b,k,x,w=l[13].gems>l[1].gems?"~":"",I,M,E=(l[17]>1?l[25](l[17],0):1)+"",S,N,D,O,q=l[25](l[13].gems*(1e3/l[12].UPDATE_SPEED)/l[1].gems,2)+"",P,A,C,L=l[21]("gems")||l[13].gems>l[1].gems,G,V,T,R,Y,Q,te,W,z,H,F,X=l[26](1-formula.calcMiningCostRatioMulti(),0)+"",ae,re,j,$=l[10],ne,me=create_key_block_3(l),ce=l[16].dust&&create_if_block_8$2(l),oe=create_key_block_1$1(l),U=L&&create_if_block_4$7(l),Z=l[19][3]>0&&create_if_block_3$8(l),B=l[19][4]>0&&create_if_block_2$b(l),K=l[19][18]>0&&create_if_block_1$e(l),J=create_key_block$b(l);return{c(){d=element("div"),me.c(),m=space(),ce&&ce.c(),y=space(),oe.c(),v=space(),b=element("div"),k=text(`gem progress [ 
        `),x=element("strong"),I=text(w),M=space(),S=text(E),N=space(),D=element("span"),O=text("x "),P=text(q),A=text(" times / sec ]"),C=space(),U&&U.c(),G=space(),V=element("div"),T=element("div"),R=element("div"),Y=space(),Q=element("div"),Z&&Z.c(),te=space(),B&&B.c(),W=space(),K&&K.c(),z=space(),H=element("div"),F=text("Cost multipliers are reduced by "),ae=text(X),re=text(" (minimum 1.025x)."),j=space(),J.c(),this.h()},l(se){d=claim_element(se,"DIV",{class:!0});var de=children(d);me.l(de),m=claim_space(de),ce&&ce.l(de),y=claim_space(de),oe.l(de),v=claim_space(de),b=claim_element(de,"DIV",{class:!0});var _e=children(b);k=claim_text(_e,`gem progress [ 
        `),x=claim_element(_e,"STRONG",{});var pe=children(x);I=claim_text(pe,w),M=claim_space(pe),S=claim_text(pe,E),pe.forEach(detach),N=claim_space(_e),D=claim_element(_e,"SPAN",{class:!0});var ue=children(D);O=claim_text(ue,"x "),P=claim_text(ue,q),A=claim_text(ue," times / sec ]"),ue.forEach(detach),C=claim_space(_e),U&&U.l(_e),_e.forEach(detach),G=claim_space(de),V=claim_element(de,"DIV",{class:!0});var ie=children(V);T=claim_element(ie,"DIV",{class:!0});var ge=children(T);R=claim_element(ge,"DIV",{class:!0,style:!0}),children(R).forEach(detach),ge.forEach(detach),ie.forEach(detach),Y=claim_space(de),Q=claim_element(de,"DIV",{class:!0});var ye=children(Q);Z&&Z.l(ye),te=claim_space(ye),B&&B.l(ye),W=claim_space(ye),K&&K.l(ye),ye.forEach(detach),z=claim_space(de),H=claim_element(de,"DIV",{class:!0});var ve=children(H);F=claim_text(ve,"Cost multipliers are reduced by "),ae=claim_text(ve,X),re=claim_text(ve," (minimum 1.025x)."),ve.forEach(detach),j=claim_space(de),J.l(de),de.forEach(detach),this.h()},h(){attr(D,"class",l[21]("gems")?"text-amber-200":""),attr(b,"class","text-[#989898] text-small has-tooltip pt-4"),attr(R,"class","bg-red-300 h-2.5 rounded-full"),set_style(R,"width",l[18].gems?"100%":l[9]),attr(T,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(V,"class","mine-bar-wrapper pb-2"),attr(Q,"class","grid grid-cols-12 align-middle"),attr(H,"class","text-[#989898] text-small text-center w-full p-1"),attr(d,"class","wrapper py-2")},m(se,de){insert_hydration(se,d,de),me.m(d,null),append_hydration(d,m),ce&&ce.m(d,null),append_hydration(d,y),oe.m(d,null),append_hydration(d,v),append_hydration(d,b),append_hydration(b,k),append_hydration(b,x),append_hydration(x,I),append_hydration(x,M),append_hydration(x,S),append_hydration(b,N),append_hydration(b,D),append_hydration(D,O),append_hydration(D,P),append_hydration(D,A),append_hydration(b,C),U&&U.m(b,null),append_hydration(d,G),append_hydration(d,V),append_hydration(V,T),append_hydration(T,R),append_hydration(d,Y),append_hydration(d,Q),Z&&Z.m(Q,null),append_hydration(Q,te),B&&B.m(Q,null),append_hydration(Q,W),K&&K.m(Q,null),append_hydration(d,z),append_hydration(d,H),append_hydration(H,F),append_hydration(H,ae),append_hydration(H,re),append_hydration(d,j),J.m(d,null),ne=!0},p(se,de){de[0]&4&&safe_not_equal(_,_=se[2])?(me.d(1),me=create_key_block_3(se),me.c(),me.m(d,m)):me.p(se,de),se[16].dust?ce?ce.p(se,de):(ce=create_if_block_8$2(se),ce.c(),ce.m(d,y)):ce&&(ce.d(1),ce=null),de[0]&1024&&safe_not_equal(g,g=se[10])?(oe.d(1),oe=create_key_block_1$1(se),oe.c(),oe.m(d,v)):oe.p(se,de),(!ne||de[0]&8194)&&w!==(w=se[13].gems>se[1].gems?"~":"")&&set_data(I,w),(!ne||de[0]&131072)&&E!==(E=(se[17]>1?se[25](se[17],0):1)+"")&&set_data(S,E),(!ne||de[0]&12290)&&q!==(q=se[25](se[13].gems*(1e3/se[12].UPDATE_SPEED)/se[1].gems,2)+"")&&set_data(P,q),de[0]&8194&&(L=se[21]("gems")||se[13].gems>se[1].gems),L?U?U.p(se,de):(U=create_if_block_4$7(se),U.c(),U.m(b,null)):U&&(U.d(1),U=null),(!ne||de[0]&262656)&&set_style(R,"width",se[18].gems?"100%":se[9]),se[19][3]>0?Z?Z.p(se,de):(Z=create_if_block_3$8(se),Z.c(),Z.m(Q,te)):Z&&(Z.d(1),Z=null),se[19][4]>0?B?B.p(se,de):(B=create_if_block_2$b(se),B.c(),B.m(Q,W)):B&&(B.d(1),B=null),se[19][18]>0?K?K.p(se,de):(K=create_if_block_1$e(se),K.c(),K.m(Q,null)):K&&(K.d(1),K=null),de[0]&1024&&safe_not_equal($,$=se[10])?(group_outros(),transition_out(J,1,1,noop),check_outros(),J=create_key_block$b(se),J.c(),transition_in(J,1),J.m(d,null)):J.p(se,de)},i(se){ne||(transition_in(J),ne=!0)},o(se){transition_out(J),ne=!1},d(se){se&&detach(d),me.d(se),ce&&ce.d(),oe.d(se),U&&U.d(),Z&&Z.d(),B&&B.d(),K&&K.d(),J.d(se)}}}const func=(l,d)=>d[1][0]-l[1][0];function instance$j(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C;component_subscribe(l,upgradeSorting,j=>_(10,k=j)),component_subscribe(l,miningUpgrades,j=>_(11,x=j)),component_subscribe(l,settings,j=>_(12,w=j)),component_subscribe(l,miningDropTable,j=>_(0,I=j)),component_subscribe(l,progressThreshold,j=>_(1,M=j)),component_subscribe(l,progressAverage,j=>_(13,E=j)),component_subscribe(l,progress,j=>_(29,S=j)),component_subscribe(l,visibleTier,j=>_(14,N=j)),component_subscribe(l,permaWallet,j=>_(15,D=j)),component_subscribe(l,wallet,j=>_(16,O=j)),component_subscribe(l,gemGainFlavorText,j=>_(17,q=j)),component_subscribe(l,antiFlickerFlags,j=>_(18,P=j)),component_subscribe(l,miningUpgradeLevels,j=>_(19,A=j)),component_subscribe(l,keyGainFlavorText,j=>_(20,C=j));let L=!1,G=x,V="regular",T=!1;const R=j=>E[j.toString()]*(1e3/w.UPDATE_SPEED)/M[j.toString()]>25*ascFormula.getVal("fire");onMount(()=>{_(4,T=!T),setInterval(()=>{_(2,L=!L)},517),setInterval(()=>{Object.entries(I).sort((j,$)=>$[1][0]-j[1][0])},5e3)});function Y(j){_(3,V=j)}function Q(j){if(k[j]!==void 0&&set_store_value(upgradeSorting,k[j].on=!k[j].on,k),w.exclusiveSort)for(let $ of Object.keys(k))k[$]!==void 0&&$!==j&&set_store_value(upgradeSorting,k[$].on=!1,k)}const te=["I","II","III","IV","V","VI","VII","VIII","IX","X"],W=(j,$=0)=>isNaN(j)?"???":j<1e9?j.toFixed(j<1e3?$:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):j.toExponential(3).toString().replace("+",""),z=(j,$=3,ne=!1)=>(ne&&(j-=1),j<1e9?(j*100).toFixed(j<1e3?$:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(j*100).toExponential($).toString().replace("+","")+"%"),H=(j,$)=>{const ne=ref.miningUpgradeSortOrder[(j[1].name||"default").toLowerCase()]||ref.miningUpgradeSortOrder.default,me=ref.miningUpgradeSortOrder[($[1].name||"default").toLowerCase()]||ref.miningUpgradeSortOrder.default;return ne-me},F=j=>{if(k.all.on)return!0;for(let $ of x[j].sortType)if(k[$].on)return!0;return!1},X=()=>Y("regular"),ae=()=>Y("dust"),re=j=>Q(j[0]);return l.$$.update=()=>{l.$$.dirty[0]&536870914&&_(9,m=`${Math.min(1,S.gems/M.gems)*100}%`),l.$$.dirty[0]&536870914&&_(8,y=`${Math.min(1,S.key1/M.key1)*100}%`),l.$$.dirty[0]&536870914&&_(7,g=`${Math.min(1,S.key2/M.key2)*100}%`),l.$$.dirty[0]&536870914&&_(6,v=`${Math.min(1,S.key3/M.key3)*100}%`),l.$$.dirty[0]&1,l.$$.dirty[0]&268435456&&_(5,b=G.map((j,$)=>$).sort((j,$)=>H([j,G[j]],[$,G[$]])))},[I,M,L,V,T,b,v,g,y,m,k,x,w,E,N,D,O,q,P,A,C,R,Y,Q,te,W,z,F,G,S,X,ae,re]}class Mining extends SvelteComponent{constructor(d){super(),init(this,d,instance$j,create_fragment$j,safe_not_equal,{},null,[-1,-1])}}const KeyOpenButton_svelte_svelte_type_style_lang="";function create_else_block_2(l){let d;return{c(){d=text("---")},l(_){d=claim_text(_,"---")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_6$3(l){let d=l[8]()+"",_;return{c(){_=text(d)},l(m){_=claim_text(m,d)},m(m,y){insert_hydration(m,_,y)},p:noop,d(m){m&&detach(_)}}}function create_if_block_3$7(l){let d;function _(g,v){return g[1]==1?create_if_block_4$6:g[1]=="max"?create_if_block_5$5:create_else_block_1$1}let m=_(l),y=m(l);return{c(){y.c(),d=empty()},l(g){y.l(g),d=empty()},m(g,v){y.m(g,v),insert_hydration(g,d,v)},p(g,v){m!==(m=_(g))&&(y.d(1),y=m(g),y&&(y.c(),y.m(d.parentNode,d)))},d(g){y.d(g),g&&detach(d)}}}function create_if_block$h(l){let d;function _(g,v){return g[1]=="single"?create_if_block_1$d:g[1]=="max"?create_if_block_2$a:create_else_block$8}let m=_(l),y=m(l);return{c(){y.c(),d=empty()},l(g){y.l(g),d=empty()},m(g,v){y.m(g,v),insert_hydration(g,d,v)},p(g,v){m===(m=_(g))&&y?y.p(g,v):(y.d(1),y=m(g),y&&(y.c(),y.m(d.parentNode,d)))},d(g){y.d(g),g&&detach(d)}}}function create_else_block_1$1(l){let d;return{c(){d=text("---")},l(_){d=claim_text(_,"---")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_5$5(l){let d;return{c(){d=text("Open All")},l(_){d=claim_text(_,"Open All")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_4$6(l){let d;return{c(){d=text("Find a key of this rarity to use it.")},l(_){d=claim_text(_,"Find a key of this rarity to use it.")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_else_block$8(l){let d,_,m=l[4](parseInt(l[1]),0)+"",y,g;return{c(){d=text("Open "),_=element("strong"),y=text(m),g=text("%")},l(v){d=claim_text(v,"Open "),_=claim_element(v,"STRONG",{});var b=children(_);y=claim_text(b,m),g=claim_text(b,"%"),b.forEach(detach)},m(v,b){insert_hydration(v,d,b),insert_hydration(v,_,b),append_hydration(_,y),append_hydration(_,g)},p(v,b){b&2&&m!==(m=v[4](parseInt(v[1]),0)+"")&&set_data(y,m)},d(v){v&&detach(d),v&&detach(_)}}}function create_if_block_2$a(l){let d,_,m;return{c(){d=text("Open "),_=element("strong"),m=text("All")},l(y){d=claim_text(y,"Open "),_=claim_element(y,"STRONG",{});var g=children(_);m=claim_text(g,"All"),g.forEach(detach)},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),append_hydration(_,m)},p:noop,d(y){y&&detach(d),y&&detach(_)}}}function create_if_block_1$d(l){let d,_,m=l[6]()+"",y,g,v;return{c(){d=text("Use "),_=element("span"),y=text(m),v=text(" Key"),this.h()},l(b){d=claim_text(b,"Use "),_=claim_element(b,"SPAN",{class:!0});var k=children(_);y=claim_text(k,m),k.forEach(detach),v=claim_text(b," Key"),this.h()},h(){attr(_,"class",g=null_to_empty(ref.colors["key"+l[0]])+" svelte-4m3301")},m(b,k){insert_hydration(b,d,k),insert_hydration(b,_,k),append_hydration(_,y),insert_hydration(b,v,k)},p(b,k){k&1&&g!==(g=null_to_empty(ref.colors["key"+b[0]])+" svelte-4m3301")&&attr(_,"class",g)},d(b){b&&detach(d),b&&detach(_),b&&detach(v)}}}function create_fragment$i(l){let d,_,m,y,g,v;function b(w,I){return I&8&&(_=null),_==null&&(_=!!(w[3]&&w[7]())),_?create_if_block$h:(m==null&&(m=!!w[7]()),m?create_if_block_3$7:w[1]==1?create_if_block_6$3:create_else_block_2)}let k=b(l,-1),x=k(l);return{c(){d=element("div"),x.c(),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);x.l(I),I.forEach(detach),this.h()},h(){attr(d,"class",y="has-tooltip tooltip-text "+(l[2]&&l[7]()?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-4m3301")},m(w,I){insert_hydration(w,d,I),x.m(d,null),g||(v=listen(d,"click",l[9]),g=!0)},p(w,[I]){k===(k=b(w,I))&&x?x.p(w,I):(x.d(1),x=k(w),x&&(x.c(),x.m(d,null))),I&4&&y!==(y="has-tooltip tooltip-text "+(w[2]&&w[7]()?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-4m3301")&&attr(d,"class",y)},i:noop,o:noop,d(w){w&&detach(d),x.d(),g=!1,v()}}}function instance$i(l,d,_){let m,y,g,v,b,k;component_subscribe(l,wallet,T=>_(12,m=T)),component_subscribe(l,keysOpened,T=>_(13,y=T)),component_subscribe(l,beaconLevels,T=>_(14,g=T)),component_subscribe(l,keyRewardText,T=>_(15,v=T)),component_subscribe(l,keyItemsUnlocked,T=>_(16,b=T)),component_subscribe(l,automationItemsUnlocked,T=>_(17,k=T));let{rarity:x,amt:w}=d,I,M,E;onMount(()=>{setTimeout(()=>{_(2,I=P())},50),E=setInterval(()=>{_(2,I=P()),_(3,M=A())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(E)});const S=(T,R=0)=>T<1e9?T.toFixed(T<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):T.toExponential(3).toString().replace("+","");function N(){if(w=="single"&&m["key"+x.toString()]>=1&&(set_store_value(wallet,m["key"+x.toString()]-=1,m),set_store_value(keysOpened,y["key"+(x-1)]+=1,y),D(1)),w=="max"){const T=m["key"+x.toString()];set_store_value(wallet,m["key"+x.toString()]=0,m),D(T)}else if(L()&&m["key"+x.toString()]>=w){const T=parseInt(w)/100,R=Math.floor(m["key"+x.toString()]*T);set_store_value(wallet,m["key"+x.toString()]-=R,m),set_store_value(keysOpened,y["key"+(x-1)]+=R,y),D(R)}}function D(T){T=Number(T);let R={};k["violent openings"]&&(R.fragments=T*Math.pow(10,x*3-11)),set_store_value(keysOpened,y[x-1]+=Number(T),y);let Y;switch(x){case 1:Y=get_store_value(key1DropTable);break;case 2:Y=get_store_value(key2DropTable);break;case 3:Y=get_store_value(key3DropTable);break;case 4:Y=get_store_value(key4DropTable);break;case 5:Y=get_store_value(key5DropTable);break}for(let[te,W]of Object.entries(Y))if(W!=null&&te!="tier")if(Number(T)==1)Math.random()<W[0]&&(R[te]=(R[te]||0)+(W[1]+Math.random()*(W[2]-W[1])));else if(Number(T)*W[0]>=10){const z=Math.min(T,4e7),H=formula.sumArray(Array.from({length:Math.floor(Math.sqrt(z))},()=>Math.floor(W[1]+Math.random()*(W[2]-W[1]))).sort(()=>.5-Math.random()).slice(0,3))/3,F=formula.sumArray(Array.from({length:Math.floor(Math.sqrt(z))},()=>formula.rNorm()).sort(()=>.5-Math.random()).slice(0,3))/3,ae=Math.sqrt(z*W[0]*(1-W[0]))*F,re=W[0]*z+ae;let j=Math.max(re*W[1],re*H);T>z&&(j*=T/z),R[te]=(R[te]||0)+j}else{let z=0;const H=W[0],F=T*H;if(W[0]<.1||T*H<10||T*(1-H)<10){let ae=Math.exp(-1*F);const re=Math.random();let j=0,$=!1;for(;!$&&j<4;)re<1-ae?(j++,ae+=Math.exp(-1*T*H)*Math.pow(T*H,j)/1):$=!0;z=j}else{const ae=Math.sqrt(T*H*(1-H));formula.rNorm(F,ae)}const X=z*(W[1]+Math.random()*(W[2]-W[1]));R[te]=(R[te]||0)+X}isNaN(m["key"+x])&&set_store_value(wallet,m["key"+x]=0,m);const Q={};for(let[te,W]of Object.entries(R))R[te]=Math.floor(W),R[te]>0&&(set_store_value(wallet,m[te]=(m[te]||0)+W,m),b["key"+x].add(te),Q[te]=W);q(Q)}let O;function q(T){set_store_value(keyRewardText,v=T,v),Object.keys(T).length===0&&set_store_value(keyRewardText,v={},v),O&&clearTimeout(O),O=setTimeout(()=>{set_store_value(keyRewardText,v="",v)},3e4)}function P(){return w=="single"||w=="max"?m["key"+x.toString()]>=1:m["key"+x.toString()]>=w}function A(){return m["key"+x.toString()]>0||y["key"+(x-1)]>0}function C(){return["T1 [*]","T2 [**]","T3 [***]","T4 [****]","T5 [*****]"][x-1]}function L(){switch(x){case 1:return m.key1&&m.key1>=1;case 2:return m.beacons&&m.beacons>=1||formula.sumArray(g)>0;case 3:return m.sigils&&m.sigils>=1||y[2]>=1;case 4:return m.artifacts&&m.artifacts>=1||y[3]>=1;case 5:return m.holyLight&&m.holyLight>=1}}function G(){switch(x){case 1:return"Requires 1 [*] key";case 2:return"Requires 1 beacon";case 3:return"Requires 1 sigil";case 4:return"Requires 1 artifact (any kind)";case 5:return"Requires 1 holy light"}}const V=()=>N();return l.$$set=T=>{"rarity"in T&&_(0,x=T.rarity),"amt"in T&&_(1,w=T.amt)},[x,w,I,M,S,N,C,L,G,V]}class KeyOpenButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$i,create_fragment$i,safe_not_equal,{rarity:0,amt:1})}}const KeySlurryConvertButton_svelte_svelte_type_style_lang="";function get_each_context$f(l,d,_){const m=l.slice();return m[12]=d[_],m}function create_if_block$g(l){let d,_,m,y,g=l[6](Math.floor(l[1]))+"",v,b,k,x,w,I,M,E,S,N,D,O=l[6](l[1])+"",q,P,A,C,L,G,V,T,R=l[3]>1&&create_if_block_2$9(l),Y=Object.keys(l[0]),Q=[];for(let te=0;te<Y.length;te+=1)Q[te]=create_each_block$f(get_each_context$f(l,Y,te));return{c(){d=element("div"),_=text(`Convert Keys Into Slurry 
    `),m=element("span"),y=text("[ +"),v=text(g),b=text(" ]"),k=space(),R&&R.c(),x=space(),w=element("span"),I=element("div"),M=text("Converts all keys into key slurry."),E=space(),S=element("div"),N=element("div"),D=text("You will gain "),q=text(O),P=text(" slurry."),A=space(),C=element("hr"),L=space(),G=element("div");for(let te=0;te<Q.length;te+=1)Q[te].c();this.h()},l(te){d=claim_element(te,"DIV",{class:!0});var W=children(d);_=claim_text(W,`Convert Keys Into Slurry 
    `),m=claim_element(W,"SPAN",{class:!0});var z=children(m);y=claim_text(z,"[ +"),v=claim_text(z,g),b=claim_text(z," ]"),z.forEach(detach),k=claim_space(W),R&&R.l(W),x=claim_space(W),w=claim_element(W,"SPAN",{class:!0});var H=children(w);I=claim_element(H,"DIV",{class:!0});var F=children(I);M=claim_text(F,"Converts all keys into key slurry."),F.forEach(detach),E=claim_space(H),S=claim_element(H,"DIV",{class:!0});var X=children(S);N=claim_element(X,"DIV",{class:!0});var ae=children(N);D=claim_text(ae,"You will gain "),q=claim_text(ae,O),P=claim_text(ae," slurry."),ae.forEach(detach),A=claim_space(X),C=claim_element(X,"HR",{}),L=claim_space(X),G=claim_element(X,"DIV",{class:!0});var re=children(G);for(let j=0;j<Q.length;j+=1)Q[j].l(re);re.forEach(detach),X.forEach(detach),H.forEach(detach),W.forEach(detach),this.h()},h(){attr(m,"class","text-teal-400"),attr(I,"class","title text-small-gray items-start text-center pb-1"),attr(N,"class","text-small game-text"),attr(G,"class","pt-1"),attr(S,"class","text-center effect-wrapper"),attr(w,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class","has-tooltip tooltip-text game-btn text-teal-400 py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(te,W){insert_hydration(te,d,W),append_hydration(d,_),append_hydration(d,m),append_hydration(m,y),append_hydration(m,v),append_hydration(m,b),append_hydration(d,k),R&&R.m(d,null),append_hydration(d,x),append_hydration(d,w),append_hydration(w,I),append_hydration(I,M),append_hydration(w,E),append_hydration(w,S),append_hydration(S,N),append_hydration(N,D),append_hydration(N,q),append_hydration(N,P),append_hydration(S,A),append_hydration(S,C),append_hydration(S,L),append_hydration(S,G);for(let z=0;z<Q.length;z+=1)Q[z]&&Q[z].m(G,null);V||(T=listen(d,"click",l[8]),V=!0)},p(te,W){if(W&2&&g!==(g=te[6](Math.floor(te[1]))+"")&&set_data(v,g),te[3]>1?R?R.p(te,W):(R=create_if_block_2$9(te),R.c(),R.m(d,x)):R&&(R.d(1),R=null),W&2&&O!==(O=te[6](te[1])+"")&&set_data(q,O),W&65){Y=Object.keys(te[0]);let z;for(z=0;z<Y.length;z+=1){const H=get_each_context$f(te,Y,z);Q[z]?Q[z].p(H,W):(Q[z]=create_each_block$f(H),Q[z].c(),Q[z].m(G,null))}for(;z<Q.length;z+=1)Q[z].d(1);Q.length=Y.length}},d(te){te&&detach(d),R&&R.d(),destroy_each(Q,te),V=!1,T()}}}function create_if_block_2$9(l){let d,_,m=l[6](Math.floor(l[3]))+"",y,g;return{c(){d=element("span"),_=text("[ +"),y=text(m),g=text(" ]"),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var b=children(d);_=claim_text(b,"[ +"),y=claim_text(b,m),g=claim_text(b," ]"),b.forEach(detach),this.h()},h(){attr(d,"class","text-fuchsia-x600")},m(v,b){insert_hydration(v,d,b),append_hydration(d,_),append_hydration(d,y),append_hydration(d,g)},p(v,b){b&8&&m!==(m=v[6](Math.floor(v[3]))+"")&&set_data(y,m)},d(v){v&&detach(d)}}}function create_if_block_1$c(l){let d,_,m,y="*".repeat(parseInt(l[12].substring(3)))+"",g,v,b,k,x,w,I=l[6](ref.slurryGainFromKeys[parseInt(l[12].substring(3))-1],parseInt(l[12].substring(3))-1==0?5:3)+"",M,E;return{c(){d=element("div"),_=element("span"),m=text("["),g=text(y),v=text("]:"),k=space(),x=element("span"),w=text("+ "),M=text(I),E=space(),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var N=children(d);_=claim_element(N,"SPAN",{class:!0});var D=children(_);m=claim_text(D,"["),g=claim_text(D,y),v=claim_text(D,"]:"),D.forEach(detach),k=claim_space(N),x=claim_element(N,"SPAN",{class:!0});var O=children(x);w=claim_text(O,"+ "),M=claim_text(O,I),O.forEach(detach),E=claim_space(N),N.forEach(detach),this.h()},h(){attr(_,"class",b="text-left "+ref.colors[l[12]]+" svelte-uygk22"),attr(x,"class","text-right align-right w-3/4 text-white"),attr(d,"class","text-small justify-center")},m(S,N){insert_hydration(S,d,N),append_hydration(d,_),append_hydration(_,m),append_hydration(_,g),append_hydration(_,v),append_hydration(d,k),append_hydration(d,x),append_hydration(x,w),append_hydration(x,M),append_hydration(d,E)},p(S,N){N&1&&y!==(y="*".repeat(parseInt(S[12].substring(3)))+"")&&set_data(g,y),N&1&&b!==(b="text-left "+ref.colors[S[12]]+" svelte-uygk22")&&attr(_,"class",b),N&1&&I!==(I=S[6](ref.slurryGainFromKeys[parseInt(S[12].substring(3))-1],parseInt(S[12].substring(3))-1==0?5:3)+"")&&set_data(M,I)},d(S){S&&detach(d)}}}function create_each_block$f(l){let d,_=l[0][l[12]]>0&&create_if_block_1$c(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[0][m[12]]>0?_?_.p(m,y):(_=create_if_block_1$c(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$a(l){let d,_=(l[5].gold>1e4||l[4].slurry>0)&&create_if_block$g(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[5].gold>1e4||m[4].slurry>0?_?_.p(m,y):(_=create_if_block$g(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$h(l){let d=l[2],_,m=create_key_block$a(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&4&&safe_not_equal(d,d=y[2])?(m.d(1),m=create_key_block$a(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$h(l,d,_){let m,y,g,v,b;component_subscribe(l,wallet,S=>_(4,g=S)),component_subscribe(l,slurryToggles,S=>_(10,v=S)),component_subscribe(l,permaWallet,S=>_(5,b=S));let k,x,w={key1:g.key1,key2:g.key2,key3:g.key3,key4:g.key4,key5:g.key5};onMount(()=>{_(2,k=!1),x=setInterval(()=>{_(0,w={key1:g.key1,key2:g.key2,key3:g.key3,key4:g.key4,key5:g.key5})},217)}),onDestroy(()=>{clearInterval(x)});const I=(S,N=0,D=!1)=>S<1e9&&!D?S.toFixed(S<1e3?N:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):S.toExponential(3).toString().replace("+","");function M(){set_store_value(wallet,g.slurry=(g.slurry||0)+m,g),isNaN(g.slurry)&&set_store_value(wallet,g.slurry=0,g),y>=1&&set_store_value(wallet,g.sigils+=y,g);for(let S of Object.keys(g))S.includes("key")&&v[S]&&set_store_value(wallet,g[S]=0,g);console.log(g.slurry)}const E=()=>M();return l.$$.update=()=>{l.$$.dirty&1&&_(1,m=formula.calcKeySlurryGain(w)),l.$$.dirty&2&&_(3,y=formula.calcKeySigilGain(m))},[w,m,k,y,g,b,I,M,E]}class KeySlurryConvertButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$h,create_fragment$h,safe_not_equal,{})}}const SlurryUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$e(l,d,_){const m=l.slice();return m[23]=d[_],m}function create_if_block$f(l){let d,_=l[6][l[0]].name+"",m,y,g=l[7][l[0]]+"",v,b,k=l[6][l[0]].maxLevel+"",x,w,I,M,E,S,N=l[7][l[0]]+"",D,O,q=l[6][l[0]].maxLevel+"",P,A,C=l[6][l[0]].description+"",L,G,V,T,R,Y=(l[6][l[0]].prefix||"")+"",Q,te,W,z=(l[6][l[0]].isPercent?l[11](l[6][l[0]].formula(l[7][l[0]]),3,!1):l[10](l[6][l[0]].formula(l[7][l[0]]),3))+"",H,F,X,ae,re=(l[6][l[0]].isPercent?l[11](l[6][l[0]].formula(l[7][l[0]]+Math.max(1,l[4])),3,!1):l[10](l[6][l[0]].formula(l[7][l[0]]+Math.max(1,l[4])),3))+"",j,$,ne,me=(l[6][l[0]].suffix||"")+"",ce,oe,U,Z,B,K,J,se,de,_e,pe=(l[8].maxBuy&&l[4]>0||l[4]>=1)&&create_if_block_5$4(l),ue=l[4]>1&&create_if_block_4$5(l),ie=l[8].costRatios&&create_if_block_3$6(l);function ge(he,we){return he[7][he[0]]>=he[6][he[0]].maxLevel?create_if_block_1$b:create_else_block$7}let ye=ge(l),ve=ye(l);return{c(){d=element("div"),m=text(_),y=text(" ["),v=text(g),b=text(" / "),x=text(k),w=text(`] 
`),pe&&pe.c(),I=space(),M=element("span"),E=element("div"),S=text("["),D=text(N),O=text(" / "),P=text(q),A=text(`] 
           `),L=text(C),G=space(),V=element("div"),T=element("div"),R=element("span"),Q=text(Y),te=space(),W=element("span"),H=text(z),F=space(),X=element("span"),ae=text(`=> 
                    `),j=text(re),$=space(),ne=element("span"),ce=text(me),oe=space(),ue&&ue.c(),U=space(),ie&&ie.c(),Z=space(),B=element("hr"),K=space(),J=element("div"),ve.c(),this.h()},l(he){d=claim_element(he,"DIV",{class:!0});var we=children(d);m=claim_text(we,_),y=claim_text(we," ["),v=claim_text(we,g),b=claim_text(we," / "),x=claim_text(we,k),w=claim_text(we,`] 
`),pe&&pe.l(we),I=claim_space(we),M=claim_element(we,"SPAN",{class:!0});var Me=children(M);E=claim_element(Me,"DIV",{class:!0});var Ae=children(E);S=claim_text(Ae,"["),D=claim_text(Ae,N),O=claim_text(Ae," / "),P=claim_text(Ae,q),A=claim_text(Ae,`] 
           `),L=claim_text(Ae,C),Ae.forEach(detach),G=claim_space(Me),V=claim_element(Me,"DIV",{class:!0});var Ne=children(V);T=claim_element(Ne,"DIV",{class:!0});var xe=children(T);R=claim_element(xe,"SPAN",{class:!0});var Ue=children(R);Q=claim_text(Ue,Y),Ue.forEach(detach),te=claim_space(xe),W=claim_element(xe,"SPAN",{class:!0});var Ee=children(W);H=claim_text(Ee,z),Ee.forEach(detach),F=claim_space(xe),X=claim_element(xe,"SPAN",{class:!0});var Se=children(X);ae=claim_text(Se,`=> 
                    `),j=claim_text(Se,re),Se.forEach(detach),$=claim_space(xe),ne=claim_element(xe,"SPAN",{class:!0});var Le=children(ne);ce=claim_text(Le,me),Le.forEach(detach),oe=claim_space(xe),ue&&ue.l(xe),U=claim_space(xe),ie&&ie.l(xe),xe.forEach(detach),Ne.forEach(detach),Z=claim_space(Me),B=claim_element(Me,"HR",{}),K=claim_space(Me),J=claim_element(Me,"DIV",{class:!0});var De=children(J);ve.l(De),De.forEach(detach),Me.forEach(detach),we.forEach(detach),this.h()},h(){attr(E,"class","title text-small-gray items-start text-center pb-1"),attr(R,"class","current text-[#cccccc]"),attr(W,"class","current text-[#cccccc]"),attr(X,"class","current text-[#888888]"),attr(ne,"class","current text-[#cccccc]"),attr(T,"class","tooltip-text-xs text-[#cccccc]"),attr(V,"class","text-center effect-wrapper"),attr(J,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(M,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",se="has-tooltip tooltip-text py-1 "+(l[7][l[0]]>=l[6][l[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":l[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(he,we){insert_hydration(he,d,we),append_hydration(d,m),append_hydration(d,y),append_hydration(d,v),append_hydration(d,b),append_hydration(d,x),append_hydration(d,w),pe&&pe.m(d,null),append_hydration(d,I),append_hydration(d,M),append_hydration(M,E),append_hydration(E,S),append_hydration(E,D),append_hydration(E,O),append_hydration(E,P),append_hydration(E,A),append_hydration(E,L),append_hydration(M,G),append_hydration(M,V),append_hydration(V,T),append_hydration(T,R),append_hydration(R,Q),append_hydration(T,te),append_hydration(T,W),append_hydration(W,H),append_hydration(T,F),append_hydration(T,X),append_hydration(X,ae),append_hydration(X,j),append_hydration(T,$),append_hydration(T,ne),append_hydration(ne,ce),append_hydration(T,oe),ue&&ue.m(T,null),append_hydration(T,U),ie&&ie.m(T,null),append_hydration(M,Z),append_hydration(M,B),append_hydration(M,K),append_hydration(M,J),ve.m(J,null),de||(_e=listen(d,"click",l[14]),de=!0)},p(he,we){we&65&&_!==(_=he[6][he[0]].name+"")&&set_data(m,_),we&129&&g!==(g=he[7][he[0]]+"")&&set_data(v,g),we&65&&k!==(k=he[6][he[0]].maxLevel+"")&&set_data(x,k),he[8].maxBuy&&he[4]>0||he[4]>=1?pe?pe.p(he,we):(pe=create_if_block_5$4(he),pe.c(),pe.m(d,I)):pe&&(pe.d(1),pe=null),we&129&&N!==(N=he[7][he[0]]+"")&&set_data(D,N),we&65&&q!==(q=he[6][he[0]].maxLevel+"")&&set_data(P,q),we&65&&C!==(C=he[6][he[0]].description+"")&&set_data(L,C),we&65&&Y!==(Y=(he[6][he[0]].prefix||"")+"")&&set_data(Q,Y),we&193&&z!==(z=(he[6][he[0]].isPercent?he[11](he[6][he[0]].formula(he[7][he[0]]),3,!1):he[10](he[6][he[0]].formula(he[7][he[0]]),3))+"")&&set_data(H,z),we&209&&re!==(re=(he[6][he[0]].isPercent?he[11](he[6][he[0]].formula(he[7][he[0]]+Math.max(1,he[4])),3,!1):he[10](he[6][he[0]].formula(he[7][he[0]]+Math.max(1,he[4])),3))+"")&&set_data(j,re),we&65&&me!==(me=(he[6][he[0]].suffix||"")+"")&&set_data(ce,me),he[4]>1?ue?ue.p(he,we):(ue=create_if_block_4$5(he),ue.c(),ue.m(T,U)):ue&&(ue.d(1),ue=null),he[8].costRatios?ie?ie.p(he,we):(ie=create_if_block_3$6(he),ie.c(),ie.m(T,null)):ie&&(ie.d(1),ie=null),ye===(ye=ge(he))&&ve?ve.p(he,we):(ve.d(1),ve=ye(he),ve&&(ve.c(),ve.m(J,null))),we&197&&se!==(se="has-tooltip tooltip-text py-1 "+(he[7][he[0]]>=he[6][he[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":he[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",se)},d(he){he&&detach(d),pe&&pe.d(),ue&&ue.d(),ie&&ie.d(),ve.d(),de=!1,_e()}}}function create_if_block_5$4(l){let d,_,m;return{c(){d=text("(x"),_=text(l[4]),m=text(")")},l(y){d=claim_text(y,"(x"),_=claim_text(y,l[4]),m=claim_text(y,")")},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),insert_hydration(y,m,g)},p(y,g){g&16&&set_data(_,y[4])},d(y){y&&detach(d),y&&detach(_),y&&detach(m)}}}function create_if_block_4$5(l){let d,_,m;return{c(){d=text("(x"),_=text(l[4]),m=text(")")},l(y){d=claim_text(y,"(x"),_=claim_text(y,l[4]),m=claim_text(y,")")},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),insert_hydration(y,m,g)},p(y,g){g&16&&set_data(_,y[4])},d(y){y&&detach(d),y&&detach(_),y&&detach(m)}}}function create_if_block_3$6(l){let d,_,m,y,g=l[10](l[6][l[0]].ratio,3)+"",v,b;return{c(){d=element("br"),_=space(),m=element("span"),y=text("Cost Multiplier: "),v=text(g),b=text("x"),this.h()},l(k){d=claim_element(k,"BR",{}),_=claim_space(k),m=claim_element(k,"SPAN",{class:!0});var x=children(m);y=claim_text(x,"Cost Multiplier: "),v=claim_text(x,g),b=claim_text(x,"x"),x.forEach(detach),this.h()},h(){attr(m,"class","current text-[#888888]")},m(k,x){insert_hydration(k,d,x),insert_hydration(k,_,x),insert_hydration(k,m,x),append_hydration(m,y),append_hydration(m,v),append_hydration(m,b)},p(k,x){x&65&&g!==(g=k[10](k[6][k[0]].ratio,3)+"")&&set_data(v,g)},d(k){k&&detach(d),k&&detach(_),k&&detach(m)}}}function create_else_block$7(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$e(get_each_context$e(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&9762){_=Object.entries(y[1]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context$e(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block$e(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$b(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#888888]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$8(l){let d,_=(l[5][l[23][0]]||l[9].has(l[23][0])?ref.displayNames[l[23][0]]?ref.displayNames[l[23][0]]:l[23][0]:"???")+"",m,y,g,v,b=l[10](l[23][1])+"",k,x;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(w),v=claim_element(w,"DIV",{class:!0});var M=children(v);k=claim_text(M,b),M.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[23][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(v,"class",x="col-span-2 text-left "+(l[13](l[23][0])?"":"text-red-600"))},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,g,I),insert_hydration(w,v,I),append_hydration(v,k)},p(w,I){I&546&&_!==(_=(w[5][w[23][0]]||w[9].has(w[23][0])?ref.displayNames[w[23][0]]?ref.displayNames[w[23][0]]:w[23][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[w[23][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I&2&&b!==(b=w[10](w[23][1])+"")&&set_data(k,b),I&2&&x!==(x="col-span-2 text-left "+(w[13](w[23][0])?"":"text-red-600"))&&attr(v,"class",x)},d(w){w&&detach(d),w&&detach(g),w&&detach(v)}}}function create_each_block$e(l){let d,_=l[23][1]>=1&&create_if_block_2$8(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[23][1]>=1?_?_.p(m,y):(_=create_if_block_2$8(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$9(l){let d=l[6][l[0]].unlockAt()||l[3]||l[7][l[0]]>0,_,m=d&&create_if_block$f(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&201&&(d=y[6][y[0]].unlockAt()||y[3]||y[7][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$f(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$g(l){let d=l[3]||l[2]||l[7][l[0]]>0,_,m=create_key_block$9(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&141&&safe_not_equal(d,d=y[3]||y[2]||y[7][y[0]]>0)?(m.d(1),m=create_key_block$9(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$g(l,d,_){let m,y,g,v,b;component_subscribe(l,wallet,T=>_(5,m=T)),component_subscribe(l,keyUpgrades,T=>_(6,y=T)),component_subscribe(l,keyUpgradeLevels,T=>_(7,g=T)),component_subscribe(l,settings,T=>_(8,v=T)),component_subscribe(l,unlockedRes,T=>_(9,b=T));let{index:k}=d,x=()=>{let T={};for(let[R,Y]of Object.entries(y[k].cost))T[R]=O(Y);return T},w={},I,M=g[k]>0,E,S;onMount(()=>{setTimeout(()=>{_(1,w=x()),_(2,I=L()),y[k].unlockAt()&&_(3,M=!0),_(3,M=g[k]>0)},50),E=setInterval(()=>{_(2,I=L()),G(),y[k].unlockAt()&&_(3,M=!0),v.maxBuy?(_(4,S=q()),_(1,w=x())):(_(4,S=v.buyAmount),_(1,w=x()))},100+Math.random()*20)}),onDestroy(()=>{clearInterval(E)});const N=(T,R=0)=>T<1e9?T.toFixed(T<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):T.toExponential(3).toString().replace("+",""),D=(T,R=3,Y=!1)=>(Y&&(T-=1),T<1e9?(T*100).toFixed(T*100<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(T*100).toExponential(R).toString().replace("+","")+"%");function O(T){const R=T*Math.pow(y[k].ratio,g[k]),Y=y[k].ratio,Q=Math.max(1,S);return formula.gSum(R,Y,Q)}function q(){if(y[k].maxLevel==1)return g[k]==0?1:0;const T=y[k].maxLevel-g[k];let R=1e9;for(let[Y,Q]of Object.entries(y[k].cost)){if(!m[Y])return 0;const te=Q*Math.pow(y[k].ratio,g[k]);R=Math.min(R,formula.maxNumGeom(m[Y],te,y[k].ratio))}return Math.min(T,R)}function P(){if(!(g[k]>=y[k].maxLevel)){_(1,w=x());for(let[T,R]of Object.entries(w))if(R>=1&&m[T]<R||!m[T])return;for(let[T,R]of Object.entries(w))R>=1&&set_store_value(wallet,m[T]-=R,m);set_store_value(keyUpgradeLevels,g[k]+=S,g),_(1,w=x()),_(3,M=!0),C()}}function A(T){return m[T]>=w[T]}function C(){key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable()}function L(){_(1,w=x());for(let[T,R]of Object.entries(w))if(R>=1&&m[T]<R||!m[T])return!1;return!0}function G(){for(let[T,R]of Object.entries(y[k].unlockAt))if(m[T]<R)return!1;return!0}const V=()=>P();return l.$$set=T=>{"index"in T&&_(0,k=T.index)},[k,w,I,M,S,m,y,g,v,b,N,D,P,A,V]}class SlurryUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$g,create_fragment$g,safe_not_equal,{index:0})}}const SlurryCraftButton_svelte_svelte_type_style_lang="";function get_each_context$d(l,d,_){const m=l.slice();return m[37]=d[_],m}function create_else_block_1(l){let d,_,m=l[1][l[0]].name+"",y,g;return{c(){d=text(`Craft 
        `),_=element("span"),y=text(m),this.h()},l(v){d=claim_text(v,`Craft 
        `),_=claim_element(v,"SPAN",{class:!0});var b=children(_);y=claim_text(b,m),b.forEach(detach),this.h()},h(){attr(_,"class",g=null_to_empty(l[1][l[0]].style||"text-white")+" svelte-uygk22")},m(v,b){insert_hydration(v,d,b),insert_hydration(v,_,b),append_hydration(_,y)},p(v,b){b[0]&3&&m!==(m=v[1][v[0]].name+"")&&set_data(y,m),b[0]&3&&g!==(g=null_to_empty(v[1][v[0]].style||"text-white")+" svelte-uygk22")&&attr(_,"class",g)},d(v){v&&detach(d),v&&detach(_)}}}function create_if_block_2$7(l){let d,_=l[13](l[5],2)+"",m,y;return{c(){d=text("Crafting... "),m=text(_),y=text("%")},l(g){d=claim_text(g,"Crafting... "),m=claim_text(g,_),y=claim_text(g,"%")},m(g,v){insert_hydration(g,d,v),insert_hydration(g,m,v),insert_hydration(g,y,v)},p(g,v){v[0]&32&&_!==(_=g[13](g[5],2)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_key_block_1(l){let d;function _(g,v){return g[4]>g[7]?create_if_block_2$7:create_else_block_1}let m=_(l),y=m(l);return{c(){y.c(),d=empty()},l(g){y.l(g),d=empty()},m(g,v){y.m(g,v),insert_hydration(g,d,v)},p(g,v){m===(m=_(g))&&y?y.p(g,v):(y.d(1),y=m(g),y&&(y.c(),y.m(d.parentNode,d)))},d(g){y.d(g),g&&detach(d)}}}function create_else_block$6(l){let d,_,m,y,g,v,b,k,x=l[13](l[15]()/1e3,0)+"",w,I,M,E,S,N,D,O=l[13](formula.calcMinMaxCraftAmount(l[0])[0])+"",q,P,A=l[13](formula.calcMinMaxCraftAmount(l[0])[1])+"",C,L=Object.entries(l[8]),G=[];for(let V=0;V<L.length;V+=1)G[V]=create_each_block$d(get_each_context$d(l,L,V));return{c(){for(let V=0;V<G.length;V+=1)G[V].c();d=space(),_=element("div"),m=element("hr"),y=space(),g=element("div"),v=text("time"),b=space(),k=element("div"),w=text(x),I=text(" seconds"),M=space(),E=element("div"),S=text("yield"),N=space(),D=element("div"),q=text(O),P=text(` - 
                    `),C=text(A),this.h()},l(V){for(let W=0;W<G.length;W+=1)G[W].l(V);d=claim_space(V),_=claim_element(V,"DIV",{class:!0});var T=children(_);m=claim_element(T,"HR",{}),T.forEach(detach),y=claim_space(V),g=claim_element(V,"DIV",{class:!0});var R=children(g);v=claim_text(R,"time"),R.forEach(detach),b=claim_space(V),k=claim_element(V,"DIV",{class:!0});var Y=children(k);w=claim_text(Y,x),I=claim_text(Y," seconds"),Y.forEach(detach),M=claim_space(V),E=claim_element(V,"DIV",{class:!0});var Q=children(E);S=claim_text(Q,"yield"),Q.forEach(detach),N=claim_space(V),D=claim_element(V,"DIV",{class:!0});var te=children(D);q=claim_text(te,O),P=claim_text(te,` - 
                    `),C=claim_text(te,A),te.forEach(detach),this.h()},h(){attr(_,"class","col-span-4 py-1 items-center justify-center line"),attr(g,"class","text-teal-100 text-left text-xs pr-3 col-span-2"),attr(k,"class","col-span-2 text-xs text-left"),attr(E,"class","text-teal-100 text-left text-xs pr-3 col-span-2"),attr(D,"class","col-span-2 text-xs text-left")},m(V,T){for(let R=0;R<G.length;R+=1)G[R]&&G[R].m(V,T);insert_hydration(V,d,T),insert_hydration(V,_,T),append_hydration(_,m),insert_hydration(V,y,T),insert_hydration(V,g,T),append_hydration(g,v),insert_hydration(V,b,T),insert_hydration(V,k,T),append_hydration(k,w),append_hydration(k,I),insert_hydration(V,M,T),insert_hydration(V,E,T),append_hydration(E,S),insert_hydration(V,N,T),insert_hydration(V,D,T),append_hydration(D,q),append_hydration(D,P),append_hydration(D,C)},p(V,T){if(T[0]&27904){L=Object.entries(V[8]);let R;for(R=0;R<L.length;R+=1){const Y=get_each_context$d(V,L,R);G[R]?G[R].p(Y,T):(G[R]=create_each_block$d(Y),G[R].c(),G[R].m(d.parentNode,d))}for(;R<G.length;R+=1)G[R].d(1);G.length=L.length}T[0]&1&&O!==(O=V[13](formula.calcMinMaxCraftAmount(V[0])[0])+"")&&set_data(q,O),T[0]&1&&A!==(A=V[13](formula.calcMinMaxCraftAmount(V[0])[1])+"")&&set_data(C,A)},d(V){destroy_each(G,V),V&&detach(d),V&&detach(_),V&&detach(y),V&&detach(g),V&&detach(b),V&&detach(k),V&&detach(M),V&&detach(E),V&&detach(N),V&&detach(D)}}}function create_if_block$e(l){let d,_;return{c(){d=element("div"),_=text("Crafting..."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Crafting..."),y.forEach(detach),this.h()},h(){attr(d,"class","tooltip-text text-center")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_1$a(l){let d,_=(l[10][l[37][0]]||l[11].has(l[37][0])?ref.displayNames[l[37][0]]?ref.displayNames[l[37][0]]:l[37][0]:"???")+"",m,y,g,v,b=l[13](l[37][1])+"",k,x;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(w),v=claim_element(w,"DIV",{class:!0});var M=children(v);k=claim_text(M,b),M.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[37][0]]||ref.colors.default)+" text-left pr-3 col-span-2 svelte-uygk22"),attr(v,"class",x="col-span-2 text-left "+(l[14](l[37][0])?"":"text-red-600"))},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,g,I),insert_hydration(w,v,I),append_hydration(v,k)},p(w,I){I[0]&3328&&_!==(_=(w[10][w[37][0]]||w[11].has(w[37][0])?ref.displayNames[w[37][0]]?ref.displayNames[w[37][0]]:w[37][0]:"???")+"")&&set_data(m,_),I[0]&256&&y!==(y=(ref.colors[w[37][0]]||ref.colors.default)+" text-left pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I[0]&256&&b!==(b=w[13](w[37][1])+"")&&set_data(k,b),I[0]&256&&x!==(x="col-span-2 text-left "+(w[14](w[37][0])?"":"text-red-600"))&&attr(v,"class",x)},d(w){w&&detach(d),w&&detach(g),w&&detach(v)}}}function create_each_block$d(l){let d,_=l[37][1]>=1&&create_if_block_1$a(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[37][1]>=1?_?_.p(m,y):(_=create_if_block_1$a(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$8(l){let d,_,m=l[4],y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A=l[13](l[2][l[12]][0])+"",C,L,G=l[13](1/Math.pow(.9,l[9]-1),1)+"",V,T,R,Y,Q,te,W,z,H=l[13](l[2][l[12]][1])+"",F,X,ae=l[13](l[2][l[12]][2])+"",re,j,$,ne,me,ce,oe=create_key_block_1(l);function U(K,J){return K[4]>K[7]?create_if_block$e:create_else_block$6}let Z=U(l),B=Z(l);return{c(){d=element("div"),_=element("div"),oe.c(),y=space(),g=element("span"),v=element("div"),B.c(),x=space(),w=element("div"),I=element("div"),M=element("div"),E=element("div"),S=element("div"),D=space(),O=element("div"),q=element("div"),P=text("Skill "),C=text(A),L=text(` 
                    [`),V=text(G),T=text("x speed]"),R=space(),Y=element("div"),Q=element("div"),te=element("span"),W=element("span"),z=text("[ "),F=text(H),X=text(" / "),re=text(ae),j=text(" crafts ]"),$=space(),ne=element("div"),this.h()},l(K){d=claim_element(K,"DIV",{class:!0});var J=children(d);_=claim_element(J,"DIV",{class:!0});var se=children(_);oe.l(se),y=claim_space(se),g=claim_element(se,"SPAN",{class:!0});var de=children(g);v=claim_element(de,"DIV",{class:!0});var _e=children(v);B.l(_e),_e.forEach(detach),de.forEach(detach),se.forEach(detach),x=claim_space(J),w=claim_element(J,"DIV",{class:!0});var pe=children(w);I=claim_element(pe,"DIV",{class:!0});var ue=children(I);M=claim_element(ue,"DIV",{class:!0});var ie=children(M);E=claim_element(ie,"DIV",{class:!0});var ge=children(E);S=claim_element(ge,"DIV",{class:!0,style:!0}),children(S).forEach(detach),ge.forEach(detach),ie.forEach(detach),ue.forEach(detach),D=claim_space(pe),O=claim_element(pe,"DIV",{class:!0});var ye=children(O);q=claim_element(ye,"DIV",{class:!0});var ve=children(q);P=claim_text(ve,"Skill "),C=claim_text(ve,A),L=claim_text(ve,` 
                    [`),V=claim_text(ve,G),T=claim_text(ve,"x speed]"),ve.forEach(detach),R=claim_space(ye),Y=claim_element(ye,"DIV",{class:!0});var he=children(Y);Q=claim_element(he,"DIV",{class:!0});var we=children(Q);te=claim_element(we,"SPAN",{class:!0});var Me=children(te);W=claim_element(Me,"SPAN",{class:!0});var Ae=children(W);z=claim_text(Ae,"[ "),F=claim_text(Ae,H),X=claim_text(Ae," / "),re=claim_text(Ae,ae),j=claim_text(Ae," crafts ]"),Ae.forEach(detach),Me.forEach(detach),$=claim_space(we),ne=claim_element(we,"DIV",{class:!0,style:!0}),children(ne).forEach(detach),we.forEach(detach),he.forEach(detach),ye.forEach(detach),pe.forEach(detach),J.forEach(detach),this.h()},h(){attr(v,"class","cost items-center text-center grid grid-cols-4"),attr(g,"class",b="px-2 mx-4 "+(l[4]>l[7]?"max-w-[90px]":"max-w-[300px]")+" tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(_,"class",k="has-tooltip tooltip-text "+(l[3]&&l[4]<=l[7]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 pr-2 items-center text-center border-solid mr-3 col-span-4 select-none svelte-uygk22"),attr(S,"class",N=l[1][l[0]].stylebg+" h-2.5 rounded-full svelte-uygk22"),set_style(S,"width",l[5]+"%"),attr(E,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(M,"class","mine-bar-wrapper align-middle"),attr(I,"class","row-span-1"),attr(q,"class","col-span-3 text-left text-small text-amber-400"),attr(W,"class","col-span-1 text-center text-amber-400 pb-1"),attr(te,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none grid grid-cols-1 svelte-uygk22"),attr(ne,"class","bg-amber-400 h-1 rounded-full"),set_style(ne,"width",l[6]+"%"),attr(Q,"class","has-tooltip w-full my-1 bg-gray-200 rounded-full h-1 dark:bg-gray-700 svelte-uygk22"),attr(Y,"class","col-span-6 mine-bar-wrapper align-middle"),attr(O,"class","row-span-1 grid grid-cols-9"),attr(w,"class","col-span-8 grid grid-rows-2 align-middle items-right"),attr(d,"class","wrapper grid grid-cols-12 py-1")},m(K,J){insert_hydration(K,d,J),append_hydration(d,_),oe.m(_,null),append_hydration(_,y),append_hydration(_,g),append_hydration(g,v),B.m(v,null),append_hydration(d,x),append_hydration(d,w),append_hydration(w,I),append_hydration(I,M),append_hydration(M,E),append_hydration(E,S),append_hydration(w,D),append_hydration(w,O),append_hydration(O,q),append_hydration(q,P),append_hydration(q,C),append_hydration(q,L),append_hydration(q,V),append_hydration(q,T),append_hydration(O,R),append_hydration(O,Y),append_hydration(Y,Q),append_hydration(Q,te),append_hydration(te,W),append_hydration(W,z),append_hydration(W,F),append_hydration(W,X),append_hydration(W,re),append_hydration(W,j),append_hydration(Q,$),append_hydration(Q,ne),me||(ce=listen(_,"click",l[17]),me=!0)},p(K,J){J[0]&16&&safe_not_equal(m,m=K[4])?(oe.d(1),oe=create_key_block_1(K),oe.c(),oe.m(_,y)):oe.p(K,J),Z===(Z=U(K))&&B?B.p(K,J):(B.d(1),B=Z(K),B&&(B.c(),B.m(v,null))),J[0]&144&&b!==(b="px-2 mx-4 "+(K[4]>K[7]?"max-w-[90px]":"max-w-[300px]")+" tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22")&&attr(g,"class",b),J[0]&152&&k!==(k="has-tooltip tooltip-text "+(K[3]&&K[4]<=K[7]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 pr-2 items-center text-center border-solid mr-3 col-span-4 select-none svelte-uygk22")&&attr(_,"class",k),J[0]&3&&N!==(N=K[1][K[0]].stylebg+" h-2.5 rounded-full svelte-uygk22")&&attr(S,"class",N),J[0]&32&&set_style(S,"width",K[5]+"%"),J[0]&4&&A!==(A=K[13](K[2][K[12]][0])+"")&&set_data(C,A),J[0]&512&&G!==(G=K[13](1/Math.pow(.9,K[9]-1),1)+"")&&set_data(V,G),J[0]&4&&H!==(H=K[13](K[2][K[12]][1])+"")&&set_data(F,H),J[0]&4&&ae!==(ae=K[13](K[2][K[12]][2])+"")&&set_data(re,ae),J[0]&64&&set_style(ne,"width",K[6]+"%")},d(K){K&&detach(d),oe.d(K),B.d(),me=!1,ce()}}}function create_fragment$f(l){let d=l[10][l[12]]>=.9,_,m=create_key_block$8(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&1024&&safe_not_equal(d,d=y[10][y[12]]>=.9)?(m.d(1),m=create_key_block$8(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$f(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N;component_subscribe(l,wallet,j=>_(10,v=j)),component_subscribe(l,keyCrafts,j=>_(1,b=j)),component_subscribe(l,keyCraftTimes,j=>_(24,k=j)),component_subscribe(l,settings,j=>_(25,x=j)),component_subscribe(l,craftMasteryLevel,j=>_(26,w=j)),component_subscribe(l,keyCraftMastery,j=>_(2,I=j)),component_subscribe(l,keyUpgradeLevels,j=>_(27,M=j)),component_subscribe(l,keyUpgrades,j=>_(28,E=j)),component_subscribe(l,keyCraftAmount,j=>_(29,S=j)),component_subscribe(l,unlockedRes,j=>_(11,N=j));let{index:D}=d,O,q,P=b[D].item;console.log(P);let A=k[P][0],C=k[P][1];I[P]||set_store_value(keyCraftMastery,I[P]=[1,0,10],I);let L=0,G=j=>C!=A?Math.min(100,C>j?(j-A)/(C-A)*100:0):0,V=0;const T=()=>I[P][1]/I[P][2]*100;let R,Y,Q=Date.now();onMount(()=>{setTimeout(()=>{_(8,y=m()),_(3,O=X())},209),R=setInterval(()=>{_(7,Q=Date.now()),_(5,L=G(Q)),_(6,V=T())},23+Math.random()*11),A=k[P][0],_(4,C=k[P][1]),Y=setInterval(()=>{_(8,y=m()),console.log(y)},793),q=setInterval(()=>{_(3,O=X()),ae()},100+Math.random()*20)}),onDestroy(()=>{clearInterval(q),clearInterval(R),clearInterval(Y)});const te=(j,$=0)=>j<1e9?j.toFixed(j<1e3?$:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):j.toExponential(3).toString().replace("+","");function W(j){return v[j]>=y[j]}function z(j){const $=j*Math.pow(P=="energy"?E[2].formula(M[2]):b[D].ratio,S[P]),ne=P=="energy"?E[2].formula(M[2]):b[D].ratio,me=1;return formula.gSum($,ne,me)}function H(){let j=b[D].craftTime;return j*=Math.pow(.9,I[P][0]-1),j*=1/formula.calcCraftMasterySpeedBonus(w),j/=x.speed,j*1e3}function F(){if(C>Q||v.slurry<1)return;_(8,y=m());for(let[$,ne]of Object.entries(y))if(ne>=1&&v[$]<ne)return;for(let[$,ne]of Object.entries(y))ne>=1&&set_store_value(wallet,v[$]-=ne,v);_(8,y=m()),A=Date.now(),set_store_value(keyCraftTimes,k[P][0]=A,k);const j=A+H();_(4,C=j),set_store_value(keyCraftTimes,k[P][1]=j,k)}function X(){_(8,y=m());for(let[j,$]of Object.entries(y))if($>=1&&v[j]<$)return!1;return!0}function ae(){for(let[j,$]of Object.entries(b[D].unlockAt))if(v[j]<$)return!1;return!0}const re=()=>F();return l.$$set=j=>{"index"in j&&_(0,D=j.index)},l.$$.update=()=>{l.$$.dirty[0]&3&&(m=()=>{let j={};for(let[$,ne]of Object.entries(b[D].cost)){if($=="energy"){j[$]=ne;continue}j[$]=z(ne)}return j}),l.$$.dirty[0]&4&&_(9,g=I[P][0])},_(8,y={}),[D,b,I,O,C,L,V,Q,y,g,v,N,P,te,W,H,F,re]}class SlurryCraftButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$f,create_fragment$f,safe_not_equal,{index:0},null,[-1,-1])}}function get_each_context$c(l,d,_){const m=l.slice();return m[25]=d[_],m[27]=_,m}function get_each_context_1$4(l,d,_){const m=l.slice();return m[25]=d[_],m[27]=_,m}function get_each_context_2$1(l,d,_){const m=l.slice();return m[29]=d[_],m}function get_each_context_3$1(l,d,_){const m=l.slice();return m[27]=d[_],m[32]=d,m[33]=_,m}function get_each_context_4$1(l,d,_){const m=l.slice();return m[34]=d[_],m}function get_each_context_5(l,d,_){const m=l.slice();return m[25]=d[_],m[27]=_,m}function create_if_block_8$1(l){let d;return{c(){d=text("+")},l(_){d=claim_text(_,"+")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block_5(l){let d,_=" "+l[14](l[25],0),m,y,g,v=l[27]+1<l[4].length&&create_if_block_8$1();return{c(){d=element("span"),m=text(_),y=space(),v&&v.c(),g=empty(),this.h()},l(b){d=claim_element(b,"SPAN",{class:!0});var k=children(d);m=claim_text(k,_),k.forEach(detach),y=claim_space(b),v&&v.l(b),g=empty(),this.h()},h(){attr(d,"class",ref.colors["key"+(l[27]+1).toString()])},m(b,k){insert_hydration(b,d,k),append_hydration(d,m),insert_hydration(b,y,k),v&&v.m(b,k),insert_hydration(b,g,k)},p(b,k){k[0]&16&&_!==(_=" "+b[14](b[25],0))&&set_data(m,_),b[27]+1<b[4].length?v||(v=create_if_block_8$1(),v.c(),v.m(g.parentNode,g)):v&&(v.d(1),v=null)},d(b){b&&detach(d),b&&detach(y),v&&v.d(b),b&&detach(g)}}}function create_if_block_7$1(l){let d,_,m=(ref.displayNames[l[34][0]]||l[34][0])+"",y,g,v,b,k=l[15](l[34][1][0],l[34][1][0]<1e-5?5:3)+"",x,w,I,M,E,S=l[14](l[34][1][1],0)+"",N,D,O=l[14](l[34][1][2],0)+"",q,P;return{c(){d=element("div"),_=element("div"),y=text(m),v=space(),b=element("div"),x=text(k),I=space(),M=element("div"),E=text("[ "),N=text(S),D=text(" - "),q=text(O),P=text(" ]"),this.h()},l(A){d=claim_element(A,"DIV",{class:!0});var C=children(d);_=claim_element(C,"DIV",{class:!0});var L=children(_);y=claim_text(L,m),L.forEach(detach),v=claim_space(C),b=claim_element(C,"DIV",{class:!0});var G=children(b);x=claim_text(G,k),G.forEach(detach),I=claim_space(C),M=claim_element(C,"DIV",{class:!0});var V=children(M);E=claim_text(V,"[ "),N=claim_text(V,S),D=claim_text(V," - "),q=claim_text(V,O),P=claim_text(V," ]"),V.forEach(detach),C.forEach(detach),this.h()},h(){attr(_,"class",g="col-span-3 text-left pl-[8px] "+(ref.colors[l[34][0]]||"text-white")),attr(b,"class",w="col-span-3 text-left pl-1 "+(l[34][1][0]>=1?"text-red-400":l[34][1][4]>0&&l[34][1][0]>=l[34][1][4]?"text-amber-200":"")),attr(M,"class","col-span-3 text-right pl-1"),attr(d,"class","drop-table-disp grid grid-cols-10")},m(A,C){insert_hydration(A,d,C),append_hydration(d,_),append_hydration(_,y),append_hydration(d,v),append_hydration(d,b),append_hydration(b,x),append_hydration(d,I),append_hydration(d,M),append_hydration(M,E),append_hydration(M,N),append_hydration(M,D),append_hydration(M,q),append_hydration(M,P)},p(A,C){C[0]&4&&m!==(m=(ref.displayNames[A[34][0]]||A[34][0])+"")&&set_data(y,m),C[0]&4&&g!==(g="col-span-3 text-left pl-[8px] "+(ref.colors[A[34][0]]||"text-white"))&&attr(_,"class",g),C[0]&4&&k!==(k=A[15](A[34][1][0],A[34][1][0]<1e-5?5:3)+"")&&set_data(x,k),C[0]&4&&w!==(w="col-span-3 text-left pl-1 "+(A[34][1][0]>=1?"text-red-400":A[34][1][4]>0&&A[34][1][0]>=A[34][1][4]?"text-amber-200":""))&&attr(b,"class",w),C[0]&4&&S!==(S=A[14](A[34][1][1],0)+"")&&set_data(N,S),C[0]&4&&O!==(O=A[14](A[34][1][2],0)+"")&&set_data(q,O)},d(A){A&&detach(d)}}}function create_each_block_4$1(l){let d=l[34][0]!="tier"&&l[7]["key"+l[27]].has(l[34][0]),_,m=d&&create_if_block_7$1(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&132&&(d=y[34][0]!="tier"&&y[7]["key"+y[27]].has(y[34][0])),d?m?m.p(y,g):(m=create_if_block_7$1(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_if_block_6$2(l){let d,_,m,y,g,v,b,k=Object.entries(l[2][l[27]-1]).length-l[7]["key"+l[27]].size-1+"",x,w;return{c(){d=element("div"),_=element("div"),m=text("???"),y=space(),g=element("div"),v=text("There are "),b=element("span"),x=text(k),w=text(`
                                    more items that can drop from this key.`),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var M=children(d);_=claim_element(M,"DIV",{class:!0});var E=children(_);m=claim_text(E,"???"),E.forEach(detach),y=claim_space(M),g=claim_element(M,"DIV",{class:!0});var S=children(g);v=claim_text(S,"There are "),b=claim_element(S,"SPAN",{class:!0});var N=children(b);x=claim_text(N,k),N.forEach(detach),w=claim_text(S,`
                                    more items that can drop from this key.`),S.forEach(detach),M.forEach(detach),this.h()},h(){attr(_,"class","col-span-2 text-left pl-[8px] text-white"),attr(b,"class","text-white font-bold"),attr(g,"class","col-span-7 text-center pl-1"),attr(d,"class","drop-table-disp grid grid-cols-10")},m(I,M){insert_hydration(I,d,M),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,v),append_hydration(g,b),append_hydration(b,x),append_hydration(g,w)},p(I,M){M[0]&132&&k!==(k=Object.entries(I[2][I[27]-1]).length-I[7]["key"+I[27]].size-1+"")&&set_data(x,k)},d(I){I&&detach(d)}}}function create_key_block$7(ctx){let span,t,show_if=ctx[7]["key"+ctx[27]].size<Object.entries(get_store_value(eval("key"+ctx[27]+"DropTable"))).length-1,each_value_4=Object.entries(ctx[2][ctx[27]-1]),each_blocks=[];for(let l=0;l<each_value_4.length;l+=1)each_blocks[l]=create_each_block_4$1(get_each_context_4$1(ctx,each_value_4,l));let if_block=show_if&&create_if_block_6$2(ctx);return{c(){span=element("span");for(let l=0;l<each_blocks.length;l+=1)each_blocks[l].c();t=space(),if_block&&if_block.c(),this.h()},l(l){span=claim_element(l,"SPAN",{class:!0});var d=children(span);for(let _=0;_<each_blocks.length;_+=1)each_blocks[_].l(d);t=claim_space(d),if_block&&if_block.l(d),d.forEach(detach),this.h()},h(){attr(span,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-8 pointer-events-none")},m(l,d){insert_hydration(l,span,d);for(let _=0;_<each_blocks.length;_+=1)each_blocks[_]&&each_blocks[_].m(span,null);append_hydration(span,t),if_block&&if_block.m(span,null)},p(ctx,dirty){if(dirty[0]&49284){each_value_4=Object.entries(ctx[2][ctx[27]-1]);let l;for(l=0;l<each_value_4.length;l+=1){const d=get_each_context_4$1(ctx,each_value_4,l);each_blocks[l]?each_blocks[l].p(d,dirty):(each_blocks[l]=create_each_block_4$1(d),each_blocks[l].c(),each_blocks[l].m(span,t))}for(;l<each_blocks.length;l+=1)each_blocks[l].d(1);each_blocks.length=each_value_4.length}dirty[0]&128&&(show_if=ctx[7]["key"+ctx[27]].size<Object.entries(get_store_value(eval("key"+ctx[27]+"DropTable"))).length-1),show_if?if_block?if_block.p(ctx,dirty):(if_block=create_if_block_6$2(ctx),if_block.c(),if_block.m(span,null)):if_block&&(if_block.d(1),if_block=null)},d(l){l&&detach(span),destroy_each(each_blocks,l),if_block&&if_block.d()}}}function create_if_block_5$3(l){let d,_,m,y,g,v,b,k,x,w;function I(){return l[21](l[33])}function M(){l[22].call(_,l[33])}return{c(){d=element("div"),_=element("input"),m=space(),y=element("label"),g=element("div"),v=text("Slurry "),b=text(l[27]),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);_=claim_element(S,"INPUT",{type:!0,id:!0,class:!0}),m=claim_space(S),y=claim_element(S,"LABEL",{for:!0});var N=children(y);g=claim_element(N,"DIV",{class:!0});var D=children(g);v=claim_text(D,"Slurry "),b=claim_text(D,l[27]),D.forEach(detach),N.forEach(detach),S.forEach(detach),this.h()},h(){attr(_,"type","checkbox"),attr(_,"id","slurry-check-"+(l[33]+1)),attr(_,"class","hidden checkbox w-6 h-6"),attr(g,"class",k=(l[8]["key"+(l[33]+1).toString()]?"game-btn-toggleon":"game-btn")+" col-span-1 py-2 items-center text-center border-solid game-text text-small select-none mt-1"),attr(y,"for","slurry-check-"+(l[33]+1)),attr(d,"class","col-span-1 text-left align-middle")},m(E,S){insert_hydration(E,d,S),append_hydration(d,_),_.checked=l[8]["key"+(l[33]+1).toString()],append_hydration(d,m),append_hydration(d,y),append_hydration(y,g),append_hydration(g,v),append_hydration(g,b),x||(w=[listen(_,"click",I),listen(_,"change",M)],x=!0)},p(E,S){l=E,S[0]&256&&(_.checked=l[8]["key"+(l[33]+1).toString()]),S[0]&256&&k!==(k=(l[8]["key"+(l[33]+1).toString()]?"game-btn-toggleon":"game-btn")+" col-span-1 py-2 items-center text-center border-solid game-text text-small select-none mt-1")&&attr(g,"class",k)},d(E){E&&detach(d),x=!1,run_all(w)}}}function create_each_block_3$1(l){let d,_=(l[5]["key"+l[27]]&&l[5]["key"+l[27]]>=1||l[6]>=l[27]?ref.keyMainNames[l[27]]:"?????")+"",m,y,g,v=l[14](Math.floor(l[5]["key"+l[27]]||0))+"",b,k,x,w,I=l[4],M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z=create_key_block$7(l),H=(l[5].slurry>0||l[5].gold>3)&&create_if_block_5$3(l);return N=new KeyOpenButton({props:{rarity:l[27],amt:"single"}}),P=new KeyOpenButton({props:{rarity:l[27],amt:"10"}}),L=new KeyOpenButton({props:{rarity:l[27],amt:"25"}}),T=new KeyOpenButton({props:{rarity:l[27],amt:"50"}}),Q=new KeyOpenButton({props:{rarity:l[27],amt:"max"}}),{c(){d=element("div"),m=text(_),y=space(),g=element("div"),b=text(v),k=space(),x=element("div"),w=text(`[drops]
                    `),z.c(),M=space(),H&&H.c(),E=space(),S=element("div"),create_component(N.$$.fragment),O=space(),q=element("div"),create_component(P.$$.fragment),A=space(),C=element("div"),create_component(L.$$.fragment),G=space(),V=element("div"),create_component(T.$$.fragment),R=space(),Y=element("div"),create_component(Q.$$.fragment),te=space(),this.h()},l(F){d=claim_element(F,"DIV",{class:!0});var X=children(d);m=claim_text(X,_),X.forEach(detach),y=claim_space(F),g=claim_element(F,"DIV",{class:!0});var ae=children(g);b=claim_text(ae,v),ae.forEach(detach),k=claim_space(F),x=claim_element(F,"DIV",{class:!0});var re=children(x);w=claim_text(re,`[drops]
                    `),z.l(re),re.forEach(detach),M=claim_space(F),H&&H.l(F),E=claim_space(F),S=claim_element(F,"DIV",{class:!0});var j=children(S);claim_component(N.$$.fragment,j),j.forEach(detach),O=claim_space(F),q=claim_element(F,"DIV",{class:!0});var $=children(q);claim_component(P.$$.fragment,$),$.forEach(detach),A=claim_space(F),C=claim_element(F,"DIV",{class:!0});var ne=children(C);claim_component(L.$$.fragment,ne),ne.forEach(detach),G=claim_space(F),V=claim_element(F,"DIV",{class:!0});var me=children(V);claim_component(T.$$.fragment,me),me.forEach(detach),R=claim_space(F),Y=claim_element(F,"DIV",{class:!0});var ce=children(Y);claim_component(Q.$$.fragment,ce),te=claim_space(ce),ce.forEach(detach),this.h()},h(){attr(d,"class","col-span-1 py-1 "+ref.colors["key"+l[27]]),attr(g,"class","col-span-1 text-med py-1 text-left "+ref.colors["key"+l[27]]),attr(x,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid m-1 col-span-1 select-none"),attr(S,"class",D=(l[5].slurry>0||l[5].gold>3?"col-span-2":"col-span-3")+" py-1 text-left "+ref.colors["key"+l[27]]),attr(q,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[27]]),attr(C,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[27]]),attr(V,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[27]]),attr(Y,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[27]])},m(F,X){insert_hydration(F,d,X),append_hydration(d,m),insert_hydration(F,y,X),insert_hydration(F,g,X),append_hydration(g,b),insert_hydration(F,k,X),insert_hydration(F,x,X),append_hydration(x,w),z.m(x,null),insert_hydration(F,M,X),H&&H.m(F,X),insert_hydration(F,E,X),insert_hydration(F,S,X),mount_component(N,S,null),insert_hydration(F,O,X),insert_hydration(F,q,X),mount_component(P,q,null),insert_hydration(F,A,X),insert_hydration(F,C,X),mount_component(L,C,null),insert_hydration(F,G,X),insert_hydration(F,V,X),mount_component(T,V,null),insert_hydration(F,R,X),insert_hydration(F,Y,X),mount_component(Q,Y,null),append_hydration(Y,te),W=!0},p(F,X){(!W||X[0]&96)&&_!==(_=(F[5]["key"+F[27]]&&F[5]["key"+F[27]]>=1||F[6]>=F[27]?ref.keyMainNames[F[27]]:"?????")+"")&&set_data(m,_),(!W||X[0]&32)&&v!==(v=F[14](Math.floor(F[5]["key"+F[27]]||0))+"")&&set_data(b,v),X[0]&16&&safe_not_equal(I,I=F[4])?(z.d(1),z=create_key_block$7(F),z.c(),z.m(x,null)):z.p(F,X),F[5].slurry>0||F[5].gold>3?H?H.p(F,X):(H=create_if_block_5$3(F),H.c(),H.m(E.parentNode,E)):H&&(H.d(1),H=null),(!W||X[0]&32&&D!==(D=(F[5].slurry>0||F[5].gold>3?"col-span-2":"col-span-3")+" py-1 text-left "+ref.colors["key"+F[27]]))&&attr(S,"class",D)},i(F){W||(transition_in(N.$$.fragment,F),transition_in(P.$$.fragment,F),transition_in(L.$$.fragment,F),transition_in(T.$$.fragment,F),transition_in(Q.$$.fragment,F),W=!0)},o(F){transition_out(N.$$.fragment,F),transition_out(P.$$.fragment,F),transition_out(L.$$.fragment,F),transition_out(T.$$.fragment,F),transition_out(Q.$$.fragment,F),W=!1},d(F){F&&detach(d),F&&detach(y),F&&detach(g),F&&detach(k),F&&detach(x),z.d(F),F&&detach(M),H&&H.d(F),F&&detach(E),F&&detach(S),destroy_component(N),F&&detach(O),F&&detach(q),destroy_component(P),F&&detach(A),F&&detach(C),destroy_component(L),F&&detach(G),F&&detach(V),destroy_component(T),F&&detach(R),F&&detach(Y),destroy_component(Q)}}}function create_if_block_3$5(l){let d,_,m,y,g=Object.entries(l[9]),v=[];for(let b=0;b<g.length;b+=1)v[b]=create_each_block_2$1(get_each_context_2$1(l,g,b));return{c(){d=element("div"),_=element("div"),m=text("You received the following rewards:"),y=space();for(let b=0;b<v.length;b+=1)v[b].c();this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var k=children(d);_=claim_element(k,"DIV",{class:!0});var x=children(_);m=claim_text(x,"You received the following rewards:"),x.forEach(detach),y=claim_space(k);for(let w=0;w<v.length;w+=1)v[w].l(k);k.forEach(detach),this.h()},h(){attr(_,"class","col-span-8 game-text text-center pt-1"),attr(d,"class","grid grid-cols-8")},m(b,k){insert_hydration(b,d,k),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y);for(let x=0;x<v.length;x+=1)v[x]&&v[x].m(d,null)},p(b,k){if(k[0]&16896){g=Object.entries(b[9]);let x;for(x=0;x<g.length;x+=1){const w=get_each_context_2$1(b,g,x);v[x]?v[x].p(w,k):(v[x]=create_each_block_2$1(w),v[x].c(),v[x].m(d,null))}for(;x<v.length;x+=1)v[x].d(1);v.length=g.length}},d(b){b&&detach(d),destroy_each(v,b)}}}function create_if_block_4$4(l){let d,_,m,y=(ref.displayNames[l[29][0]]?ref.displayNames[l[29][0]]:l[29][0])+"",g,v,b,k,x,w=l[14](Number(l[29][1]),0)+"",I,M,E,S;return{c(){d=element("div"),_=space(),m=element("div"),g=text(y),v=text(":"),k=space(),x=element("div"),I=text(w),E=space(),S=element("div"),this.h()},l(N){d=claim_element(N,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(N),m=claim_element(N,"DIV",{class:!0});var D=children(m);g=claim_text(D,y),v=claim_text(D,":"),D.forEach(detach),k=claim_space(N),x=claim_element(N,"DIV",{class:!0});var O=children(x);I=claim_text(O,w),O.forEach(detach),E=claim_space(N),S=claim_element(N,"DIV",{class:!0}),children(S).forEach(detach),this.h()},h(){attr(d,"class","col-span-3"),attr(m,"class",b="col-span-1 text-med text-left pt-1 "+(ref.colors[l[29][0]]||"text-white")),attr(x,"class",M="col-span-1 text-med pt-1 text-left "+(ref.colors[l[29][0]]||"text-white")),attr(S,"class","col-span-3")},m(N,D){insert_hydration(N,d,D),insert_hydration(N,_,D),insert_hydration(N,m,D),append_hydration(m,g),append_hydration(m,v),insert_hydration(N,k,D),insert_hydration(N,x,D),append_hydration(x,I),insert_hydration(N,E,D),insert_hydration(N,S,D)},p(N,D){D[0]&512&&y!==(y=(ref.displayNames[N[29][0]]?ref.displayNames[N[29][0]]:N[29][0])+"")&&set_data(g,y),D[0]&512&&b!==(b="col-span-1 text-med text-left pt-1 "+(ref.colors[N[29][0]]||"text-white"))&&attr(m,"class",b),D[0]&512&&w!==(w=N[14](Number(N[29][1]),0)+"")&&set_data(I,w),D[0]&512&&M!==(M="col-span-1 text-med pt-1 text-left "+(ref.colors[N[29][0]]||"text-white"))&&attr(x,"class",M)},d(N){N&&detach(d),N&&detach(_),N&&detach(m),N&&detach(k),N&&detach(x),N&&detach(E),N&&detach(S)}}}function create_each_block_2$1(l){let d=Number(l[29][1])>=.99997,_,m=d&&create_if_block_4$4(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&512&&(d=Number(y[29][1])>=.99997),d?m?m.p(y,g):(m=create_if_block_4$4(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_else_block$5(l){let d,_;return{c(){d=element("div"),_=text("Unlock a new feature at 10,000 gold"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Unlock a new feature at 10,000 gold"),y.forEach(detach),this.h()},h(){attr(d,"class","game-btn-noafford text-center py-2")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},i:noop,o:noop,d(m){m&&detach(d)}}}function create_if_block_2$6(l){let d,_;return d=new KeySlurryConvertButton({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_each_block_1$4(l){let d,_,m,y;return _=new SlurryUpgradeButton({props:{index:l[27]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","col-span-3 pb-1")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},p:noop,i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_if_block$d(l){let d,_,m,y,g,v,b,k,x,w=l[14](formula.calcCraftMasterySpeedBonus(l[12]),2)+"",I,M,E,S,N,D,O,q,P=l[14](l[1])+"",A,C,L=l[14](l[0])+"",G,V,T,R,Y,Q,te,W=l[13],z=[];for(let F=0;F<W.length;F+=1)z[F]=create_each_block$c(get_each_context$c(l,W,F));const H=F=>transition_out(z[F],1,1,()=>{z[F]=null});return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=text("Crafting Mastery "),v=text(l[12]),b=space(),k=element("div"),x=text("x"),I=text(w),M=text(" global speed bonus"),E=space(),S=element("div"),N=element("div"),D=element("span"),O=element("span"),q=text("["),A=text(P),C=text(" / "),G=text(L),V=text(" crafts]"),T=space(),R=element("div"),Y=space(),Q=element("div");for(let F=0;F<z.length;F+=1)z[F].c();this.h()},l(F){d=claim_element(F,"DIV",{class:!0});var X=children(d);_=claim_element(X,"DIV",{class:!0});var ae=children(_);m=claim_element(ae,"DIV",{class:!0});var re=children(m);y=claim_element(re,"DIV",{class:!0});var j=children(y);g=claim_text(j,"Crafting Mastery "),v=claim_text(j,l[12]),j.forEach(detach),b=claim_space(re),k=claim_element(re,"DIV",{class:!0});var $=children(k);x=claim_text($,"x"),I=claim_text($,w),M=claim_text($," global speed bonus"),$.forEach(detach),re.forEach(detach),ae.forEach(detach),E=claim_space(X),S=claim_element(X,"DIV",{class:!0});var ne=children(S);N=claim_element(ne,"DIV",{class:!0});var me=children(N);D=claim_element(me,"SPAN",{class:!0});var ce=children(D);O=claim_element(ce,"SPAN",{class:!0});var oe=children(O);q=claim_text(oe,"["),A=claim_text(oe,P),C=claim_text(oe," / "),G=claim_text(oe,L),V=claim_text(oe," crafts]"),oe.forEach(detach),ce.forEach(detach),T=claim_space(me),R=claim_element(me,"DIV",{class:!0,style:!0}),children(R).forEach(detach),me.forEach(detach),ne.forEach(detach),X.forEach(detach),Y=claim_space(F),Q=claim_element(F,"DIV",{class:!0});var U=children(Q);for(let Z=0;Z<z.length;Z+=1)z[Z].l(U);U.forEach(detach),this.h()},h(){attr(y,"class","row-span-1"),attr(k,"class","row-span-1 text-xs"),attr(m,"class","grid grid-rows-2 text-left text-amber-500"),attr(_,"class","col-span-2"),attr(O,"class","col-span-1 text-center text-amber-500 pb-1"),attr(D,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none grid grid-cols-1"),attr(R,"class","bg-amber-500 h-3 rounded-full"),set_style(R,"width",l[3]),attr(N,"class","has-tooltip w-full my-1 bg-gray-200 rounded-full h-3 dark:bg-gray-700"),attr(S,"class","col-span-10 mine-bar-wrapper align-bottom"),attr(d,"class","row-span-1 grid grid-cols-12"),attr(Q,"class","grid grid-cols-12 pt-2")},m(F,X){insert_hydration(F,d,X),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(y,g),append_hydration(y,v),append_hydration(m,b),append_hydration(m,k),append_hydration(k,x),append_hydration(k,I),append_hydration(k,M),append_hydration(d,E),append_hydration(d,S),append_hydration(S,N),append_hydration(N,D),append_hydration(D,O),append_hydration(O,q),append_hydration(O,A),append_hydration(O,C),append_hydration(O,G),append_hydration(O,V),append_hydration(N,T),append_hydration(N,R),insert_hydration(F,Y,X),insert_hydration(F,Q,X);for(let ae=0;ae<z.length;ae+=1)z[ae]&&z[ae].m(Q,null);te=!0},p(F,X){if((!te||X[0]&4096)&&set_data(v,F[12]),(!te||X[0]&4096)&&w!==(w=F[14](formula.calcCraftMasterySpeedBonus(F[12]),2)+"")&&set_data(I,w),(!te||X[0]&2)&&P!==(P=F[14](F[1])+"")&&set_data(A,P),(!te||X[0]&1)&&L!==(L=F[14](F[0])+"")&&set_data(G,L),(!te||X[0]&8)&&set_style(R,"width",F[3]),X[0]&8192){W=F[13];let ae;for(ae=0;ae<W.length;ae+=1){const re=get_each_context$c(F,W,ae);z[ae]?(z[ae].p(re,X),transition_in(z[ae],1)):(z[ae]=create_each_block$c(re),z[ae].c(),transition_in(z[ae],1),z[ae].m(Q,null))}for(group_outros(),ae=W.length;ae<z.length;ae+=1)H(ae);check_outros()}},i(F){if(!te){for(let X=0;X<W.length;X+=1)transition_in(z[X]);te=!0}},o(F){z=z.filter(Boolean);for(let X=0;X<z.length;X+=1)transition_out(z[X]);te=!1},d(F){F&&detach(d),F&&detach(Y),F&&detach(Q),destroy_each(z,F)}}}function create_if_block_1$9(l){let d,_,m,y;return _=new SlurryCraftButton({props:{index:l[27]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","col-span-12")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$c(l){let d=l[13][l[27]].unlockAt(),_,m,y=d&&create_if_block_1$9(l);return{c(){y&&y.c(),_=empty()},l(g){y&&y.l(g),_=empty()},m(g,v){y&&y.m(g,v),insert_hydration(g,_,v),m=!0},p(g,v){v[0]&8192&&(d=g[13][g[27]].unlockAt()),d?y?v[0]&8192&&transition_in(y,1):(y=create_if_block_1$9(g),y.c(),transition_in(y,1),y.m(_.parentNode,_)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(g){m||(transition_in(y),m=!0)},o(g){transition_out(y),m=!1},d(g){y&&y.d(g),g&&detach(_)}}}function create_fragment$e(l){let d,_,m,y,g=l[14](formula.sumArray(l[4]))+"",v,b,k,x,w,I,M=Object.keys(l[9]).length>0,E,S,N,D,O,q,P,A,C,L,G,V,T=l[10].gold>1e4?'Click the "Slurry X" buttons to enable slurry conversion for each key tier.':"",R,Y,Q,te,W=l[4],z=[];for(let U=0;U<W.length;U+=1)z[U]=create_each_block_5(get_each_context_5(l,W,U));let H=[1,2,3,4,5],F=[];for(let U=0;U<5;U+=1)F[U]=create_each_block_3$1(get_each_context_3$1(l,H,U));const X=U=>transition_out(F[U],1,1,()=>{F[U]=null});let ae=M&&create_if_block_3$5(l);const re=[create_if_block_2$6,create_else_block$5],j=[];function $(U,Z){return U[10].gold>1e4||U[5].slurry>0?0:1}D=$(l),O=j[D]=re[D](l);let ne=l[11],me=[];for(let U=0;U<ne.length;U+=1)me[U]=create_each_block_1$4(get_each_context_1$4(l,ne,U));const ce=U=>transition_out(me[U],1,1,()=>{me[U]=null});let oe=l[5].slurry>1&&create_if_block$d(l);return{c(){d=element("div"),_=element("div"),m=element("div"),y=text("Total Keys Opened: "),v=text(g),b=text(`
            [ 
                `);for(let U=0;U<z.length;U+=1)z[U].c();k=text(`
         ]`),x=space();for(let U=0;U<5;U+=1)F[U].c();w=space(),I=element("div"),ae&&ae.c(),E=space(),S=element("div"),N=element("div"),O.c(),q=space(),P=element("div");for(let U=0;U<me.length;U+=1)me[U].c();A=space(),C=element("div"),L=space(),oe&&oe.c(),G=space(),V=element("div"),R=text(T),Y=space(),Q=element("br"),this.h()},l(U){d=claim_element(U,"DIV",{class:!0});var Z=children(d);_=claim_element(Z,"DIV",{class:!0});var B=children(_);m=claim_element(B,"DIV",{class:!0});var K=children(m);y=claim_text(K,"Total Keys Opened: "),v=claim_text(K,g),b=claim_text(K,`
            [ 
                `);for(let ue=0;ue<z.length;ue+=1)z[ue].l(K);k=claim_text(K,`
         ]`),K.forEach(detach),x=claim_space(B);for(let ue=0;ue<5;ue+=1)F[ue].l(B);B.forEach(detach),w=claim_space(Z),I=claim_element(Z,"DIV",{class:!0});var J=children(I);ae&&ae.l(J),J.forEach(detach),E=claim_space(Z),S=claim_element(Z,"DIV",{class:!0});var se=children(S);N=claim_element(se,"DIV",{class:!0});var de=children(N);O.l(de),de.forEach(detach),se.forEach(detach),q=claim_space(Z),P=claim_element(Z,"DIV",{class:!0});var _e=children(P);for(let ue=0;ue<me.length;ue+=1)me[ue].l(_e);_e.forEach(detach),A=claim_space(Z),C=claim_element(Z,"DIV",{class:!0}),children(C).forEach(detach),L=claim_space(Z),oe&&oe.l(Z),G=claim_space(Z),V=claim_element(Z,"DIV",{class:!0});var pe=children(V);R=claim_text(pe,T),Y=claim_space(pe),Q=claim_element(pe,"BR",{}),pe.forEach(detach),Z.forEach(detach),this.h()},h(){attr(m,"class","col-span-10 pt-3 pb-2 tooltip-text text-center"),attr(_,"class","grid grid-cols-10"),attr(I,"class","reward-disp-wrapper items-center"),attr(N,"class","wrapper"),attr(S,"class","pt-6"),attr(P,"class","grid grid-cols-12 pt-2"),attr(C,"class","py-2"),attr(V,"class","pb-16 pt-8 tooltip-text text-center w-full italic"),attr(d,"class","key-amount-wrapper items-center")},m(U,Z){insert_hydration(U,d,Z),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(m,v),append_hydration(m,b);for(let B=0;B<z.length;B+=1)z[B]&&z[B].m(m,null);append_hydration(m,k),append_hydration(_,x);for(let B=0;B<5;B+=1)F[B]&&F[B].m(_,null);append_hydration(d,w),append_hydration(d,I),ae&&ae.m(I,null),append_hydration(d,E),append_hydration(d,S),append_hydration(S,N),j[D].m(N,null),append_hydration(d,q),append_hydration(d,P);for(let B=0;B<me.length;B+=1)me[B]&&me[B].m(P,null);append_hydration(d,A),append_hydration(d,C),append_hydration(d,L),oe&&oe.m(d,null),append_hydration(d,G),append_hydration(d,V),append_hydration(V,R),append_hydration(V,Y),append_hydration(V,Q),te=!0},p(U,Z){if((!te||Z[0]&16)&&g!==(g=U[14](formula.sumArray(U[4]))+"")&&set_data(v,g),Z[0]&16400){W=U[4];let K;for(K=0;K<W.length;K+=1){const J=get_each_context_5(U,W,K);z[K]?z[K].p(J,Z):(z[K]=create_each_block_5(J),z[K].c(),z[K].m(m,k))}for(;K<z.length;K+=1)z[K].d(1);z.length=W.length}if(Z[0]&49652){H=[1,2,3,4,5];let K;for(K=0;K<5;K+=1){const J=get_each_context_3$1(U,H,K);F[K]?(F[K].p(J,Z),transition_in(F[K],1)):(F[K]=create_each_block_3$1(J),F[K].c(),transition_in(F[K],1),F[K].m(_,null))}for(group_outros(),K=5;K<5;K+=1)X(K);check_outros()}Z[0]&512&&(M=Object.keys(U[9]).length>0),M?ae?ae.p(U,Z):(ae=create_if_block_3$5(U),ae.c(),ae.m(I,null)):ae&&(ae.d(1),ae=null);let B=D;if(D=$(U),D!==B&&(group_outros(),transition_out(j[B],1,1,()=>{j[B]=null}),check_outros(),O=j[D],O||(O=j[D]=re[D](U),O.c()),transition_in(O,1),O.m(N,null)),Z[0]&2048){ne=U[11];let K;for(K=0;K<ne.length;K+=1){const J=get_each_context_1$4(U,ne,K);me[K]?(me[K].p(J,Z),transition_in(me[K],1)):(me[K]=create_each_block_1$4(J),me[K].c(),transition_in(me[K],1),me[K].m(P,null))}for(group_outros(),K=ne.length;K<me.length;K+=1)ce(K);check_outros()}U[5].slurry>1?oe?(oe.p(U,Z),Z[0]&32&&transition_in(oe,1)):(oe=create_if_block$d(U),oe.c(),transition_in(oe,1),oe.m(d,G)):oe&&(group_outros(),transition_out(oe,1,1,()=>{oe=null}),check_outros()),(!te||Z[0]&1024)&&T!==(T=U[10].gold>1e4?'Click the "Slurry X" buttons to enable slurry conversion for each key tier.':"")&&set_data(R,T)},i(U){if(!te){for(let Z=0;Z<5;Z+=1)transition_in(F[Z]);transition_in(O);for(let Z=0;Z<ne.length;Z+=1)transition_in(me[Z]);transition_in(oe),te=!0}},o(U){F=F.filter(Boolean);for(let Z=0;Z<5;Z+=1)transition_out(F[Z]);transition_out(O),me=me.filter(Boolean);for(let Z=0;Z<me.length;Z+=1)transition_out(me[Z]);transition_out(oe),te=!1},d(U){U&&detach(d),destroy_each(z,U),destroy_each(F,U),ae&&ae.d(),j[D].d(),destroy_each(me,U),oe&&oe.d()}}}function instance$e(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C;component_subscribe(l,key5DropTable,R=>_(16,g=R)),component_subscribe(l,key4DropTable,R=>_(17,v=R)),component_subscribe(l,key3DropTable,R=>_(18,b=R)),component_subscribe(l,key2DropTable,R=>_(19,k=R)),component_subscribe(l,key1DropTable,R=>_(20,x=R)),component_subscribe(l,craftMasteryNextReq,R=>_(0,w=R)),component_subscribe(l,craftMasteryProgress,R=>_(1,I=R)),component_subscribe(l,keysOpened,R=>_(4,M=R)),component_subscribe(l,wallet,R=>_(5,E=R)),component_subscribe(l,visibleTier,R=>_(6,S=R)),component_subscribe(l,keyItemsUnlocked,R=>_(7,N=R)),component_subscribe(l,slurryToggles,R=>_(8,D=R)),component_subscribe(l,keyRewardText,R=>_(9,O=R)),component_subscribe(l,permaWallet,R=>_(10,q=R)),component_subscribe(l,keyUpgrades,R=>_(11,P=R)),component_subscribe(l,craftMasteryLevel,R=>_(12,A=R)),component_subscribe(l,keyCrafts,R=>_(13,C=R)),onMount(()=>{console.log(y),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable()}),onDestroy(()=>{key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable()});const L=(R,Y=0)=>(R=Number(R),R<1e9?R.toFixed(R<1e3?Y:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):R.toExponential(3).toString().replace("+","")),G=(R,Y=3,Q=!1)=>(Q&&(R-=1),R<1e9?(R*100).toFixed(R<1e3?Y:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(R*100).toExponential(Y).toString().replace("+","")+"%"),V=R=>{D[R+1]===void 0&&set_store_value(slurryToggles,D[R+1]=!0,D)};function T(R){D["key"+(R+1).toString()]=this.checked,slurryToggles.set(D)}return l.$$.update=()=>{l.$$.dirty[0]&3&&_(3,m=`${I/w*100}%`),l.$$.dirty[0]&2031616&&_(2,y=[x,k,b,v,g])},[w,I,y,m,M,E,S,N,D,O,q,P,A,C,L,G,g,v,b,k,x,V,T]}class Keys extends SvelteComponent{constructor(d){super(),init(this,d,instance$e,create_fragment$e,safe_not_equal,{},null,[-1,-1])}}const EnchantUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$b(l,d,_){const m=l.slice();return m[23]=d[_],m}function create_if_block$c(l){let d,_=l[7][l[0]].name+"",m,y,g=l[11](l[9][l[0]],0)+"",v,b,k=l[11](l[7][l[0]].maxLevel,0)+"",x,w,I,M,E,S=l[7][l[0]].description+"",N,D,O,q,P,A,C,L,G=(l[7][l[0]].prefix||"")+"",V,T,R,Y=(l[7][l[0]].isPercent?l[12](l[7][l[0]].formula(l[9][l[0]]),l[7][l[0]].roundOverride||3,!1):l[11](l[7][l[0]].formula(l[9][l[0]]),l[7][l[0]].roundOverride||3))+"",Q,te,W,z,H=(l[7][l[0]].isPercent?l[12](l[7][l[0]].formula(l[9][l[0]]+l[5]),l[7][l[0]].roundOverride||3,!1):l[11](l[7][l[0]].formula(l[9][l[0]]+l[5]),l[7][l[0]].roundOverride||3))+"",F,X,ae,re=(l[7][l[0]].suffix||"")+"",j,$,ne,me,ce,oe,U,Z,B,K=(l[8].maxBuy&&l[5]>0||l[5]>1)&&create_if_block_6$1(l),J=l[7][l[0]].name=="Rift Tearing"&&create_if_block_5$2(),se=l[7][l[0]].extPrefix&&l[7][l[0]].extSuffix&&create_if_block_4$3(l),de=l[8].costRatios&&create_if_block_3$4(l);function _e(ie,ge){return ie[9][ie[0]]>=ie[7][ie[0]].maxLevel?create_if_block_1$8:create_else_block$4}let pe=_e(l),ue=pe(l);return{c(){d=element("div"),m=text(_),y=text(" ["),v=text(g),b=text(" / "),x=text(k),w=text(`] 
`),K&&K.c(),I=space(),M=element("span"),E=element("div"),N=text(S),D=space(),J&&J.c(),O=space(),q=element("div"),se&&se.c(),P=space(),A=element("div"),C=element("div"),L=element("span"),V=text(G),T=space(),R=element("span"),Q=text(Y),te=space(),W=element("span"),z=text(`=> 
                    `),F=text(H),X=space(),ae=element("span"),j=text(re),$=space(),de&&de.c(),ne=space(),me=element("hr"),ce=space(),oe=element("div"),ue.c(),this.h()},l(ie){d=claim_element(ie,"DIV",{class:!0});var ge=children(d);m=claim_text(ge,_),y=claim_text(ge," ["),v=claim_text(ge,g),b=claim_text(ge," / "),x=claim_text(ge,k),w=claim_text(ge,`] 
`),K&&K.l(ge),I=claim_space(ge),M=claim_element(ge,"SPAN",{class:!0});var ye=children(M);E=claim_element(ye,"DIV",{class:!0});var ve=children(E);N=claim_text(ve,S),D=claim_space(ve),J&&J.l(ve),ve.forEach(detach),O=claim_space(ye),q=claim_element(ye,"DIV",{class:!0});var he=children(q);se&&se.l(he),he.forEach(detach),P=claim_space(ye),A=claim_element(ye,"DIV",{class:!0});var we=children(A);C=claim_element(we,"DIV",{class:!0});var Me=children(C);L=claim_element(Me,"SPAN",{class:!0});var Ae=children(L);V=claim_text(Ae,G),Ae.forEach(detach),T=claim_space(Me),R=claim_element(Me,"SPAN",{class:!0});var Ne=children(R);Q=claim_text(Ne,Y),Ne.forEach(detach),te=claim_space(Me),W=claim_element(Me,"SPAN",{class:!0});var xe=children(W);z=claim_text(xe,`=> 
                    `),F=claim_text(xe,H),xe.forEach(detach),X=claim_space(Me),ae=claim_element(Me,"SPAN",{class:!0});var Ue=children(ae);j=claim_text(Ue,re),Ue.forEach(detach),$=claim_space(Me),de&&de.l(Me),Me.forEach(detach),we.forEach(detach),ne=claim_space(ye),me=claim_element(ye,"HR",{}),ce=claim_space(ye),oe=claim_element(ye,"DIV",{class:!0});var Ee=children(oe);ue.l(Ee),Ee.forEach(detach),ye.forEach(detach),ge.forEach(detach),this.h()},h(){attr(E,"class","title text-small-gray items-start text-center pb-1"),attr(q,"class","text-center effect-wrapper"),attr(L,"class","current text-[#cccccc]"),attr(R,"class","current text-[#cccccc]"),attr(W,"class","current text-[#888888]"),attr(ae,"class","current text-[#cccccc]"),attr(C,"class","tooltip-text-xs text-[#cccccc]"),attr(A,"class","text-center effect-wrapper"),attr(oe,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(M,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",U="has-tooltip tooltip-text "+(l[2]&&l[4]&&l[9][l[0]]<l[7][l[0]].maxLevel?"game-btn-encht"+l[7][l[0]].tier:"game-btn-encht"+l[7][l[0]].tier+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(ie,ge){insert_hydration(ie,d,ge),append_hydration(d,m),append_hydration(d,y),append_hydration(d,v),append_hydration(d,b),append_hydration(d,x),append_hydration(d,w),K&&K.m(d,null),append_hydration(d,I),append_hydration(d,M),append_hydration(M,E),append_hydration(E,N),append_hydration(E,D),J&&J.m(E,null),append_hydration(M,O),append_hydration(M,q),se&&se.m(q,null),append_hydration(M,P),append_hydration(M,A),append_hydration(A,C),append_hydration(C,L),append_hydration(L,V),append_hydration(C,T),append_hydration(C,R),append_hydration(R,Q),append_hydration(C,te),append_hydration(C,W),append_hydration(W,z),append_hydration(W,F),append_hydration(C,X),append_hydration(C,ae),append_hydration(ae,j),append_hydration(C,$),de&&de.m(C,null),append_hydration(M,ne),append_hydration(M,me),append_hydration(M,ce),append_hydration(M,oe),ue.m(oe,null),Z||(B=listen(d,"click",l[15]),Z=!0)},p(ie,ge){ge&129&&_!==(_=ie[7][ie[0]].name+"")&&set_data(m,_),ge&513&&g!==(g=ie[11](ie[9][ie[0]],0)+"")&&set_data(v,g),ge&129&&k!==(k=ie[11](ie[7][ie[0]].maxLevel,0)+"")&&set_data(x,k),ie[8].maxBuy&&ie[5]>0||ie[5]>1?K?K.p(ie,ge):(K=create_if_block_6$1(ie),K.c(),K.m(d,I)):K&&(K.d(1),K=null),ge&129&&S!==(S=ie[7][ie[0]].description+"")&&set_data(N,S),ie[7][ie[0]].name=="Rift Tearing"?J||(J=create_if_block_5$2(),J.c(),J.m(E,null)):J&&(J.d(1),J=null),ie[7][ie[0]].extPrefix&&ie[7][ie[0]].extSuffix?se?se.p(ie,ge):(se=create_if_block_4$3(ie),se.c(),se.m(q,null)):se&&(se.d(1),se=null),ge&129&&G!==(G=(ie[7][ie[0]].prefix||"")+"")&&set_data(V,G),ge&641&&Y!==(Y=(ie[7][ie[0]].isPercent?ie[12](ie[7][ie[0]].formula(ie[9][ie[0]]),ie[7][ie[0]].roundOverride||3,!1):ie[11](ie[7][ie[0]].formula(ie[9][ie[0]]),ie[7][ie[0]].roundOverride||3))+"")&&set_data(Q,Y),ge&673&&H!==(H=(ie[7][ie[0]].isPercent?ie[12](ie[7][ie[0]].formula(ie[9][ie[0]]+ie[5]),ie[7][ie[0]].roundOverride||3,!1):ie[11](ie[7][ie[0]].formula(ie[9][ie[0]]+ie[5]),ie[7][ie[0]].roundOverride||3))+"")&&set_data(F,H),ge&129&&re!==(re=(ie[7][ie[0]].suffix||"")+"")&&set_data(j,re),ie[8].costRatios?de?de.p(ie,ge):(de=create_if_block_3$4(ie),de.c(),de.m(C,null)):de&&(de.d(1),de=null),pe===(pe=_e(ie))&&ue?ue.p(ie,ge):(ue.d(1),ue=pe(ie),ue&&(ue.c(),ue.m(oe,null))),ge&661&&U!==(U="has-tooltip tooltip-text "+(ie[2]&&ie[4]&&ie[9][ie[0]]<ie[7][ie[0]].maxLevel?"game-btn-encht"+ie[7][ie[0]].tier:"game-btn-encht"+ie[7][ie[0]].tier+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",U)},d(ie){ie&&detach(d),K&&K.d(),J&&J.d(),se&&se.d(),de&&de.d(),ue.d(),Z=!1,B()}}}function create_if_block_6$1(l){let d,_,m,y;return{c(){d=element("span"),_=text("(x"),m=text(l[5]),y=text(")"),this.h()},l(g){d=claim_element(g,"SPAN",{class:!0});var v=children(d);_=claim_text(v,"(x"),m=claim_text(v,l[5]),y=claim_text(v,")"),v.forEach(detach),this.h()},h(){attr(d,"class","text-gray-300 svelte-uygk22")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),append_hydration(d,m),append_hydration(d,y)},p(g,v){v&32&&set_data(m,g[5])},d(g){g&&detach(d)}}}function create_if_block_5$2(l){let d,_;return{c(){d=element("span"),_=text("(Enchants in green only fire when the green bar fills.)"),this.h()},l(m){d=claim_element(m,"SPAN",{class:!0});var y=children(d);_=claim_text(y,"(Enchants in green only fire when the green bar fills.)"),y.forEach(detach),this.h()},h(){attr(d,"class","text-[#7fbf8a] font-bold")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},d(m){m&&detach(d)}}}function create_if_block_4$3(l){let d,_,m=l[7][l[0]].extPrefix+"",y,g,v=l[11](l[7][l[0]].extFormula(l[9][l[0]],formula.getMineSize(),formula.getMineQuality()),l[7][l[0]].roundOverride||3)+"",b,k,x=l[7][l[0]].extSuffix+"",w;return{c(){d=element("div"),_=element("span"),y=text(m),g=space(),b=text(v),k=space(),w=text(x),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var M=children(d);_=claim_element(M,"SPAN",{class:!0});var E=children(_);y=claim_text(E,m),g=claim_space(E),b=claim_text(E,v),k=claim_space(E),w=claim_text(E,x),E.forEach(detach),M.forEach(detach),this.h()},h(){attr(_,"class","current text-[#888888] italic pb-1"),attr(d,"class","tooltip-text-xs text-[#888888]")},m(I,M){insert_hydration(I,d,M),append_hydration(d,_),append_hydration(_,y),append_hydration(_,g),append_hydration(_,b),append_hydration(_,k),append_hydration(_,w)},p(I,M){M&129&&m!==(m=I[7][I[0]].extPrefix+"")&&set_data(y,m),M&641&&v!==(v=I[11](I[7][I[0]].extFormula(I[9][I[0]],formula.getMineSize(),formula.getMineQuality()),I[7][I[0]].roundOverride||3)+"")&&set_data(b,v),M&129&&x!==(x=I[7][I[0]].extSuffix+"")&&set_data(w,x)},d(I){I&&detach(d)}}}function create_if_block_3$4(l){let d,_,m,y,g=l[11](l[7][l[0]].ratio,3)+"",v,b;return{c(){d=element("br"),_=space(),m=element("span"),y=text("Cost Multiplier: "),v=text(g),b=text("x"),this.h()},l(k){d=claim_element(k,"BR",{}),_=claim_space(k),m=claim_element(k,"SPAN",{class:!0});var x=children(m);y=claim_text(x,"Cost Multiplier: "),v=claim_text(x,g),b=claim_text(x,"x"),x.forEach(detach),this.h()},h(){attr(m,"class","current text-[#888888]")},m(k,x){insert_hydration(k,d,x),insert_hydration(k,_,x),insert_hydration(k,m,x),append_hydration(m,y),append_hydration(m,v),append_hydration(m,b)},p(k,x){x&129&&g!==(g=k[11](k[7][k[0]].ratio,3)+"")&&set_data(v,g)},d(k){k&&detach(d),k&&detach(_),k&&detach(m)}}}function create_else_block$4(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$b(get_each_context$b(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&19522){_=Object.entries(y[1]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context$b(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block$b(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$8(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#888888]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$5(l){let d,_=(l[6][l[23][0]]||l[10].has(l[23][0])?ref.displayNames[l[23][0]]?ref.displayNames[l[23][0]]:l[23][0]:"???")+"",m,y,g,v,b=l[11](l[23][1])+"",k,x;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(w),v=claim_element(w,"DIV",{class:!0});var M=children(v);k=claim_text(M,b),M.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[23][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(v,"class",x="col-span-2 "+(l[14](l[23][0])?"":"text-red-600")+" text-left")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,g,I),insert_hydration(w,v,I),append_hydration(v,k)},p(w,I){I&1090&&_!==(_=(w[6][w[23][0]]||w[10].has(w[23][0])?ref.displayNames[w[23][0]]?ref.displayNames[w[23][0]]:w[23][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[w[23][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I&2&&b!==(b=w[11](w[23][1])+"")&&set_data(k,b),I&2&&x!==(x="col-span-2 "+(w[14](w[23][0])?"":"text-red-600")+" text-left")&&attr(v,"class",x)},d(w){w&&detach(d),w&&detach(g),w&&detach(v)}}}function create_each_block$b(l){let d,_=l[23][1]>=1&&create_if_block_2$5(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[23][1]>=1?_?_.p(m,y):(_=create_if_block_2$5(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$6(l){let d=l[7][l[0]].unlockAt()||l[3]||l[9][l[0]]>0,_,m=d&&create_if_block$c(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&649&&(d=y[7][y[0]].unlockAt()||y[3]||y[9][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$c(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$d(l){let d=l[3]||l[2]||l[9][l[0]]>0,_,m=create_key_block$6(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&525&&safe_not_equal(d,d=y[3]||y[2]||y[9][y[0]]>0)?(m.d(1),m=create_key_block$6(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$d(l,d,_){let m,y,g,v,b;component_subscribe(l,wallet,T=>_(6,m=T)),component_subscribe(l,enchantUpgrades,T=>_(7,y=T)),component_subscribe(l,settings,T=>_(8,g=T)),component_subscribe(l,enchantUpgradeLevels,T=>_(9,v=T)),component_subscribe(l,unlockedRes,T=>_(10,b=T));let{index:k}=d,x=()=>{let T={};for(let[R,Y]of Object.entries(y[k].cost))T[R]=q(Y);return T},w={},I,M=v[k]>0,E,S=!0,N=g.buyAmount;onMount(()=>{setTimeout(()=>{_(1,w=x()),_(2,I=L()),y[k].unlockAt()&&_(3,M=!0),_(3,M=v[k]>0)},50),E=setInterval(()=>{_(2,I=L()),G(),y[k].unlockAt()&&_(3,M=!0),g.maxBuy?(_(5,N=C()),_(1,w=x())):_(5,N=g.buyAmount)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(E)});const D=(T,R=0)=>T<1e9?T.toFixed(T<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):T.toExponential(3).toString().replace("+",""),O=(T,R=3,Y=!1)=>(Y&&(T-=1),T<1e9?(T*100).toFixed(T*100<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(T*100).toExponential(R).toString().replace("+","")+"%");function q(T){const R=T*Math.pow(y[k].ratio,v[k]),Y=y[k].ratio,Q=Math.max(1,N);return formula.gSum(R,Y,Q)}function P(){_(1,w=x());for(let[R,Y]of Object.entries(w))if(Y>=1&&m[R]<Y)return;for(let[R,Y]of Object.entries(w))Y>=1&&set_store_value(wallet,m[R]-=Y,m);const T=Math.max(y[k].maxLevel-v[k],0);set_store_value(enchantUpgradeLevels,v[k]+=Math.min(T,N),v),_(1,w=x()),_(3,M=!0)}function A(T){return m[T]>=w[T]}function C(){_(4,S=!1);let T=1e9;for(let[R,Y]of Object.entries(y[k].cost)){const Q=Y*Math.pow(y[k].ratio,v[k]);T=Math.min(T,formula.maxNumGeom(m[R],Q,y[k].ratio))}return _(4,S=!0),T}function L(){if(g.maxBuy&&N==0)return!1;_(1,w=x());for(let[T,R]of Object.entries(w))if(R>=1&&m[T]<R)return!1;return!0}function G(){for(let[T,R]of Object.entries(y[k].unlockAt))if(m[T]<R)return!1;return!0}const V=()=>P();return l.$$set=T=>{"index"in T&&_(0,k=T.index)},[k,w,I,M,S,N,m,y,g,v,b,D,O,P,A,V]}class EnchantUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$d,create_fragment$d,safe_not_equal,{index:0})}}function get_each_context$a(l,d,_){const m=l.slice();return m[46]=d[_],m[48]=_,m}function get_each_context_1$3(l,d,_){const m=l.slice();return m[49]=d[_],m[48]=_,m}function create_if_block$b(l){let d,_,m,y,g,v,b,k,x,w,I,M,E,S,N=l[6](Math.floor(l[8]()),0)+"",D,O,q,P,A,C,L,G,V=l[8]()>=10?"Relocate":"You need to gain at least 10 fame to relocate.",T,R,Y,Q,te,W,z=l[3],H,F,X,ae=l[6](l[5].relocateCount)+"",re,j,$,ne,me,ce,oe=create_key_block$5(l);function U(K,J){if(K[5].relocateCount<1)return create_if_block_1$7;if(K[5].relocateCount<2)return create_if_block_2$4}let Z=U(l),B=Z&&Z(l);return{c(){d=element("div"),_=element("div"),m=element("div"),y=text(`Relocate to a new mine and gain
        fame based on your past success.`),g=space(),v=element("div"),b=text("Relocating resets all previous resources and upgrades."),k=space(),x=element("div"),w=text("Tier 1 and 2 keys will be reset."),I=space(),M=element("div"),E=text(`You will gain 
        `),S=element("span"),D=text(N),O=text(" fame by relocating."),q=space(),P=element("div"),A=element("hr"),C=space(),L=element("div"),G=element("div"),T=text(V),R=space(),Y=element("div"),Q=element("hr"),te=space(),W=element("div"),oe.c(),H=space(),F=element("div"),X=text("You have relocated "),re=text(ae),j=text(" times. "),$=element("br"),ne=space(),B&&B.c(),this.h()},l(K){d=claim_element(K,"DIV",{class:!0});var J=children(d);_=claim_element(J,"DIV",{class:!0});var se=children(_);m=claim_element(se,"DIV",{class:!0});var de=children(m);y=claim_text(de,`Relocate to a new mine and gain
        fame based on your past success.`),de.forEach(detach),g=claim_space(se),v=claim_element(se,"DIV",{class:!0});var _e=children(v);b=claim_text(_e,"Relocating resets all previous resources and upgrades."),_e.forEach(detach),k=claim_space(se),x=claim_element(se,"DIV",{class:!0});var pe=children(x);w=claim_text(pe,"Tier 1 and 2 keys will be reset."),pe.forEach(detach),I=claim_space(se),M=claim_element(se,"DIV",{class:!0});var ue=children(M);E=claim_text(ue,`You will gain 
        `),S=claim_element(ue,"SPAN",{class:!0});var ie=children(S);D=claim_text(ie,N),ie.forEach(detach),O=claim_text(ue," fame by relocating."),ue.forEach(detach),q=claim_space(se),P=claim_element(se,"DIV",{class:!0});var ge=children(P);A=claim_element(ge,"HR",{}),ge.forEach(detach),C=claim_space(se),L=claim_element(se,"DIV",{class:!0});var ye=children(L);G=claim_element(ye,"DIV",{class:!0});var ve=children(G);T=claim_text(ve,V),ve.forEach(detach),ye.forEach(detach),se.forEach(detach),R=claim_space(J),Y=claim_element(J,"DIV",{class:!0});var he=children(Y);Q=claim_element(he,"HR",{}),he.forEach(detach),te=claim_space(J),W=claim_element(J,"DIV",{class:!0});var we=children(W);oe.l(we),we.forEach(detach),J.forEach(detach),H=claim_space(K),F=claim_element(K,"DIV",{class:!0});var Me=children(F);X=claim_text(Me,"You have relocated "),re=claim_text(Me,ae),j=claim_text(Me," times. "),$=claim_element(Me,"BR",{}),ne=claim_space(Me),B&&B.l(Me),Me.forEach(detach),this.h()},h(){attr(m,"class","col-span-12"),attr(v,"class","col-span-12"),attr(x,"class","col-span-12"),attr(S,"class","text-orange-400 font-bold"),attr(M,"class","col-span-12 py-1"),attr(P,"class","col-span-12 py-1"),attr(G,"class",(l[8]()>=10?"game-btn":"game-btn-noafford")+" text-center"),attr(L,"class","col-span-12 pt-3"),attr(_,"class","grid grid-cols-12 game-text text-center"),attr(Y,"class","py-2"),attr(W,"class","grid grid-cols-12"),attr(d,"class","wrapper pt-1"),attr(F,"class","pt-3 pb-16 tooltip-text text-center w-full")},m(K,J){insert_hydration(K,d,J),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(_,g),append_hydration(_,v),append_hydration(v,b),append_hydration(_,k),append_hydration(_,x),append_hydration(x,w),append_hydration(_,I),append_hydration(_,M),append_hydration(M,E),append_hydration(M,S),append_hydration(S,D),append_hydration(M,O),append_hydration(_,q),append_hydration(_,P),append_hydration(P,A),append_hydration(_,C),append_hydration(_,L),append_hydration(L,G),append_hydration(G,T),append_hydration(d,R),append_hydration(d,Y),append_hydration(Y,Q),append_hydration(d,te),append_hydration(d,W),oe.m(W,null),insert_hydration(K,H,J),insert_hydration(K,F,J),append_hydration(F,X),append_hydration(F,re),append_hydration(F,j),append_hydration(F,$),append_hydration(F,ne),B&&B.m(F,null),me||(ce=listen(G,"click",l[14]),me=!0)},p(K,J){J[0]&8&&safe_not_equal(z,z=K[3])?(oe.d(1),oe=create_key_block$5(K),oe.c(),oe.m(W,null)):oe.p(K,J),J[0]&32&&ae!==(ae=K[6](K[5].relocateCount)+"")&&set_data(re,ae),Z!==(Z=U(K))&&(B&&B.d(1),B=Z&&Z(K),B&&(B.c(),B.m(F,null)))},d(K){K&&detach(d),oe.d(K),K&&detach(H),K&&detach(F),B&&B.d(),me=!1,ce()}}}function create_if_block_5$1(l){let d;return{c(){d=text("*")},l(_){d=claim_text(_,"*")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block_1$3(l){let d,_=" "+l[6](l[4][l[48]],2),m,y,g,v=l[48]+1<l[2].length&&create_if_block_5$1();return{c(){d=element("span"),m=text(_),y=space(),v&&v.c(),g=empty(),this.h()},l(b){d=claim_element(b,"SPAN",{class:!0});var k=children(d);m=claim_text(k,_),k.forEach(detach),y=claim_space(b),v&&v.l(b),g=empty(),this.h()},h(){attr(d,"class",ref.colors["key"+(l[48]+1).toString()])},m(b,k){insert_hydration(b,d,k),append_hydration(d,m),insert_hydration(b,y,k),v&&v.m(b,k),insert_hydration(b,g,k)},p(b,k){k[0]&16&&_!==(_=" "+b[6](b[4][b[48]],2))&&set_data(m,_),b[48]+1<b[2].length?v||(v=create_if_block_5$1(),v.c(),v.m(g.parentNode,g)):v&&(v.d(1),v=null)},d(b){b&&detach(d),b&&detach(y),v&&v.d(b),b&&detach(g)}}}function create_if_block_4$2(l){let d,_,m,y,g,v,b=l[6](l[46].value(),3)+"",k,x,w;return{c(){d=element("div"),_=text("???"),m=space(),y=element("div"),g=element("span"),v=text("x"),k=text(b),x=space(),w=element("div"),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var M=children(d);_=claim_text(M,"???"),M.forEach(detach),m=claim_space(I),y=claim_element(I,"DIV",{class:!0});var E=children(y);g=claim_element(E,"SPAN",{class:!0});var S=children(g);v=claim_text(S,"x"),k=claim_text(S,b),S.forEach(detach),E.forEach(detach),x=claim_space(I),w=claim_element(I,"DIV",{class:!0}),children(w).forEach(detach),this.h()},h(){attr(d,"class",""+(ref.colors[l[46].colorRef]||"text-white")+" col-span-3 text-left py-1"),attr(g,"class","font-bold"),attr(y,"class",""+(ref.colors[l[46].colorRef]||"text-white")+" col-span-2 text-right py-1"),attr(w,"class","col-span-7")},m(I,M){insert_hydration(I,d,M),append_hydration(d,_),insert_hydration(I,m,M),insert_hydration(I,y,M),append_hydration(y,g),append_hydration(g,v),append_hydration(g,k),insert_hydration(I,x,M),insert_hydration(I,w,M)},p:noop,d(I){I&&detach(d),I&&detach(m),I&&detach(y),I&&detach(x),I&&detach(w)}}}function create_if_block_3$3(l){let d,_=l[46].name+"",m,y,g,v,b,k,x=l[6](l[46].value(),3)+"",w,I,M;return{c(){d=element("div"),m=text(_),y=text(":"),g=space(),v=element("div"),b=element("span"),k=text("x"),w=text(x),I=space(),M=element("div"),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);m=claim_text(S,_),y=claim_text(S,":"),S.forEach(detach),g=claim_space(E),v=claim_element(E,"DIV",{class:!0});var N=children(v);b=claim_element(N,"SPAN",{class:!0});var D=children(b);k=claim_text(D,"x"),w=claim_text(D,x),D.forEach(detach),N.forEach(detach),I=claim_space(E),M=claim_element(E,"DIV",{class:!0}),children(M).forEach(detach),this.h()},h(){attr(d,"class",""+(ref.colors[l[46].colorRef]||"text-white")+" col-span-3 text-left py-1"),attr(b,"class",""),attr(v,"class",""+(ref.colors[l[46].colorRef]||"text-white")+" col-span-2 text-right py-1"),attr(M,"class","col-span-7")},m(E,S){insert_hydration(E,d,S),append_hydration(d,m),append_hydration(d,y),insert_hydration(E,g,S),insert_hydration(E,v,S),append_hydration(v,b),append_hydration(b,k),append_hydration(b,w),insert_hydration(E,I,S),insert_hydration(E,M,S)},p:noop,d(E){E&&detach(d),E&&detach(g),E&&detach(v),E&&detach(I),E&&detach(M)}}}function create_each_block$a(l){let d;function _(g,v){if(g[48]>0&&g[46].criteria())return create_if_block_3$3;if(g[48]>0)return create_if_block_4$2}let m=_(l),y=m&&m(l);return{c(){y&&y.c(),d=empty()},l(g){y&&y.l(g),d=empty()},m(g,v){y&&y.m(g,v),insert_hydration(g,d,v)},p(g,v){y&&y.p(g,v)},d(g){y&&y.d(g),g&&detach(d)}}}function create_key_block$5(l){let d,_,m,y,g,v,b=l[6](formula.productArray(l[4]),3)+"",k,x,w,I,M,E,S,N=l[2],D=[];for(let P=0;P<N.length;P+=1)D[P]=create_each_block_1$3(get_each_context_1$3(l,N,P));let O=l[7],q=[];for(let P=0;P<O.length;P+=1)q[P]=create_each_block$a(get_each_context$a(l,O,P));return{c(){d=element("div"),_=text("Keys Used:"),m=space(),y=element("div"),g=element("span"),v=text("+"),k=text(b),x=space(),w=element("div"),I=text(`[ 
        `);for(let P=0;P<D.length;P+=1)D[P].c();M=text(`
         ]`),E=space();for(let P=0;P<q.length;P+=1)q[P].c();S=empty(),this.h()},l(P){d=claim_element(P,"DIV",{class:!0});var A=children(d);_=claim_text(A,"Keys Used:"),A.forEach(detach),m=claim_space(P),y=claim_element(P,"DIV",{class:!0});var C=children(y);g=claim_element(C,"SPAN",{class:!0});var L=children(g);v=claim_text(L,"+"),k=claim_text(L,b),L.forEach(detach),C.forEach(detach),x=claim_space(P),w=claim_element(P,"DIV",{class:!0});var G=children(w);I=claim_text(G,`[ 
        `);for(let V=0;V<D.length;V+=1)D[V].l(G);M=claim_text(G,`
         ]`),G.forEach(detach),E=claim_space(P);for(let V=0;V<q.length;V+=1)q[V].l(P);S=empty(),this.h()},h(){attr(d,"class","col-span-3 game-text text-left py-1"),attr(g,"class",""),attr(y,"class","col-span-2 py-1 game-text text-right"),attr(w,"class","col-span-7 game-text text-center px-2 py-1")},m(P,A){insert_hydration(P,d,A),append_hydration(d,_),insert_hydration(P,m,A),insert_hydration(P,y,A),append_hydration(y,g),append_hydration(g,v),append_hydration(g,k),insert_hydration(P,x,A),insert_hydration(P,w,A),append_hydration(w,I);for(let C=0;C<D.length;C+=1)D[C]&&D[C].m(w,null);append_hydration(w,M),insert_hydration(P,E,A);for(let C=0;C<q.length;C+=1)q[C]&&q[C].m(P,A);insert_hydration(P,S,A)},p(P,A){if(A[0]&16&&b!==(b=P[6](formula.productArray(P[4]),3)+"")&&set_data(k,b),A[0]&84){N=P[2];let C;for(C=0;C<N.length;C+=1){const L=get_each_context_1$3(P,N,C);D[C]?D[C].p(L,A):(D[C]=create_each_block_1$3(L),D[C].c(),D[C].m(w,M))}for(;C<D.length;C+=1)D[C].d(1);D.length=N.length}if(A[0]&192){O=P[7];let C;for(C=0;C<O.length;C+=1){const L=get_each_context$a(P,O,C);q[C]?q[C].p(L,A):(q[C]=create_each_block$a(L),q[C].c(),q[C].m(S.parentNode,S))}for(;C<q.length;C+=1)q[C].d(1);q.length=O.length}},d(P){P&&detach(d),P&&detach(m),P&&detach(y),P&&detach(x),P&&detach(w),destroy_each(D,P),P&&detach(E),destroy_each(q,P),P&&detach(S)}}}function create_if_block_2$4(l){let d;return{c(){d=text("Your second relocate should yield at least 100 fame.")},l(_){d=claim_text(_,"Your second relocate should yield at least 100 fame.")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_1$7(l){let d;return{c(){d=text("Your first relocate should yield approximately 30-40 fame for optimal progression.")},l(_){d=claim_text(_,"Your first relocate should yield approximately 30-40 fame for optimal progression.")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_fragment$c(l){let d,_=!l[0]&&create_if_block$b(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[0]?_&&(_.d(1),_=null):_?_.p(m,y):(_=create_if_block$b(m),_.c(),_.m(d.parentNode,d))},i:noop,o:noop,d(m){_&&_.d(m),m&&detach(d)}}}function instance$c(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F;component_subscribe(l,resetLastTimes,U=>_(22,b=U)),component_subscribe(l,visibleTier,U=>_(23,k=U)),component_subscribe(l,miningUpgradeLevelsBought,U=>_(24,x=U)),component_subscribe(l,miningUpgradeLevels,U=>_(25,w=U)),component_subscribe(l,automationItemsUnlocked,U=>_(26,I=U)),component_subscribe(l,miningUpgradeLevelsFree,U=>_(27,M=U)),component_subscribe(l,wallet,U=>_(9,E=U)),component_subscribe(l,beaconUpgradeLevels,U=>_(28,S=U)),component_subscribe(l,beaconUpgrades,U=>_(29,N=U)),component_subscribe(l,miningUpgrades,U=>_(30,D=U)),component_subscribe(l,layer,U=>_(31,O=U)),component_subscribe(l,beaconBonuses,U=>_(10,q=U)),component_subscribe(l,keysOpened,U=>_(2,P=U)),component_subscribe(l,baseBeaconNextReqs,U=>_(32,A=U)),component_subscribe(l,beaconLevels,U=>_(11,C=U)),component_subscribe(l,beaconNextReqs,U=>_(33,L=U)),component_subscribe(l,beaconActivations,U=>_(34,G=U)),component_subscribe(l,beaconProgress,U=>_(35,V=U)),component_subscribe(l,progressThisTick,U=>_(36,T=U)),component_subscribe(l,progressAverage,U=>_(37,R=U)),component_subscribe(l,progress,U=>_(38,Y=U)),component_subscribe(l,stats,U=>_(5,Q=U)),component_subscribe(l,flags,U=>_(39,te=U)),component_subscribe(l,beaconFormulas,U=>_(40,W=U)),component_subscribe(l,mineLevel,U=>_(41,z=U)),component_subscribe(l,enchantThreshold,U=>_(12,H=U)),component_subscribe(l,enchantProgress,U=>_(13,F=U));let X=!0,ae,{ghost:re}=d;onMount(()=>{setTimeout(()=>{_(4,m=formula.calcFameGainKeys(P)),y=formula.calcFameGemMulti(E.gems),v=formula.calcFameGainBeacons(formula.sumArray(C))},100),ae=setInterval(()=>{_(3,X=!X)},1049)}),onDestroy(()=>{clearInterval(ae)});const j=(U,Z=0)=>U<1e9?U.toFixed(U<1e3?Z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):U.toExponential(3).toString().replace("+",""),$=[{name:"Keys Used",value:()=>formula.productArray(m||[]),criteria:!0},{name:"Mining Level",value:()=>z.level**1.5*.15+1,colorRef:"gold",criteria:()=>E.gems>0},{name:"Current Layer",value:()=>g,colorRef:"layer",criteria:()=>E.gems>0},{name:"Gem Amount",value:()=>y,colorRef:"gems",criteria:()=>E.gems>0},{name:"Beacon Paths",value:()=>v,colorRef:"beacons",criteria:()=>E.beacons>0||formula.sumArray(C)>0},{name:"Fame Bonus (Beacons)",value:()=>W[4](C[4]),colorRef:"beacons",criteria:()=>E.beacons>0||formula.sumArray(C)>0},{name:"Legendary Upgrades",value:()=>D[16].formula(w[16])*D[17].formula(w[17]),colorRef:"",criteria:()=>E.totalFame>200||E.fame>200||w[16]>0||w[17]>0||w[19]>0},{name:"Phantom Legend",value:()=>D[37].formula(w[37]),colorRef:"antimatter",criteria:()=>E.antimatter>0||E.totalAntimatter>0}];function ne(){return formula.productArray(m)*(z.level**1.5*.15+1)*y*g*v*D[16].formula(w[16])*D[17].formula(w[17])*D[37].formula(w[37])*W[4](C[4])}const me=["gems","gold","orbs","beacons","key1","key2","beaconPower"];function ce(){if(ne()>=10&&confirm("Are you sure? Relocating will reset all previous progress.")){set_store_value(flags,te.relocateNavBack=!0,te),set_store_value(wallet,E.fame=(E.fame||0)+ne(),E),set_store_value(wallet,E.totalFame=(E.fame||0)+ne(),E),set_store_value(stats,Q.lastRelocate=Date.now(),Q),set_store_value(stats,Q.relocateCount=(Q.relocateCount||0)+1,Q);for(let U of me)I["unlimited power!"]&&U=="beaconPower"||set_store_value(wallet,E[U]=0,E);for(let U of Object.entries(Y))set_store_value(progress,Y[U[0]]=0,Y),set_store_value(progressAverage,R[U[0]]=0,R),set_store_value(progressThisTick,T[U[0]]=0,T);if(!I["persistent beacons"])for(let U in C)set_store_value(beaconLevels,C[U]=0,C),set_store_value(beaconProgress,V[U]=0,V),set_store_value(beaconActivations,G[U]=0,G);for(let U in L)set_store_value(beaconNextReqs,L[U]=(C[U]+1)*A[U],L);set_store_value(keysOpened,P=Array(P.length).fill(0),P),set_store_value(beaconBonuses,q=Array(30).fill(1),q),set_store_value(layer,O={layer:ascFormula.getVal("celestial")||0,blocks:0,blocksNextReq:100},O),set_store_value(miningUpgradeLevels,w[6]=0,w),set_store_value(miningUpgradeLevelsBought,x[6]=0,x),set_store_value(miningUpgradeLevels,w[9]=0,w),set_store_value(miningUpgradeLevelsBought,x[9]=0,x),set_store_value(visibleTier,k=1,k);for(let U in D)set_store_value(miningUpgradeLevels,w[U]=x[U],w),set_store_value(miningUpgradeLevelsFree,M[U]=parseInt(U)==1||parseInt(U)==2||parseInt(U)==7?D[27].formula(w[27]):parseInt(U)==0?Math.round(D[27].formula(w[27])/4):0,M),I.omnipotent||D[U].noResetRelocate||(set_store_value(miningUpgradeLevelsBought,x[U]=0,x),set_store_value(miningUpgradeLevels,w[U]=x[U]+M[U],w));if(console.log(I),!I["unlimited power!"])for(let U in N)N[U].isCelestial||set_store_value(beaconUpgradeLevels,S[U]=0,S);I.jumpstart&&(set_store_value(wallet,E.gems=5e3,E),set_store_value(wallet,E.gold=100,E)),I.beaconizer&&set_store_value(wallet,E.beacons=5e4,E),I.omnipotent&&w[14]>=1&&(set_store_value(miningUpgradeLevels,w[14]=1,w),set_store_value(miningUpgradeLevelsBought,x[14]=1,x),set_store_value(visibleTier,k=4,k)),set_store_value(miningUpgradeLevels,w=w.map((U,Z)=>x[Z]+M[Z]),w),I["deep pockets"]&&(set_store_value(miningUpgradeLevels,w[6]=1,w),set_store_value(miningUpgradeLevelsBought,x[6]=1,x),set_store_value(visibleTier,k=2,k)),I["deep pockets ii"]&&(set_store_value(miningUpgradeLevels,w[9]=1,w),set_store_value(miningUpgradeLevelsBought,x[9]=1,x),set_store_value(visibleTier,k=3,k)),set_store_value(resetLastTimes,b.relocate=Date.now(),b)}}const oe=()=>ce();return l.$$set=U=>{"ghost"in U&&_(0,re=U.ghost)},l.$$.update=()=>{l.$$.dirty[0]&12288&&F.t1/H.t1*100,l.$$.dirty[0]&1024,l.$$.dirty[0]&4&&_(4,m=formula.calcFameGainKeys(P)),l.$$.dirty[0]&512&&(y=formula.calcFameGemMulti(E.gems)),l.$$.dirty[0]&2048&&(v=formula.calcFameGainBeacons(formula.sumArray(C)))},Array(30).fill(0),g=formula.calcFameLayerMulti(),[re,ce,P,X,m,Q,j,$,ne,E,q,C,H,F,oe]}class Relocate extends SvelteComponent{constructor(d){super(),init(this,d,instance$c,create_fragment$c,safe_not_equal,{ghost:0,relocate:1},null,[-1,-1])}get relocate(){return this.$$.ctx[1]}}function get_each_context$9(l,d,_){const m=l.slice();return m[30]=d[_],m[32]=_,m}function get_each_context_1$2(l,d,_){const m=l.slice();return m[30]=d[_],m[32]=_,m}function create_if_block_2$3(l){let d,_,m,y;return _=new EnchantUpgradeButton({props:{index:l[32]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block_1$2(l){let d,_,m=l[32]<2&&create_if_block_2$3(l);return{c(){m&&m.c(),d=empty()},l(y){m&&m.l(y),d=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,d,g),_=!0},p:noop,i(y){_||(transition_in(m),_=!0)},o(y){transition_out(m),_=!1},d(y){m&&m.d(y),y&&detach(d)}}}function create_if_block_1$6(l){let d,_,m,y,g,v,b,k,x,w=l[8].enchants?"":l[11](l[1].t2,0)+" / "+l[11](l[0].t2,0),I,M;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),v=space(),b=element("div"),k=element("div"),x=element("strong"),I=text(w),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);_=claim_element(S,"DIV",{class:!0});var N=children(_);m=claim_element(N,"DIV",{class:!0});var D=children(m);y=claim_element(D,"DIV",{class:!0,style:!0}),children(y).forEach(detach),D.forEach(detach),N.forEach(detach),S.forEach(detach),v=claim_space(E),b=claim_element(E,"DIV",{class:!0});var O=children(b);k=claim_element(O,"DIV",{class:!0});var q=children(k);x=claim_element(q,"STRONG",{});var P=children(x);I=claim_text(P,w),P.forEach(detach),q.forEach(detach),O.forEach(detach),this.h()},h(){attr(y,"class","bg-[#7fbf8a] h-2.5 rounded-full"),set_style(y,"width",l[8].enchants?"100%":l[2]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","ench-t1-wrapper align-middle"),attr(d,"class",g=l[8].enchants?"col-span-12":"col-span-10"),attr(k,"class","text-[#989898] text-small text-left pl-2"),attr(b,"class",M=(l[8].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle")},m(E,S){insert_hydration(E,d,S),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(E,v,S),insert_hydration(E,b,S),append_hydration(b,k),append_hydration(k,x),append_hydration(x,I)},p(E,S){S[0]&260&&set_style(y,"width",E[8].enchants?"100%":E[2]),S[0]&256&&g!==(g=E[8].enchants?"col-span-12":"col-span-10")&&attr(d,"class",g),S[0]&259&&w!==(w=E[8].enchants?"":E[11](E[1].t2,0)+" / "+E[11](E[0].t2,0))&&set_data(I,w),S[0]&256&&M!==(M=(E[8].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle")&&attr(b,"class",M)},d(E){E&&detach(d),E&&detach(v),E&&detach(b)}}}function create_if_block$a(l){let d,_,m,y;return _=new EnchantUpgradeButton({props:{index:l[32]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$9(l){let d=l[32]>=2&&l[4][l[32]].unlockAt(),_,m,y=d&&create_if_block$a(l);return{c(){y&&y.c(),_=empty()},l(g){y&&y.l(g),_=empty()},m(g,v){y&&y.m(g,v),insert_hydration(g,_,v),m=!0},p(g,v){v[0]&16&&(d=g[32]>=2&&g[4][g[32]].unlockAt()),d?y?v[0]&16&&transition_in(y,1):(y=create_if_block$a(g),y.c(),transition_in(y,1),y.m(_.parentNode,_)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(g){m||(transition_in(y),m=!0)},o(g){transition_out(y),m=!1},d(g){y&&y.d(g),g&&detach(_)}}}function create_key_block$4(l){let d,_,m=Object.entries(l[4]),y=[];for(let v=0;v<m.length;v+=1)y[v]=create_each_block$9(get_each_context$9(l,m,v));const g=v=>transition_out(y[v],1,1,()=>{y[v]=null});return{c(){for(let v=0;v<y.length;v+=1)y[v].c();d=empty()},l(v){for(let b=0;b<y.length;b+=1)y[b].l(v);d=empty()},m(v,b){for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(v,b);insert_hydration(v,d,b),_=!0},p(v,b){if(b[0]&16){m=Object.entries(v[4]);let k;for(k=0;k<m.length;k+=1){const x=get_each_context$9(v,m,k);y[k]?(y[k].p(x,b),transition_in(y[k],1)):(y[k]=create_each_block$9(x),y[k].c(),transition_in(y[k],1),y[k].m(d.parentNode,d))}for(group_outros(),k=m.length;k<y.length;k+=1)g(k);check_outros()}},i(v){if(!_){for(let b=0;b<m.length;b+=1)transition_in(y[b]);_=!0}},o(v){y=y.filter(Boolean);for(let b=0;b<y.length;b+=1)transition_out(y[b]);_=!1},d(v){destroy_each(y,v),v&&detach(d)}}}function create_fragment$b(l){let d,_,m,y,g,v=l[11](formula.calcEnchantProgressGain(l[5].gems/l[6].gems)*(1e3/l[7].UPDATE_SPEED),2)+"",b,k,x,w,I,M,E,S,N,D,O,q,P,A=l[8].enchants?"":l[11](l[1].t1,0)+" / "+l[11](l[0].t1,0),C,L,G,V=l[9][1](),T,R,Y,Q=l[10][0]||l[10][1],te,W,z,H,F=l[11](formula.calcEnchantProgressGain(1),2)+"",X,ae,re,j,$=Object.entries(l[4]),ne=[];for(let U=0;U<$.length;U+=1)ne[U]=create_each_block_1$2(get_each_context_1$2(l,$,U));const me=U=>transition_out(ne[U],1,1,()=>{ne[U]=null});let ce=V&&create_if_block_1$6(l),oe=create_key_block$4(l);return{c(){d=element("div"),_=element("div");for(let U=0;U<ne.length;U+=1)ne[U].c();m=space(),y=element("div"),g=text(`enchant progress
        [ `),b=text(v),k=text(" progress / sec ]"),x=space(),w=element("div"),I=element("div"),M=element("div"),E=element("div"),S=element("div"),D=space(),O=element("div"),q=element("div"),P=element("strong"),C=text(A),G=space(),ce&&ce.c(),T=space(),R=element("div"),Y=element("div"),oe.c(),te=space(),W=element("div"),z=text("Every mining cycle produces "),H=element("span"),X=text(F),ae=text(` 
    enchant progress. `),re=element("br"),this.h()},l(U){d=claim_element(U,"DIV",{class:!0});var Z=children(d);_=claim_element(Z,"DIV",{class:!0});var B=children(_);for(let we=0;we<ne.length;we+=1)ne[we].l(B);B.forEach(detach),m=claim_space(Z),y=claim_element(Z,"DIV",{class:!0});var K=children(y);g=claim_text(K,`enchant progress
        [ `),b=claim_text(K,v),k=claim_text(K," progress / sec ]"),K.forEach(detach),x=claim_space(Z),w=claim_element(Z,"DIV",{class:!0});var J=children(w);I=claim_element(J,"DIV",{class:!0});var se=children(I);M=claim_element(se,"DIV",{class:!0});var de=children(M);E=claim_element(de,"DIV",{class:!0});var _e=children(E);S=claim_element(_e,"DIV",{class:!0,style:!0}),children(S).forEach(detach),_e.forEach(detach),de.forEach(detach),se.forEach(detach),D=claim_space(J),O=claim_element(J,"DIV",{class:!0});var pe=children(O);q=claim_element(pe,"DIV",{class:!0});var ue=children(q);P=claim_element(ue,"STRONG",{});var ie=children(P);C=claim_text(ie,A),ie.forEach(detach),ue.forEach(detach),pe.forEach(detach),G=claim_space(J),ce&&ce.l(J),J.forEach(detach),T=claim_space(Z),R=claim_element(Z,"DIV",{class:!0});var ge=children(R);Y=claim_element(ge,"DIV",{class:!0});var ye=children(Y);oe.l(ye),ye.forEach(detach),ge.forEach(detach),Z.forEach(detach),te=claim_space(U),W=claim_element(U,"DIV",{class:!0});var ve=children(W);z=claim_text(ve,"Every mining cycle produces "),H=claim_element(ve,"SPAN",{class:!0});var he=children(H);X=claim_text(he,F),he.forEach(detach),ae=claim_text(ve,` 
    enchant progress. `),re=claim_element(ve,"BR",{}),ve.forEach(detach),this.h()},h(){attr(_,"class","fame-upgrade-wrapper grid grid-cols-2"),attr(y,"class","text-[#989898] text-small pt-4"),attr(S,"class","bg-violet-300 h-2.5 rounded-full"),set_style(S,"width",l[8].enchants?"100%":l[3]),attr(E,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(M,"class","ench-t1-wrapper align-middle"),attr(I,"class",N=l[8].enchants?"col-span-12":"col-span-10"),attr(q,"class","text-[#989898] text-small text-left pl-2"),attr(O,"class",L=(l[8].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle"),attr(w,"class","grid grid-cols-12 pt-1"),attr(Y,"class","fame-upgrade-wrapper grid grid-cols-2 pt-2"),attr(R,"class","py-2"),attr(d,"class","wrapper py-2"),attr(H,"class","text-violet-400"),attr(W,"class","pb-16 pt-8 tooltip-text text-center w-full italic")},m(U,Z){insert_hydration(U,d,Z),append_hydration(d,_);for(let B=0;B<ne.length;B+=1)ne[B]&&ne[B].m(_,null);append_hydration(d,m),append_hydration(d,y),append_hydration(y,g),append_hydration(y,b),append_hydration(y,k),append_hydration(d,x),append_hydration(d,w),append_hydration(w,I),append_hydration(I,M),append_hydration(M,E),append_hydration(E,S),append_hydration(w,D),append_hydration(w,O),append_hydration(O,q),append_hydration(q,P),append_hydration(P,C),append_hydration(w,G),ce&&ce.m(w,null),append_hydration(d,T),append_hydration(d,R),append_hydration(R,Y),oe.m(Y,null),insert_hydration(U,te,Z),insert_hydration(U,W,Z),append_hydration(W,z),append_hydration(W,H),append_hydration(H,X),append_hydration(W,ae),append_hydration(W,re),j=!0},p(U,Z){if(Z[0]&16){$=Object.entries(U[4]);let B;for(B=0;B<$.length;B+=1){const K=get_each_context_1$2(U,$,B);ne[B]?(ne[B].p(K,Z),transition_in(ne[B],1)):(ne[B]=create_each_block_1$2(K),ne[B].c(),transition_in(ne[B],1),ne[B].m(_,null))}for(group_outros(),B=$.length;B<ne.length;B+=1)me(B);check_outros()}(!j||Z[0]&224)&&v!==(v=U[11](formula.calcEnchantProgressGain(U[5].gems/U[6].gems)*(1e3/U[7].UPDATE_SPEED),2)+"")&&set_data(b,v),(!j||Z[0]&264)&&set_style(S,"width",U[8].enchants?"100%":U[3]),(!j||Z[0]&256&&N!==(N=U[8].enchants?"col-span-12":"col-span-10"))&&attr(I,"class",N),(!j||Z[0]&259)&&A!==(A=U[8].enchants?"":U[11](U[1].t1,0)+" / "+U[11](U[0].t1,0))&&set_data(C,A),(!j||Z[0]&256&&L!==(L=(U[8].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle"))&&attr(O,"class",L),Z[0]&512&&(V=U[9][1]()),V?ce?ce.p(U,Z):(ce=create_if_block_1$6(U),ce.c(),ce.m(w,null)):ce&&(ce.d(1),ce=null),Z[0]&1024&&safe_not_equal(Q,Q=U[10][0]||U[10][1])?(group_outros(),transition_out(oe,1,1,noop),check_outros(),oe=create_key_block$4(U),oe.c(),transition_in(oe,1),oe.m(Y,null)):oe.p(U,Z)},i(U){if(!j){for(let Z=0;Z<$.length;Z+=1)transition_in(ne[Z]);transition_in(oe),j=!0}},o(U){ne=ne.filter(Boolean);for(let Z=0;Z<ne.length;Z+=1)transition_out(ne[Z]);transition_out(oe),j=!1},d(U){U&&detach(d),destroy_each(ne,U),ce&&ce.d(),oe.d(U),U&&detach(te),U&&detach(W)}}}function instance$b(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A;component_subscribe(l,wallet,G=>_(12,k=G)),component_subscribe(l,beaconLevels,G=>_(13,x=G)),component_subscribe(l,keysOpened,G=>_(14,w=G)),component_subscribe(l,beaconBonuses,G=>_(15,I=G)),component_subscribe(l,enchantThreshold,G=>_(0,M=G)),component_subscribe(l,enchantProgress,G=>_(1,E=G)),component_subscribe(l,enchantUpgrades,G=>_(4,S=G)),component_subscribe(l,progressAverage,G=>_(5,N=G)),component_subscribe(l,progressThreshold,G=>_(6,D=G)),component_subscribe(l,settings,G=>_(7,O=G)),component_subscribe(l,antiFlickerFlags,G=>_(8,q=G)),component_subscribe(l,enchantTierUnlockAt,G=>_(9,P=G)),component_subscribe(l,enchantUpgradeLevels,G=>_(10,A=G));let C;onMount(()=>{setTimeout(()=>{g=formula.calcFameGainKeys(w),v=formula.calcFameGemMulti(k.gems),b=formula.calcFameGainBeacons(formula.sumArray(x))},100),C=setInterval(()=>{},1049)}),onDestroy(()=>{clearInterval(C)});const L=(G,V=0)=>G<1e9?G.toFixed(G<1e3?V:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):G.toExponential(3).toString().replace("+","");return k.gems>0,k.beacons>0,l.$$.update=()=>{l.$$.dirty[0]&3&&_(3,m=`${E.t1/M.t1*100}%`),l.$$.dirty[0]&3&&_(2,y=`${E.t2/M.t2*100}%`),l.$$.dirty[0]&32768,l.$$.dirty[0]&16384&&(g=formula.calcFameGainKeys(w)),l.$$.dirty[0]&4096&&(v=formula.calcFameGemMulti(k.gems)),l.$$.dirty[0]&8192&&(b=formula.calcFameGainBeacons(formula.sumArray(x)))},Array(30).fill(0),[M,E,y,m,S,N,D,O,q,P,A,L,k,x,w,I]}class Enchants extends SvelteComponent{constructor(d){super(),init(this,d,instance$b,create_fragment$b,safe_not_equal,{},null,[-1,-1])}}const AutomationUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$8(l,d,_){const m=l.slice();return m[21]=d[_],m}function create_if_block$9(l){let d,_=l[5][l[0]].name+"",m,y,g,v,b=l[5][l[0]].description+"",k,x,w,I,M,E,S,N,D,O=l[5][l[0]].noResetAscension&&create_if_block_3$2();function q(C,L){return C[4][C[5][C[0]].id]?create_if_block_1$5:create_else_block$3}let P=q(l),A=P(l);return{c(){d=element("div"),m=text(_),y=space(),g=element("span"),v=element("div"),k=text(b),x=space(),O&&O.c(),w=space(),I=element("hr"),M=space(),E=element("div"),A.c(),this.h()},l(C){d=claim_element(C,"DIV",{class:!0});var L=children(d);m=claim_text(L,_),y=claim_space(L),g=claim_element(L,"SPAN",{class:!0});var G=children(g);v=claim_element(G,"DIV",{class:!0});var V=children(v);k=claim_text(V,b),V.forEach(detach),x=claim_space(G),O&&O.l(G),w=claim_space(G),I=claim_element(G,"HR",{}),M=claim_space(G),E=claim_element(G,"DIV",{class:!0});var T=children(E);A.l(T),T.forEach(detach),G.forEach(detach),L.forEach(detach),this.h()},h(){attr(v,"class","title text-small-gray items-start text-center pb-1"),attr(E,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(g,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-1f4i5s3"),attr(d,"class",S="has-tooltip tooltip-text "+(l[2]?l[4][l[5][l[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn":l[4][l[5][l[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-1f4i5s3")},m(C,L){insert_hydration(C,d,L),append_hydration(d,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,v),append_hydration(v,k),append_hydration(g,x),O&&O.m(g,null),append_hydration(g,w),append_hydration(g,I),append_hydration(g,M),append_hydration(g,E),A.m(E,null),N||(D=listen(d,"click",l[10]),N=!0)},p(C,L){L&33&&_!==(_=C[5][C[0]].name+"")&&set_data(m,_),L&33&&b!==(b=C[5][C[0]].description+"")&&set_data(k,b),C[5][C[0]].noResetAscension?O||(O=create_if_block_3$2(),O.c(),O.m(g,w)):O&&(O.d(1),O=null),P===(P=q(C))&&A?A.p(C,L):(A.d(1),A=P(C),A&&(A.c(),A.m(E,null))),L&53&&S!==(S="has-tooltip tooltip-text "+(C[2]?C[4][C[5][C[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn":C[4][C[5][C[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-1f4i5s3")&&attr(d,"class",S)},d(C){C&&detach(d),O&&O.d(),A.d(),N=!1,D()}}}function create_if_block_3$2(l){let d,_;return{c(){d=element("div"),_=text("Not reset on ascension or lower"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Not reset on ascension or lower"),y.forEach(detach),this.h()},h(){attr(d,"class","text-xs italic text-indigo-300")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},d(m){m&&detach(d)}}}function create_else_block$3(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$8(get_each_context$8(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&394){_=Object.entries(y[1]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context$8(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block$8(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$5(l){let d,_;return{c(){d=element("div"),_=text("This automation has been purchased!"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This automation has been purchased!"),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#888888]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$2(l){let d,_=(l[3][l[21][0]]||l[7].has(l[21][0])?ref.displayNames[l[21][0]]?ref.displayNames[l[21][0]]:l[21][0]:"???")+"",m,y,g,v,b=l[8](l[21][1])+"",k;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var w=children(d);m=claim_text(w,_),w.forEach(detach),g=claim_space(x),v=claim_element(x,"DIV",{class:!0});var I=children(v);k=claim_text(I,b),I.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[21][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-1f4i5s3"),attr(v,"class","col-span-2 text-left")},m(x,w){insert_hydration(x,d,w),append_hydration(d,m),insert_hydration(x,g,w),insert_hydration(x,v,w),append_hydration(v,k)},p(x,w){w&138&&_!==(_=(x[3][x[21][0]]||x[7].has(x[21][0])?ref.displayNames[x[21][0]]?ref.displayNames[x[21][0]]:x[21][0]:"???")+"")&&set_data(m,_),w&2&&y!==(y=(ref.colors[x[21][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-1f4i5s3")&&attr(d,"class",y),w&2&&b!==(b=x[8](x[21][1])+"")&&set_data(k,b)},d(x){x&&detach(d),x&&detach(g),x&&detach(v)}}}function create_each_block$8(l){let d,_=l[21][1]>=1&&create_if_block_2$2(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[21][1]>=1?_?_.p(m,y):(_=create_if_block_2$2(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$3(l){let d=l[5][l[0]].unlockAt()||permUnlocked||l[6][l[0]]>0,_,m=d&&create_if_block$9(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&97&&(d=y[5][y[0]].unlockAt()||permUnlocked||y[6][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$9(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$a(l){let d=l[2],_,m=create_key_block$3(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&4&&safe_not_equal(d,d=y[2])?(m.d(1),m=create_key_block$3(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}let permUnlocked=!1;function instance$a(l,d,_){let m,y,g,v,b,k,x,w,I,M;component_subscribe(l,wallet,L=>_(3,m=L)),component_subscribe(l,visibleTier,L=>_(12,y=L)),component_subscribe(l,miningUpgradeLevelsBought,L=>_(13,g=L)),component_subscribe(l,miningUpgradeLevels,L=>_(14,v=L)),component_subscribe(l,automationItemsUnlocked,L=>_(4,b=L)),component_subscribe(l,key2DropTable,L=>_(15,k=L)),component_subscribe(l,automationUpgrades,L=>_(5,x=L)),component_subscribe(l,enchantThreshold,L=>_(16,w=L)),component_subscribe(l,enchantUpgradeLevels,L=>_(6,I=L)),component_subscribe(l,unlockedRes,L=>_(7,M=L));let{index:E}=d,S=()=>{let L={};for(let[G,V]of Object.entries(x[E].cost))L[G]=V;return L},N={},D,O;onMount(()=>{setTimeout(()=>{_(1,N=S()),_(2,D=A())},50),O=setInterval(()=>{_(2,D=A())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(O)});const q=(L,G=0)=>L<1e9?L.toFixed(L<1e3?G:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):L.toExponential(3).toString().replace("+","");function P(){if(!b[x[E].name.toLowerCase()]){_(1,N=S());for(let[L,G]of Object.entries(N))if(G>=1&&m[L]<G||!m[L])return;for(let[L,G]of Object.entries(N))G>=1&&set_store_value(wallet,m[L]-=G,m);if(set_store_value(automationItemsUnlocked,b[x[E].name.toLowerCase()]=!0,b),x[E].name.toLowerCase()=="spellcaster"){console.log("working??");for(let L of Object.keys(w))set_store_value(enchantThreshold,w[L]*=.9,w)}if(x[E].name.toLowerCase()=="spellcaster ii")for(let L of Object.keys(w))set_store_value(enchantThreshold,w[L]*=.9,w);x[E].name.toLowerCase()=="auto-fission"&&set_store_value(wallet,m.radium=(m.radium||0)+1,m),x[E].name.toLowerCase()=="gateway"&&(set_store_value(key2DropTable,k.key3=[1/15e4,1,1,1/15e4,1/1e4],k),console.log(k),key2DropTable.updateTable()),b["deep pockets"]&&(set_store_value(miningUpgradeLevels,v[6]=1,v),set_store_value(miningUpgradeLevelsBought,g[6]=1,g),set_store_value(visibleTier,y=2,y)),b["deep pockets ii"]&&(set_store_value(miningUpgradeLevels,v[6]=1,v),set_store_value(miningUpgradeLevelsBought,g[6]=1,g),set_store_value(visibleTier,y=3,y)),b["deep pockets iii"]&&(set_store_value(miningUpgradeLevels,v[14]=1,v),set_store_value(miningUpgradeLevelsBought,g[14]=1,g),set_store_value(visibleTier,y=4,y))}}function A(){_(1,N=S());for(let[L,G]of Object.entries(N))if(G>=1&&m[L]<G||!m[L])return!1;return!0}const C=()=>P();return l.$$set=L=>{"index"in L&&_(0,E=L.index)},[E,N,D,m,b,x,I,M,q,P,C]}class AutomationUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$a,create_fragment$a,safe_not_equal,{index:0})}}function get_each_context$7(l,d,_){const m=l.slice();return m[26]=d[_],m[28]=_,m}function create_if_block$8(l){let d,_,m,y;return _=new AutomationUpgradeButton({props:{index:l[28]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$7(l){let d=l[1][l[28]].unlockAt()&&(l[0]||!l[2][l[26][1].name.toLowerCase()]),_,m,y=d&&create_if_block$8(l);return{c(){y&&y.c(),_=empty()},l(g){y&&y.l(g),_=empty()},m(g,v){y&&y.m(g,v),insert_hydration(g,_,v),m=!0},p(g,v){v&7&&(d=g[1][g[28]].unlockAt()&&(g[0]||!g[2][g[26][1].name.toLowerCase()])),d?y?v&7&&transition_in(y,1):(y=create_if_block$8(g),y.c(),transition_in(y,1),y.m(_.parentNode,_)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(g){m||(transition_in(y),m=!0)},o(g){transition_out(y),m=!1},d(g){y&&y.d(g),g&&detach(_)}}}function create_fragment$9(l){let d,_,m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P=Object.entries(l[1]),A=[];for(let L=0;L<P.length;L+=1)A[L]=create_each_block$7(get_each_context$7(l,P,L));const C=L=>transition_out(A[L],1,1,()=>{A[L]=null});return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=element("label"),v=element("input"),b=space(),k=element("span"),x=text("Show purchased upgrades"),I=space();for(let L=0;L<A.length;L+=1)A[L].c();M=space(),E=element("div"),S=text("Any augments that boost production do so multiplicatively. "),N=element("br"),this.h()},l(L){d=claim_element(L,"DIV",{class:!0});var G=children(d);_=claim_element(G,"DIV",{class:!0});var V=children(_);m=claim_element(V,"DIV",{class:!0});var T=children(m);y=claim_element(T,"DIV",{class:!0});var R=children(y);g=claim_element(R,"LABEL",{class:!0});var Y=children(g);v=claim_element(Y,"INPUT",{type:!0,class:!0}),b=claim_space(Y),k=claim_element(Y,"SPAN",{class:!0});var Q=children(k);x=claim_text(Q,"Show purchased upgrades"),Q.forEach(detach),Y.forEach(detach),R.forEach(detach),I=claim_space(T);for(let W=0;W<A.length;W+=1)A[W].l(T);T.forEach(detach),V.forEach(detach),G.forEach(detach),M=claim_space(L),E=claim_element(L,"DIV",{class:!0});var te=children(E);S=claim_text(te,"Any augments that boost production do so multiplicatively. "),N=claim_element(te,"BR",{}),te.forEach(detach),this.h()},h(){v.hidden=!0,attr(v,"type","checkbox"),attr(v,"class","form-checkbox display-none"),attr(k,"class",w="p-1 col-span-2 items-center game-text "+(l[0]?"game-btn-toggleon":"game-btn")),attr(g,"class","items-center col-span-2"),attr(y,"class","col-span-2 p-1 content-center items-center"),attr(m,"class","fame-upgrade-wrapper grid grid-cols-2 pt-2"),attr(_,"class","py-2"),attr(d,"class","wrapper py-2"),attr(E,"class","pb-16 pt-8 tooltip-text text-center w-full italic")},m(L,G){insert_hydration(L,d,G),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(y,g),append_hydration(g,v),v.checked=l[0],append_hydration(g,b),append_hydration(g,k),append_hydration(k,x),append_hydration(m,I);for(let V=0;V<A.length;V+=1)A[V]&&A[V].m(m,null);insert_hydration(L,M,G),insert_hydration(L,E,G),append_hydration(E,S),append_hydration(E,N),D=!0,O||(q=listen(v,"change",l[9]),O=!0)},p(L,[G]){if(G&1&&(v.checked=L[0]),(!D||G&1&&w!==(w="p-1 col-span-2 items-center game-text "+(L[0]?"game-btn-toggleon":"game-btn")))&&attr(k,"class",w),G&7){P=Object.entries(L[1]);let V;for(V=0;V<P.length;V+=1){const T=get_each_context$7(L,P,V);A[V]?(A[V].p(T,G),transition_in(A[V],1)):(A[V]=create_each_block$7(T),A[V].c(),transition_in(A[V],1),A[V].m(m,null))}for(group_outros(),V=P.length;V<A.length;V+=1)C(V);check_outros()}},i(L){if(!D){for(let G=0;G<P.length;G+=1)transition_in(A[G]);D=!0}},o(L){A=A.filter(Boolean);for(let G=0;G<A.length;G+=1)transition_out(A[G]);D=!1},d(L){L&&detach(d),destroy_each(A,L),L&&detach(M),L&&detach(E),O=!1,q()}}}function instance$9(l,d,_){let m,y,g,v,b,k,x,w,I,M,E;component_subscribe(l,wallet,O=>_(3,v=O)),component_subscribe(l,beaconLevels,O=>_(4,b=O)),component_subscribe(l,keysOpened,O=>_(5,k=O)),component_subscribe(l,beaconBonuses,O=>_(6,x=O)),component_subscribe(l,enchantThreshold,O=>_(7,w=O)),component_subscribe(l,enchantProgress,O=>_(8,I=O)),component_subscribe(l,automationUpgrades,O=>_(1,M=O)),component_subscribe(l,automationItemsUnlocked,O=>_(2,E=O));let S,N=!1;onMount(()=>{setTimeout(()=>{m=formula.calcFameGainKeys(k),y=formula.calcFameGemMulti(v.gems),g=formula.calcFameGainBeacons(formula.sumArray(b))},100),S=setInterval(()=>{},1049)}),onDestroy(()=>{clearInterval(S)}),v.gems>0,v.beacons>0;function D(){N=this.checked,_(0,N)}return l.$$.update=()=>{l.$$.dirty&384&&I.t1/w.t1*100,l.$$.dirty&64,l.$$.dirty&32&&(m=formula.calcFameGainKeys(k)),l.$$.dirty&8&&(y=formula.calcFameGemMulti(v.gems)),l.$$.dirty&16&&(g=formula.calcFameGainBeacons(formula.sumArray(b)))},Array(30).fill(0),[N,M,E,v,b,k,x,w,I,D]}class Automation extends SvelteComponent{constructor(d){super(),init(this,d,instance$9,create_fragment$9,safe_not_equal,{})}}const ButtonUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$6(l,d,_){const m=l.slice();return m[22]=d[_],m}function create_if_block$7(l){let d,_,m=l[6][l[0]].name+"",y,g,v=l[10](l[7][l[0]],0)+"",b,k,x=l[10](l[6][l[0]].maxLevel,0)+"",w,I,M,E,S,N,D=l[6][l[0]].description+"",O,q,P,A,C,L=(l[6][l[0]].prefix||"")+"",G,V,T,R=(l[6][l[0]].isPercent?l[11](l[6][l[0]].formula(l[7][l[0]]),3,!1):l[10](l[6][l[0]].formula(l[7][l[0]]),3))+"",Y,Q,te,W,z=(l[6][l[0]].isPercent?l[11](l[6][l[0]].formula(l[7][l[0]]+l[4]),3,!1):l[10](l[6][l[0]].formula(l[7][l[0]]+l[4]),3))+"",H,F,X,ae=(l[6][l[0]].suffix||"")+"",re,j,$,ne,me,ce,oe,U,Z,B=(l[8].maxBuy&&l[4]>0||l[4]>1)&&create_if_block_4$1(l),K=l[8].costRatios&&create_if_block_3$1(l);function J(_e,pe){return _e[7][_e[0]]>=_e[6][_e[0]].maxLevel?create_if_block_1$4:create_else_block$2}let se=J(l),de=se(l);return{c(){d=element("div"),_=element("span"),y=text(m),g=text(" ["),b=text(v),k=text(" / "),w=text(x),I=text(`]
                    `),B&&B.c(),E=space(),S=element("span"),N=element("div"),O=text(D),q=space(),P=element("div"),A=element("div"),C=element("span"),G=text(L),V=space(),T=element("span"),Y=text(R),Q=space(),te=element("span"),W=text(`=>
                            `),H=text(z),F=space(),X=element("span"),re=text(ae),j=space(),K&&K.c(),$=space(),ne=element("hr"),me=space(),ce=element("div"),de.c(),this.h()},l(_e){d=claim_element(_e,"DIV",{class:!0});var pe=children(d);_=claim_element(pe,"SPAN",{class:!0});var ue=children(_);y=claim_text(ue,m),g=claim_text(ue," ["),b=claim_text(ue,v),k=claim_text(ue," / "),w=claim_text(ue,x),I=claim_text(ue,`]
                    `),B&&B.l(ue),ue.forEach(detach),E=claim_space(pe),S=claim_element(pe,"SPAN",{class:!0});var ie=children(S);N=claim_element(ie,"DIV",{class:!0});var ge=children(N);O=claim_text(ge,D),ge.forEach(detach),q=claim_space(ie),P=claim_element(ie,"DIV",{class:!0});var ye=children(P);A=claim_element(ye,"DIV",{class:!0});var ve=children(A);C=claim_element(ve,"SPAN",{class:!0});var he=children(C);G=claim_text(he,L),he.forEach(detach),V=claim_space(ve),T=claim_element(ve,"SPAN",{class:!0});var we=children(T);Y=claim_text(we,R),we.forEach(detach),Q=claim_space(ve),te=claim_element(ve,"SPAN",{class:!0});var Me=children(te);W=claim_text(Me,`=>
                            `),H=claim_text(Me,z),Me.forEach(detach),F=claim_space(ve),X=claim_element(ve,"SPAN",{class:!0});var Ae=children(X);re=claim_text(Ae,ae),Ae.forEach(detach),j=claim_space(ve),K&&K.l(ve),ve.forEach(detach),ye.forEach(detach),$=claim_space(ie),ne=claim_element(ie,"HR",{}),me=claim_space(ie),ce=claim_element(ie,"DIV",{class:!0});var Ne=children(ce);de.l(Ne),Ne.forEach(detach),ie.forEach(detach),pe.forEach(detach),this.h()},h(){attr(_,"class",M=l[6][l[0]].isRadiumUpgrade?"text-lime-300":"text-indigo-300"),attr(N,"class","title text-small-gray items-start text-center pb-1"),attr(C,"class","current text-[#cccccc]"),attr(T,"class","current text-[#cccccc]"),attr(te,"class","current text-[#888888]"),attr(X,"class","current text-[#cccccc]"),attr(A,"class","tooltip-text-xs text-[#cccccc]"),attr(P,"class","text-center effect-wrapper"),attr(ce,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(S,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-osgtvp"),attr(d,"class",oe="has-tooltip tooltip-text "+(l[7][l[0]]>=l[6][l[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":l[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-osgtvp")},m(_e,pe){insert_hydration(_e,d,pe),append_hydration(d,_),append_hydration(_,y),append_hydration(_,g),append_hydration(_,b),append_hydration(_,k),append_hydration(_,w),append_hydration(_,I),B&&B.m(_,null),append_hydration(d,E),append_hydration(d,S),append_hydration(S,N),append_hydration(N,O),append_hydration(S,q),append_hydration(S,P),append_hydration(P,A),append_hydration(A,C),append_hydration(C,G),append_hydration(A,V),append_hydration(A,T),append_hydration(T,Y),append_hydration(A,Q),append_hydration(A,te),append_hydration(te,W),append_hydration(te,H),append_hydration(A,F),append_hydration(A,X),append_hydration(X,re),append_hydration(A,j),K&&K.m(A,null),append_hydration(S,$),append_hydration(S,ne),append_hydration(S,me),append_hydration(S,ce),de.m(ce,null),U||(Z=listen(d,"click",l[14]),U=!0)},p(_e,pe){pe&65&&m!==(m=_e[6][_e[0]].name+"")&&set_data(y,m),pe&129&&v!==(v=_e[10](_e[7][_e[0]],0)+"")&&set_data(b,v),pe&65&&x!==(x=_e[10](_e[6][_e[0]].maxLevel,0)+"")&&set_data(w,x),_e[8].maxBuy&&_e[4]>0||_e[4]>1?B?B.p(_e,pe):(B=create_if_block_4$1(_e),B.c(),B.m(_,null)):B&&(B.d(1),B=null),pe&65&&M!==(M=_e[6][_e[0]].isRadiumUpgrade?"text-lime-300":"text-indigo-300")&&attr(_,"class",M),pe&65&&D!==(D=_e[6][_e[0]].description+"")&&set_data(O,D),pe&65&&L!==(L=(_e[6][_e[0]].prefix||"")+"")&&set_data(G,L),pe&193&&R!==(R=(_e[6][_e[0]].isPercent?_e[11](_e[6][_e[0]].formula(_e[7][_e[0]]),3,!1):_e[10](_e[6][_e[0]].formula(_e[7][_e[0]]),3))+"")&&set_data(Y,R),pe&209&&z!==(z=(_e[6][_e[0]].isPercent?_e[11](_e[6][_e[0]].formula(_e[7][_e[0]]+_e[4]),3,!1):_e[10](_e[6][_e[0]].formula(_e[7][_e[0]]+_e[4]),3))+"")&&set_data(H,z),pe&65&&ae!==(ae=(_e[6][_e[0]].suffix||"")+"")&&set_data(re,ae),_e[8].costRatios?K?K.p(_e,pe):(K=create_if_block_3$1(_e),K.c(),K.m(A,null)):K&&(K.d(1),K=null),se===(se=J(_e))&&de?de.p(_e,pe):(de.d(1),de=se(_e),de&&(de.c(),de.m(ce,null))),pe&197&&oe!==(oe="has-tooltip tooltip-text "+(_e[7][_e[0]]>=_e[6][_e[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":_e[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-osgtvp")&&attr(d,"class",oe)},d(_e){_e&&detach(d),B&&B.d(),K&&K.d(),de.d(),U=!1,Z()}}}function create_if_block_4$1(l){let d,_,m,y;return{c(){d=element("span"),_=text("(x"),m=text(l[4]),y=text(")"),this.h()},l(g){d=claim_element(g,"SPAN",{class:!0});var v=children(d);_=claim_text(v,"(x"),m=claim_text(v,l[4]),y=claim_text(v,")"),v.forEach(detach),this.h()},h(){attr(d,"class","text-gray-300")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),append_hydration(d,m),append_hydration(d,y)},p(g,v){v&16&&set_data(m,g[4])},d(g){g&&detach(d)}}}function create_if_block_3$1(l){let d,_,m,y,g=l[10](l[6][l[0]].ratio,3)+"",v,b;return{c(){d=element("br"),_=space(),m=element("span"),y=text("Cost Multiplier: "),v=text(g),b=text("x"),this.h()},l(k){d=claim_element(k,"BR",{}),_=claim_space(k),m=claim_element(k,"SPAN",{class:!0});var x=children(m);y=claim_text(x,"Cost Multiplier: "),v=claim_text(x,g),b=claim_text(x,"x"),x.forEach(detach),this.h()},h(){attr(m,"class","current text-[#888888]")},m(k,x){insert_hydration(k,d,x),insert_hydration(k,_,x),insert_hydration(k,m,x),append_hydration(m,y),append_hydration(m,v),append_hydration(m,b)},p(k,x){x&65&&g!==(g=k[10](k[6][k[0]].ratio,3)+"")&&set_data(v,g)},d(k){k&&detach(d),k&&detach(_),k&&detach(m)}}}function create_else_block$2(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$6(get_each_context$6(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&5666){_=Object.entries(y[1]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context$6(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block$6(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$4(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#888888]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$1(l){let d,_=(l[5][l[22][0]]||l[9].has(l[22][0])?ref.displayNames[l[22][0]]?ref.displayNames[l[22][0]]:l[22][0]:"???")+"",m,y,g,v,b=l[10](l[22][1])+"",k,x,w;return{c(){d=element("div"),m=text(_),g=space(),v=element("div"),k=text(b),x=space(),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var M=children(d);m=claim_text(M,_),M.forEach(detach),g=claim_space(I),v=claim_element(I,"DIV",{class:!0});var E=children(v);k=claim_text(E,b),x=claim_space(E),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[22][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-osgtvp"),attr(v,"class",w="col-span-2 "+(l[12](l[22][0])?"":"text-red-600")+" text-left")},m(I,M){insert_hydration(I,d,M),append_hydration(d,m),insert_hydration(I,g,M),insert_hydration(I,v,M),append_hydration(v,k),append_hydration(v,x)},p(I,M){M&546&&_!==(_=(I[5][I[22][0]]||I[9].has(I[22][0])?ref.displayNames[I[22][0]]?ref.displayNames[I[22][0]]:I[22][0]:"???")+"")&&set_data(m,_),M&2&&y!==(y=(ref.colors[I[22][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-osgtvp")&&attr(d,"class",y),M&2&&b!==(b=I[10](I[22][1])+"")&&set_data(k,b),M&2&&w!==(w="col-span-2 "+(I[12](I[22][0])?"":"text-red-600")+" text-left")&&attr(v,"class",w)},d(I){I&&detach(d),I&&detach(g),I&&detach(v)}}}function create_each_block$6(l){let d,_=l[22][1]>=1&&create_if_block_2$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[22][1]>=1?_?_.p(m,y):(_=create_if_block_2$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$2(l){let d=l[6][l[0]].unlockAt()||l[3]||l[7][l[0]]>0,_,m=d&&create_if_block$7(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&201&&(d=y[6][y[0]].unlockAt()||y[3]||y[7][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$7(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$8(l){let d=l[3]||l[2]||l[7][l[0]]>0,_,m=create_key_block$2(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&141&&safe_not_equal(d,d=y[3]||y[2]||y[7][y[0]]>0)?(m.d(1),m=create_key_block$2(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$8(l,d,_){let m,y,g,v,b;component_subscribe(l,wallet,V=>_(5,m=V)),component_subscribe(l,buttonUpgrades,V=>_(6,y=V)),component_subscribe(l,buttonUpgradeLevels,V=>_(7,g=V)),component_subscribe(l,settings,V=>_(8,v=V)),component_subscribe(l,unlockedRes,V=>_(9,b=V));let{index:k}=d,x=()=>{let V={};for(let[T,R]of Object.entries(y[k].cost))V[T]=q(R);return V},w={},I,M=g[k]>0,E,S=v.buyAmount;onMount(()=>{setTimeout(()=>{_(1,w=x()),_(2,I=C()),y[k].unlockAt()&&_(3,M=!0),_(3,M=g[k]>0)},50),E=setInterval(()=>{v.maxBuy?(_(4,S=A()),_(1,w=x())):_(4,S=v.buyAmount),_(2,I=C()),L(),y[k].unlockAt()&&_(3,M=!0)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(E)});const N=(V,T=0)=>V<1e9?V.toFixed(V<1e3?T:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):V.toExponential(3).toString().replace("+",""),D=(V,T=3,R=!1)=>(R&&(V-=1),V<1e9?(V*100).toFixed(V*100<1e3?T:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(V*100).toExponential(T).toString().replace("+","")+"%");function O(V){return m[V]>=w[V]}function q(V){const T=V*Math.pow(y[k].ratio,g[k]),R=y[k].ratio,Y=Math.max(1,S);return formula.gSum(T,R,Y)}function P(){_(1,w=x());for(let[V,T]of Object.entries(w))if(T>=1&&m[V]<T||!m[V])return;for(let[V,T]of Object.entries(w))T>=1&&set_store_value(wallet,m[V]-=T,m);set_store_value(buttonUpgradeLevels,g[k]+=Math.min(S,y[k].maxLevel-g[k]),g),_(3,M=!0)}function A(){if(y[k].maxLevel==1)return g[k]==0?1:0;const V=y[k].maxLevel-g[k];let T=1e9;for(let[R,Y]of Object.entries(y[k].cost)){if(!m[R])return 0;const Q=Y*Math.pow(y[k].ratio,g[k]);T=Math.min(T,formula.maxNumGeom(m[R],Q,y[k].ratio))}return Math.min(V,T)}function C(){_(1,w=x());for(let[V,T]of Object.entries(w))if(T>=1&&m[V]<T||!m[V])return!1;return!0}function L(){for(let[V,T]of Object.entries(y[k].unlockAt))if(m[V]<T)return!1;return!0}const G=()=>P();return l.$$set=V=>{"index"in V&&_(0,k=V.index)},[k,w,I,M,S,m,y,g,v,b,N,D,O,P,G]}class ButtonUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$8,create_fragment$8,safe_not_equal,{index:0})}}function get_each_context$5(l,d,_){const m=l.slice();return m[13]=d[_],m[15]=_,m}function create_if_block_1$3(l){let d,_;return{c(){d=element("span"),_=text(l[4]),this.h()},l(m){d=claim_element(m,"SPAN",{class:!0});var y=children(d);_=claim_text(y,l[4]),y.forEach(detach),this.h()},h(){attr(d,"class","text-lime-300 text-opacity-70 text-med pl-2")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p(m,y){y&16&&set_data(_,m[4])},d(m){m&&detach(d)}}}function create_each_block$5(l){let d,_,m,y;return _=new ButtonUpgradeButton({props:{index:l[15]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);claim_component(_.$$.fragment,v),m=claim_space(v),v.forEach(detach),this.h()},h(){attr(d,"class","col-span-3 pb-1 ")},m(g,v){insert_hydration(g,d,v),mount_component(_,d,null),append_hydration(d,m),y=!0},p:noop,i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_if_block$6(l){let d,_,m=l[10](l[5][5].formula(l[6][5]))+"",y,g,v,b,k,x;return{c(){d=text(`When you gain radium, you have a 
        `),_=element("span"),y=text(m),g=text(`
        chance to gain a `),v=element("span"),b=text("star."),k=space(),x=element("br"),this.h()},l(w){d=claim_text(w,`When you gain radium, you have a 
        `),_=claim_element(w,"SPAN",{class:!0});var I=children(_);y=claim_text(I,m),I.forEach(detach),g=claim_text(w,`
        chance to gain a `),v=claim_element(w,"SPAN",{class:!0});var M=children(v);b=claim_text(M,"star."),M.forEach(detach),k=claim_space(w),x=claim_element(w,"BR",{}),this.h()},h(){attr(_,"class",ref.colors.stars),attr(v,"class",ref.colors.stars)},m(w,I){insert_hydration(w,d,I),insert_hydration(w,_,I),append_hydration(_,y),insert_hydration(w,g,I),insert_hydration(w,v,I),append_hydration(v,b),insert_hydration(w,k,I),insert_hydration(w,x,I)},p(w,I){I&96&&m!==(m=w[10](w[5][5].formula(w[6][5]))+"")&&set_data(y,m)},d(w){w&&detach(d),w&&detach(_),w&&detach(g),w&&detach(v),w&&detach(k),w&&detach(x)}}}function create_fragment$7(l){let d,_,m,y,g,v,b,k,x=l[9](l[1],2)+"",w,I,M,E,S,N,D,O,q,P,A=l[9](l[2],l[2]>100?0:2)+"",C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae=l[9](l[0][0])+"",re,j,$=l[9](l[0][1])+"",ne,me,ce,oe,U=l[9](formula.calcRadiumGainWhenComplete(),2)+"",Z,B,K,J,se,de,_e,pe,ue=l[10](l[5][0].formula(l[6][0]))+"",ie,ge,ye,ve,he,we,Me,Ae=l[4].length>0&&create_if_block_1$3(l),Ne=l[5],xe=[];for(let Se=0;Se<Ne.length;Se+=1)xe[Se]=create_each_block$5(get_each_context$5(l,Ne,Se));const Ue=Se=>transition_out(xe[Se],1,1,()=>{xe[Se]=null});let Ee=(l[7].totalFame>1e13||l[8].ascensionCount>0)&&create_if_block$6(l);return{c(){d=element("div"),_=element("div"),m=element("div"),y=text("At your current "),g=element("span"),v=text("layer"),b=text(`, 
          you gain `),k=element("span"),w=text(x),I=text(" radioactivity"),M=text(`
          per mining cycle.`),E=space(),S=element("div"),N=text("Your "),D=element("span"),O=text("radium"),q=text(`
          is producing 
          `),P=element("span"),C=text(A),L=text("  crystals"),G=text(" per second"),V=space(),T=element("div"),R=element("div"),Y=element("div"),Q=element("div"),te=element("div"),W=space(),z=element("div"),H=element("div"),F=text(`Radioactivity 
            `),X=element("span"),re=text(ae),j=text(" / "),ne=text($),me=text(`
            for `),ce=element("span"),oe=text("+"),Z=text(U),B=text(" radium"),K=space(),Ae&&Ae.c(),J=space();for(let Se=0;Se<xe.length;Se+=1)xe[Se].c();se=space(),de=element("div"),_e=text("The chance of discovering a thorium deposit is "),pe=element("span"),ie=text(ue),ge=text(" per second."),ye=element("br"),ve=space(),Ee&&Ee.c(),he=text(`
      Base radioactivity gain increases after layer 100. `),we=element("br"),this.h()},l(Se){d=claim_element(Se,"DIV",{class:!0});var Le=children(d);_=claim_element(Le,"DIV",{class:!0});var De=children(_);m=claim_element(De,"DIV",{class:!0});var Oe=children(m);y=claim_text(Oe,"At your current "),g=claim_element(Oe,"SPAN",{class:!0});var Ce=children(g);v=claim_text(Ce,"layer"),Ce.forEach(detach),b=claim_text(Oe,`, 
          you gain `),k=claim_element(Oe,"SPAN",{class:!0});var Ke=children(k);w=claim_text(Ke,x),I=claim_text(Ke," radioactivity"),Ke.forEach(detach),M=claim_text(Oe,`
          per mining cycle.`),Oe.forEach(detach),E=claim_space(De),S=claim_element(De,"DIV",{class:!0});var je=children(S);N=claim_text(je,"Your "),D=claim_element(je,"SPAN",{class:!0});var ze=children(D);O=claim_text(ze,"radium"),ze.forEach(detach),q=claim_text(je,`
          is producing 
          `),P=claim_element(je,"SPAN",{class:!0});var Fe=children(P);C=claim_text(Fe,A),L=claim_text(Fe,"  crystals"),Fe.forEach(detach),G=claim_text(je," per second"),je.forEach(detach),V=claim_space(De),T=claim_element(De,"DIV",{class:!0});var Xe=children(T);R=claim_element(Xe,"DIV",{class:!0});var Qe=children(R);Y=claim_element(Qe,"DIV",{class:!0});var qe=children(Y);Q=claim_element(qe,"DIV",{class:!0});var rt=children(Q);te=claim_element(rt,"DIV",{class:!0,style:!0});var He=children(te);He.forEach(detach),rt.forEach(detach),qe.forEach(detach),Qe.forEach(detach),W=claim_space(Xe),z=claim_element(Xe,"DIV",{class:!0});var ot=children(z);H=claim_element(ot,"DIV",{class:!0});var et=children(H);F=claim_text(et,`Radioactivity 
            `),X=claim_element(et,"SPAN",{class:!0});var tt=children(X);re=claim_text(tt,ae),j=claim_text(tt," / "),ne=claim_text(tt,$),tt.forEach(detach),me=claim_text(et,`
            for `),ce=claim_element(et,"SPAN",{class:!0});var Ze=children(ce);oe=claim_text(Ze,"+"),Z=claim_text(Ze,U),B=claim_text(Ze," radium"),Ze.forEach(detach),K=claim_space(et),Ae&&Ae.l(et),et.forEach(detach),ot.forEach(detach),Xe.forEach(detach),J=claim_space(De);for(let at=0;at<xe.length;at+=1)xe[at].l(De);De.forEach(detach),se=claim_space(Le),de=claim_element(Le,"DIV",{class:!0});var $e=children(de);_e=claim_text($e,"The chance of discovering a thorium deposit is "),pe=claim_element($e,"SPAN",{class:!0});var ut=children(pe);ie=claim_text(ut,ue),ut.forEach(detach),ge=claim_text($e," per second."),ye=claim_element($e,"BR",{}),ve=claim_space($e),Ee&&Ee.l($e),he=claim_text($e,`
      Base radioactivity gain increases after layer 100. `),we=claim_element($e,"BR",{}),$e.forEach(detach),Le.forEach(detach),this.h()},h(){attr(g,"class","text-yellow-300"),attr(k,"class",ref.colors.radium+" font-bold"),attr(m,"class","pb-3 col-span-12 game-text text-center"),attr(D,"class",ref.colors.radium),attr(P,"class",ref.colors.crystals+" font-bold"),attr(S,"class","pb-3 col-span-12 game-text text-center"),attr(te,"class","bg-lime-300 w-4 h-4 rounded-sm relative z-0"),set_style(te,"width",l[3]),set_style(te,"transition","width 0.1s"),attr(Q,"class","flex justify-start items-left"),attr(Y,"class","w-full my-1 bg-gray-200 rounded-sm h-4 dark:bg-gray-700"),attr(R,"class","col-span-9"),attr(X,"class","text-lime-300 text-med pl-2 pr-2"),attr(ce,"class","text-lime-300 text-med pl-0 pr-2"),attr(H,"class","tooltip-text text-med"),attr(z,"class","col-span-3 text-left align-text-middle has-tooltip"),attr(T,"class","col-span-12 pb-3 game-text text-center"),attr(_,"class","grid grid-cols-12"),attr(pe,"class","text-lime-500"),attr(de,"class","pb-16 pt-8 tooltip-text text-center w-full italic"),attr(d,"class","wrapper pt-2")},m(Se,Le){insert_hydration(Se,d,Le),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(m,g),append_hydration(g,v),append_hydration(m,b),append_hydration(m,k),append_hydration(k,w),append_hydration(k,I),append_hydration(m,M),append_hydration(_,E),append_hydration(_,S),append_hydration(S,N),append_hydration(S,D),append_hydration(D,O),append_hydration(S,q),append_hydration(S,P),append_hydration(P,C),append_hydration(P,L),append_hydration(S,G),append_hydration(_,V),append_hydration(_,T),append_hydration(T,R),append_hydration(R,Y),append_hydration(Y,Q),append_hydration(Q,te),append_hydration(T,W),append_hydration(T,z),append_hydration(z,H),append_hydration(H,F),append_hydration(H,X),append_hydration(X,re),append_hydration(X,j),append_hydration(X,ne),append_hydration(H,me),append_hydration(H,ce),append_hydration(ce,oe),append_hydration(ce,Z),append_hydration(ce,B),append_hydration(H,K),Ae&&Ae.m(H,null),append_hydration(_,J);for(let De=0;De<xe.length;De+=1)xe[De]&&xe[De].m(_,null);append_hydration(d,se),append_hydration(d,de),append_hydration(de,_e),append_hydration(de,pe),append_hydration(pe,ie),append_hydration(de,ge),append_hydration(de,ye),append_hydration(de,ve),Ee&&Ee.m(de,null),append_hydration(de,he),append_hydration(de,we),Me=!0},p(Se,[Le]){if((!Me||Le&2)&&x!==(x=Se[9](Se[1],2)+"")&&set_data(w,x),(!Me||Le&4)&&A!==(A=Se[9](Se[2],Se[2]>100?0:2)+"")&&set_data(C,A),(!Me||Le&8)&&set_style(te,"width",Se[3]),(!Me||Le&1)&&ae!==(ae=Se[9](Se[0][0])+"")&&set_data(re,ae),(!Me||Le&1)&&$!==($=Se[9](Se[0][1])+"")&&set_data(ne,$),Se[4].length>0?Ae?Ae.p(Se,Le):(Ae=create_if_block_1$3(Se),Ae.c(),Ae.m(H,null)):Ae&&(Ae.d(1),Ae=null),Le&32){Ne=Se[5];let De;for(De=0;De<Ne.length;De+=1){const Oe=get_each_context$5(Se,Ne,De);xe[De]?(xe[De].p(Oe,Le),transition_in(xe[De],1)):(xe[De]=create_each_block$5(Oe),xe[De].c(),transition_in(xe[De],1),xe[De].m(_,null))}for(group_outros(),De=Ne.length;De<xe.length;De+=1)Ue(De);check_outros()}(!Me||Le&96)&&ue!==(ue=Se[10](Se[5][0].formula(Se[6][0]))+"")&&set_data(ie,ue),Se[7].totalFame>1e13||Se[8].ascensionCount>0?Ee?Ee.p(Se,Le):(Ee=create_if_block$6(Se),Ee.c(),Ee.m(de,he)):Ee&&(Ee.d(1),Ee=null)},i(Se){if(!Me){for(let Le=0;Le<Ne.length;Le+=1)transition_in(xe[Le]);Me=!0}},o(Se){xe=xe.filter(Boolean);for(let Le=0;Le<xe.length;Le+=1)transition_out(xe[Le]);Me=!1},d(Se){Se&&detach(d),Ae&&Ae.d(),destroy_each(xe,Se),Ee&&Ee.d()}}}function instance$7(l,d,_){let m,y,g,v,b,k,x,w;component_subscribe(l,radiumProgress,N=>_(0,g=N)),component_subscribe(l,radiumGainText,N=>_(4,v=N)),component_subscribe(l,buttonUpgrades,N=>_(5,b=N)),component_subscribe(l,buttonUpgradeLevels,N=>_(6,k=N)),component_subscribe(l,wallet,N=>_(7,x=N)),component_subscribe(l,stats,N=>_(8,w=N));let I,M=formula.calcRadioactivityGain();onMount(()=>{I=setInterval(()=>{_(2,y=formula.calcCrystalGainFromRadium()),_(1,M=formula.calcRadioactivityGain())},653)}),onDestroy(()=>{clearInterval(I)});const E=(N,D=0)=>N<1e9?N.toFixed(N<1e3?D:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):N.toExponential(3).toString().replace("+",""),S=(N,D=3,O=!1)=>(O&&(N-=1),N<1e9?(N*100).toFixed(N<1e3?D:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(N*100).toExponential(D).toString().replace("+","")+"%");return l.$$.update=()=>{l.$$.dirty&1&&_(3,m=`${Math.min(1,g[0]/g[1])*100}%`)},_(2,y=formula.calcCrystalGainFromRadium()),[g,M,y,m,v,b,k,x,w,E,S]}class Button extends SvelteComponent{constructor(d){super(),init(this,d,instance$7,create_fragment$7,safe_not_equal,{})}}function create_fragment$6(l){let d,_,m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae,re,j,$,ne,me,ce,oe,U,Z,B,K,J,se,de,_e,pe,ue,ie,ge,ye,ve,he,we,Me;return{c(){d=element("div"),_=element("div"),m=text("Discord Server"),y=space(),g=element("div"),v=element("a"),b=text("Join our Discord for updates, discussion, and more!"),k=space(),x=element("div"),w=text("Mining"),I=space(),M=element("div"),E=text("Each time the red progress bar fills up, gain gems and have a chance for additional drops. "),S=element("br"),N=text(" Use your currencies on upgrades to your mining rig."),D=space(),O=element("div"),q=text("Keys"),P=space(),A=element("div"),C=text(`Use your found keys here! You unlock more information on drops after receiving at least one of the respective item from the respective key.
        `),L=element("br"),G=text(" Slurry (unlocked later) - Break down your keys into slurry. With the help of mysterious sigils, you can craft some of the most powerful items in the game (assuming you have already obtained at least one of that item)."),V=space(),T=element("div"),R=text("Beacons"),Y=space(),Q=element("div"),te=text(`Allocate beacons into paths, leveling them up over time and gaining bonuses. Each color tier requires drastically more power than the previous one, so you'll need to work up to the later paths. 
    `),W=element("br"),z=text("You gain beacon power based on your beacon levels. Beacon power can augment your beacon paths."),H=space(),F=element("div"),X=text("Enchants"),ae=space(),re=element("div"),j=text("Every time a mining cycle completes, you gain 1 progress point towards an enchant cycle. When the enchant bar of each respective color fills, there's a chance for all enchants of the same color as the bar to fire (chance shown on tooltips), giving a very powerful bonus. Upgrade your enchants to increase the proc chance."),$=space(),ne=element("div"),me=text("Relocate"),ce=space(),oe=element("div"),U=text(`Reset to gain fame. Fame can be spent on powerful mining upgrades and enchants. It's recommended for your first relocation to gain at least 25 fame, which should take about 1-2 hours. 
    `),Z=element("br"),B=text("HINT: Are you stuck? Each fame multiplier is color-coded based on the resource it deals with. If you are struggling to increase fame gains, you may be able to increase a specific multiplier by checking the tab where that resource is generated/used."),K=space(),J=element("div"),se=text("Button"),de=space(),_e=element("div"),pe=text("Click the button to gain crystals, which are used in a variety of upgrades. The center of the button gives better rewards, but you'll have to be precise."),ue=space(),ie=element("div"),ge=text("Notes"),ye=space(),ve=element("div"),he=text(`This game is balanced around playing manually without the use of any tools. Most things are automatic by default, and the mechanics that require active play do it for a reason, and/or can be automated in a reasonable time.
        `),we=element("br"),Me=text(" You are free to play however you want, but using autoclickers/scripts will likely ruin some of the experience of the game."),this.h()},l(Ae){d=claim_element(Ae,"DIV",{class:!0});var Ne=children(d);_=claim_element(Ne,"DIV",{class:!0});var xe=children(_);m=claim_text(xe,"Discord Server"),xe.forEach(detach),y=claim_space(Ne),g=claim_element(Ne,"DIV",{class:!0});var Ue=children(g);v=claim_element(Ue,"A",{href:!0,class:!0,target:!0});var Ee=children(v);b=claim_text(Ee,"Join our Discord for updates, discussion, and more!"),Ee.forEach(detach),Ue.forEach(detach),k=claim_space(Ne),x=claim_element(Ne,"DIV",{class:!0});var Se=children(x);w=claim_text(Se,"Mining"),Se.forEach(detach),I=claim_space(Ne),M=claim_element(Ne,"DIV",{class:!0});var Le=children(M);E=claim_text(Le,"Each time the red progress bar fills up, gain gems and have a chance for additional drops. "),S=claim_element(Le,"BR",{}),N=claim_text(Le," Use your currencies on upgrades to your mining rig."),Le.forEach(detach),D=claim_space(Ne),O=claim_element(Ne,"DIV",{class:!0});var De=children(O);q=claim_text(De,"Keys"),De.forEach(detach),P=claim_space(Ne),A=claim_element(Ne,"DIV",{class:!0});var Oe=children(A);C=claim_text(Oe,`Use your found keys here! You unlock more information on drops after receiving at least one of the respective item from the respective key.
        `),L=claim_element(Oe,"BR",{}),G=claim_text(Oe," Slurry (unlocked later) - Break down your keys into slurry. With the help of mysterious sigils, you can craft some of the most powerful items in the game (assuming you have already obtained at least one of that item)."),Oe.forEach(detach),V=claim_space(Ne),T=claim_element(Ne,"DIV",{class:!0});var Ce=children(T);R=claim_text(Ce,"Beacons"),Ce.forEach(detach),Y=claim_space(Ne),Q=claim_element(Ne,"DIV",{class:!0});var Ke=children(Q);te=claim_text(Ke,`Allocate beacons into paths, leveling them up over time and gaining bonuses. Each color tier requires drastically more power than the previous one, so you'll need to work up to the later paths. 
    `),W=claim_element(Ke,"BR",{}),z=claim_text(Ke,"You gain beacon power based on your beacon levels. Beacon power can augment your beacon paths."),Ke.forEach(detach),H=claim_space(Ne),F=claim_element(Ne,"DIV",{class:!0});var je=children(F);X=claim_text(je,"Enchants"),je.forEach(detach),ae=claim_space(Ne),re=claim_element(Ne,"DIV",{class:!0});var ze=children(re);j=claim_text(ze,"Every time a mining cycle completes, you gain 1 progress point towards an enchant cycle. When the enchant bar of each respective color fills, there's a chance for all enchants of the same color as the bar to fire (chance shown on tooltips), giving a very powerful bonus. Upgrade your enchants to increase the proc chance."),ze.forEach(detach),$=claim_space(Ne),ne=claim_element(Ne,"DIV",{class:!0});var Fe=children(ne);me=claim_text(Fe,"Relocate"),Fe.forEach(detach),ce=claim_space(Ne),oe=claim_element(Ne,"DIV",{class:!0});var Xe=children(oe);U=claim_text(Xe,`Reset to gain fame. Fame can be spent on powerful mining upgrades and enchants. It's recommended for your first relocation to gain at least 25 fame, which should take about 1-2 hours. 
    `),Z=claim_element(Xe,"BR",{}),B=claim_text(Xe,"HINT: Are you stuck? Each fame multiplier is color-coded based on the resource it deals with. If you are struggling to increase fame gains, you may be able to increase a specific multiplier by checking the tab where that resource is generated/used."),Xe.forEach(detach),K=claim_space(Ne),J=claim_element(Ne,"DIV",{class:!0});var Qe=children(J);se=claim_text(Qe,"Button"),Qe.forEach(detach),de=claim_space(Ne),_e=claim_element(Ne,"DIV",{class:!0});var qe=children(_e);pe=claim_text(qe,"Click the button to gain crystals, which are used in a variety of upgrades. The center of the button gives better rewards, but you'll have to be precise."),qe.forEach(detach),ue=claim_space(Ne),ie=claim_element(Ne,"DIV",{class:!0});var rt=children(ie);ge=claim_text(rt,"Notes"),rt.forEach(detach),ye=claim_space(Ne),ve=claim_element(Ne,"DIV",{class:!0});var He=children(ve);he=claim_text(He,`This game is balanced around playing manually without the use of any tools. Most things are automatic by default, and the mechanics that require active play do it for a reason, and/or can be automated in a reasonable time.
        `),we=claim_element(He,"BR",{}),Me=claim_text(He," You are free to play however you want, but using autoclickers/scripts will likely ruin some of the experience of the game."),He.forEach(detach),Ne.forEach(detach),this.h()},h(){attr(_,"class","text-large text-left pb-2 text-gray-300"),attr(v,"href","https://discord.gg/BNp27Vvcqm"),attr(v,"class","border-2 border-violet-300 bg-violet-600 hover:bg-violet-400 p-1"),attr(v,"target","_blank"),attr(g,"class","text-small text-white pb-4"),attr(x,"class","text-large text-left pb-2 text-gray-300"),attr(M,"class","text-small text-white pb-4"),attr(O,"class","text-large text-left pb-2 text-gray-300"),attr(A,"class","text-small text-white pb-4"),attr(T,"class","text-large text-left pb-2 text-gray-300"),attr(Q,"class","text-small text-white pb-4"),attr(F,"class","text-large text-left pb-2 text-gray-300"),attr(re,"class","text-small text-white pb-4"),attr(ne,"class","text-large text-left pb-2 text-gray-300"),attr(oe,"class","text-small text-white pb-4"),attr(J,"class","text-large text-left pb-2 text-gray-300"),attr(_e,"class","text-small text-white pb-4"),attr(ie,"class","text-large text-left pb-2 text-gray-300"),attr(ve,"class","text-small text-white pb-4"),attr(d,"class","wrapper pt-3")},m(Ae,Ne){insert_hydration(Ae,d,Ne),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,v),append_hydration(v,b),append_hydration(d,k),append_hydration(d,x),append_hydration(x,w),append_hydration(d,I),append_hydration(d,M),append_hydration(M,E),append_hydration(M,S),append_hydration(M,N),append_hydration(d,D),append_hydration(d,O),append_hydration(O,q),append_hydration(d,P),append_hydration(d,A),append_hydration(A,C),append_hydration(A,L),append_hydration(A,G),append_hydration(d,V),append_hydration(d,T),append_hydration(T,R),append_hydration(d,Y),append_hydration(d,Q),append_hydration(Q,te),append_hydration(Q,W),append_hydration(Q,z),append_hydration(d,H),append_hydration(d,F),append_hydration(F,X),append_hydration(d,ae),append_hydration(d,re),append_hydration(re,j),append_hydration(d,$),append_hydration(d,ne),append_hydration(ne,me),append_hydration(d,ce),append_hydration(d,oe),append_hydration(oe,U),append_hydration(oe,Z),append_hydration(oe,B),append_hydration(d,K),append_hydration(d,J),append_hydration(J,se),append_hydration(d,de),append_hydration(d,_e),append_hydration(_e,pe),append_hydration(d,ue),append_hydration(d,ie),append_hydration(ie,ge),append_hydration(d,ye),append_hydration(d,ve),append_hydration(ve,he),append_hydration(ve,we),append_hydration(ve,Me)},p:noop,i:noop,o:noop,d(Ae){Ae&&detach(d)}}}class Help extends SvelteComponent{constructor(d){super(),init(this,d,null,create_fragment$6,safe_not_equal,{})}}function get_each_context$4(l,d,_){const m=l.slice();return m[19]=d[_],m}function create_if_block$5(l){let d,_,m=l[19].name+"",y,g,v,b,k;function x(){return l[15](l[19])}return{c(){d=element("div"),_=element("div"),y=text(m),v=space(),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);_=claim_element(I,"DIV",{class:!0});var M=children(_);y=claim_text(M,m),M.forEach(detach),v=claim_space(I),I.forEach(detach),this.h()},h(){attr(_,"class",g="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1][l[19].name.toLowerCase()]?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(d,"class","col-span-3 grid-cols-3 pt-1")},m(w,I){insert_hydration(w,d,I),append_hydration(d,_),append_hydration(_,y),append_hydration(d,v),b||(k=listen(_,"click",x),b=!0)},p(w,I){l=w,I&8&&m!==(m=l[19].name+"")&&set_data(y,m),I&10&&g!==(g="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1][l[19].name.toLowerCase()]?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(_,"class",g)},d(w){w&&detach(d),b=!1,k()}}}function create_each_block$4(l){let d,_=!(l[19].name=="Mine Size"||l[19].name=="Mine Quality")&&create_if_block$5(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[19].name=="Mine Size"||m[19].name=="Mine Quality"?_&&(_.d(1),_=null):_?_.p(m,y):(_=create_if_block$5(m),_.c(),_.m(d.parentNode,d))},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$5(l){let d,_,m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae,re,j,$,ne,me,ce,oe,U,Z,B,K,J,se,de,_e,pe,ue,ie,ge,ye,ve,he,we,Me,Ae,Ne,xe,Ue,Ee,Se,Le,De,Oe,Ce,Ke,je,ze,Fe,Xe,Qe,qe,rt,He,ot,et,tt,Ze,$e,ut,at,bt,kt,wt,At,yt,ee,Ve=l[3],Ie=[];for(let fe=0;fe<Ve.length;fe+=1)Ie[fe]=create_each_block$4(get_each_context$4(l,Ve,fe));return{c(){d=element("div"),_=element("div"),m=element("div"),y=text("Anti-Flickering - Bar will appear as solid when enabled"),g=space(),v=element("div"),b=element("div"),k=element("div"),x=text("Mining (gems)"),I=space(),M=element("div"),E=text("Mining (key finder)"),N=space(),D=element("div"),O=text("Crafting"),P=space(),A=element("div"),C=text("Beacons"),G=space(),V=element("div"),T=element("div"),R=text("Enchants"),Q=space(),te=element("div"),W=space(),z=element("div"),H=element("div"),F=text("Enable/disable activity log entries"),X=space(),ae=element("div"),re=element("div"),j=element("div"),$=text("Crafting"),me=space(),ce=element("div"),oe=element("div"),U=text("Layers"),B=space(),K=element("div"),J=space();for(let fe=0;fe<Ie.length;fe+=1)Ie[fe].c();se=space(),de=element("div"),_e=space(),pe=element("div"),ue=element("div"),ie=text("Progression"),ge=space(),ye=element("div"),ve=element("div"),he=element("div"),we=text("Offline Progress"),Ae=space(),Ne=element("div"),xe=space(),Ue=element("div"),Ee=element("div"),Se=text("Other"),Le=space(),De=element("div"),Oe=element("div"),Ce=element("div"),Ke=text(`Cost Multipliers
                        `),je=element("span"),ze=text("When enabled, cost multipliers will appear on all upgrade tooltips."),Xe=space(),Qe=element("div"),qe=element("div"),rt=text(`Tutorial Mode
                        `),He=element("span"),ot=text("When enabled, hovering over resource displays will show the sources of that resource. NOTE: This may spoil some future content."),tt=space(),Ze=element("div"),$e=text("About"),ut=space(),at=element("div"),bt=text("version 0.0.4 (alpha)"),kt=space(),wt=element("div"),At=text("created by bejewelled, all rights reserved"),this.h()},l(fe){d=claim_element(fe,"DIV",{class:!0});var be=children(d);_=claim_element(be,"DIV",{class:!0});var Te=children(_);m=claim_element(Te,"DIV",{class:!0});var Je=children(m);y=claim_text(Je,"Anti-Flickering - Bar will appear as solid when enabled"),Je.forEach(detach),g=claim_space(Te),v=claim_element(Te,"DIV",{class:!0});var We=children(v);b=claim_element(We,"DIV",{class:!0});var Ge=children(b);k=claim_element(Ge,"DIV",{class:!0});var ct=children(k);x=claim_text(ct,"Mining (gems)"),ct.forEach(detach),I=claim_space(Ge),M=claim_element(Ge,"DIV",{class:!0});var st=children(M);E=claim_text(st,"Mining (key finder)"),st.forEach(detach),N=claim_space(Ge),D=claim_element(Ge,"DIV",{class:!0});var Tt=children(D);O=claim_text(Tt,"Crafting"),Tt.forEach(detach),P=claim_space(Ge),A=claim_element(Ge,"DIV",{class:!0});var le=children(A);C=claim_text(le,"Beacons"),le.forEach(detach),Ge.forEach(detach),G=claim_space(We),V=claim_element(We,"DIV",{class:!0});var Be=children(V);T=claim_element(Be,"DIV",{class:!0});var Pe=children(T);R=claim_text(Pe,"Enchants"),Pe.forEach(detach),Be.forEach(detach),We.forEach(detach),Te.forEach(detach),Q=claim_space(be),te=claim_element(be,"DIV",{class:!0}),children(te).forEach(detach),W=claim_space(be),z=claim_element(be,"DIV",{class:!0});var xt=children(z);H=claim_element(xt,"DIV",{class:!0});var St=children(H);F=claim_text(St,"Enable/disable activity log entries"),St.forEach(detach),X=claim_space(xt),ae=claim_element(xt,"DIV",{class:!0});var ht=children(ae);re=claim_element(ht,"DIV",{class:!0});var jt=children(re);j=claim_element(jt,"DIV",{class:!0});var Qt=children(j);$=claim_text(Qt,"Crafting"),Qt.forEach(detach),jt.forEach(detach),me=claim_space(ht),ce=claim_element(ht,"DIV",{class:!0});var Bt=children(ce);oe=claim_element(Bt,"DIV",{class:!0});var Nt=children(oe);U=claim_text(Nt,"Layers"),Nt.forEach(detach),Bt.forEach(detach),B=claim_space(ht),K=claim_element(ht,"DIV",{class:!0}),children(K).forEach(detach),J=claim_space(ht);for(let Wt=0;Wt<Ie.length;Wt+=1)Ie[Wt].l(ht);ht.forEach(detach),xt.forEach(detach),be.forEach(detach),se=claim_space(fe),de=claim_element(fe,"DIV",{class:!0}),children(de).forEach(detach),_e=claim_space(fe),pe=claim_element(fe,"DIV",{class:!0});var It=children(pe);ue=claim_element(It,"DIV",{class:!0});var Zt=children(ue);ie=claim_text(Zt,"Progression"),Zt.forEach(detach),ge=claim_space(It),ye=claim_element(It,"DIV",{class:!0});var Ot=children(ye);ve=claim_element(Ot,"DIV",{class:!0});var Gt=children(ve);he=claim_element(Gt,"DIV",{class:!0});var $t=children(he);we=claim_text($t,"Offline Progress"),$t.forEach(detach),Gt.forEach(detach),Ot.forEach(detach),It.forEach(detach),Ae=claim_space(fe),Ne=claim_element(fe,"DIV",{class:!0}),children(Ne).forEach(detach),xe=claim_space(fe),Ue=claim_element(fe,"DIV",{class:!0});var Pt=children(Ue);Ee=claim_element(Pt,"DIV",{class:!0});var Jt=children(Ee);Se=claim_text(Jt,"Other"),Jt.forEach(detach),Le=claim_space(Pt),De=claim_element(Pt,"DIV",{class:!0});var Ft=children(De);Oe=claim_element(Ft,"DIV",{class:!0});var ea=children(Oe);Ce=claim_element(ea,"DIV",{class:!0});var Dt=children(Ce);Ke=claim_text(Dt,`Cost Multipliers
                        `),je=claim_element(Dt,"SPAN",{class:!0});var ta=children(je);ze=claim_text(ta,"When enabled, cost multipliers will appear on all upgrade tooltips."),ta.forEach(detach),Dt.forEach(detach),ea.forEach(detach),Xe=claim_space(Ft),Qe=claim_element(Ft,"DIV",{class:!0});var qt=children(Qe);qe=claim_element(qt,"DIV",{class:!0});var Ct=children(qe);rt=claim_text(Ct,`Tutorial Mode
                        `),He=claim_element(Ct,"SPAN",{class:!0});var Kt=children(He);ot=claim_text(Kt,"When enabled, hovering over resource displays will show the sources of that resource. NOTE: This may spoil some future content."),Kt.forEach(detach),Ct.forEach(detach),qt.forEach(detach),Ft.forEach(detach),Pt.forEach(detach),tt=claim_space(fe),Ze=claim_element(fe,"DIV",{class:!0});var aa=children(Ze);$e=claim_text(aa,"About"),aa.forEach(detach),ut=claim_space(fe),at=claim_element(fe,"DIV",{class:!0});var la=children(at);bt=claim_text(la,"version 0.0.4 (alpha)"),la.forEach(detach),kt=claim_space(fe),wt=claim_element(fe,"DIV",{class:!0});var Ut=children(wt);At=claim_text(Ut,"created by bejewelled, all rights reserved"),Ut.forEach(detach),this.h()},h(){attr(m,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(k,"class",w="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].gems?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(M,"class",S="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].keyfinder?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(D,"class",q="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(A,"class",L="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].beacons?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(b,"class","wrapper col-span-1 grid grid-cols-8"),attr(T,"class",Y="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].enchants?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(V,"class","wrapper col-span-1 py-1 grid grid-cols-8"),attr(v,"class","wrapper grid grid-cols-1 py-1"),attr(_,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(te,"class","pb-1"),attr(H,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(j,"class",ne="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(re,"class","col-span-3 grid-cols-3 pt-1"),attr(oe,"class",Z="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1].layer?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(ce,"class","col-span-3 grid-cols-3 pt-1"),attr(K,"class","col-span-12 py-1"),attr(ae,"class","grid grid-cols-12 py-1"),attr(z,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(d,"class","wrapper pt-3"),attr(de,"class","pb-1"),attr(ue,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(he,"class",Me="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[0].offlineProgress?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(ve,"class","col-span-3 grid-cols-3 pt-1"),attr(ye,"class","grid grid-cols-12 py-1"),attr(pe,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(Ne,"class","pb-1"),attr(Ee,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(je,"class","tooltip tooltip-style"),attr(Ce,"class",Fe="setting has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(l[0].costRatios?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(Oe,"class","col-span-3 grid-cols-3 pt-1"),attr(He,"class","tooltip tooltip-style"),attr(qe,"class",et="setting select-none has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(l[0].tutorialMode?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(Qe,"class","col-span-3 grid-cols-3 pt-1"),attr(De,"class","grid grid-cols-12 py-1"),attr(Ue,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(Ze,"class","text-large text-gray-300 text-left pb-2"),attr(at,"class","text-small tooltip-text"),attr(wt,"class","text-small tooltip-text")},m(fe,be){insert_hydration(fe,d,be),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(_,g),append_hydration(_,v),append_hydration(v,b),append_hydration(b,k),append_hydration(k,x),append_hydration(b,I),append_hydration(b,M),append_hydration(M,E),append_hydration(b,N),append_hydration(b,D),append_hydration(D,O),append_hydration(b,P),append_hydration(b,A),append_hydration(A,C),append_hydration(v,G),append_hydration(v,V),append_hydration(V,T),append_hydration(T,R),append_hydration(d,Q),append_hydration(d,te),append_hydration(d,W),append_hydration(d,z),append_hydration(z,H),append_hydration(H,F),append_hydration(z,X),append_hydration(z,ae),append_hydration(ae,re),append_hydration(re,j),append_hydration(j,$),append_hydration(ae,me),append_hydration(ae,ce),append_hydration(ce,oe),append_hydration(oe,U),append_hydration(ae,B),append_hydration(ae,K),append_hydration(ae,J);for(let Te=0;Te<Ie.length;Te+=1)Ie[Te]&&Ie[Te].m(ae,null);insert_hydration(fe,se,be),insert_hydration(fe,de,be),insert_hydration(fe,_e,be),insert_hydration(fe,pe,be),append_hydration(pe,ue),append_hydration(ue,ie),append_hydration(pe,ge),append_hydration(pe,ye),append_hydration(ye,ve),append_hydration(ve,he),append_hydration(he,we),insert_hydration(fe,Ae,be),insert_hydration(fe,Ne,be),insert_hydration(fe,xe,be),insert_hydration(fe,Ue,be),append_hydration(Ue,Ee),append_hydration(Ee,Se),append_hydration(Ue,Le),append_hydration(Ue,De),append_hydration(De,Oe),append_hydration(Oe,Ce),append_hydration(Ce,Ke),append_hydration(Ce,je),append_hydration(je,ze),append_hydration(De,Xe),append_hydration(De,Qe),append_hydration(Qe,qe),append_hydration(qe,rt),append_hydration(qe,He),append_hydration(He,ot),insert_hydration(fe,tt,be),insert_hydration(fe,Ze,be),append_hydration(Ze,$e),insert_hydration(fe,ut,be),insert_hydration(fe,at,be),append_hydration(at,bt),insert_hydration(fe,kt,be),insert_hydration(fe,wt,be),append_hydration(wt,At),yt||(ee=[listen(k,"click",l[8]),listen(M,"click",l[9]),listen(D,"click",l[10]),listen(A,"click",l[11]),listen(T,"click",l[12]),listen(j,"click",l[13]),listen(oe,"click",l[14]),listen(he,"click",l[16]),listen(Ce,"click",l[17]),listen(qe,"click",l[18])],yt=!0)},p(fe,[be]){if(be&4&&w!==(w="setting col-span-2 mx-1 px-1 py-1 text-center "+(fe[2].gems?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(k,"class",w),be&4&&S!==(S="setting col-span-2 mx-1 px-1 py-1 text-center "+(fe[2].keyfinder?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(M,"class",S),be&4&&q!==(q="setting col-span-2 mx-1 px-1 py-1 text-center "+(fe[2].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(D,"class",q),be&4&&L!==(L="setting col-span-2 mx-1 px-1 py-1 text-center "+(fe[2].beacons?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(A,"class",L),be&4&&Y!==(Y="setting col-span-2 mx-1 px-1 py-1 text-center "+(fe[2].enchants?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(T,"class",Y),be&2&&ne!==(ne="setting col-span-3 mx-1 px-1 py-1 text-center "+(fe[1].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(j,"class",ne),be&2&&Z!==(Z="setting col-span-3 mx-1 px-1 py-1 text-center "+(fe[1].layer?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(oe,"class",Z),be&42){Ve=fe[3];let Te;for(Te=0;Te<Ve.length;Te+=1){const Je=get_each_context$4(fe,Ve,Te);Ie[Te]?Ie[Te].p(Je,be):(Ie[Te]=create_each_block$4(Je),Ie[Te].c(),Ie[Te].m(ae,null))}for(;Te<Ie.length;Te+=1)Ie[Te].d(1);Ie.length=Ve.length}be&1&&Me!==(Me="setting col-span-3 mx-1 px-1 py-1 text-center "+(fe[0].offlineProgress?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(he,"class",Me),be&1&&Fe!==(Fe="setting has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(fe[0].costRatios?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(Ce,"class",Fe),be&1&&et!==(et="setting select-none has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(fe[0].tutorialMode?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(qe,"class",et)},i:noop,o:noop,d(fe){fe&&detach(d),destroy_each(Ie,fe),fe&&detach(se),fe&&detach(de),fe&&detach(_e),fe&&detach(pe),fe&&detach(Ae),fe&&detach(Ne),fe&&detach(xe),fe&&detach(Ue),fe&&detach(tt),fe&&detach(Ze),fe&&detach(ut),fe&&detach(at),fe&&detach(kt),fe&&detach(wt),yt=!1,run_all(ee)}}}function instance$6(l,d,_){let m,y,g,v;component_subscribe(l,settings,L=>_(0,m=L)),component_subscribe(l,activityLogShow,L=>_(1,y=L)),component_subscribe(l,antiFlickerFlags,L=>_(2,g=L)),component_subscribe(l,enchantUpgrades,L=>_(3,v=L));function b(L){set_store_value(antiFlickerFlags,g[L]=!g[L],g)}function k(L){set_store_value(activityLogShow,y[L]=!y[L],y)}function x(){set_store_value(settings,m.offlineProgress=!m.offlineProgress,m)}function w(L,G=null){m[L]?G==null?set_store_value(settings,m[L]=!m[L],m):set_store_value(settings,m[L]=G,m):set_store_value(settings,m[L]=G||!0,m)}return[m,y,g,v,b,k,x,w,()=>b("gems"),()=>b("keyfinder"),()=>b("crafting"),()=>b("beacons"),()=>b("enchants"),()=>k("crafting"),()=>k("layer"),L=>k(L.name.toLowerCase()),()=>x(),()=>w("costRatios"),()=>w("tutorialMode")]}class Settings extends SvelteComponent{constructor(d){super(),init(this,d,instance$6,create_fragment$5,safe_not_equal,{})}}const Mastery_svelte_svelte_type_style_lang="";function get_each_context$3(l,d,_){const m=l.slice();return m[13]=d[_],m}function create_if_block$4(l){let d,_,m=l[13][0]+"",y,g,v=l[8](l[1][l[13][0]])+"",b,k,x,w,I,M,E,S=l[8](l[13][1])+"",N,D,O,q,P,A,C=l[8](formula.calcMasteryGainMulti(l[4][l[13][0]]),2)+"",L,G,V,T,R,Y,Q,te,W,z,H,F,X=l[8](l[3][l[13][0]])+"",ae,re;return{c(){d=element("div"),_=element("span"),y=text(m),g=text(" ("),b=text(v),k=text(")"),w=space(),I=element("div"),M=element("span"),E=text("🌟"),N=text(S),O=space(),q=element("div"),P=element("span"),A=text("[ x"),L=text(C),G=text(" progress]"),V=space(),T=element("div"),R=element("div"),Y=element("div"),Q=element("div"),W=space(),z=element("div"),H=element("span"),F=text("target: "),ae=text(X),re=space(),this.h()},l(j){d=claim_element(j,"DIV",{class:!0});var $=children(d);_=claim_element($,"SPAN",{class:!0});var ne=children(_);y=claim_text(ne,m),g=claim_text(ne," ("),b=claim_text(ne,v),k=claim_text(ne,")"),ne.forEach(detach),$.forEach(detach),w=claim_space(j),I=claim_element(j,"DIV",{class:!0});var me=children(I);M=claim_element(me,"SPAN",{class:!0});var ce=children(M);E=claim_text(ce,"🌟"),N=claim_text(ce,S),ce.forEach(detach),me.forEach(detach),O=claim_space(j),q=claim_element(j,"DIV",{class:!0});var oe=children(q);P=claim_element(oe,"SPAN",{class:!0});var U=children(P);A=claim_text(U,"[ x"),L=claim_text(U,C),G=claim_text(U," progress]"),U.forEach(detach),oe.forEach(detach),V=claim_space(j),T=claim_element(j,"DIV",{class:!0});var Z=children(T);R=claim_element(Z,"DIV",{class:!0});var B=children(R);Y=claim_element(B,"DIV",{class:!0});var K=children(Y);Q=claim_element(K,"DIV",{class:!0,style:!0});var J=children(Q);J.forEach(detach),K.forEach(detach),B.forEach(detach),Z.forEach(detach),W=claim_space(j),z=claim_element(j,"DIV",{class:!0});var se=children(z);H=claim_element(se,"SPAN",{class:!0});var de=children(H);F=claim_text(de,"target: "),ae=claim_text(de,X),de.forEach(detach),re=claim_space(se),se.forEach(detach),this.h()},h(){attr(_,"class",x=null_to_empty(ref.colors[l[13][0]])+" svelte-1pcviw8"),attr(d,"class","col-span-2"),attr(M,"class",D=null_to_empty(ref.colors[l[13][0]])+" svelte-1pcviw8"),attr(I,"class","col-span-1"),attr(P,"class","text-orange-400"),attr(q,"class","col-span-2 text-left pr-2 text-med"),attr(Q,"class",te="bg-"+ref.colors[l[13][0]].substring(5)+" h-2.5 rounded-full has-tooltip svelte-1pcviw8"),set_style(Q,"width",l[6]()[l[13][0]]||"0%"),attr(Y,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 has-tooltip"),attr(R,"class","bar-wrapper align-middle"),attr(T,"class","col-span-5 grid grid-rows-2 mt-1 mx-5"),attr(H,"class","tooltip-text"),attr(z,"class","col-span-2 pl-3 text-small tooltip-text mt-1 text-left")},m(j,$){insert_hydration(j,d,$),append_hydration(d,_),append_hydration(_,y),append_hydration(_,g),append_hydration(_,b),append_hydration(_,k),insert_hydration(j,w,$),insert_hydration(j,I,$),append_hydration(I,M),append_hydration(M,E),append_hydration(M,N),insert_hydration(j,O,$),insert_hydration(j,q,$),append_hydration(q,P),append_hydration(P,A),append_hydration(P,L),append_hydration(P,G),insert_hydration(j,V,$),insert_hydration(j,T,$),append_hydration(T,R),append_hydration(R,Y),append_hydration(Y,Q),insert_hydration(j,W,$),insert_hydration(j,z,$),append_hydration(z,H),append_hydration(H,F),append_hydration(H,ae),append_hydration(z,re)},p(j,$){$&16&&m!==(m=j[13][0]+"")&&set_data(y,m),$&18&&v!==(v=j[8](j[1][j[13][0]])+"")&&set_data(b,v),$&16&&x!==(x=null_to_empty(ref.colors[j[13][0]])+" svelte-1pcviw8")&&attr(_,"class",x),$&16&&S!==(S=j[8](j[13][1])+"")&&set_data(N,S),$&16&&D!==(D=null_to_empty(ref.colors[j[13][0]])+" svelte-1pcviw8")&&attr(M,"class",D),$&16&&C!==(C=j[8](formula.calcMasteryGainMulti(j[4][j[13][0]]),2)+"")&&set_data(L,C),$&16&&te!==(te="bg-"+ref.colors[j[13][0]].substring(5)+" h-2.5 rounded-full has-tooltip svelte-1pcviw8")&&attr(Q,"class",te),$&80&&set_style(Q,"width",j[6]()[j[13][0]]||"0%"),$&24&&X!==(X=j[8](j[3][j[13][0]])+"")&&set_data(ae,X)},d(j){j&&detach(d),j&&detach(w),j&&detach(I),j&&detach(O),j&&detach(q),j&&detach(V),j&&detach(T),j&&detach(W),j&&detach(z)}}}function create_each_block$3(l){let d,_=l[1][l[13][0]]&&create_if_block$4(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[1][m[13][0]]?_?_.p(m,y):(_=create_if_block$4(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$4(l){let d,_,m,y,g,v,b,k,x,w,I=l[8](l[1].mastery||0)+"",M,E,S=l[8](l[2])+"",N,D,O,q,P,A=l[5]()+"",C,L,G,V,T,R,Y,Q=l[8](l[1].totalTrophies||0)+"",te,W,z,H=l[1].totalTrophies==1?"is":"are",F,X,ae,re=l[8](formula.calcWarpGainFromMastery(),2)+"",j,$,ne,me,ce,oe,U,Z,B,K,J,se,de,_e,pe,ue,ie,ge,ye,ve,he,we,Me,Ae,Ne,xe=Object.entries(l[4]),Ue=[];for(let Ee=0;Ee<xe.length;Ee+=1)Ue[Ee]=create_each_block$3(get_each_context$3(l,xe,Ee));return{c(){d=element("div"),_=element("div"),m=space(),y=element("div"),g=element("div"),v=text("Mastery - Do nothing, get trophies (STILL WIP STAY TUNED)"),b=space(),k=element("div"),x=text(`Progress to Next Trophy - 
        `),w=element("span"),M=text(I),E=text(" / "),N=text(S),D=space(),O=element("span"),q=text("[ "),P=element("span"),C=text(A),L=text(" until next trophy ]"),G=space(),V=element("div"),T=text(`Your total trophies this ascension
        `),R=element("span"),Y=text("("),te=text(Q),W=text(")"),z=space(),F=text(H),X=text(" producing "),ae=element("span"),j=text(re),$=text(" warp per second."),ne=space(),me=element("div"),ce=element("div"),oe=element("div"),U=element("div"),Z=space(),B=element("div"),K=space(),J=element("button"),se=text("Use log scale for progress bars"),_e=space(),pe=element("div"),ue=space();for(let Ee=0;Ee<Ue.length;Ee+=1)Ue[Ee].c();ie=space(),ge=element("div"),ye=text("Mastery levels are never reset. "),ve=element("br"),he=text(`
    Each Mastery Level increases the speed at which you gain trophies. `),we=element("br"),Me=text(`
    For some reason, certain colors refuse to render in the progress bars, ONLY on this particular tab. (???)
    I don't get it. Anyway, some bars will be blank until I figure it out.`),this.h()},l(Ee){d=claim_element(Ee,"DIV",{class:!0});var Se=children(d);_=claim_element(Se,"DIV",{class:!0});var Le=children(_);Le.forEach(detach),m=claim_space(Se),y=claim_element(Se,"DIV",{class:!0});var De=children(y);g=claim_element(De,"DIV",{class:!0});var Oe=children(g);v=claim_text(Oe,"Mastery - Do nothing, get trophies (STILL WIP STAY TUNED)"),Oe.forEach(detach),b=claim_space(De),k=claim_element(De,"DIV",{class:!0});var Ce=children(k);x=claim_text(Ce,`Progress to Next Trophy - 
        `),w=claim_element(Ce,"SPAN",{class:!0});var Ke=children(w);M=claim_text(Ke,I),E=claim_text(Ke," / "),N=claim_text(Ke,S),Ke.forEach(detach),D=claim_space(Ce),O=claim_element(Ce,"SPAN",{class:!0});var je=children(O);q=claim_text(je,"[ "),P=claim_element(je,"SPAN",{class:!0});var ze=children(P);C=claim_text(ze,A),ze.forEach(detach),L=claim_text(je," until next trophy ]"),je.forEach(detach),Ce.forEach(detach),G=claim_space(De),V=claim_element(De,"DIV",{class:!0});var Fe=children(V);T=claim_text(Fe,`Your total trophies this ascension
        `),R=claim_element(Fe,"SPAN",{class:!0});var Xe=children(R);Y=claim_text(Xe,"("),te=claim_text(Xe,Q),W=claim_text(Xe,")"),Xe.forEach(detach),z=claim_space(Fe),F=claim_text(Fe,H),X=claim_text(Fe," producing "),ae=claim_element(Fe,"SPAN",{class:!0});var Qe=children(ae);j=claim_text(Qe,re),$=claim_text(Qe," warp per second."),Qe.forEach(detach),Fe.forEach(detach),ne=claim_space(De),me=claim_element(De,"DIV",{class:!0});var qe=children(me);ce=claim_element(qe,"DIV",{class:!0});var rt=children(ce);oe=claim_element(rt,"DIV",{class:!0});var He=children(oe);U=claim_element(He,"DIV",{class:!0,style:!0});var ot=children(U);ot.forEach(detach),He.forEach(detach),rt.forEach(detach),qe.forEach(detach),Z=claim_space(De),B=claim_element(De,"DIV",{class:!0}),children(B).forEach(detach),K=claim_space(De),J=claim_element(De,"BUTTON",{class:!0});var et=children(J);se=claim_text(et,"Use log scale for progress bars"),et.forEach(detach),_e=claim_space(De),pe=claim_element(De,"DIV",{class:!0}),children(pe).forEach(detach),ue=claim_space(De);for(let Ze=0;Ze<Ue.length;Ze+=1)Ue[Ze].l(De);De.forEach(detach),Se.forEach(detach),ie=claim_space(Ee),ge=claim_element(Ee,"DIV",{class:!0});var tt=children(ge);ye=claim_text(tt,"Mastery levels are never reset. "),ve=claim_element(tt,"BR",{}),he=claim_text(tt,`
    Each Mastery Level increases the speed at which you gain trophies. `),we=claim_element(tt,"BR",{}),Me=claim_text(tt,`
    For some reason, certain colors refuse to render in the progress bars, ONLY on this particular tab. (???)
    I don't get it. Anyway, some bars will be blank until I figure it out.`),tt.forEach(detach),this.h()},h(){attr(_,"class","py-2"),attr(g,"class","col-span-12 text-white"),attr(w,"class","text-orange-400"),attr(P,"class","font-bold text-white"),attr(O,"class","tooltip-text"),attr(k,"class","col-span-12 text-white text-small"),attr(R,"class","text-orange-400"),attr(ae,"class",null_to_empty(ref.colors.warp)+" svelte-1pcviw8"),attr(V,"class","col-span-12 text-white text-small"),attr(U,"class","bg-orange-400 h-2.5 rounded-full has-tooltip"),set_style(U,"width",l[7]),attr(oe,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 has-tooltip"),attr(ce,"class","mine-bar-wrapper align-middle"),attr(me,"class","col-span-12"),attr(B,"class","col-span-12 pb-3"),attr(J,"class",de="col-span-4 text-small "+(l[0].masteryUseLogScale?"game-btn-toggleon":"game-btn")),attr(pe,"class","col-span-12 pb-2"),attr(y,"class","grid grid-cols-12"),attr(d,"class","wrapper py-2"),attr(ge,"class","pb-16 pt-8 tooltip-text text-center w-full italic")},m(Ee,Se){insert_hydration(Ee,d,Se),append_hydration(d,_),append_hydration(d,m),append_hydration(d,y),append_hydration(y,g),append_hydration(g,v),append_hydration(y,b),append_hydration(y,k),append_hydration(k,x),append_hydration(k,w),append_hydration(w,M),append_hydration(w,E),append_hydration(w,N),append_hydration(k,D),append_hydration(k,O),append_hydration(O,q),append_hydration(O,P),append_hydration(P,C),append_hydration(O,L),append_hydration(y,G),append_hydration(y,V),append_hydration(V,T),append_hydration(V,R),append_hydration(R,Y),append_hydration(R,te),append_hydration(R,W),append_hydration(V,z),append_hydration(V,F),append_hydration(V,X),append_hydration(V,ae),append_hydration(ae,j),append_hydration(ae,$),append_hydration(y,ne),append_hydration(y,me),append_hydration(me,ce),append_hydration(ce,oe),append_hydration(oe,U),append_hydration(y,Z),append_hydration(y,B),append_hydration(y,K),append_hydration(y,J),append_hydration(J,se),append_hydration(y,_e),append_hydration(y,pe),append_hydration(y,ue);for(let Le=0;Le<Ue.length;Le+=1)Ue[Le]&&Ue[Le].m(y,null);insert_hydration(Ee,ie,Se),insert_hydration(Ee,ge,Se),append_hydration(ge,ye),append_hydration(ge,ve),append_hydration(ge,he),append_hydration(ge,we),append_hydration(ge,Me),Ae||(Ne=listen(J,"click",l[10]),Ae=!0)},p(Ee,[Se]){if(Se&2&&I!==(I=Ee[8](Ee[1].mastery||0)+"")&&set_data(M,I),Se&4&&S!==(S=Ee[8](Ee[2])+"")&&set_data(N,S),Se&32&&A!==(A=Ee[5]()+"")&&set_data(C,A),Se&2&&Q!==(Q=Ee[8](Ee[1].totalTrophies||0)+"")&&set_data(te,Q),Se&2&&H!==(H=Ee[1].totalTrophies==1?"is":"are")&&set_data(F,H),Se&128&&set_style(U,"width",Ee[7]),Se&1&&de!==(de="col-span-4 text-small "+(Ee[0].masteryUseLogScale?"game-btn-toggleon":"game-btn"))&&attr(J,"class",de),Se&346){xe=Object.entries(Ee[4]);let Le;for(Le=0;Le<xe.length;Le+=1){const De=get_each_context$3(Ee,xe,Le);Ue[Le]?Ue[Le].p(De,Se):(Ue[Le]=create_each_block$3(De),Ue[Le].c(),Ue[Le].m(y,null))}for(;Le<Ue.length;Le+=1)Ue[Le].d(1);Ue.length=xe.length}},i:noop,o:noop,d(Ee){Ee&&detach(d),destroy_each(Ue,Ee),Ee&&detach(ie),Ee&&detach(ge),Ae=!1,Ne()}}}function instance$5(l,d,_){let m,y,g,v,b,k,x,w;component_subscribe(l,settings,S=>_(0,v=S)),component_subscribe(l,wallet,S=>_(1,b=S)),component_subscribe(l,masteryNextReq,S=>_(2,k=S)),component_subscribe(l,masteryItemReqs,S=>_(3,x=S)),component_subscribe(l,masteryItemLevels,S=>_(4,w=S)),onMount(()=>{console.log(k)});const I=(S,N=0)=>S<1e9?S.toFixed(S<1e3?N:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):S.toExponential(3).toString().replace("+","");function M(){set_store_value(settings,v.masteryUseLogScale=!v.masteryUseLogScale,v)}const E=()=>{M()};return l.$$.update=()=>{l.$$.dirty&6&&_(7,m=`${Math.min(1,b.mastery/k)*100}%`),l.$$.dirty&27&&_(6,y=()=>{const S={};for(let N of Object.keys(w))v.masteryUseLogScale?S[N]=100*(Math.log10(b[N])||0)/Math.log10(x[N])+"%":S[N]=100*(b[N]||0)/x[N]+"%";return S}),l.$$.dirty&6&&_(5,g=()=>{const N=(k-(b.mastery||0))/(50*formula.calcMasteryGainPerTick()),D=N/60,O=D/60,q=O/24;let P="";return N==1/0?"inf":(q>1&&(P+=I(Math.floor(q))+"d "),O>1&&(P+=I(Math.floor(O%24))+"h "),D>1&&(P+=I(Math.floor(D%60))+"m "),N>1&&(P+=I(Math.floor(N%60))+"s "),P)})},[v,b,k,x,w,g,y,m,I,M,E]}class Mastery extends SvelteComponent{constructor(d){super(),init(this,d,instance$5,create_fragment$4,safe_not_equal,{})}}function get_each_context$2(l,d,_){const m=l.slice();return m[11]=d[_],m}function create_if_block_1$2(l){let d,_=l[11][1].description+"",m,y,g,v=l[11][1].prefix+"",b,k=l[2](l[11][1].formula(l[0].artifacts),l[11][0]=="startLayer"?0:3)+"",x,w,I,M;return{c(){d=element("div"),m=text(_),y=space(),g=element("div"),b=text(v),x=text(k),I=space(),M=element("div"),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);m=claim_text(S,_),S.forEach(detach),y=claim_space(E),g=claim_element(E,"DIV",{class:!0});var N=children(g);b=claim_text(N,v),x=claim_text(N,k),N.forEach(detach),I=claim_space(E),M=claim_element(E,"DIV",{class:!0}),children(M).forEach(detach),this.h()},h(){attr(d,"class","col-span-4 game-text text-right"),attr(g,"class",w="ml-2 col-span-2 text-left "+ref.colors[l[11][1].colorStyle]),attr(M,"class","col-span-6")},m(E,S){insert_hydration(E,d,S),append_hydration(d,m),insert_hydration(E,y,S),insert_hydration(E,g,S),append_hydration(g,b),append_hydration(g,x),insert_hydration(E,I,S),insert_hydration(E,M,S)},p(E,S){S&2&&_!==(_=E[11][1].description+"")&&set_data(m,_),S&2&&v!==(v=E[11][1].prefix+"")&&set_data(b,v),S&3&&k!==(k=E[2](E[11][1].formula(E[0].artifacts),E[11][0]=="startLayer"?0:3)+"")&&set_data(x,k),S&2&&w!==(w="ml-2 col-span-2 text-left "+ref.colors[E[11][1].colorStyle])&&attr(g,"class",w)},d(E){E&&detach(d),E&&detach(y),E&&detach(g),E&&detach(I),E&&detach(M)}}}function create_each_block$2(l){let d,_=l[0].artifacts>=l[11][1].unlockAt&&l[11][0]!="startLayer"&&create_if_block_1$2(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[0].artifacts>=m[11][1].unlockAt&&m[11][0]!="startLayer"?_?_.p(m,y):(_=create_if_block_1$2(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_if_block$3(l){let d,_,m,y=l[2](l[3]())+"",g,v,b,k;return{c(){d=element("div"),_=text("[ Next bonus at "),m=element("span"),g=text(y),v=text(" artifacts ]"),b=space(),k=element("div"),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var w=children(d);_=claim_text(w,"[ Next bonus at "),m=claim_element(w,"SPAN",{class:!0});var I=children(m);g=claim_text(I,y),I.forEach(detach),v=claim_text(w," artifacts ]"),w.forEach(detach),b=claim_space(x),k=claim_element(x,"DIV",{class:!0}),children(k).forEach(detach),this.h()},h(){attr(m,"class","text-slate-300 font-bold"),attr(d,"class","col-span-4 pb-1 artifact-display text-right game-text"),attr(k,"class","col-span-8")},m(x,w){insert_hydration(x,d,w),append_hydration(d,_),append_hydration(d,m),append_hydration(m,g),append_hydration(d,v),insert_hydration(x,b,w),insert_hydration(x,k,w)},p:noop,d(x){x&&detach(d),x&&detach(b),x&&detach(k)}}}function create_fragment$3(l){let d,_,m,y,g,v=l[2](l[0].artifacts)+"",b,k,x,w,I,M,E=l[3]()>0,S,N,D,O=Object.entries(l[1]),q=[];for(let A=0;A<O.length;A+=1)q[A]=create_each_block$2(get_each_context$2(l,O,A));let P=E&&create_if_block$3(l);return{c(){d=element("div"),_=element("div"),m=element("div"),y=text("You have "),g=element("span"),b=text(v),k=text(" artifacts."),x=space(),w=element("div"),I=space();for(let A=0;A<q.length;A+=1)q[A].c();M=space(),P&&P.c(),S=space(),N=element("div"),D=text("You'll unlock a new feature of artifacts after unlocking post-Ascension content."),this.h()},l(A){d=claim_element(A,"DIV",{class:!0});var C=children(d);_=claim_element(C,"DIV",{class:!0});var L=children(_);m=claim_element(L,"DIV",{class:!0});var G=children(m);y=claim_text(G,"You have "),g=claim_element(G,"SPAN",{class:!0});var V=children(g);b=claim_text(V,v),V.forEach(detach),k=claim_text(G," artifacts."),G.forEach(detach),x=claim_space(L),w=claim_element(L,"DIV",{class:!0}),children(w).forEach(detach),I=claim_space(L);for(let R=0;R<q.length;R+=1)q[R].l(L);M=claim_space(L),P&&P.l(L),L.forEach(detach),C.forEach(detach),S=claim_space(A),N=claim_element(A,"DIV",{class:!0});var T=children(N);D=claim_text(T,"You'll unlock a new feature of artifacts after unlocking post-Ascension content."),T.forEach(detach),this.h()},h(){attr(g,"class","text-slate-200"),attr(m,"class","col-span-12 pb-1 artifact-display text-center game-text"),attr(w,"class","col-span-12 divider py-3"),attr(_,"class","grid grid-cols-12 artifact-page"),attr(d,"class","wrapper py-2"),attr(N,"class","pb-16 pt-8 tooltip-text text-center w-full italic")},m(A,C){insert_hydration(A,d,C),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(m,g),append_hydration(g,b),append_hydration(m,k),append_hydration(_,x),append_hydration(_,w),append_hydration(_,I);for(let L=0;L<q.length;L+=1)q[L]&&q[L].m(_,null);append_hydration(_,M),P&&P.m(_,null),insert_hydration(A,S,C),insert_hydration(A,N,C),append_hydration(N,D)},p(A,[C]){if(C&1&&v!==(v=A[2](A[0].artifacts)+"")&&set_data(b,v),C&7){O=Object.entries(A[1]);let L;for(L=0;L<O.length;L+=1){const G=get_each_context$2(A,O,L);q[L]?q[L].p(G,C):(q[L]=create_each_block$2(G),q[L].c(),q[L].m(_,M))}for(;L<q.length;L+=1)q[L].d(1);q.length=O.length}E&&P.p(A,C)},i:noop,o:noop,d(A){A&&detach(d),destroy_each(q,A),P&&P.d(),A&&detach(S),A&&detach(N)}}}function instance$4(l,d,_){let m,y;component_subscribe(l,wallet,b=>_(0,m=b)),component_subscribe(l,allMultipliers,b=>_(1,y=b)),onDestroy(()=>{});const g=(b,k=0)=>b<1e9?b.toFixed(b<1e3?k:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):b.toExponential(3).toString().replace("+","");function v(){const b=Array(Object.keys(y).length).fill(0);let k=0;for(let w of Object.entries(y))b[k]=w[1].unlockAt,k++;k=0;const x=m.artifacts;for(let w in b)if(b[w]>x)return b[w];return-1}return m.gems>0,m.beacons>0,[m,y,g,v]}class Artifacts extends SvelteComponent{constructor(d){super(),init(this,d,instance$4,create_fragment$3,safe_not_equal,{})}}function instance$3(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae,re,j,$,ne,me,ce,oe;component_subscribe(l,keyCraftAmount,B=>_(1,m=B)),component_subscribe(l,keyCraftMastery,B=>_(2,y=B)),component_subscribe(l,resetLastTimes,B=>_(3,g=B)),component_subscribe(l,baseBeaconNextReqs,B=>_(4,v=B)),component_subscribe(l,beaconNextReqs,B=>_(5,b=B)),component_subscribe(l,beaconProgress,B=>_(6,k=B)),component_subscribe(l,beaconBonuses,B=>_(7,x=B)),component_subscribe(l,beaconUpgradeLevels,B=>_(8,w=B)),component_subscribe(l,beaconUpgrades,B=>_(9,I=B)),component_subscribe(l,buttonUpgradeLevels,B=>_(10,M=B)),component_subscribe(l,keyUpgradeLevels,B=>_(11,E=B)),component_subscribe(l,keyCraftTimes,B=>_(12,S=B)),component_subscribe(l,layer,B=>_(13,N=B)),component_subscribe(l,radiumProgress,B=>_(14,D=B)),component_subscribe(l,baseButtonNumClicks,B=>_(15,O=B)),component_subscribe(l,buttonNumClicks,B=>_(16,q=B)),component_subscribe(l,challengesCompleted,B=>_(17,P=B)),component_subscribe(l,enchantThreshold,B=>_(18,A=B)),component_subscribe(l,automationItemsUnlocked,B=>_(19,C=B)),component_subscribe(l,automationUpgrades,B=>_(20,L=B)),component_subscribe(l,enchantUpgradeLevels,B=>_(21,G=B)),component_subscribe(l,baseButtonStats,B=>_(22,V=B)),component_subscribe(l,buttonStats,B=>_(23,T=B)),component_subscribe(l,beaconActivations,B=>_(24,R=B)),component_subscribe(l,beaconLevels,B=>_(25,Y=B)),component_subscribe(l,keyCrafts,B=>_(26,Q=B)),component_subscribe(l,keysOpened,B=>_(27,te=B)),component_subscribe(l,stats,B=>_(28,W=B)),component_subscribe(l,miningUpgradeLevelsFree,B=>_(29,z=B)),component_subscribe(l,miningUpgradeLevelsBought,B=>_(30,H=B)),component_subscribe(l,miningUpgradeLevels,B=>_(31,F=B)),component_subscribe(l,miningUpgrades,B=>_(32,X=B)),component_subscribe(l,visibleTier,B=>_(33,ae=B)),component_subscribe(l,resources,B=>_(34,re=B)),component_subscribe(l,permaWallet,B=>_(35,j=B)),component_subscribe(l,wallet,B=>_(36,$=B)),component_subscribe(l,ascensionLevels,B=>_(37,ne=B)),component_subscribe(l,ascensionConstants,B=>_(38,me=B)),component_subscribe(l,ascensionElements,B=>_(39,ce=B)),component_subscribe(l,ascensionStats,B=>_(40,oe=B));const U=()=>{let B=0;for(let K=0;K<ce.length;K++)B+=$["e"+ce[K]]||0;return console.log(B),B};function Z(){try{set_store_value(ascensionStats,oe.ascensionCount++,oe);const B=($.antimatter||0)+U();for(let J of ce){if(J=="antimatter"?set_store_value(ascensionLevels,ne[J][1]+=U(),ne):set_store_value(ascensionLevels,ne[J][1]+=$["e"+J]||0,ne),ne[J][1]>=ne[J][2])for(;ne[J][1]>=ne[J][2];)console.log(J+" ascended! "+ne[J][2]),set_store_value(ascensionLevels,ne[J][1]-=ne[J][2],ne),set_store_value(ascensionLevels,ne[J][0]++,ne),set_store_value(ascensionLevels,ne[J][2]=me.levelFormula(ne[J][0]),ne);console.log(ne[J])}set_store_value(wallet,$={gems:0,antimatter:B,totalAntimatter:B},$),set_store_value(permaWallet,j={gems:0,antimatter:B,totalAntimatter:B},j),C["auto-fission"]&&(set_store_value(wallet,$.radium=($.radium||0)+1,$),set_store_value(permaWallet,j.radium=(j.radium||0)+1,j)),set_store_value(resources,re={},re),set_store_value(visibleTier,ae=1,ae),set_store_value(miningUpgradeLevelsFree,z=Array(200).fill(0),z);for(let J in X)X[J].noResetAscension||(set_store_value(miningUpgradeLevelsFree,z[J]=parseInt(J)==1||parseInt(J)==2||parseInt(J)==7?X[27].formula(H[27]):parseInt(J)==0?Math.round(X[27].formula(H[27])/4):0,z),set_store_value(miningUpgradeLevelsBought,H[J]=0,H),set_store_value(miningUpgradeLevels,F[J]=H[J]+z[J],F));set_store_value(stats,W.relocateCount=0,W),set_store_value(keysOpened,te=Array(5).fill(0),te),set_store_value(keyCrafts,Q=Array(40).fill(0),Q),set_store_value(beaconLevels,Y=Array(30).fill(0),Y),set_store_value(beaconActivations,R=Array(30).fill(0),R),set_store_value(buttonStats,T=V,T),set_store_value(enchantUpgradeLevels,G=Array(200).fill(0),G);let K={};if(!C.robotic){for(let J in Object.keys(L))C[L[J].name.toLowerCase()]&&L[J].noResetAscension&&(K[J]=!0);set_store_value(automationItemsUnlocked,C=K,C)}set_store_value(enchantThreshold,A.t1=100,A),set_store_value(challengesCompleted,P=Array(30).fill(0),P),challengeGoals.updateChallengeReqs(),set_store_value(buttonNumClicks,q=O,q),set_store_value(radiumProgress,D=[0,1e6],D),set_store_value(layer,N={layer:ascFormula.getVal("celestial")||0,blocks:0,blocksNextReq:100},N);for(let J in Object.keys(S))set_store_value(keyCraftTimes,S[J]=[-1,-1],S);for(let J of Object.keys(m))set_store_value(keyCraftAmount,m[J]=0,m);set_store_value(keyUpgradeLevels,E=Array(200).fill(0),E),set_store_value(buttonUpgradeLevels,M=Array(200).fill(0),M);for(let J in I)I[J].noResetAscension||set_store_value(beaconUpgradeLevels,w[J]=0,w);set_store_value(beaconBonuses,x=Array(30).fill(1),x),set_store_value(beaconProgress,k=Array(30).fill(0),k),miningDropTable.updateTable(),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable(),set_store_value(beaconNextReqs,b=v,b),console.log(ascFormula.getVal("magic")),set_store_value(resetLastTimes,g.ascension=Date.now(),g),setTimeout(()=>{console.log(y),console.log(m)},500)}catch(B){console.log("Error! Please report this on discord. Code: ascend "+B)}}return[Z]}class Resetters extends SvelteComponent{constructor(d){super(),init(this,d,instance$3,null,safe_not_equal,{ascend:0},null,[-1,-1])}get ascend(){return this.$$.ctx[0]}}function create_else_block$1(l){let d,_=l[4](l[1]())+"",m,y,g=l[4](formula.sumEssence())+"",v,b,k=l[4](l[1]())+"",x,w;return{c(){d=text("You need at least "),m=text(_),y=text(" total essence to ascend. ["),v=text(g),b=text(" / "),x=text(k),w=text("]")},l(I){d=claim_text(I,"You need at least "),m=claim_text(I,_),y=claim_text(I," total essence to ascend. ["),v=claim_text(I,g),b=claim_text(I," / "),x=claim_text(I,k),w=claim_text(I,"]")},m(I,M){insert_hydration(I,d,M),insert_hydration(I,m,M),insert_hydration(I,y,M),insert_hydration(I,v,M),insert_hydration(I,b,M),insert_hydration(I,x,M),insert_hydration(I,w,M)},p:noop,d(I){I&&detach(d),I&&detach(m),I&&detach(y),I&&detach(v),I&&detach(b),I&&detach(x),I&&detach(w)}}}function create_if_block$2(l){let d,_,m,y;return{c(){d=element("div"),_=text("ASCEND"),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);_=claim_text(v,"ASCEND"),v.forEach(detach),this.h()},h(){attr(d,"class","text-center items-center justify-center text-xl font-bold bg-clip-text bg-gradient-to-tl from-purple-300 to bg-fuchsia-600 text-transparent")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_),m||(y=listen(d,"click",l[6]),m=!0)},p:noop,d(g){g&&detach(d),m=!1,y()}}}function create_fragment$2(l){let d,_,m,y,g={};d=new Resetters({props:g}),l[5](d);function v(x,w){return x[2]()?create_if_block$2:create_else_block$1}let k=v(l)(l);return{c(){create_component(d.$$.fragment),_=space(),m=element("div"),k.c(),this.h()},l(x){claim_component(d.$$.fragment,x),_=claim_space(x),m=claim_element(x,"DIV",{class:!0});var w=children(m);k.l(w),w.forEach(detach),this.h()},h(){attr(m,"class","border-2 select-none text-center "+(l[2]()?"border-fuchsia-300 text-center hover:bg-fuchsia-800 hover:bg-opacity-50 transition ease-in duration-150":"game-btn-noafford select-none pointer-events-none cursor-pointer")+" p-1 w-full")},m(x,w){mount_component(d,x,w),insert_hydration(x,_,w),insert_hydration(x,m,w),k.m(m,null),y=!0},p(x,[w]){const I={};d.$set(I),k.p(x,w)},i(x){y||(transition_in(d.$$.fragment,x),y=!0)},o(x){transition_out(d.$$.fragment,x),y=!1},d(x){l[5](null),destroy_component(d,x),x&&detach(_),x&&detach(m),k.d()}}}function instance$2(l,d,_){let m;component_subscribe(l,ascensionStats,I=>_(7,m=I));let y;const g=()=>formula.calcAscensionEssenceRequirement(m.ascensionCount);function v(){return formula.sumEssence()>=g()}function b(){confirm("ARE YOU SURE??? This will reset EVERYTHING! If this is your first ascension, MAKE SURE you are gaining a bonus of some sort, or you will essentially be hard resetting!")&&y.ascend()}const k=(I,M=0)=>isNaN(I)?"???":I<1e9?I.toFixed(I<1e3?M:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):I.toExponential(3).toString().replace("+","");function x(I){binding_callbacks[I?"unshift":"push"](()=>{y=I,_(0,y)})}return[y,g,v,b,k,x,()=>b()]}class AscensionButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$2,create_fragment$2,safe_not_equal,{})}}function get_each_context$1(l,d,_){const m=l.slice();return m[23]=d[_],m[25]=_,m}function get_each_context_1$1(l,d,_){const m=l.slice();return m[26]=d[_],m[25]=_,m}function create_else_block(l){let d=(l[11][l[25]].isPercent?l[17](ascFormula.getValAt(l[26],Math.floor(formula.maxFinitePoly2(l[5][l[26]][1]+(l[6]["e"+l[26]]||0),l[5][l[26]][0],l[12].levelFormulaNums,l[26])))-1,2):l[16](ascFormula.getValAt(l[26],Math.floor(formula.maxFinitePoly2(l[5][l[26]][1]+(l[6]["e"+l[26]]||0),l[5][l[26]][0],l[12].levelFormulaNums,l[26]))),0))+"",_;return{c(){_=text(d)},l(m){_=claim_text(m,d)},m(m,y){insert_hydration(m,_,y)},p(m,y){y&6256&&d!==(d=(m[11][m[25]].isPercent?m[17](ascFormula.getValAt(m[26],Math.floor(formula.maxFinitePoly2(m[5][m[26]][1]+(m[6]["e"+m[26]]||0),m[5][m[26]][0],m[12].levelFormulaNums,m[26])))-1,2):m[16](ascFormula.getValAt(m[26],Math.floor(formula.maxFinitePoly2(m[5][m[26]][1]+(m[6]["e"+m[26]]||0),m[5][m[26]][0],m[12].levelFormulaNums,m[26]))),0))+"")&&set_data(_,d)},d(m){m&&detach(_)}}}function create_if_block_1$1(l){let d=l[17](ascFormula.getValAt(l[26],Math.floor(formula.maxFinitePoly2((l[5][l[26]][1]||0)+l[15](),l[5][l[26]][0],l[12].antimatterLevelFormulaNums,"antimatter")))-1,2)+"",_;return{c(){_=text(d)},l(m){_=claim_text(m,d)},m(m,y){insert_hydration(m,_,y)},p(m,y){y&4144&&d!==(d=m[17](ascFormula.getValAt(m[26],Math.floor(formula.maxFinitePoly2((m[5][m[26]][1]||0)+m[15](),m[5][m[26]][0],m[12].antimatterLevelFormulaNums,"antimatter")))-1,2)+"")&&set_data(_,d)},d(m){m&&detach(_)}}}function create_each_block_1$1(l){let d,_,m,y=l[9][l[25]]+"",g,v,b,k,x=l[10][l[25]]+"",w,I,M,E,S,N,D,O,q,P,A,C,L=l[16](l[5][l[26]][1],2)+"",G,V,T=l[16](l[5][l[26]][2],2)+"",R,Y,Q=(l[16](formula.calcEssenceXPGain(l[26]),2)||0)+"",te,W,z,H,F,X=l[11][l[25]].prefix+"",ae,re=(l[11][l[25]].isPercent?l[17](ascFormula.getVal(l[4][l[25]])*(l[11].isPercent?100:1)-1,2):l[16](ascFormula.getVal(l[4][l[25]])*(l[11].isPercent?100:1),0))+"",j,$,ne=l[11][l[25]].suffix+"",me,ce,oe,U,Z,B=l[11][l[25]].suffix+"",K,J,se,de=l[11][l[25]].text+"",_e,pe;function ue(ye,ve){return ye[26]==="antimatter"?create_if_block_1$1:create_else_block}let ie=ue(l),ge=ie(l);return{c(){d=element("div"),_=element("div"),m=element("span"),g=text(y),v=space(),b=element("div"),k=element("div"),w=text(x),I=space(),M=element("div"),E=element("div"),S=element("div"),N=element("div"),D=space(),O=element("div"),q=element("div"),P=space(),A=element("span"),C=element("span"),G=text(L),V=text(`
                                    / `),R=text(T),Y=text(`
                                     (+`),te=text(Q),W=text(" on ascension)"),z=space(),H=element("div"),F=element("div"),ae=text(X),j=text(re),$=space(),me=text(ne),ce=space(),oe=element("span"),U=text(`>> 
                            `),ge.c(),Z=space(),K=text(B),J=space(),se=element("div"),_e=text(de),pe=space(),this.h()},l(ye){d=claim_element(ye,"DIV",{class:!0});var ve=children(d);_=claim_element(ve,"DIV",{class:!0});var he=children(_);m=claim_element(he,"SPAN",{class:!0});var we=children(m);g=claim_text(we,y),we.forEach(detach),he.forEach(detach),v=claim_space(ve),b=claim_element(ve,"DIV",{class:!0});var Me=children(b);k=claim_element(Me,"DIV",{class:!0});var Ae=children(k);w=claim_text(Ae,x),Ae.forEach(detach),I=claim_space(Me),M=claim_element(Me,"DIV",{class:!0});var Ne=children(M);E=claim_element(Ne,"DIV",{class:!0});var xe=children(E);S=claim_element(xe,"DIV",{class:!0});var Ue=children(S);N=claim_element(Ue,"DIV",{class:!0,style:!0}),children(N).forEach(detach),Ue.forEach(detach),D=claim_space(xe),O=claim_element(xe,"DIV",{class:!0});var Ee=children(O);q=claim_element(Ee,"DIV",{class:!0,style:!0}),children(q).forEach(detach),Ee.forEach(detach),P=claim_space(xe),A=claim_element(xe,"SPAN",{class:!0});var Se=children(A);C=claim_element(Se,"SPAN",{class:!0});var Le=children(C);G=claim_text(Le,L),V=claim_text(Le,`
                                    / `),R=claim_text(Le,T),Y=claim_text(Le,`
                                     (+`),te=claim_text(Le,Q),W=claim_text(Le," on ascension)"),Le.forEach(detach),Se.forEach(detach),xe.forEach(detach),Ne.forEach(detach),Me.forEach(detach),z=claim_space(ve),H=claim_element(ve,"DIV",{class:!0});var De=children(H);F=claim_element(De,"DIV",{class:!0});var Oe=children(F);ae=claim_text(Oe,X),j=claim_text(Oe,re),$=claim_space(Oe),me=claim_text(Oe,ne),ce=claim_space(Oe),oe=claim_element(Oe,"SPAN",{class:!0});var Ce=children(oe);U=claim_text(Ce,`>> 
                            `),ge.l(Ce),Z=claim_space(Ce),K=claim_text(Ce,B),Ce.forEach(detach),Oe.forEach(detach),J=claim_space(De),se=claim_element(De,"DIV",{class:!0});var Ke=children(se);_e=claim_text(Ke,de),Ke.forEach(detach),De.forEach(detach),pe=claim_space(ve),ve.forEach(detach),this.h()},h(){attr(m,"class",ref.essenceTextColors[l[25]]),attr(_,"class","col-span-2 text-large game-text"),attr(k,"class","row-span-1 game-text text-small"),attr(N,"class","curr-amt "+ref.essenceBgColors[l[25]]+" rounded-sm h-4 z-20"),set_style(N,"width",l[3][l[25]]+"%"),attr(S,"class","my-1 absolute top-0 left-0 bg-gray-200 rounded-sm h-4 w-full dark:bg-gray-700"),attr(q,"class","next-amt "+ref.essenceBgColors[l[25]]+" bg-opacity-40 rounded-sm h-4"),set_style(q,"width",l[2][l[25]]+"%"),attr(O,"class","w-full h-4 bg-transparent absolute top-1 left-0"),attr(C,"class",ref.essenceTextColors[l[25]]),attr(A,"class","tooltip tooltip-style ml-6"),attr(E,"class","bar-wrapper relative has-tooltip"),attr(M,"class","row-span-1 game-text"),attr(b,"class","pbar-desc col-span-7 grid grid-rows-2"),attr(oe,"class","font-normal text-small"),attr(F,"class",ref.essenceTextColors[l[25]]+" font-bold row-span-1 text-large"),attr(se,"class","row-span-1"),attr(H,"class","bonus-text col-span-3 grid grid-rows-2 ml-1 p-1 text-small game-text"),attr(d,"class","wrapper col-span-12 grid grid-cols-12 py-2")},m(ye,ve){insert_hydration(ye,d,ve),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(d,v),append_hydration(d,b),append_hydration(b,k),append_hydration(k,w),append_hydration(b,I),append_hydration(b,M),append_hydration(M,E),append_hydration(E,S),append_hydration(S,N),append_hydration(E,D),append_hydration(E,O),append_hydration(O,q),append_hydration(E,P),append_hydration(E,A),append_hydration(A,C),append_hydration(C,G),append_hydration(C,V),append_hydration(C,R),append_hydration(C,Y),append_hydration(C,te),append_hydration(C,W),append_hydration(d,z),append_hydration(d,H),append_hydration(H,F),append_hydration(F,ae),append_hydration(F,j),append_hydration(F,$),append_hydration(F,me),append_hydration(F,ce),append_hydration(F,oe),append_hydration(oe,U),ge.m(oe,null),append_hydration(oe,Z),append_hydration(oe,K),append_hydration(H,J),append_hydration(H,se),append_hydration(se,_e),append_hydration(d,pe)},p(ye,ve){ve&512&&y!==(y=ye[9][ye[25]]+"")&&set_data(g,y),ve&1024&&x!==(x=ye[10][ye[25]]+"")&&set_data(w,x),ve&8&&set_style(N,"width",ye[3][ye[25]]+"%"),ve&4&&set_style(q,"width",ye[2][ye[25]]+"%"),ve&48&&L!==(L=ye[16](ye[5][ye[26]][1],2)+"")&&set_data(G,L),ve&48&&T!==(T=ye[16](ye[5][ye[26]][2],2)+"")&&set_data(R,T),ve&16&&Q!==(Q=(ye[16](formula.calcEssenceXPGain(ye[26]),2)||0)+"")&&set_data(te,Q),ve&2048&&X!==(X=ye[11][ye[25]].prefix+"")&&set_data(ae,X),ve&2064&&re!==(re=(ye[11][ye[25]].isPercent?ye[17](ascFormula.getVal(ye[4][ye[25]])*(ye[11].isPercent?100:1)-1,2):ye[16](ascFormula.getVal(ye[4][ye[25]])*(ye[11].isPercent?100:1),0))+"")&&set_data(j,re),ve&2048&&ne!==(ne=ye[11][ye[25]].suffix+"")&&set_data(me,ne),ie===(ie=ue(ye))&&ge?ge.p(ye,ve):(ge.d(1),ge=ie(ye),ge&&(ge.c(),ge.m(oe,Z))),ve&2048&&B!==(B=ye[11][ye[25]].suffix+"")&&set_data(K,B),ve&2048&&de!==(de=ye[11][ye[25]].text+"")&&set_data(_e,de)},d(ye){ye&&detach(d),ge.d()}}}function create_key_block$1(l){let d,_=l[4],m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block_1$1(get_each_context_1$1(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&237180){_=y[4];let v;for(v=0;v<_.length;v+=1){const b=get_each_context_1$1(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block_1$1(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block$1(l){let d,_=l[23]+"",m;return{c(){d=element("div"),m=text(_),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var g=children(d);m=claim_text(g,_),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-12 text-indigo-500 text-small text-left")},m(y,g){insert_hydration(y,d,g),append_hydration(d,m)},p(y,g){g&8192&&_!==(_=y[23]+"")&&set_data(m,_)},d(y){y&&detach(d)}}}function create_each_block$1(l){let d,_=l[8].ascensionCount>=l[7][l[25]]&&create_if_block$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[8].ascensionCount>=m[7][m[25]]?_?_.p(m,y):(_=create_if_block$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$1(l){let d,_,m,y,g,v=l[8].ascensionCount+"",b,k,x=l[8].ascensionCount+1+"",w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q=l[16](formula.sumEssence())+"",te,W,z,H,F,X=l[1],ae,re,j,$,ne,me,ce=l[16](l[14]())+"",oe,U,Z,B,K,J={};d=new Resetters({props:J}),l[18](d),E=new AscensionButton({});let se=create_key_block$1(l),de=l[13],_e=[];for(let pe=0;pe<de.length;pe+=1)_e[pe]=create_each_block$1(get_each_context$1(l,de,pe));return{c(){create_component(d.$$.fragment),_=space(),m=element("div"),y=element("div"),g=text("Ascension "),b=text(v),k=text(" >>> "),w=text(x),I=space(),M=element("div"),create_component(E.$$.fragment),S=space(),N=element("div"),D=text(`Ascension resets most things up to this point (except for mastery)  , but allows you to harness the elements to
        make your next legacy stronger.`),O=space(),q=element("div"),P=text(`Craft essences to gain power in the next legacy. Each element's essence
        gives a unique bonus.`),A=space(),C=element("div"),L=text(`Gain 
        `),G=element("span"),V=text(" antimatter "),T=text(` 
        equal to the sum of all essence produced this ascension 
        `),R=element("span"),Y=text(" ("),te=text(Q),W=text(")  "),z=text("."),H=space(),F=element("div"),se.c(),ae=space(),re=element("div"),j=text(`Antimatter is currently boosting:
            `);for(let pe=0;pe<_e.length;pe+=1)_e[pe].c();$=space(),ne=element("div"),me=text("Next bonus at ascension "),oe=text(ce),U=text("."),Z=space(),B=element("div"),this.h()},l(pe){claim_component(d.$$.fragment,pe),_=claim_space(pe),m=claim_element(pe,"DIV",{class:!0});var ue=children(m);y=claim_element(ue,"DIV",{class:!0});var ie=children(y);g=claim_text(ie,"Ascension "),b=claim_text(ie,v),k=claim_text(ie," >>> "),w=claim_text(ie,x),ie.forEach(detach),I=claim_space(ue),M=claim_element(ue,"DIV",{class:!0});var ge=children(M);claim_component(E.$$.fragment,ge),ge.forEach(detach),S=claim_space(ue),N=claim_element(ue,"DIV",{class:!0});var ye=children(N);D=claim_text(ye,`Ascension resets most things up to this point (except for mastery)  , but allows you to harness the elements to
        make your next legacy stronger.`),ye.forEach(detach),O=claim_space(ue),q=claim_element(ue,"DIV",{class:!0});var ve=children(q);P=claim_text(ve,`Craft essences to gain power in the next legacy. Each element's essence
        gives a unique bonus.`),ve.forEach(detach),A=claim_space(ue),C=claim_element(ue,"DIV",{class:!0});var he=children(C);L=claim_text(he,`Gain 
        `),G=claim_element(he,"SPAN",{class:!0});var we=children(G);V=claim_text(we," antimatter "),we.forEach(detach),T=claim_text(he,` 
        equal to the sum of all essence produced this ascension 
        `),R=claim_element(he,"SPAN",{class:!0});var Me=children(R);Y=claim_text(Me," ("),te=claim_text(Me,Q),W=claim_text(Me,")  "),Me.forEach(detach),z=claim_text(he,"."),he.forEach(detach),H=claim_space(ue),F=claim_element(ue,"DIV",{class:!0});var Ae=children(F);se.l(Ae),ae=claim_space(Ae),re=claim_element(Ae,"DIV",{class:!0});var Ne=children(re);j=claim_text(Ne,`Antimatter is currently boosting:
            `);for(let Ee=0;Ee<_e.length;Ee+=1)_e[Ee].l(Ne);$=claim_space(Ne),ne=claim_element(Ne,"DIV",{class:!0});var xe=children(ne);me=claim_text(xe,"Next bonus at ascension "),oe=claim_text(xe,ce),U=claim_text(xe,"."),xe.forEach(detach),Ne.forEach(detach),Ae.forEach(detach),Z=claim_space(ue),B=claim_element(ue,"DIV",{class:!0});var Ue=children(B);Ue.forEach(detach),ue.forEach(detach),this.h()},h(){attr(y,"class","text-center items-center justify-center text-3xl font-bold bg-clip-text bg-gradient-to-tl from-purple-300 to bg-fuchsia-600 text-transparent select-none"),attr(M,"class","py-2"),attr(N,"class","game-text justify-center w-full flex"),attr(q,"class","game-text justify-center w-full flex"),attr(G,"class",ref.colors.antimatter),attr(R,"class",ref.colors.antimatter),attr(C,"class","game-text justify-center w-full flex"),attr(ne,"class","text-small italic text-indigo-300"),attr(re,"class","col-span-12 text-left text-indigo-500 text-medium py-1"),attr(F,"class","grid grid-cols-12 pt-3"),attr(B,"class","grid grid-cols-12"),attr(m,"class","py-2")},m(pe,ue){mount_component(d,pe,ue),insert_hydration(pe,_,ue),insert_hydration(pe,m,ue),append_hydration(m,y),append_hydration(y,g),append_hydration(y,b),append_hydration(y,k),append_hydration(y,w),append_hydration(m,I),append_hydration(m,M),mount_component(E,M,null),append_hydration(m,S),append_hydration(m,N),append_hydration(N,D),append_hydration(m,O),append_hydration(m,q),append_hydration(q,P),append_hydration(m,A),append_hydration(m,C),append_hydration(C,L),append_hydration(C,G),append_hydration(G,V),append_hydration(C,T),append_hydration(C,R),append_hydration(R,Y),append_hydration(R,te),append_hydration(R,W),append_hydration(C,z),append_hydration(m,H),append_hydration(m,F),se.m(F,null),append_hydration(F,ae),append_hydration(F,re),append_hydration(re,j);for(let ie=0;ie<_e.length;ie+=1)_e[ie]&&_e[ie].m(re,null);append_hydration(re,$),append_hydration(re,ne),append_hydration(ne,me),append_hydration(ne,oe),append_hydration(ne,U),append_hydration(m,Z),append_hydration(m,B),K=!0},p(pe,[ue]){const ie={};if(d.$set(ie),(!K||ue&256)&&v!==(v=pe[8].ascensionCount+"")&&set_data(b,v),(!K||ue&256)&&x!==(x=pe[8].ascensionCount+1+"")&&set_data(w,x),ue&2&&safe_not_equal(X,X=pe[1])?(se.d(1),se=create_key_block$1(pe),se.c(),se.m(F,ae)):se.p(pe,ue),ue&8576){de=pe[13];let ge;for(ge=0;ge<de.length;ge+=1){const ye=get_each_context$1(pe,de,ge);_e[ge]?_e[ge].p(ye,ue):(_e[ge]=create_each_block$1(ye),_e[ge].c(),_e[ge].m(re,$))}for(;ge<_e.length;ge+=1)_e[ge].d(1);_e.length=de.length}},i(pe){K||(transition_in(d.$$.fragment,pe),transition_in(E.$$.fragment,pe),K=!0)},o(pe){transition_out(d.$$.fragment,pe),transition_out(E.$$.fragment,pe),K=!1},d(pe){l[18](null),destroy_component(d,pe),pe&&detach(_),pe&&detach(m),destroy_component(E),se.d(pe),destroy_each(_e,pe)}}}function instance$1(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S;component_subscribe(l,ascensionElements,V=>_(4,g=V)),component_subscribe(l,ascensionLevels,V=>_(5,v=V)),component_subscribe(l,wallet,V=>_(6,b=V)),component_subscribe(l,antimatterBonusAscensionReqs,V=>_(7,k=V)),component_subscribe(l,ascensionStats,V=>_(8,x=V)),component_subscribe(l,elementNames,V=>_(9,w=V)),component_subscribe(l,elementDescriptions,V=>_(10,I=V)),component_subscribe(l,elementBonusText,V=>_(11,M=V)),component_subscribe(l,ascensionConstants,V=>_(12,E=V)),component_subscribe(l,antimatterBonusText,V=>_(13,S=V));let N;const D=()=>{const V=x.ascensionCount;for(let T in k)if(V<k[T])return k[T];return k.length};let O=!1;const q=()=>{let V=0;for(let T=0;T<g.length;T++)V+=b["e"+g[T]]||0;return V};function P(){for(let V=0;V<g.length;V++)_(3,m[V]=Math.min(100,v[g[V]][1]/v[g[V]][2]*100),m),g[V]=="antimatter"?_(2,y[V]=Math.min(100,(v[g[V]][1]+q())/v[g[V]][2]*100),y):_(2,y[V]=Math.min(100,(v[g[V]][1]+(b["e"+g[V]]||0))/v[g[V]][2]*100),y)}let A;onMount(()=>(P(),A=setInterval(()=>{P(),_(1,O=!O)},1023),()=>clearInterval(A))),onDestroy(()=>{clearInterval(A)});const C=(V,T=0)=>isNaN(V)?"???":V<1e9?V.toFixed(V<1e3?T:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):V.toExponential(3).toString().replace("+",""),L=(V,T=3,R=!1)=>isNaN(V)?"0.00%":(R&&(V-=1),V<1e9?(V*100).toFixed(V<1e3?T:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(V*100).toExponential(T).toString().replace("+","")+"%");function G(V){binding_callbacks[V?"unshift":"push"](()=>{N=V,_(0,N)})}return _(3,m=[0,0,0,0,0,0]),_(2,y=[0,0,0,0,0,0]),[N,O,y,m,g,v,b,k,x,w,I,M,E,S,D,q,C,L,G]}class Ascension extends SvelteComponent{constructor(d){super(),init(this,d,instance$1,create_fragment$1,safe_not_equal,{})}}const _page_svelte_svelte_type_style_lang="";function get_each_context(l,d,_){const m=l.slice();return m[107]=d[_],m}function get_each_context_1(l,d,_){const m=l.slice();return m[110]=d[_],m}function get_each_context_2(l,d,_){const m=l.slice();return m[113]=d[_],m}function get_each_context_3(l,d,_){const m=l.slice();return m[116]=d[_],m}function get_each_context_4(l,d,_){const m=l.slice();return m[113]=d[_],m}function create_if_block_19(l){let d,_;return d=new Adders({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_17(l){let d,_=(ref.displayNames[l[113][0]]||l[113][0])+"",m,y,g,v,b,k,x=l[23](Math.floor(l[113][1]),0)+"",w,I,M=l[14].tutorialMode&&create_if_block_18(l);return{c(){d=element("div"),m=text(_),y=space(),M&&M.c(),v=space(),b=element("div"),k=element("div"),w=text(x),I=space(),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);m=claim_text(S,_),y=claim_space(S),M&&M.l(S),S.forEach(detach),v=claim_space(E),b=claim_element(E,"DIV",{class:!0});var N=children(b);k=claim_element(N,"DIV",{class:!0});var D=children(k);w=claim_text(D,x),D.forEach(detach),I=claim_space(N),N.forEach(detach),this.h()},h(){attr(d,"class",g=ref.colors[l[113][0]]+" res-name has-tooltip col-span-6 text-[13px]"),attr(k,"class","grid-cols-4"),attr(b,"class","text-white text-[13px] res-amount text-left col-span-6 grid grid-cols-4")},m(E,S){insert_hydration(E,d,S),append_hydration(d,m),append_hydration(d,y),M&&M.m(d,null),insert_hydration(E,v,S),insert_hydration(E,b,S),append_hydration(b,k),append_hydration(k,w),append_hydration(b,I)},p(E,S){S[0]&1&&_!==(_=(ref.displayNames[E[113][0]]||E[113][0])+"")&&set_data(m,_),E[14].tutorialMode?M?M.p(E,S):(M=create_if_block_18(E),M.c(),M.m(d,null)):M&&(M.d(1),M=null),S[0]&1&&g!==(g=ref.colors[E[113][0]]+" res-name has-tooltip col-span-6 text-[13px]")&&attr(d,"class",g),S[0]&1&&x!==(x=E[23](Math.floor(E[113][1]),0)+"")&&set_data(w,x)},d(E){E&&detach(d),M&&M.d(),E&&detach(v),E&&detach(b)}}}function create_if_block_18(l){let d,_=ref.tutorialModeDescriptions[l[113][0]]+"",m;return{c(){d=element("span"),m=text(_),this.h()},l(y){d=claim_element(y,"SPAN",{class:!0});var g=children(d);m=claim_text(g,_),g.forEach(detach),this.h()},h(){attr(d,"class","tooltip tooltip-style")},m(y,g){insert_hydration(y,d,g),append_hydration(d,m)},p(y,g){g[0]&1&&_!==(_=ref.tutorialModeDescriptions[y[113][0]]+"")&&set_data(m,_)},d(y){y&&detach(d)}}}function create_each_block_4(l){let d=(l[16][l[113][0]]||l[0][l[113][0]]>0)&&!l[113][0].includes("key")&&!ref.walletExclude[l[113][0]]&&(ref.dropTiers[l[113][0]]||ref.dropTiers.default)==l[116],_,m=d&&create_if_block_17(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&65537&&(d=(y[16][y[113][0]]||y[0][y[113][0]]>0)&&!y[113][0].includes("key")&&!ref.walletExclude[y[113][0]]&&(ref.dropTiers[y[113][0]]||ref.dropTiers.default)==y[116]),d?m?m.p(y,g):(m=create_if_block_17(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_each_block_3(l){let d,_=Object.entries(l[0]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block_4(get_each_context_4(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g[0]&8470529){_=Object.entries(y[0]);let v;for(v=0;v<_.length;v+=1){const b=get_each_context_4(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block_4(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_15(l){let d,_=(ref.displayNames[l[113][0]]||l[113][0])+"",m,y,g,v,b,k=l[23](Math.floor(l[113][1]),0)+"",x,w=l[14].tutorialMode&&create_if_block_16(l);return{c(){d=element("div"),m=text(_),y=space(),w&&w.c(),v=space(),b=element("div"),x=text(k),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var M=children(d);m=claim_text(M,_),y=claim_space(M),w&&w.l(M),M.forEach(detach),v=claim_space(I),b=claim_element(I,"DIV",{class:!0});var E=children(b);x=claim_text(E,k),E.forEach(detach),this.h()},h(){attr(d,"class",g=ref.colors[l[113][0]]+" res-name has-tooltip col-span-6 text-[13px]"),attr(b,"class","text-white text-[13px] res-amount col-span-6")},m(I,M){insert_hydration(I,d,M),append_hydration(d,m),append_hydration(d,y),w&&w.m(d,null),insert_hydration(I,v,M),insert_hydration(I,b,M),append_hydration(b,x)},p(I,M){M[0]&1&&_!==(_=(ref.displayNames[I[113][0]]||I[113][0])+"")&&set_data(m,_),I[14].tutorialMode?w?w.p(I,M):(w=create_if_block_16(I),w.c(),w.m(d,null)):w&&(w.d(1),w=null),M[0]&1&&g!==(g=ref.colors[I[113][0]]+" res-name has-tooltip col-span-6 text-[13px]")&&attr(d,"class",g),M[0]&1&&k!==(k=I[23](Math.floor(I[113][1]),0)+"")&&set_data(x,k)},d(I){I&&detach(d),w&&w.d(),I&&detach(v),I&&detach(b)}}}function create_if_block_16(l){let d,_=ref.tutorialModeDescriptions[l[113][0]]+"",m;return{c(){d=element("span"),m=text(_),this.h()},l(y){d=claim_element(y,"SPAN",{class:!0});var g=children(d);m=claim_text(g,_),g.forEach(detach),this.h()},h(){attr(d,"class","tooltip tooltip-style")},m(y,g){insert_hydration(y,d,g),append_hydration(d,m)},p(y,g){g[0]&1&&_!==(_=ref.tutorialModeDescriptions[y[113][0]]+"")&&set_data(m,_)},d(y){y&&detach(d)}}}function create_each_block_2(l){let d=(l[0][l[113][0]]||l[15].has(l[113][0]))&&(l[113][0].includes("key")||l[113][0].includes("fragments")),_,m=d&&create_if_block_15(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&32769&&(d=(y[0][y[113][0]]||y[15].has(y[113][0]))&&(y[113][0].includes("key")||y[113][0].includes("fragments"))),d?m?m.p(y,g):(m=create_if_block_15(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_if_block_14(l){let d,_,m,y;return m=new ThoriumDepositButton({}),{c(){d=text(","),_=element("div"),create_component(m.$$.fragment),this.h()},l(g){d=claim_text(g,","),_=claim_element(g,"DIV",{class:!0});var v=children(_);claim_component(m.$$.fragment,v),v.forEach(detach),this.h()},h(){attr(_,"class","col-span-12")},m(g,v){insert_hydration(g,d,v),insert_hydration(g,_,v),mount_component(m,_,null),y=!0},i(g){y||(transition_in(m.$$.fragment,g),y=!0)},o(g){transition_out(m.$$.fragment,g),y=!1},d(g){g&&detach(d),g&&detach(_),destroy_component(m)}}}function create_if_block_13(l){let d,_,m=l[18].slice().reverse(),y=[];for(let g=0;g<m.length;g+=1)y[g]=create_each_block_1(get_each_context_1(l,m,g));return{c(){d=element("div"),_=element("div");for(let g=0;g<y.length;g+=1)y[g].c();this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var v=children(d);_=claim_element(v,"DIV",{class:!0});var b=children(_);for(let k=0;k<y.length;k+=1)y[k].l(b);b.forEach(detach),v.forEach(detach),this.h()},h(){attr(_,"class","scrollable-area absolute inset-0 overflow-y-auto"),attr(d,"class","alog-cont col-span-12 h-64 relative bg-gray-700 border-4 border-gray-600")},m(g,v){insert_hydration(g,d,v),append_hydration(d,_);for(let b=0;b<y.length;b+=1)y[b]&&y[b].m(_,null)},p(g,v){if(v[0]&262144){m=g[18].slice().reverse();let b;for(b=0;b<m.length;b+=1){const k=get_each_context_1(g,m,b);y[b]?y[b].p(k,v):(y[b]=create_each_block_1(k),y[b].c(),y[b].m(_,null))}for(;b<y.length;b+=1)y[b].d(1);y.length=m.length}},d(g){g&&detach(d),destroy_each(y,g)}}}function create_each_block_1(l){let d,_=l[110][0]+"",m,y,g;return{c(){d=element("div"),m=text(_),y=space(),this.h()},l(v){d=claim_element(v,"DIV",{class:!0});var b=children(d);m=claim_text(b,_),y=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class",g="alog-text text-small "+l[110][1]+" col-span-12 pt-1 pl-1")},m(v,b){insert_hydration(v,d,b),append_hydration(d,m),append_hydration(d,y)},p(v,b){b[0]&262144&&_!==(_=v[110][0]+"")&&set_data(m,_),b[0]&262144&&g!==(g="alog-text text-small "+v[110][1]+" col-span-12 pt-1 pl-1")&&attr(d,"class",g)},d(v){v&&detach(d)}}}function create_each_block(l){let d,_=l[107]+"",m,y,g,v;function b(){return l[40](l[107])}return{c(){d=element("button"),m=text(_),this.h()},l(k){d=claim_element(k,"BUTTON",{class:!0});var x=children(d);m=claim_text(x,_),x.forEach(detach),this.h()},h(){attr(d,"class",y="px-1 py-1 text-small "+(l[24][l[107]]&&l[24][l[107]]()?l[107]===l[3]?"control-btn-selected":"control-btn":"control-btn-nounlock"))},m(k,x){insert_hydration(k,d,x),append_hydration(d,m),g||(v=listen(d,"click",b),g=!0)},p(k,x){l=k,x[0]&8&&y!==(y="px-1 py-1 text-small "+(l[24][l[107]]&&l[24][l[107]]()?l[107]===l[3]?"control-btn-selected":"control-btn":"control-btn-nounlock"))&&attr(d,"class",y)},d(k){k&&detach(d),g=!1,v()}}}function create_key_block(l){let d,_=ref.tabs,m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block(get_each_context(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g[0]&17825800){_=ref.tabs;let v;for(v=0;v<_.length;v+=1){const b=get_each_context(y,_,v);m[v]?m[v].p(b,g):(m[v]=create_each_block(b),m[v].c(),m[v].m(d.parentNode,d))}for(;v<m.length;v+=1)m[v].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_12(l){let d,_;return d=new Settings({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_11(l){let d,_;return d=new Help({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_10(l){let d,_;return d=new Ascension({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_9(l){let d,_;return d=new Artifacts({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_8(l){let d,_;return d=new Mastery({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_7(l){let d,_;return d=new Automation({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_6(l){let d,_;return d=new Button({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_5(l){let d,_;return d=new Enchants({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_4(l){let d,_;return d=new Relocate({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_3(l){let d,_;return d=new Beacons({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_2(l){let d,_;return d=new Keys({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_1(l){let d,_;return d=new Mining({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block(l){let d,_=(ref.tabNotUnlockedText[l[3]]||"")+"",m;return{c(){d=element("div"),m=text(_),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var g=children(d);m=claim_text(g,_),g.forEach(detach),this.h()},h(){attr(d,"class","game-text")},m(y,g){insert_hydration(y,d,g),append_hydration(d,m)},p(y,g){g[0]&8&&_!==(_=(ref.tabNotUnlockedText[y[3]]||"")+"")&&set_data(m,_)},d(y){y&&detach(d)}}}function create_fragment(l){let d,_,m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P=l[8]?"-":"+",A,C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae,re,j,$,ne,me,ce,oe,U,Z,B,K,J,se,de,_e,pe,ue,ie,ge,ye,ve,he,we,Me,Ae,Ne,xe,Ue,Ee,Se,Le,De=l[1].level+"",Oe,Ce,Ke,je,ze,Fe,Xe,Qe=l[23](l[1].xp,0)+"",qe,rt,He=l[23](l[1].xpNextReq,0)+"",ot,et,tt,Ze,$e,ut,at,bt=l[23](l[11],2)+"",kt,wt,At,yt,ee,Ve,Ie,fe,be,Te,Je,We,Ge,ct,st,Tt,le,Be,Pe,xt,St,ht=l[23](l[2].layer,0)+"",jt,Qt,Bt,Nt,It,Zt,Ot=l[23](l[2].blocks,0)+"",Gt,$t,Pt=l[23](l[2].blocksNextReq,0)+"",Jt,Ft,ea,Dt,ta,qt,Ct=l[23](l[10],2)+"",Kt,aa,la,Ut,Wt,Pa,Va,Ba,na,ra,sa,Yt,Ca,ha,Ra,zt,Wa=l[9],Oa,Vt,fa,ya,ga,va,ba,ka,wa,xa,Ia,Ea,Mt,Et,Sa,Fa=l[24][l[3]]&&!l[24][l[3]]()||!l[24][l[3]],it,qa,Ya,dt=l[7]&&create_if_block_19(),ja=[1,2,3,4,5],Lt=[];for(let ke=0;ke<5;ke+=1)Lt[ke]=create_each_block_3(get_each_context_3(l,ja,ke));let ia=Object.entries(l[0]),ft=[];for(let ke=0;ke<ia.length;ke+=1)ft[ke]=create_each_block_2(get_each_context_2(l,ia,ke));let _t=l[17]!=="off"&&create_if_block_14(),gt=l[8]&&create_if_block_13(l),Rt=create_key_block(l);const za=[create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12],Ht=[];function Ha(ke,Re){return Re[0]&8&&(fa=null),Re[0]&8&&(ya=null),Re[0]&8&&(ga=null),Re[0]&8&&(va=null),Re[0]&8&&(ba=null),Re[0]&8&&(ka=null),Re[0]&8&&(wa=null),Re[0]&8&&(xa=null),Re[0]&8&&(Ia=null),Re[0]&8&&(Ea=null),fa==null&&(fa=!!(ke[3]==="mining"&&ke[24].mining())),fa?0:(ya==null&&(ya=!!(ke[3]==="keys"&&ke[24].mining())),ya?1:(ga==null&&(ga=!!(ke[3]==="beacons"&&ke[24].beacons())),ga?2:(va==null&&(va=!!(ke[3]==="relocate"&&ke[24].relocate())),va?3:(ba==null&&(ba=!!(ke[3]==="enchants"&&ke[24].enchants())),ba?4:(ka==null&&(ka=!!(ke[3]==="reactor"&&ke[24].reactor())),ka?5:(wa==null&&(wa=!!(ke[3]==="augments"&&ke[24].augments())),wa?6:(xa==null&&(xa=!!(ke[3]==="mastery"&&ke[24].mastery())),xa?7:(Ia==null&&(Ia=!!(ke[3]==="artifacts"&&ke[24].artifacts())),Ia?8:(Ea==null&&(Ea=!!(ke[3]==="ascension"&&ke[24].ascension())),Ea?9:ke[3]==="help"?10:ke[3]==="settings"?11:-1)))))))))}~(Mt=Ha(l,[-1,-1,-1,-1]))&&(Et=Ht[Mt]=za[Mt](l));let vt=Fa&&create_if_block(l);return{c(){dt&&dt.c(),d=space(),_=element("div"),m=element("div"),y=element("div"),g=element("div"),v=space(),b=element("div");for(let ke=0;ke<5;ke+=1)Lt[ke].c();k=space();for(let ke=0;ke<ft.length;ke+=1)ft[ke].c();x=space(),w=element("div"),I=space(),_t&&_t.c(),M=space(),E=element("div"),S=space(),N=element("div"),D=text("Activity Log"),O=space(),q=element("div"),A=text(P),C=space(),L=element("div"),G=space(),gt&&gt.c(),V=space(),T=element("div"),R=element("div"),Y=element("button"),Q=text("Save"),W=space(),z=element("button"),H=text("Import"),F=space(),X=element("button"),ae=text("Export"),j=space(),$=element("button"),ne=text("Buy x"),me=text(l[6]),ce=space(),oe=element("button"),U=text("Buy Max"),B=space(),K=element("button"),J=text("Help!"),se=space(),de=element("button"),_e=text("Settings"),pe=space(),ue=element("button"),ie=element("a"),ge=text("Discord"),ye=space(),ve=element("button"),he=text("Reset"),we=space(),Me=element("button"),Ae=text("v0.11 (alpha)"),Ne=space(),xe=element("div"),Ue=element("div"),Ee=element("div"),Se=text(`Mining Level
                            `),Le=element("span"),Oe=text(De),Ke=space(),je=element("span"),ze=element("div"),Fe=element("div"),Xe=text("[ "),qe=text(Qe),rt=text(" / "),ot=text(He),et=text(" ]"),Ze=space(),$e=element("div"),ut=text("Each mine operation gives "),at=element("strong"),kt=text(bt),wt=text(" xp."),At=space(),yt=element("div"),ee=text(`This value increases based on the total
                                    amount of fame gained in this ascension. `),Ve=element("br"),Ie=text(`
                                    Your mining level unlocks various game features.`),fe=space(),be=element("div"),Te=element("div"),Je=element("div"),We=element("div"),ct=space(),st=element("div"),Tt=space(),le=element("div"),Be=element("div"),Pe=element("div"),xt=text(`Layer 
                            `),St=element("span"),jt=text(ht),Qt=space(),Bt=element("span"),Nt=element("div"),It=element("div"),Zt=text("[ "),Gt=text(Ot),$t=text(" / "),Jt=text(Pt),Ft=text(" ]"),ea=space(),Dt=element("div"),ta=text("Each mine operation mines "),qt=element("strong"),Kt=text(Ct),aa=text(" blocks from the current layer."),la=space(),Ut=element("div"),Wt=text("This value primarily increases based on the sum of all upgrade levels. "),Pa=element("br"),Va=text(`
                                    You gain various bonuses based on your current layer.`),Ba=space(),na=element("div"),ra=element("div"),sa=element("div"),Yt=element("div"),Ca=space(),ha=element("div"),Ra=space(),zt=element("div"),Rt.c(),Oa=space(),Vt=element("div"),Et&&Et.c(),Sa=space(),vt&&vt.c(),this.h()},l(ke){dt&&dt.l(ke),d=claim_space(ke),_=claim_element(ke,"DIV",{class:!0});var Re=children(_);m=claim_element(Re,"DIV",{class:!0});var pt=children(m);y=claim_element(pt,"DIV",{class:!0});var Ye=children(y);g=claim_element(Ye,"DIV",{class:!0}),children(g).forEach(detach),v=claim_space(Ye),b=claim_element(Ye,"DIV",{class:!0});var lt=children(b);for(let Xt=0;Xt<5;Xt+=1)Lt[Xt].l(lt);k=claim_space(lt);for(let Xt=0;Xt<ft.length;Xt+=1)ft[Xt].l(lt);x=claim_space(lt),w=claim_element(lt,"DIV",{class:!0}),children(w).forEach(detach),I=claim_space(lt),_t&&_t.l(lt),M=claim_space(lt),E=claim_element(lt,"DIV",{class:!0}),children(E).forEach(detach),S=claim_space(lt),N=claim_element(lt,"DIV",{class:!0});var Xa=children(N);D=claim_text(Xa,"Activity Log"),Xa.forEach(detach),O=claim_space(lt),q=claim_element(lt,"DIV",{class:!0});var Qa=children(q);A=claim_text(Qa,P),Qa.forEach(detach),C=claim_space(lt),L=claim_element(lt,"DIV",{class:!0}),children(L).forEach(detach),G=claim_space(lt),gt&&gt.l(lt),lt.forEach(detach),Ye.forEach(detach),V=claim_space(pt),T=claim_element(pt,"DIV",{class:!0});var oa=children(T);R=claim_element(oa,"DIV",{class:!0});var nt=children(R);Y=claim_element(nt,"BUTTON",{class:!0});var Za=children(Y);Q=claim_text(Za,"Save"),Za.forEach(detach),W=claim_space(nt),z=claim_element(nt,"BUTTON",{class:!0});var $a=children(z);H=claim_text($a,"Import"),$a.forEach(detach),F=claim_space(nt),X=claim_element(nt,"BUTTON",{class:!0});var el=children(X);ae=claim_text(el,"Export"),el.forEach(detach),j=claim_space(nt),$=claim_element(nt,"BUTTON",{class:!0});var Ga=children($);ne=claim_text(Ga,"Buy x"),me=claim_text(Ga,l[6]),Ga.forEach(detach),ce=claim_space(nt),oe=claim_element(nt,"BUTTON",{class:!0});var tl=children(oe);U=claim_text(tl,"Buy Max"),tl.forEach(detach),B=claim_space(nt),K=claim_element(nt,"BUTTON",{class:!0});var al=children(K);J=claim_text(al,"Help!"),al.forEach(detach),se=claim_space(nt),de=claim_element(nt,"BUTTON",{class:!0});var ll=children(de);_e=claim_text(ll,"Settings"),ll.forEach(detach),pe=claim_space(nt),ue=claim_element(nt,"BUTTON",{class:!0});var nl=children(ue);ie=claim_element(nl,"A",{href:!0,target:!0});var rl=children(ie);ge=claim_text(rl,"Discord"),rl.forEach(detach),nl.forEach(detach),ye=claim_space(nt),ve=claim_element(nt,"BUTTON",{class:!0});var sl=children(ve);he=claim_text(sl,"Reset"),sl.forEach(detach),we=claim_space(nt),Me=claim_element(nt,"BUTTON",{class:!0});var il=children(Me);Ae=claim_text(il,"v0.11 (alpha)"),il.forEach(detach),Ne=claim_space(nt),xe=claim_element(nt,"DIV",{class:!0});var ca=children(xe);Ue=claim_element(ca,"DIV",{class:!0});var Ma=children(Ue);Ee=claim_element(Ma,"DIV",{class:!0});var Ja=children(Ee);Se=claim_text(Ja,`Mining Level
                            `),Le=claim_element(Ja,"SPAN",{class:!0});var ol=children(Le);Oe=claim_text(ol,De),ol.forEach(detach),Ja.forEach(detach),Ke=claim_space(Ma),je=claim_element(Ma,"SPAN",{class:!0});var cl=children(je);ze=claim_element(cl,"DIV",{class:!0});var da=children(ze);Fe=claim_element(da,"DIV",{class:!0});var _a=children(Fe);Xe=claim_text(_a,"[ "),qe=claim_text(_a,Qe),rt=claim_text(_a," / "),ot=claim_text(_a,He),et=claim_text(_a," ]"),_a.forEach(detach),Ze=claim_space(da),$e=claim_element(da,"DIV",{class:!0});var Aa=children($e);ut=claim_text(Aa,"Each mine operation gives "),at=claim_element(Aa,"STRONG",{});var dl=children(at);kt=claim_text(dl,bt),dl.forEach(detach),wt=claim_text(Aa," xp."),Aa.forEach(detach),At=claim_space(da),yt=claim_element(da,"DIV",{class:!0});var Na=children(yt);ee=claim_text(Na,`This value increases based on the total
                                    amount of fame gained in this ascension. `),Ve=claim_element(Na,"BR",{}),Ie=claim_text(Na,`
                                    Your mining level unlocks various game features.`),Na.forEach(detach),da.forEach(detach),cl.forEach(detach),Ma.forEach(detach),fe=claim_space(ca),be=claim_element(ca,"DIV",{class:!0});var _l=children(be);Te=claim_element(_l,"DIV",{class:!0});var pl=children(Te);Je=claim_element(pl,"DIV",{class:!0});var ml=children(Je);We=claim_element(ml,"DIV",{class:!0,style:!0}),children(We).forEach(detach),ml.forEach(detach),pl.forEach(detach),_l.forEach(detach),ct=claim_space(ca),st=claim_element(ca,"DIV",{class:!0}),children(st).forEach(detach),ca.forEach(detach),Tt=claim_space(nt),le=claim_element(nt,"DIV",{class:!0});var pa=children(le);Be=claim_element(pa,"DIV",{class:!0});var Da=children(Be);Pe=claim_element(Da,"DIV",{class:!0});var Ka=children(Pe);xt=claim_text(Ka,`Layer 
                            `),St=claim_element(Ka,"SPAN",{class:!0});var ul=children(St);jt=claim_text(ul,ht),ul.forEach(detach),Ka.forEach(detach),Qt=claim_space(Da),Bt=claim_element(Da,"SPAN",{class:!0});var hl=children(Bt);Nt=claim_element(hl,"DIV",{class:!0});var ma=children(Nt);It=claim_element(ma,"DIV",{class:!0});var ua=children(It);Zt=claim_text(ua,"[ "),Gt=claim_text(ua,Ot),$t=claim_text(ua," / "),Jt=claim_text(ua,Pt),Ft=claim_text(ua," ]"),ua.forEach(detach),ea=claim_space(ma),Dt=claim_element(ma,"DIV",{class:!0});var La=children(Dt);ta=claim_text(La,"Each mine operation mines "),qt=claim_element(La,"STRONG",{});var fl=children(qt);Kt=claim_text(fl,Ct),fl.forEach(detach),aa=claim_text(La," blocks from the current layer."),La.forEach(detach),la=claim_space(ma),Ut=claim_element(ma,"DIV",{class:!0});var Ta=children(Ut);Wt=claim_text(Ta,"This value primarily increases based on the sum of all upgrade levels. "),Pa=claim_element(Ta,"BR",{}),Va=claim_text(Ta,`
                                    You gain various bonuses based on your current layer.`),Ta.forEach(detach),ma.forEach(detach),hl.forEach(detach),Da.forEach(detach),Ba=claim_space(pa),na=claim_element(pa,"DIV",{class:!0});var yl=children(na);ra=claim_element(yl,"DIV",{class:!0});var gl=children(ra);sa=claim_element(gl,"DIV",{class:!0});var vl=children(sa);Yt=claim_element(vl,"DIV",{class:!0,style:!0}),children(Yt).forEach(detach),vl.forEach(detach),gl.forEach(detach),yl.forEach(detach),Ca=claim_space(pa),ha=claim_element(pa,"DIV",{class:!0}),children(ha).forEach(detach),pa.forEach(detach),nt.forEach(detach),Ra=claim_space(oa),zt=claim_element(oa,"DIV",{class:!0});var bl=children(zt);Rt.l(bl),bl.forEach(detach),Oa=claim_space(oa),Vt=claim_element(oa,"DIV",{class:!0});var Ua=children(Vt);Et&&Et.l(Ua),Sa=claim_space(Ua),vt&&vt.l(Ua),Ua.forEach(detach),oa.forEach(detach),pt.forEach(detach),Re.forEach(detach),this.h()},h(){attr(g,"class","res-display-space py-2"),attr(w,"class","pt-2 mt-2"),attr(E,"class","alog-break pt-4 col-span-12"),attr(N,"class","alog-title game-text col-span-9"),attr(q,"class","alog-minimize col-span-3 game-btn text-center game-text"),attr(L,"class","col-span-12 py-1"),attr(b,"class","res-display-wrap grid grid-cols-12"),attr(y,"class","flex-none w-1/5 px-2 res-display "),attr(Y,"class",te="py-1 text-small save-btn control-btn "+(l[4]?"bg-green-400":"")),attr(z,"class","py-1 text-small save-btn control-btn"),attr(X,"class",re="py-1 text-small save-btn control-btn "+(l[5]?"bg-green-400":"")),attr($,"class","py-1 px-1 text-small save-btn control-btn"),attr(oe,"class",Z="py-1 px-1 text-small save-btn has-tooltip "+(l[14].maxBuy?"game-btn-toggleon":"control-btn")),attr(K,"class","py-1 px-1 text-small save-btn control-btn"),attr(de,"class","py-1 px-1 text-small save-btn control-btn"),attr(ie,"href","https://discord.gg/h9D9ASc7bz"),attr(ie,"target","_blank"),attr(ue,"class","py-1 px-1 text-small border-2 border-violet-400 text-violet-500 hover:bg-violet-900"),attr(ve,"class","py-1 px-1 text-small border-2 border-red-600 text-red-600 hover:bg-red-950"),attr(Me,"class","text-xs text-gray-600"),attr(Le,"class",Ce="font-bold "+(l[1].level>69?"text-red-500":"text-cyan-400")),attr(Ee,"class","text-[#989898] text-small text-left"),attr(Fe,"class",tt="col-span-3 text-center "+(l[1].level>69?"text-red-500":"text-cyan-500")),attr($e,"class","col-span-3 text-center"),attr(yt,"class","col-span-3 text-center"),attr(ze,"class","grid grid-cols-3"),attr(je,"class","px-2 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none max-w-[260px] text-center weight-bold"),attr(Ue,"class","col-span-1 p-[1px] has-tooltip"),attr(We,"class",Ge=(l[1].level>69?"bg-red-500":"bg-cyan-500")+" h-2.5 rounded-full"),set_style(We,"width",l[13]+"%"),attr(Je,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(Te,"class","mine-bar-wrapper"),attr(be,"class","col-span-5 p-[1px] mt-1"),attr(st,"class","col-span-1"),attr(xe,"class","wrapper grid grid-cols-9"),attr(St,"class","font-bold text-yellow-300"),attr(Pe,"class","text-[#989898] text-small text-left"),attr(It,"class","col-span-3 text-center text-yellow-300"),attr(Dt,"class","col-span-3 text-center"),attr(Ut,"class","col-span-3 text-center"),attr(Nt,"class","grid grid-cols-3"),attr(Bt,"class","px-2 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none max-w-[260px] text-center weight-bold"),attr(Be,"class","col-span-1 p-[1px] has-tooltip"),attr(Yt,"class","bg-yellow-300 h-2.5 rounded-full"),set_style(Yt,"width",l[12]+"%"),attr(sa,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(ra,"class","layer-bar-wrapper"),attr(na,"class","col-span-5 p-[1px] mt-1"),attr(ha,"class","col-span-1"),attr(le,"class","wrapper grid grid-cols-9"),attr(R,"class","py-1 control-buttons resize-none"),attr(zt,"class","row-span-1 tab-buttons"),attr(Vt,"class","row-span-10 main-panel-display"),attr(T,"class","overflow-y-auto px-2 py-2 main-panel ml-3 w-3/5"),attr(m,"class","main-page flex"),attr(_,"class","wrapper")},m(ke,Re){dt&&dt.m(ke,Re),insert_hydration(ke,d,Re),insert_hydration(ke,_,Re),append_hydration(_,m),append_hydration(m,y),append_hydration(y,g),append_hydration(y,v),append_hydration(y,b);for(let pt=0;pt<5;pt+=1)Lt[pt]&&Lt[pt].m(b,null);append_hydration(b,k);for(let pt=0;pt<ft.length;pt+=1)ft[pt]&&ft[pt].m(b,null);append_hydration(b,x),append_hydration(b,w),append_hydration(b,I),_t&&_t.m(b,null),append_hydration(b,M),append_hydration(b,E),append_hydration(b,S),append_hydration(b,N),append_hydration(N,D),append_hydration(b,O),append_hydration(b,q),append_hydration(q,A),append_hydration(b,C),append_hydration(b,L),append_hydration(b,G),gt&&gt.m(b,null),append_hydration(m,V),append_hydration(m,T),append_hydration(T,R),append_hydration(R,Y),append_hydration(Y,Q),append_hydration(R,W),append_hydration(R,z),append_hydration(z,H),append_hydration(R,F),append_hydration(R,X),append_hydration(X,ae),append_hydration(R,j),append_hydration(R,$),append_hydration($,ne),append_hydration($,me),append_hydration(R,ce),append_hydration(R,oe),append_hydration(oe,U),append_hydration(R,B),append_hydration(R,K),append_hydration(K,J),append_hydration(R,se),append_hydration(R,de),append_hydration(de,_e),append_hydration(R,pe),append_hydration(R,ue),append_hydration(ue,ie),append_hydration(ie,ge),append_hydration(R,ye),append_hydration(R,ve),append_hydration(ve,he),append_hydration(R,we),append_hydration(R,Me),append_hydration(Me,Ae),append_hydration(R,Ne),append_hydration(R,xe),append_hydration(xe,Ue),append_hydration(Ue,Ee),append_hydration(Ee,Se),append_hydration(Ee,Le),append_hydration(Le,Oe),append_hydration(Ue,Ke),append_hydration(Ue,je),append_hydration(je,ze),append_hydration(ze,Fe),append_hydration(Fe,Xe),append_hydration(Fe,qe),append_hydration(Fe,rt),append_hydration(Fe,ot),append_hydration(Fe,et),append_hydration(ze,Ze),append_hydration(ze,$e),append_hydration($e,ut),append_hydration($e,at),append_hydration(at,kt),append_hydration($e,wt),append_hydration(ze,At),append_hydration(ze,yt),append_hydration(yt,ee),append_hydration(yt,Ve),append_hydration(yt,Ie),append_hydration(xe,fe),append_hydration(xe,be),append_hydration(be,Te),append_hydration(Te,Je),append_hydration(Je,We),append_hydration(xe,ct),append_hydration(xe,st),append_hydration(R,Tt),append_hydration(R,le),append_hydration(le,Be),append_hydration(Be,Pe),append_hydration(Pe,xt),append_hydration(Pe,St),append_hydration(St,jt),append_hydration(Be,Qt),append_hydration(Be,Bt),append_hydration(Bt,Nt),append_hydration(Nt,It),append_hydration(It,Zt),append_hydration(It,Gt),append_hydration(It,$t),append_hydration(It,Jt),append_hydration(It,Ft),append_hydration(Nt,ea),append_hydration(Nt,Dt),append_hydration(Dt,ta),append_hydration(Dt,qt),append_hydration(qt,Kt),append_hydration(Dt,aa),append_hydration(Nt,la),append_hydration(Nt,Ut),append_hydration(Ut,Wt),append_hydration(Ut,Pa),append_hydration(Ut,Va),append_hydration(le,Ba),append_hydration(le,na),append_hydration(na,ra),append_hydration(ra,sa),append_hydration(sa,Yt),append_hydration(le,Ca),append_hydration(le,ha),append_hydration(T,Ra),append_hydration(T,zt),Rt.m(zt,null),append_hydration(T,Oa),append_hydration(T,Vt),~Mt&&Ht[Mt].m(Vt,null),append_hydration(Vt,Sa),vt&&vt.m(Vt,null),it=!0,qa||(Ya=[listen(q,"click",l[31]),listen(Y,"click",l[32]),listen(z,"click",l[33]),listen(X,"click",l[34]),listen($,"click",l[35]),listen(oe,"click",l[36]),listen(K,"click",l[37]),listen(de,"click",l[38]),listen(ve,"click",l[39])],qa=!0)},p(ke,Re){if(ke[7]?dt?Re[0]&128&&transition_in(dt,1):(dt=create_if_block_19(),dt.c(),transition_in(dt,1),dt.m(d.parentNode,d)):dt&&(group_outros(),transition_out(dt,1,1,()=>{dt=null}),check_outros()),Re[0]&8470529){ja=[1,2,3,4,5];let Ye;for(Ye=0;Ye<5;Ye+=1){const lt=get_each_context_3(ke,ja,Ye);Lt[Ye]?Lt[Ye].p(lt,Re):(Lt[Ye]=create_each_block_3(lt),Lt[Ye].c(),Lt[Ye].m(b,k))}for(;Ye<5;Ye+=1)Lt[Ye].d(1)}if(Re[0]&8437761){ia=Object.entries(ke[0]);let Ye;for(Ye=0;Ye<ia.length;Ye+=1){const lt=get_each_context_2(ke,ia,Ye);ft[Ye]?ft[Ye].p(lt,Re):(ft[Ye]=create_each_block_2(lt),ft[Ye].c(),ft[Ye].m(b,x))}for(;Ye<ft.length;Ye+=1)ft[Ye].d(1);ft.length=ia.length}ke[17]!=="off"?_t?Re[0]&131072&&transition_in(_t,1):(_t=create_if_block_14(),_t.c(),transition_in(_t,1),_t.m(b,M)):_t&&(group_outros(),transition_out(_t,1,1,()=>{_t=null}),check_outros()),(!it||Re[0]&256)&&P!==(P=ke[8]?"-":"+")&&set_data(A,P),ke[8]?gt?gt.p(ke,Re):(gt=create_if_block_13(ke),gt.c(),gt.m(b,null)):gt&&(gt.d(1),gt=null),(!it||Re[0]&16&&te!==(te="py-1 text-small save-btn control-btn "+(ke[4]?"bg-green-400":"")))&&attr(Y,"class",te),(!it||Re[0]&32&&re!==(re="py-1 text-small save-btn control-btn "+(ke[5]?"bg-green-400":"")))&&attr(X,"class",re),(!it||Re[0]&64)&&set_data(me,ke[6]),(!it||Re[0]&16384&&Z!==(Z="py-1 px-1 text-small save-btn has-tooltip "+(ke[14].maxBuy?"game-btn-toggleon":"control-btn")))&&attr(oe,"class",Z),(!it||Re[0]&2)&&De!==(De=ke[1].level+"")&&set_data(Oe,De),(!it||Re[0]&2&&Ce!==(Ce="font-bold "+(ke[1].level>69?"text-red-500":"text-cyan-400")))&&attr(Le,"class",Ce),(!it||Re[0]&2)&&Qe!==(Qe=ke[23](ke[1].xp,0)+"")&&set_data(qe,Qe),(!it||Re[0]&2)&&He!==(He=ke[23](ke[1].xpNextReq,0)+"")&&set_data(ot,He),(!it||Re[0]&2&&tt!==(tt="col-span-3 text-center "+(ke[1].level>69?"text-red-500":"text-cyan-500")))&&attr(Fe,"class",tt),(!it||Re[0]&2048)&&bt!==(bt=ke[23](ke[11],2)+"")&&set_data(kt,bt),(!it||Re[0]&2&&Ge!==(Ge=(ke[1].level>69?"bg-red-500":"bg-cyan-500")+" h-2.5 rounded-full"))&&attr(We,"class",Ge),(!it||Re[0]&8192)&&set_style(We,"width",ke[13]+"%"),(!it||Re[0]&4)&&ht!==(ht=ke[23](ke[2].layer,0)+"")&&set_data(jt,ht),(!it||Re[0]&4)&&Ot!==(Ot=ke[23](ke[2].blocks,0)+"")&&set_data(Gt,Ot),(!it||Re[0]&4)&&Pt!==(Pt=ke[23](ke[2].blocksNextReq,0)+"")&&set_data(Jt,Pt),(!it||Re[0]&1024)&&Ct!==(Ct=ke[23](ke[10],2)+"")&&set_data(Kt,Ct),(!it||Re[0]&4096)&&set_style(Yt,"width",ke[12]+"%"),Re[0]&512&&safe_not_equal(Wa,Wa=ke[9])?(Rt.d(1),Rt=create_key_block(ke),Rt.c(),Rt.m(zt,null)):Rt.p(ke,Re);let pt=Mt;Mt=Ha(ke,Re),Mt!==pt&&(Et&&(group_outros(),transition_out(Ht[pt],1,1,()=>{Ht[pt]=null}),check_outros()),~Mt?(Et=Ht[Mt],Et||(Et=Ht[Mt]=za[Mt](ke),Et.c()),transition_in(Et,1),Et.m(Vt,Sa)):Et=null),Re[0]&8&&(Fa=ke[24][ke[3]]&&!ke[24][ke[3]]()||!ke[24][ke[3]]),Fa?vt?vt.p(ke,Re):(vt=create_if_block(ke),vt.c(),vt.m(Vt,null)):vt&&(vt.d(1),vt=null)},i(ke){it||(transition_in(dt),transition_in(_t),transition_in(Et),it=!0)},o(ke){transition_out(dt),transition_out(_t),transition_out(Et),it=!1},d(ke){dt&&dt.d(ke),ke&&detach(d),ke&&detach(_),destroy_each(Lt,ke),destroy_each(ft,ke),_t&&_t.d(),gt&&gt.d(),Rt.d(ke),~Mt&&Ht[Mt].d(),vt&&vt.d(),qa=!1,run_all(Ya)}}}let AUTOSAVE_INTERVAL=3e4;function instance(l,d,_){let m,y,g,v,b,k,x,w,I,M,E,S,N,D,O,q,P,A,C,L,G,V,T,R,Y,Q,te,W,z,H,F,X,ae,re,j,$,ne,me,ce,oe,U,Z,B,K,J,se,de,_e,pe,ue,ie,ge,ye,ve,he,we,Me,Ae,Ne,xe,Ue,Ee,Se,Le,De,Oe,Ce,Ke,je,ze;component_subscribe(l,flags,le=>_(45,b=le)),component_subscribe(l,saveVersion,le=>_(46,k=le)),component_subscribe(l,automationItemsUnlocked,le=>_(47,x=le)),component_subscribe(l,settings,le=>_(14,w=le)),component_subscribe(l,ascensionLevels,le=>_(48,I=le)),component_subscribe(l,keyUpgradeLevels,le=>_(49,M=le)),component_subscribe(l,wallet,le=>_(0,E=le)),component_subscribe(l,miningUpgradeLevels,le=>_(50,S=le)),component_subscribe(l,miningUpgradeLevelsBought,le=>_(51,N=le)),component_subscribe(l,keysOpened,le=>_(52,D=le)),component_subscribe(l,visibleTier,le=>_(53,O=le)),component_subscribe(l,activityLogShow,le=>_(54,q=le)),component_subscribe(l,enchantUpgrades,le=>_(55,P=le)),component_subscribe(l,keyCraftMastery,le=>_(56,A=le)),component_subscribe(l,keyCraftAmount,le=>_(57,C=le)),component_subscribe(l,buttonUpgradeLevels,le=>_(58,L=le)),component_subscribe(l,buttonUpgrades,le=>_(59,G=le)),component_subscribe(l,miningUpgradeLevelsFree,le=>_(60,V=le)),component_subscribe(l,keyCraftTimes,le=>_(61,T=le)),component_subscribe(l,beaconActivations,le=>_(62,R=le)),component_subscribe(l,masteryItemReqs,le=>_(63,Y=le)),component_subscribe(l,masteryItemLevels,le=>_(64,Q=le)),component_subscribe(l,masteryItemInfo,le=>_(65,te=le)),component_subscribe(l,craftMasteryLevel,le=>_(66,W=le)),component_subscribe(l,craftMasteryNextReq,le=>_(67,z=le)),component_subscribe(l,totalCrafts,le=>_(68,H=le)),component_subscribe(l,masteryNextReq,le=>_(69,F=le)),component_subscribe(l,key2DropTable,le=>_(70,X=le)),component_subscribe(l,key1DropTable,le=>_(71,ae=le)),component_subscribe(l,resources,le=>_(72,re=le)),component_subscribe(l,enchantThreshold,le=>_(73,j=le)),component_subscribe(l,enchantUpgradeLevels,le=>_(74,$=le)),component_subscribe(l,unlockedRes,le=>_(15,ne=le)),component_subscribe(l,miningUpgrades,le=>_(75,me=le)),component_subscribe(l,permaWallet,le=>_(16,ce=le)),component_subscribe(l,mineLevel,le=>_(1,oe=le)),component_subscribe(l,challenge3Multi,le=>_(76,U=le)),component_subscribe(l,beaconSmartSplits,le=>_(77,Z=le)),component_subscribe(l,challengesCompleted,le=>_(78,B=le)),component_subscribe(l,challengeActive,le=>_(28,K=le)),component_subscribe(l,antiFlickerFlags,le=>_(79,J=le)),component_subscribe(l,startOfGame,le=>_(80,se=le)),component_subscribe(l,radiumProgress,le=>_(81,de=le)),component_subscribe(l,ascensionStats,le=>_(82,_e=le)),component_subscribe(l,stats,le=>_(83,pe=le)),component_subscribe(l,buttonStats,le=>_(84,ue=le)),component_subscribe(l,buttonNumClicks,le=>_(85,ie=le)),component_subscribe(l,layer,le=>_(2,ge=le)),component_subscribe(l,craftMasteryProgress,le=>_(86,ye=le)),component_subscribe(l,beaconSpendAmt,le=>_(87,ve=le)),component_subscribe(l,beaconNextReqs,le=>_(88,he=le)),component_subscribe(l,beaconUpgradeLevels,le=>_(89,we=le)),component_subscribe(l,beaconLevels,le=>_(90,Me=le)),component_subscribe(l,beaconProgress,le=>_(91,Ae=le)),component_subscribe(l,progress,le=>_(92,Ne=le)),component_subscribe(l,keyItemsUnlocked,le=>_(93,xe=le)),component_subscribe(l,miningUpgradeLevelsFreeTemp,le=>_(94,Ue=le)),component_subscribe(l,miningUpgradeLevelsBoughtTemp,le=>_(95,Ee=le)),component_subscribe(l,miningUpgradeLevelsTemp,le=>_(96,Se=le)),component_subscribe(l,artifactPermanentBonuses,le=>_(97,Le=le)),component_subscribe(l,resetLastTimes,le=>_(98,De=le)),component_subscribe(l,ascensionUpgradeLevels,le=>_(99,Oe=le)),component_subscribe(l,sumUpgradeLevels,le=>_(29,Ce=le)),component_subscribe(l,challengeGoals,le=>_(30,Ke=le)),component_subscribe(l,thoriumDepositActive,le=>_(17,je=le)),component_subscribe(l,activityLog,le=>_(18,ze=le));let Fe="mining",Xe,Qe,qe=1,rt=!1,He=!0;const ot=()=>{_(8,He=!He)},et=le=>{_(3,Fe=le),set_store_value(settings,w.activeTab=le,w)},tt=()=>{qe===1?_(6,qe=10):qe===10?_(6,qe=100):qe===100&&_(6,qe=1),set_store_value(settings,w.buyAmount=qe,w)},Ze=()=>{w.maxBuy||set_store_value(settings,w.maxBuy=!1,w),set_store_value(settings,w.maxBuy=!w.maxBuy,w)},$e=(le,Be=3)=>isNaN(le)||le===null?"???":le<1e9?le.toFixed(le<1e3?Be:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):le.toExponential(3).toString().replace("+",""),ut={mining:()=>!0,keys:()=>!0,beacons:()=>E.beacons||formula.sumArray(R)>0,sigils:()=>E.sigils&&E.sigils>.02,relocate:()=>formula.sumArray(D)>200||E.fame,enchants:()=>E.fame&&E.totalFame>=100||formula.sumArray($)>0,augments:()=>E.fame&&E.fame>=.997||formula.sumArray($)>0||S[10]>0||S[11]>0,reactor:()=>oe.level>=8,default:()=>!1,help:()=>!0,settings:()=>!0,mastery:()=>x.masterful,artifacts:()=>E.artifacts&&E.artifacts>=1,ascension:()=>E.totalFame>1e13||_e.ascensionCount>0},at=async(le=!1)=>{localStorage.setItem("wallet",JSON.stringify(E)),localStorage.setItem("permaWallet",JSON.stringify(ce)),localStorage.setItem("ascensionUpgradeLevels",JSON.stringify(Oe)),localStorage.setItem("miningUpgradeLevels",JSON.stringify(S)),localStorage.setItem("miningUpgradeLevelsBought",JSON.stringify(N)),localStorage.setItem("miningUpgradeLevelsFree",JSON.stringify(V)),localStorage.setItem("resetLastTimes",JSON.stringify(De)),localStorage.setItem("artifactPermanentBonuses",JSON.stringify(Le)),localStorage.setItem("miningUpgradeLevelsTemp",JSON.stringify(Se)),localStorage.setItem("miningUpgradeLevelsBoughtTemp",JSON.stringify(Ee)),localStorage.setItem("miningUpgradeLevelsFreeTemp",JSON.stringify(Ue)),localStorage.setItem("unlockedRes",JSON.stringify([...ne]));let Be={};for(let Pe of Object.keys(xe))Be[Pe]=Array.from(xe[Pe]||[]);if(localStorage.setItem("masteryItemLevels",JSON.stringify(Q)),localStorage.setItem("keyItemsUnlocked",JSON.stringify(Be)),localStorage.setItem("keysOpened",JSON.stringify(D)),localStorage.setItem("progress",JSON.stringify(Ne)),localStorage.setItem("dropTier",JSON.stringify(O)),localStorage.setItem("settings",JSON.stringify(w)),localStorage.setItem("beaconProgress",JSON.stringify(Ae)),localStorage.setItem("beaconLevels",JSON.stringify(Me)),localStorage.setItem("beaconUpgradeLevels",JSON.stringify(we)),localStorage.setItem("resources",JSON.stringify(re)),localStorage.setItem("beaconActivations",JSON.stringify(R)),localStorage.setItem("beaconNextReqs",JSON.stringify(he)),localStorage.setItem("flags",JSON.stringify(b)),localStorage.setItem("enchantUpgradeLevels",JSON.stringify($)),localStorage.setItem("beaconSpendAmt",JSON.stringify(ve)),localStorage.setItem("craftMasteryLevel",JSON.stringify(W)),localStorage.setItem("craftMasteryProgress",JSON.stringify(ye)),localStorage.setItem("mineLevel",JSON.stringify(oe)),localStorage.setItem("layer",JSON.stringify(ge)),localStorage.setItem("buttonNumClicks",JSON.stringify(ie)),localStorage.setItem("buttonUpgradeLevels",JSON.stringify(L)),localStorage.setItem("buttonStats",JSON.stringify(ue)),localStorage.setItem("stats",JSON.stringify(pe)),localStorage.setItem("ascensionStats",JSON.stringify(_e)),localStorage.setItem("radiumProgress",JSON.stringify(de)),localStorage.setItem("keyUpgradeLevels",JSON.stringify(M)),localStorage.setItem("keyCraftTimes",JSON.stringify(T)),localStorage.setItem("keyCraftAmount",JSON.stringify(C)),localStorage.setItem("keyCraftMastery",JSON.stringify(A)),localStorage.setItem("startOfGame",JSON.stringify(se)),localStorage.setItem("settings",JSON.stringify(w)),localStorage.setItem("antiFlickerFlags",JSON.stringify(J)),localStorage.setItem("saveVersion",JSON.stringify(k)),localStorage.setItem("automationItemsUnlocked",JSON.stringify(x)),localStorage.setItem("activityLogShow",JSON.stringify(q)),localStorage.setItem("challengeActive",JSON.stringify(K)),localStorage.setItem("challengesCompleted",JSON.stringify(B)),localStorage.setItem("beaconSmartSplits",JSON.stringify(Z)),localStorage.setItem("challenge3Multi",JSON.stringify(U)),localStorage.setItem("ascensionLevels",JSON.stringify(I)),_(4,Xe=!0),le){const Pe=Object.keys(localStorage),xt={};Pe.forEach(ht=>{xt[ht]=localStorage.getItem(ht)});const St=btoa(JSON.stringify(xt));await parent.navigator.clipboard.writeText(St),alert("Copied save to clipboard."),_(5,Qe=!0)}setTimeout(()=>{_(4,Xe=!1),_(5,Qe=!1)},1e3),console.log(oe)},bt=()=>{var le;confirm("Are you sure? This is a HARD RESET! All bonuses from ALL reset layers will be lost; you will start with a fresh game.")&&((le=prompt("Type the word 'miscellaneous' to reset."))==null?void 0:le.toString().toLowerCase())==="miscellaneous"&&(localStorage.clear(),location.reload())},kt=async(le=!1)=>{if(le){const Be=prompt("Paste your save here.");if(Be)try{const Pe=JSON.parse(atob(Be));Object.keys(Pe).forEach(St=>{localStorage.setItem(St,Pe[St])}),location.reload()}catch{alert("Save file invalid, using local save instead. Contact the developer on Discord if this is a mistake.")}else alert("Safe file empty, using local save instead.")}if(localStorage!==null){if(localStorage.getItem("wallet")){wallet.set(JSON.parse(localStorage.getItem("wallet")));for(let Be of Object.keys(E))isNaN(E[Be])&&set_store_value(wallet,E[Be]=0,E)}if(localStorage.getItem("permaWallet")){permaWallet.set(JSON.parse(localStorage.getItem("permaWallet")));for(let Be of Object.keys(ce))isNaN(ce[Be])&&set_store_value(permaWallet,ce[Be]=0,ce)}if(localStorage.getItem("miningUpgradeLevels")){miningUpgradeLevels.set(JSON.parse(localStorage.getItem("miningUpgradeLevels")));for(let Be in miningUpgradeLevels)me[Be]!=null&&N[Be]>me[Be].maxLevel&&set_store_value(miningUpgradeLevelsBought,N[Be]=me[Be].maxLevel,N)}if(localStorage.getItem("ascensionUpgradeLevels")&&ascensionUpgradeLevels.set(JSON.parse(localStorage.getItem("ascensionUpgradeLevels"))),localStorage.getItem("miningUpgradeLevelsTemp")&&miningUpgradeLevelsTemp.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsTemp"))),S.length<100&&set_store_value(miningUpgradeLevels,S=[...S,...Array(100-S.length).fill(0)],S),localStorage.getItem("miningUpgradeLevelsBought")&&miningUpgradeLevelsBought.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsBought"))),localStorage.getItem("layer")&&layer.set(JSON.parse(localStorage.getItem("layer"))),localStorage.getItem("miningUpgradeLevelsFree")&&miningUpgradeLevelsFree.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsFree"))),localStorage.getItem("miningUpgradeLevelsBoughtTemp")&&miningUpgradeLevelsBoughtTemp.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsBought"))),localStorage.getItem("miningUpgradeLevelsFreeTemp")&&miningUpgradeLevelsFreeTemp.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsFreeTemp"))),localStorage.getItem("radiumProgress")&&radiumProgress.set(JSON.parse(localStorage.getItem("radiumProgress"))),localStorage.getItem("resetLastTimes")&&resetLastTimes.set(JSON.parse(localStorage.getItem("resetLastTimes"))),localStorage.getItem("artifactPermanentBonuses")&&artifactPermanentBonuses.set(JSON.parse(localStorage.getItem("artifactPermanentBonuses"))),localStorage.getItem("ascensionLevels")&&ascensionLevels.set(JSON.parse(localStorage.getItem("ascensionLevels"))),localStorage.getItem("craftMasteryLevel")&&craftMasteryLevel.set(JSON.parse(localStorage.getItem("craftMasteryLevel"))),localStorage.getItem("craftMasteryProgress")&&craftMasteryProgress.set(JSON.parse(localStorage.getItem("craftMasteryProgress"))),console.log(I),localStorage.getItem("stats")&&stats.set(JSON.parse(localStorage.getItem("stats"))),set_store_value(miningUpgradeLevels,S=S.map((Be,Pe)=>N[Pe]+V[Pe]),S),localStorage.getItem("progress")&&unlockedRes.set(JSON.parse(localStorage.getItem("progress"))),localStorage.getItem("keysOpened")&&keysOpened.set(JSON.parse(localStorage.getItem("keysOpened"))),D.length>5&&set_store_value(keysOpened,D=D.slice(0,5),D),localStorage.getItem("keyItemsUnlocked")){const Be=JSON.parse(localStorage.getItem("keyItemsUnlocked")),Pe={};for(let xt in Be)Pe[xt]=new Set(Be[xt]);keyItemsUnlocked.set(Pe)}localStorage.getItem("beaconSpendAmt")&&beaconSpendAmt.set(JSON.parse(localStorage.getItem("beaconSpendAmt"))),set_store_value(unlockedRes,ne=new Set,ne);for(let[Be,Pe]of Object.entries(E))Pe>0&&!ne.has(Be)&&ne.add(Be);S[6]>0&&set_store_value(visibleTier,O=2,O),S[9]>0&&set_store_value(visibleTier,O=3,O),S[14]>0&&set_store_value(visibleTier,O=4,O),localStorage.getItem("settings")&&(settings.set(JSON.parse(localStorage.getItem("settings"))),_(6,qe=w.buyAmount)),localStorage.getItem("beaconProgress")&&beaconProgress.set(JSON.parse(localStorage.getItem("beaconProgress"))),localStorage.getItem("beaconLevels")&&beaconLevels.set(JSON.parse(localStorage.getItem("beaconLevels"))),localStorage.getItem("beaconNextReqs")&&beaconNextReqs.set(JSON.parse(localStorage.getItem("beaconNextReqs"))),localStorage.getItem("beaconUpgradeLevels")&&beaconUpgradeLevels.set(JSON.parse(localStorage.getItem("beaconUpgradeLevels"))),localStorage.getItem("resources")&&resources.set(JSON.parse(localStorage.getItem("resources"))),localStorage.getItem("beaconActivations")&&beaconActivations.set(JSON.parse(localStorage.getItem("beaconActivations"))),localStorage.getItem("flags")&&flags.set(JSON.parse(localStorage.getItem("flags"))),localStorage.getItem("enchantUpgradeLevels")&&enchantUpgradeLevels.set(JSON.parse(localStorage.getItem("enchantUpgradeLevels")));for(let Be in $)$[Be]<0&&set_store_value(enchantUpgradeLevels,$[Be]=0,$);if(localStorage.getItem("mineLevel")&&mineLevel.set(JSON.parse(localStorage.getItem("mineLevel"))),localStorage.getItem("buttonNumClicks")&&buttonNumClicks.set(JSON.parse(localStorage.getItem("buttonNumClicks"))),localStorage.getItem("buttonUpgradeLevels")&&buttonUpgradeLevels.set(JSON.parse(localStorage.getItem("buttonUpgradeLevels"))),localStorage.getItem("buttonStats")&&buttonStats.set(JSON.parse(localStorage.getItem("buttonStats"))),localStorage.getItem("ascensionStats")&&ascensionStats.set(JSON.parse(localStorage.getItem("ascensionStats"))),localStorage.getItem("keyUpgradeLevels")&&keyUpgradeLevels.set(JSON.parse(localStorage.getItem("keyUpgradeLevels"))),localStorage.getItem("keyCraftTimes")&&keyCraftTimes.set(JSON.parse(localStorage.getItem("keyCraftTimes"))),localStorage.getItem("keyCraftAmount")&&keyCraftAmount.set(JSON.parse(localStorage.getItem("keyCraftAmount"))),localStorage.getItem("keyCraftMastery")&&keyCraftMastery.set(JSON.parse(localStorage.getItem("keyCraftMastery"))),localStorage.getItem("startOfGame")&&startOfGame.set(JSON.parse(localStorage.getItem("startOfGame"))),localStorage.getItem("settings")&&settings.set(JSON.parse(localStorage.getItem("settings"))),localStorage.getItem("antiFlickerFlags")&&antiFlickerFlags.set(JSON.parse(localStorage.getItem("antiFlickerFlags"))),localStorage.getItem("saveVersion")&&saveVersion.set(JSON.parse(localStorage.getItem("saveVersion"))),localStorage.getItem("automationItemsUnlocked")&&automationItemsUnlocked.set(JSON.parse(localStorage.getItem("automationItemsUnlocked"))),x.spellcaster)for(let Be of Object.keys(j))set_store_value(enchantThreshold,j[Be]*=.9,j);if(x["spellcaster ii"])for(let Be of Object.keys(j))set_store_value(enchantThreshold,j[Be]*=.9,j);return localStorage.getItem("activityLogShow")&&activityLogShow.set(JSON.parse(localStorage.getItem("activityLogShow"))),localStorage.getItem("challengeActive")&&challengeActive.set(JSON.parse(localStorage.getItem("challengeActive"))),localStorage.getItem("challengesCompleted")&&challengesCompleted.set(JSON.parse(localStorage.getItem("challengesCompleted"))),localStorage.getItem("beaconSmartSplits")&&beaconSmartSplits.set(JSON.parse(localStorage.getItem("beaconSmartSplits"))),localStorage.getItem("challenge3Multi")&&challenge3Multi.set(JSON.parse(localStorage.getItem("challenge3Multi"))),localStorage.getItem("masteryItemLevels")&&masteryItemLevels.set(JSON.parse(localStorage.getItem("masteryItemLevels"))),await yt(),miningDropTable.updateTable(),re.beaconPower<0&&set_store_value(resources,re.beaconPower=0,re),console.log(ae),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable(),x.gateway&&(set_store_value(key2DropTable,X.key3=[1/15e4,1,1,1/15e4,1/1e4],X),key2DropTable.updateTable()),challengeGoals.updateChallengeReqs(),set_store_value(masteryNextReq,F=formula.calcMasteryNextReq(),F),set_store_value(totalCrafts,H=formula.sumObject(C),H),set_store_value(settings,w.speed=1,w),wt(),At(),set_store_value(craftMasteryNextReq,z=formula.calcCraftMasteryNextReq(W),z),_(7,rt=!0),console.log(q),!0}};function wt(){for(let le of Object.keys(te))Q[le]||set_store_value(masteryItemLevels,Q[le]=0,Q)}function At(){for(let le of Object.keys(Q))typeof le!="object"&&(console.log(Q),set_store_value(masteryItemReqs,Y[le]=te[le].base*Math.pow(te[le].increase,Q[le]),Y));for(let le of Object.keys(Y))(typeof le=="object"||Y[le]==null)&&delete Y[le];console.log(Y)}function yt(){set_store_value(wallet,E.energy=E.energizedCrystal||E.energy||0,E),set_store_value(wallet,E.energizedCrystal=void 0,E);const le=k,Be=30;if(le<=0&&(set_store_value(keyUpgradeLevels,M[0]=0,M),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),isNaN(E.slurry)&&set_store_value(wallet,E.slurry=0,E)),le<=1){S[6]>1&&set_store_value(miningUpgradeLevels,S[6]=1,S);for(let Pe in R)isNaN(R[Pe])&&set_store_value(beaconActivations,R[Pe]=0,R)}if(le<=2&&set_store_value(keyCraftTimes,T.energy=[-1,-1],T),le<=3&&(set_store_value(miningUpgradeLevelsBought,N=Array(200).fill(0),N),set_store_value(miningUpgradeLevelsFree,V=Array(200).fill(0),V)),le<=4&&(set_store_value(keyCraftMastery,A.energy=[1,0,3],A),localStorage.clear("miningUpgradeLevelsBought"),localStorage.clear("miningUpgradeLevelsFree")),le<=9){set_store_value(buttonUpgradeLevels,L=Array(200).fill(0),L);for(let Pe in L)G[Pe]&&(L[Pe]>G[Pe].maxLevel&&set_store_value(buttonUpgradeLevels,L[Pe]=G[Pe].maxLevel,L),L[Pe]||set_store_value(buttonUpgradeLevels,L[Pe]=0,L))}if(le<=10&&E.crystals>1e25&&set_store_value(wallet,E.crystals=1e6,E),le<13&&(set_store_value(keyCraftAmount,C.energy=0,C),set_store_value(keyCraftMastery,A={energy:[1,0,3],key3:[1,0,10],key4:[1,0,10],key5:[1,0,10],beacons:[1,0,10]},A)),le<14){for(let Pe=2;Pe<P.length;Pe++)set_store_value(activityLogShow,q[P[Pe].name.toLowerCase()]=!0,q);set_store_value(activityLogShow,q.crafting=!0,q),set_store_value(activityLogShow,q.mythical=!0,q),set_store_value(activityLogShow,q.challenges=!0,q)}if(le<16&&(set_store_value(miningUpgradeLevels,S[6]=0,S),set_store_value(miningUpgradeLevelsBought,N[6]=0,N),set_store_value(miningUpgradeLevels,S[9]=0,S),set_store_value(miningUpgradeLevelsBought,N[9]=0,N),set_store_value(visibleTier,O=1,O),S[6]>0&&set_store_value(visibleTier,O=2,O),S[9]>0&&set_store_value(visibleTier,O=3,O)),le<17){for(let Pe in D)(D[Pe]==1/0||isNaN(D[Pe]))&&set_store_value(keysOpened,D[Pe]=0,D);(isNaN(E.key1)||E.key1==1/0)&&set_store_value(wallet,E.key1=0,E),(isNaN(E.key2)||E.key2==1/0)&&set_store_value(wallet,E.key2=0,E),(isNaN(E.key3)||E.key3==1/0)&&set_store_value(wallet,E.key3=0,E),(isNaN(E.key4)||E.key4==1/0)&&set_store_value(wallet,E.key4=0,E),(isNaN(E.key5)||E.key5==1/0)&&set_store_value(wallet,E.key5=0,E);for(let Pe=0;Pe<200;Pe++)N[Pe]||set_store_value(miningUpgradeLevelsBought,N[Pe]=0,N),S[Pe]||set_store_value(miningUpgradeLevels,S[Pe]=0,S)}le<19&&(w.offlineProgress||set_store_value(settings,w.offlineProgress=!0,w)),le<21&&x["money piles"]&&set_store_value(wallet,E.trophies+=20,E),le<23&&(set_store_value(wallet,E.emagic=E.goldenSigils?E.goldenSigils:void 0,E),set_store_value(wallet,E.goldenSigils=void 0,E)),le<25&&(set_store_value(keyUpgradeLevels,M[2]=0,M),set_store_value(keyUpgradeLevels,M[3]=0,M)),le<26&&set_store_value(ascensionLevels,I={fire:[1,0,2],earth:[1,0,2],water:[1,0,2],magic:[1,0,2],celestial:[1,0,15],antimatter:[1,0,35]},I),le<28&&set_store_value(settings,w.speed=1,w),le<30&&x["game on"]&&set_store_value(automationItemsUnlocked,x.masterful=!0,x),set_store_value(saveVersion,k=Be,k),at()}async function ee(){await kt(),setTimeout(()=>{miningDropTable.updateTable()},250)}let Ve;onMount(()=>{ee(),setInterval(()=>{at()},AUTOSAVE_INTERVAL),setInterval(()=>{_(11,g=formula.getMineXPPerCycle()),_(10,v=formula.getLayersPerCycle())},1063),setInterval(()=>{for(let le of ref.tabs)ut[le]&&ut[le]();b.relocateNavBack&&(_(3,Fe="mining"),set_store_value(flags,b.relocateNavBack=!1,b)),_(9,Ve=!Ve)},1163)});const Ie=()=>ot(),fe=()=>at(),be=()=>kt(!0),Te=()=>at(!0),Je=()=>tt(),We=()=>Ze(),Ge=()=>et("help"),ct=()=>et("settings"),st=()=>bt(),Tt=le=>et(le);return l.$$.update=()=>{l.$$.dirty[0]&2&&_(13,m=Math.min(1,oe.xp/oe.xpNextReq)*100),l.$$.dirty[0]&4&&_(12,y=Math.min(1,ge.blocks/ge.blocksNextReq)*100),l.$$.dirty[0]&1342177281&&E.challengePoints/Ke[K-1]*100,l.$$.dirty[0]&536870912&&_(10,v=Ce)},_(11,g=formula.getMineXPPerCycle()),[E,oe,ge,Fe,Xe,Qe,qe,rt,He,Ve,v,g,y,m,w,ne,ce,je,ze,ot,et,tt,Ze,$e,ut,at,bt,kt,K,Ce,Ke,Ie,fe,be,Te,Je,We,Ge,ct,st,Tt]}class Page extends SvelteComponent{constructor(d){super(),init(this,d,instance,create_fragment,safe_not_equal,{},null,[-1,-1,-1,-1])}}export{Page as component};
