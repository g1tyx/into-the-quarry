var ua=Object.defineProperty;var ha=(l,d,_)=>d in l?ua(l,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):l[d]=_;var Et=(l,d,_)=>(ha(l,typeof d!="symbol"?d+"":d,_),_);import{J as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,e as empty,b as insert_hydration,H as noop,h as detach,I as component_subscribe,o as onMount,K as onDestroy,L as set_store_value,k as element,a as space,q as text,l as claim_element,m as children,c as claim_space,r as claim_text,n as attr,G as append_hydration,M as listen,u as set_data,N as destroy_each,O as run_all,P as set_input_value,g as transition_in,v as group_outros,f as check_outros,d as transition_out,y as create_component,z as claim_component,A as mount_component,B as destroy_component,p as set_style,Q as null_to_empty,R as prevent_default}from"../chunks/index.0fe73fbc.js";import{w as writable}from"../chunks/index.f47e400d.js";function getDefaultExportFromCjs(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var padEnd=function(l,d,_){if(l==null||d==null)return l;var m=String(l),g=typeof d=="number"?d:parseInt(d,10);if(isNaN(g)||!isFinite(g))return m;var y=m.length;if(y>=g)return m;var b=_==null?"":String(_);b===""&&(b=" ");for(var v=g-y;b.length<v;)b+=b;var k=b.length>v?b.substr(0,v):b;return m+k};const t=getDefaultExportFromCjs(padEnd);var n=9e15,e=function(){for(var l=[],d=-323;d<=308;d++)l.push(+("1e"+d));return function(_){return l[_+323]}}(),r=function(l){return l instanceof a?l:new a(l)},i=function(l,d){return new a().fromMantissaExponent(l,d)},o=function(l,d){return new a().fromMantissaExponent_noNormalize(l,d)};function u(l,d,_,m){var g=d.mul(_.pow(m));return a.floor(l.div(g).mul(_.sub(1)).add(1).log10()/_.log10())}function s(l,d,_,m){return d.mul(_.pow(m)).mul(a.sub(1,_.pow(l))).div(a.sub(1,_))}var a=function(){function l(d){this.mantissa=NaN,this.exponent=NaN,d===void 0?(this.m=0,this.e=0):d instanceof l?this.fromDecimal(d):typeof d=="number"?this.fromNumber(d):this.fromString(d)}return Object.defineProperty(l.prototype,"m",{get:function(){return this.mantissa},set:function(d){this.mantissa=d},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"e",{get:function(){return this.exponent},set:function(d){this.exponent=d},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"s",{get:function(){return this.sign()},set:function(d){if(d===0)return this.e=0,void(this.m=0);this.sgn()!==d&&(this.m=-this.m)},enumerable:!1,configurable:!0}),l.fromMantissaExponent=function(d,_){return new l().fromMantissaExponent(d,_)},l.fromMantissaExponent_noNormalize=function(d,_){return new l().fromMantissaExponent_noNormalize(d,_)},l.fromDecimal=function(d){return new l().fromDecimal(d)},l.fromNumber=function(d){return new l().fromNumber(d)},l.fromString=function(d){return new l().fromString(d)},l.fromValue=function(d){return new l().fromValue(d)},l.fromValue_noAlloc=function(d){return d instanceof l?d:new l(d)},l.abs=function(d){return r(d).abs()},l.neg=function(d){return r(d).neg()},l.negate=function(d){return r(d).neg()},l.negated=function(d){return r(d).neg()},l.sign=function(d){return r(d).sign()},l.sgn=function(d){return r(d).sign()},l.round=function(d){return r(d).round()},l.floor=function(d){return r(d).floor()},l.ceil=function(d){return r(d).ceil()},l.trunc=function(d){return r(d).trunc()},l.add=function(d,_){return r(d).add(_)},l.plus=function(d,_){return r(d).add(_)},l.sub=function(d,_){return r(d).sub(_)},l.subtract=function(d,_){return r(d).sub(_)},l.minus=function(d,_){return r(d).sub(_)},l.mul=function(d,_){return r(d).mul(_)},l.multiply=function(d,_){return r(d).mul(_)},l.times=function(d,_){return r(d).mul(_)},l.div=function(d,_){return r(d).div(_)},l.divide=function(d,_){return r(d).div(_)},l.recip=function(d){return r(d).recip()},l.reciprocal=function(d){return r(d).recip()},l.reciprocate=function(d){return r(d).reciprocate()},l.cmp=function(d,_){return r(d).cmp(_)},l.compare=function(d,_){return r(d).cmp(_)},l.eq=function(d,_){return r(d).eq(_)},l.equals=function(d,_){return r(d).eq(_)},l.neq=function(d,_){return r(d).neq(_)},l.notEquals=function(d,_){return r(d).notEquals(_)},l.lt=function(d,_){return r(d).lt(_)},l.lte=function(d,_){return r(d).lte(_)},l.gt=function(d,_){return r(d).gt(_)},l.gte=function(d,_){return r(d).gte(_)},l.max=function(d,_){return r(d).max(_)},l.min=function(d,_){return r(d).min(_)},l.clamp=function(d,_,m){return r(d).clamp(_,m)},l.clampMin=function(d,_){return r(d).clampMin(_)},l.clampMax=function(d,_){return r(d).clampMax(_)},l.cmp_tolerance=function(d,_,m){return r(d).cmp_tolerance(_,m)},l.compare_tolerance=function(d,_,m){return r(d).cmp_tolerance(_,m)},l.eq_tolerance=function(d,_,m){return r(d).eq_tolerance(_,m)},l.equals_tolerance=function(d,_,m){return r(d).eq_tolerance(_,m)},l.neq_tolerance=function(d,_,m){return r(d).neq_tolerance(_,m)},l.notEquals_tolerance=function(d,_,m){return r(d).notEquals_tolerance(_,m)},l.lt_tolerance=function(d,_,m){return r(d).lt_tolerance(_,m)},l.lte_tolerance=function(d,_,m){return r(d).lte_tolerance(_,m)},l.gt_tolerance=function(d,_,m){return r(d).gt_tolerance(_,m)},l.gte_tolerance=function(d,_,m){return r(d).gte_tolerance(_,m)},l.log10=function(d){return r(d).log10()},l.absLog10=function(d){return r(d).absLog10()},l.pLog10=function(d){return r(d).pLog10()},l.log=function(d,_){return r(d).log(_)},l.log2=function(d){return r(d).log2()},l.ln=function(d){return r(d).ln()},l.logarithm=function(d,_){return r(d).logarithm(_)},l.pow10=function(d){return Number.isInteger(d)?o(1,d):i(Math.pow(10,d%1),Math.trunc(d))},l.pow=function(d,_){return typeof d=="number"&&d===10&&typeof _=="number"&&Number.isInteger(_)?o(1,_):r(d).pow(_)},l.exp=function(d){return r(d).exp()},l.sqr=function(d){return r(d).sqr()},l.sqrt=function(d){return r(d).sqrt()},l.cube=function(d){return r(d).cube()},l.cbrt=function(d){return r(d).cbrt()},l.dp=function(d){return r(d).dp()},l.decimalPlaces=function(d){return r(d).dp()},l.affordGeometricSeries=function(d,_,m,g){return u(r(d),r(_),r(m),g)},l.sumGeometricSeries=function(d,_,m,g){return s(d,r(_),r(m),g)},l.affordArithmeticSeries=function(d,_,m,g){return function(y,b,v,k){var w=b.add(k.mul(v)).sub(v.div(2)),I=w.pow(2);return w.neg().add(I.add(v.mul(y).mul(2)).sqrt()).div(v).floor()}(r(d),r(_),r(m),r(g))},l.sumArithmeticSeries=function(d,_,m,g){return function(y,b,v,k){var w=b.add(k.mul(v));return y.div(2).mul(w.mul(2).plus(y.sub(1).mul(v)))}(r(d),r(_),r(m),r(g))},l.efficiencyOfPurchase=function(d,_,m){return function(g,y,b){return g.div(y).add(g.div(b))}(r(d),r(_),r(m))},l.randomDecimalForTesting=function(d){if(20*Math.random()<1)return o(0,0);var _=10*Math.random();10*Math.random()<1&&(_=Math.round(_)),_*=Math.sign(2*Math.random()-1);var m=Math.floor(Math.random()*d*2)-d;return i(_,m)},l.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var d=Math.floor(Math.log10(Math.abs(this.m)));return this.m=d===-324?10*this.m/1e-323:this.m/e(d),this.e+=d,this},l.prototype.fromMantissaExponent=function(d,_){return isFinite(d)&&isFinite(_)?(this.m=d,this.e=_,this.normalize(),this):(d=Number.NaN,_=Number.NaN,this)},l.prototype.fromMantissaExponent_noNormalize=function(d,_){return this.m=d,this.e=_,this},l.prototype.fromDecimal=function(d){return this.m=d.m,this.e=d.e,this},l.prototype.fromNumber=function(d){return isNaN(d)?(this.m=Number.NaN,this.e=Number.NaN):d===Number.POSITIVE_INFINITY?(this.m=1,this.e=n):d===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=n):d===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(d))),this.m=this.e===-324?10*d/1e-323:d/e(this.e),this.normalize()),this},l.prototype.fromString=function(d){if(d.indexOf("e")!==-1){var _=d.split("e");this.m=parseFloat(_[0]),this.e=parseFloat(_[1]),this.normalize()}else if(d==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(d)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+d);return this},l.prototype.fromValue=function(d){return d instanceof l?this.fromDecimal(d):typeof d=="number"?this.fromNumber(d):typeof d=="string"?this.fromString(d):(this.m=0,this.e=0,this)},l.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var d=this.m*e(this.e);if(!isFinite(d)||this.e<0)return d;var _=Math.round(d);return Math.abs(_-d)<1e-10?_:d},l.prototype.mantissaWithDecimalPlaces=function(d){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var _=d+1,m=Math.ceil(Math.log10(Math.abs(this.m))),g=Math.round(this.m*Math.pow(10,_-m))*Math.pow(10,m-_);return parseFloat(g.toFixed(Math.max(_-m,0)))},l.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=n?this.m>0?"Infinity":"-Infinity":this.e<=-n||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},l.prototype.toExponential=function(d){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=n)return this.m>0?"Infinity":"-Infinity";if(this.e<=-n||this.m===0)return"0"+(d>0?t(".",d+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(d);isFinite(d)||(d=17);var _=d+1,m=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,_-m))*Math.pow(10,m-_)).toFixed(Math.max(_-m,0))+"e"+(this.e>=0?"+":"")+this.e},l.prototype.toFixed=function(d){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=n?this.m>0?"Infinity":"-Infinity":this.e<=-n||this.m===0?"0"+(d>0?t(".",d+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(d>0?t(".",d+1,"0"):""):this.toNumber().toFixed(d)},l.prototype.toPrecision=function(d){return this.e<=-7?this.toExponential(d-1):d>this.e?this.toFixed(d-this.e-1):this.toExponential(d-1)},l.prototype.valueOf=function(){return this.toString()},l.prototype.toJSON=function(){return this.toString()},l.prototype.toStringWithDecimalPlaces=function(d){return this.toExponential(d)},l.prototype.abs=function(){return o(Math.abs(this.m),this.e)},l.prototype.neg=function(){return o(-this.m,this.e)},l.prototype.negate=function(){return this.neg()},l.prototype.negated=function(){return this.neg()},l.prototype.sign=function(){return Math.sign(this.m)},l.prototype.sgn=function(){return this.sign()},l.prototype.round=function(){return this.e<-1?new l(0):this.e<17?new l(Math.round(this.toNumber())):this},l.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new l(0):new l(-1):this.e<17?new l(Math.floor(this.toNumber())):this},l.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new l(1):new l(0):this.e<17?new l(Math.ceil(this.toNumber())):this},l.prototype.trunc=function(){return this.e<0?new l(0):this.e<17?new l(Math.trunc(this.toNumber())):this},l.prototype.add=function(d){var _,m,g=r(d);if(this.m===0)return g;if(g.m===0)return this;if(this.e>=g.e?(_=this,m=g):(_=g,m=this),_.e-m.e>17)return _;var y=Math.round(1e14*_.m+1e14*m.m*e(m.e-_.e));return i(y,_.e-14)},l.prototype.plus=function(d){return this.add(d)},l.prototype.sub=function(d){return this.add(r(d).neg())},l.prototype.subtract=function(d){return this.sub(d)},l.prototype.minus=function(d){return this.sub(d)},l.prototype.mul=function(d){if(typeof d=="number")return d<1e307&&d>-1e307?i(this.m*d,this.e):i(1e-307*this.m*d,this.e+307);var _=typeof d=="string"?new l(d):d;return i(this.m*_.m,this.e+_.e)},l.prototype.multiply=function(d){return this.mul(d)},l.prototype.times=function(d){return this.mul(d)},l.prototype.div=function(d){return this.mul(r(d).recip())},l.prototype.divide=function(d){return this.div(d)},l.prototype.divideBy=function(d){return this.div(d)},l.prototype.dividedBy=function(d){return this.div(d)},l.prototype.recip=function(){return i(1/this.m,-this.e)},l.prototype.reciprocal=function(){return this.recip()},l.prototype.reciprocate=function(){return this.recip()},l.prototype.cmp=function(d){var _=r(d);if(this.m===0){if(_.m===0)return 0;if(_.m<0)return 1;if(_.m>0)return-1}if(_.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return _.m<0||this.e>_.e?1:this.e<_.e?-1:this.m>_.m?1:this.m<_.m?-1:0;if(this.m<0)return _.m>0||this.e>_.e?-1:this.e<_.e||this.m>_.m?1:this.m<_.m?-1:0;throw Error("Unreachable code")},l.prototype.compare=function(d){return this.cmp(d)},l.prototype.eq=function(d){var _=r(d);return this.e===_.e&&this.m===_.m},l.prototype.equals=function(d){return this.eq(d)},l.prototype.neq=function(d){return!this.eq(d)},l.prototype.notEquals=function(d){return this.neq(d)},l.prototype.lt=function(d){var _=r(d);return this.m===0?_.m>0:_.m===0?this.m<=0:this.e===_.e?this.m<_.m:this.m>0?_.m>0&&this.e<_.e:_.m>0||this.e>_.e},l.prototype.lte=function(d){return!this.gt(d)},l.prototype.gt=function(d){var _=r(d);return this.m===0?_.m<0:_.m===0?this.m>0:this.e===_.e?this.m>_.m:this.m>0?_.m<0||this.e>_.e:_.m<0&&this.e<_.e},l.prototype.gte=function(d){return!this.lt(d)},l.prototype.max=function(d){var _=r(d);return this.lt(_)?_:this},l.prototype.min=function(d){var _=r(d);return this.gt(_)?_:this},l.prototype.clamp=function(d,_){return this.max(d).min(_)},l.prototype.clampMin=function(d){return this.max(d)},l.prototype.clampMax=function(d){return this.min(d)},l.prototype.cmp_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)?0:this.cmp(m)},l.prototype.compare_tolerance=function(d,_){return this.cmp_tolerance(d,_)},l.prototype.eq_tolerance=function(d,_){var m=r(d);return l.lte(this.sub(m).abs(),l.max(this.abs(),m.abs()).mul(_))},l.prototype.equals_tolerance=function(d,_){return this.eq_tolerance(d,_)},l.prototype.neq_tolerance=function(d,_){return!this.eq_tolerance(d,_)},l.prototype.notEquals_tolerance=function(d,_){return this.neq_tolerance(d,_)},l.prototype.lt_tolerance=function(d,_){var m=r(d);return!this.eq_tolerance(m,_)&&this.lt(m)},l.prototype.lte_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)||this.lt(m)},l.prototype.gt_tolerance=function(d,_){var m=r(d);return!this.eq_tolerance(m,_)&&this.gt(m)},l.prototype.gte_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)||this.gt(m)},l.prototype.log10=function(){return this.e+Math.log10(this.m)},l.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},l.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},l.prototype.log=function(d){return Math.LN10/Math.log(d)*this.log10()},l.prototype.log2=function(){return 3.321928094887362*this.log10()},l.prototype.ln=function(){return 2.302585092994045*this.log10()},l.prototype.logarithm=function(d){return this.log(d)},l.prototype.pow=function(d){var _,m=d instanceof l?d.toNumber():d,g=this.e*m;if(Number.isSafeInteger(g)&&(_=Math.pow(this.m,m),isFinite(_)&&_!==0))return i(_,g);var y=Math.trunc(g),b=g-y;if(_=Math.pow(10,m*Math.log10(this.m)+b),isFinite(_)&&_!==0)return i(_,y);var v=l.pow10(m*this.absLog10());return this.sign()===-1?Math.abs(m%2)===1?v.neg():Math.abs(m%2)===0?v:new l(Number.NaN):v},l.prototype.pow_base=function(d){return r(d).pow(this)},l.prototype.factorial=function(){var d=this.toNumber()+1;return l.pow(d/Math.E*Math.sqrt(d*Math.sinh(1/d)+1/(810*Math.pow(d,6))),d).mul(Math.sqrt(2*Math.PI/d))},l.prototype.exp=function(){var d=this.toNumber();return-706<d&&d<709?l.fromNumber(Math.exp(d)):l.pow(Math.E,d)},l.prototype.sqr=function(){return i(Math.pow(this.m,2),2*this.e)},l.prototype.sqrt=function(){return this.m<0?new l(Number.NaN):this.e%2!=0?i(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):i(Math.sqrt(this.m),Math.floor(this.e/2))},l.prototype.cube=function(){return i(Math.pow(this.m,3),3*this.e)},l.prototype.cbrt=function(){var d=1,_=this.m;_<0&&(d=-1,_=-_);var m=d*Math.pow(_,1/3),g=this.e%3;return i(g===1||g===-1?2.154434690031883*m:g!==0?4.641588833612778*m:m,Math.floor(this.e/3))},l.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},l.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},l.prototype.tanh=function(){return this.sinh().div(this.cosh())},l.prototype.asinh=function(){return l.ln(this.add(this.sqr().add(1).sqrt()))},l.prototype.acosh=function(){return l.ln(this.add(this.sqr().sub(1).sqrt()))},l.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:l.ln(this.add(1).div(new l(1).sub(this)))/2},l.prototype.ascensionPenalty=function(d){return d===0?this:this.pow(Math.pow(10,-d))},l.prototype.egg=function(){return this.add(9)},l.prototype.lessThanOrEqualTo=function(d){return this.cmp(d)<1},l.prototype.lessThan=function(d){return this.cmp(d)<0},l.prototype.greaterThanOrEqualTo=function(d){return this.cmp(d)>-1},l.prototype.greaterThan=function(d){return this.cmp(d)>0},l.prototype.decimalPlaces=function(){return this.dp()},l.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var d=this.mantissa,_=-this.exponent,m=1;Math.abs(Math.round(d*m)/m-d)>1e-10;)m*=10,_++;return _>0?_:0},Object.defineProperty(l,"MAX_VALUE",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(l,"MIN_VALUE",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(l,"NUMBER_MAX_VALUE",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(l,"NUMBER_MIN_VALUE",{get:function(){return f},enumerable:!1,configurable:!0}),l}(),h=o(1,n),c=o(1,-n),p=r(Number.MAX_VALUE),f=r(Number.MIN_VALUE);class ref{}Et(ref,"colors",{default:"#ffffff",gems:"text-red-500",gold:"text-yellow-500",orbs:"text-neutral-400",key1:"text-green-400",key2:"text-blue-400",key3:"text-pink-400",key4:"text-violet-400",key5:"text-amber-400",beacons:"text-sky-400",beaconPower:"text-cyan-300",fame:"text-orange-400",crystals:"text-indigo-300",sigils:"text-fuchsia-600",slurry:"text-teal-400",artifacts:"text-slate-200",challengePoints:"text-amber-500",warp:"text-emerald-600",trophies:"text-amber-500",dust:"text-indigo-600",stars:"text-transparent text-stone-100 bg-clip-text bg-gradient-to-br from-fuchsia-300 to-violet-700",efire:"text-orange-400 text-shadow-gray",eearth:"text-stone-200 text-shadow-gray",emagic:"text-amber-200 text-shadow-gray",ewater:"text-sky-300 text-shadow-gray",ecelestial:"text-violet-300 text-shadow-gray",radium:"text-lime-300"}),Et(ref,"challengePointValues",{default:0,beaconPower:.025,gems:.15,key1:1,key2:36,key3:850,beaconLevels:10}),Et(ref,"displayNames",{key1:"[*] key",key2:"[**] key",key3:"[***] key",key4:"[****] key",key5:"[*****] key",beaconPower:"Beacon Power",efire:"[@] fire",eearth:"[@] earth",ewater:"[@] water",ecelestial:"[@] celestial",emagic:"[@] magic",stars:"*stars*"}),Et(ref,"walletExclude",{totalFame:!0,energizedCrystal:!0,challengePoints:!0}),Et(ref,"dropTiers",{default:1,gems:0,gold:1,key1:1,orbs:1,crystals:2,beacons:2,fame:2,key2:3,slurry:3,sigils:3,radium:3,artifacts:4,key3:4,warp:4,trophies:4,dust:4,key4:4,efire:5,eearth:5,emagic:5,ewater:5,ecelestial:5,stars:3}),Et(ref,"keyMainNames",{1:"T1 [*]",2:"T2 [**]",3:"T3 [***]",4:"T4 [****]",5:"T5 [*****]"}),Et(ref,"dropTierColors",{0:"text-white",1:"text-white",2:"text-green-200",3:"text-blue-300",4:"text-purple-300"}),Et(ref,"tabs",["mining","keys","beacons","button","relocate","enchants","automation","challenges","artifacts","ascension","mastery"]),Et(ref,"tabNotUnlockedText",{beacons:"Find a beacon while mining to unlock.",sigils:"Find a sigil while mining to unlock.",relocate:"Use 200 total keys to unlock.",enchants:"Relocate and gain at least 100 fame to unlock.",automation:"Relocate and gain at least 1 fame to unlock.",challenges:"Buy challenges with fame to unlock.",artifacts:"Find an artifact with a T3 [***] or higher key to unlock.",mastery:"???",ascension:"Gain a total of 25 trophies.",button:"Reach Mining Level 8 to unlock."}),Et(ref,"miningUpgradeSortOrder",{haste:1,efficiency:2,fortune:3,shiny:4,"[*] key finder":5,"lootmaster i":6,"[**] key finder":7,"lootmaster ii":8,"[***] key finder":9,"lootmaster iii":10,"key mastery":11,legendary:12,"efficiency ii":13,"legendary ii":14,"efficiency iii":15,"legendary iii":16,expansive:17,clockwork:18,reflectors:19,mythical:20,lockpicks:21,overload:22,hardened:23,excavator:24,default:1e300}),Et(ref,"tutorialModeDescriptions",{default:"[not yet implemented]",gems:"Gain gems on each mining cycle and from keys.",gold:"Gain gold from random drops while mining and from keys.",key1:"Gain keys from random drops while mining, and the Key Finder upgrade.",key2:"Gain keys from random drops while mining, and the Key Finder upgrade.",key3:"Gain keys from random drops while mining, and the Key Finder upgrade.",key4:"Gain keys from random drops while mining, and the Key Finder upgrade.",key5:"Gain keys from random drops while mining, and the Key Finder upgrade.",orbs:"Gain orbs from random drops while mining and from keys.",crystals:"Gain crystals from random drops while mining, from keys, and from the button.",beacons:"Gain beacons from random drops while mining and from keys.",fame:"Gain fame from relocating, and rarely from keys.",slurry:"Gain slurry from breaking down keys.",sigils:"Gain sigils from random drops while mining and from keys.",artifacts:"Very rarely gain artifacts from keys, the button, and random drops while mining.",warp:"Gain warp while in a challenge. Gain more warp at higher challenge levels.",trophies:"Gain trophies from completing challenges.",dust:"Gain dust from ascension, and very rarely while mining.",radium:"Gain radium from clicking the button.",goldenSigils:"Gain golden sigils from crafting."}),Et(ref,"buttonBaseRewards",{okay:2e3,good:4e3,great:6500,excellent:9500,incredible:15e3,perfect:4e4}),Et(ref,"buttonColors",{okay:"text-gray-500",good:"text-green-500",great:"text-sky-500",excellent:"text-violet-500",incredible:"text-pink-500",perfect:"text-amber-500"}),Et(ref,"buttonDistances",{good:10,great:7,excellent:4,incredible:2,perfect:1});function single$3(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>g)},add(g){m(y=>y+g)},sub(g,y=!1){m(b=>y?b-g:Math.max(b,0))},multiply(g){m(y=>y*g)},divide(g){m(y=>y/g)}}}function array$6(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>g)},add(g){m(y=>y+g)},sub(g,y=!1){m(b=>y?b-g:Math.max(b,0))},multiply(g){m(y=>y*g)},divide(g){m(y=>y/g)}}}const beaconBonuses=array$6(Array(30).fill(1)),beaconNameText=array$6(["Beacon Power Multiplier","Mine Speed Multiplier","Droprate Multiplier I","Gem Bonus","Fame Bonus","Key Finder Yield","Crafting Yield","Key Droprate"].concat(Array(26).fill(""))),beaconMiningLevelReqs=array$6([0,0,0,12,14,16,24,27,36,40]),beaconFormulas=array$6([function(l){return 1+Math.pow(l,.65)*.01},function(l){return 1+3.125*(l/(l+4e4))},function(l){return 1+Math.pow(l,.8)*.0035},function(l){return 1+Math.pow(l,.9)*.02},function(l){return 1+Math.pow(l,.5)*.02},function(l){return 1+Math.pow(l,.5)*.05},function(l){return 1+Math.pow(l,1.2)*25e-6},function(l){return 1+Math.pow(l,.6)*.003}].concat(Array(25).fill(function(l){return 1}))),beaconNextReqs=array$6(Array(3).fill(250).concat(Array(3).fill(5e7)).concat(Array(2).fill(1e11).concat(Array(2).fill(1e17)))),baseBeaconNextReqs=array$6(Array(3).fill(250).concat(Array(3).fill(5e7)).concat(Array(2).fill(1e11).concat(Array(2).fill(1e17)))),beaconNums=array$6(Array(3).fill([250,1.0005]).concat(Array(3).fill([5e7,1.0005]).concat(Array(2).fill([1e11,1.0005]).concat(Array(2).fill([1e17,1.0005]))))),beaconMaxLevels=array$6(Array(10).fill(1e6)),beaconSpendAmt=single$3(1),beaconPowerFlavorText=single$3(1),beaconUpgrades=array$6([{name:"Supercharged",description:"Increases all beacon path progress.",cost:{beaconPower:5e3},ratio:1.33,formula:l=>l>100?26+Math.pow(l-100,.6)*.2:1+.25*l,mineLevelReq:0,isPercent:!0,prefix:"+",maxLevel:300,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{name:"Shining Light",description:"Increases the droprate for beacons (mining only).",cost:{beaconPower:1e4},ratio:2,formula:l=>1+.1*l,mineLevelReq:6,isPercent:!1,prefix:"x",suffix:"  droprate",maxLevel:100,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{name:"Ramping Power",description:"Unspent beacon power boosts beacon path progress. Upgrades multiply this amount.",cost:{beaconPower:25e5},ratio:4,formula:l=>l===0?1:1+Math.log((l+1)*get_store_value(resources).beaconPower/1e3+1)/Math.log(5),mineLevelReq:12,isPercent:!0,suffix:" bonus",maxLevel:10,notes:""}]);function array$5(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>g)},add(g){m(y=>y+g)},sub(g,y=!1){m(b=>y?b-g:Math.max(b,0))},multiply(g){m(y=>y*g)},divide(g){m(y=>y/g)}}}function object$4(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>(y=g,y))},setItem(g,y){m(b=>(b[g.toString().toLowerCase()]=y,b))},add(g,y){m(b=>(b[g.toString().toLowerCase()]+=y,b))},sub(g,y,b=!1){m(v=>(b?v[g]-=y:v[g.toString().toLowerCase()]=Math.max(v[g],0),v))},multiply(g,y){m(b=>(b[g.toString().toLowerCase()]*=y,b))},divide(g,y){m(b=>(b[g.toString().toLowerCase()]/=y,b))}}}function dropTable$1(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g,y){m(b=>(b[g]=y,b))},add(g,y){m(b=>(b[g]+=y,b))},sub(g,y,b=!1){m(v=>(b?v[g]-=y:v[g]=Math.max(v[g],0),v))},multiply(g,y){m(b=>(b[g]*=y,b))},divide(g,y){m(b=>(b[g]/=y,b))},updateTable(){m(g=>{for(let[y,b]of Object.entries(g)){if(y=="tier")continue;let v=b[3]*get_store_value(miningUpgrades)[13].formula(get_store_value(miningUpgradeLevels)[13])*get_store_value(keyUpgrades)[0].formula(get_store_value(keyUpgradeLevels)[0])*(y==="artifacts"?get_store_value(miningUpgrades)[21].formula(get_store_value(miningUpgradeLevels)[21]):1)*get_store_value(beaconBonuses)[7];g[y]=[Math.min(1,v>b[4]?b[4]+Math.pow(v-b[4],3):v),b[1],b[2],b[3],b[4]||1]}return g})}}}const key1DropTable=dropTable$1({tier:1,gems:[.6,10,200,.6,.9],orbs:[.4,3,10,.4,.9],gold:[.2,10,20,.2,.9],beacons:[.025,1,1,.025,.1],key2:[1/2500,1,1,1/2500,.01]}),key2DropTable=dropTable$1({tier:2,gems:[.25,1e6,1e7,.25,.6],gold:[.15,1e4,1e5,.15,.6],orbs:[.15,3200,18e3,.15,.6],sigils:[.11,1,1,.11,.6],beacons:[.06,250,1e3,.06,.6],key3:[1/12e4,1,1,1/12e4,.001]}),key3DropTable=dropTable$1({tier:3,gems:[.25,1e14,1e15,.25,.4],gold:[.15,1e8,5e8,.075,.4],crystals:[.11,1e3,1e4,.11,.25],orbs:[.06,22e5,11e6,.06,.25],beacons:[.04,1e3,3500,.04,.25],sigils:[.035,45,160,.035,.25],artifacts:[42e-8,1,1,42e-7,.001],key4:[1/1e7,1,1,1/1e7,1e-4]}),key4DropTable=dropTable$1({tier:4,gems:[.03,1e26,1e29,.03],gold:[.03,1e14,1e16,.03],crystals:[.02,1e3,1e4,.02],orbs:[.016,5e7,1e9,.016],sigils:[.016,2500,1e4,.016],artifacts:[5e-5,15,50,5e-5],key4:[1/5e5,1,1,1/5e5],key5:[1/1e11,1,1,1/1e11]}),key5DropTable=dropTable$1({}),keyRewardText=object$4(""),keyGainFlavorText=object$4({});array$5(Array(20).fill(0));const keyUpgrades=array$5([{index:0,name:"Mysterious Potion",description:"Concoct a potion that improves key rates for ALL keys.",cost:{slurry:100,sigils:100},ratio:1.3,formula:l=>1+.2*Math.pow(l,.8),unlockAt:()=>get_store_value(wallet).slurry>0,isPercent:!1,suffix:"x droprates",maxLevel:600,notes:""},{index:1,name:"Refinery",description:"Increases slurry gain.",cost:{sigils:500},ratio:1.3,formula:l=>1+.2*l,unlockAt:()=>get_store_value(wallet).slurry>0,isPercent:!1,suffix:"x slurry",maxLevel:400,notes:""},{index:2,name:"Rift Control",description:"Decreases the cost ratio for energized crystals.",cost:{sigils:5e5,warp:2500},ratio:1.3,formula:l=>3-.053*Math.pow(l,.6),unlockAt:()=>get_store_value(wallet).sigils>=1e4||get_store_value(keyUpgradeLevels)[1]>0,isPercent:!1,suffix:" cost ratio",maxLevel:100,notes:""},{index:3,name:"Special Slurry",description:"Converting a high amount of keys into slurry will also give sigils. Increase the amount by 20% per level.",cost:{warp:3e3},ratio:1.3,formula:l=>.8+.2*l,unlockAt:()=>get_store_value(wallet).sigils>=1e4||get_store_value(keyUpgradeLevels)[1]>0,isPercent:!0,suffix:" convert sigils",maxLevel:100,notes:""}]),keyCrafts=array$5([{item:"energizedCrystal",name:"Energized Crystal",style:"text-emerald-300",stylebg:"bg-emerald-300",cost:{crystals:1},craftTime:30,baseAmount:1,ratio:10,unlockAt:()=>get_store_value(wallet).crystals>0},{item:"beacons",name:"Beacons",style:"text-sky-400",stylebg:"bg-sky-400",cost:{slurry:1e3,sigils:1},craftTime:60,baseAmount:1e3,ratio:1.025,unlockAt:()=>get_store_value(wallet).beacons>0},{item:"key2",name:"[**] Key",style:"text-blue-400",stylebg:"bg-blue-400",cost:{slurry:100},craftTime:100,baseAmount:32,ratio:1.04,unlockAt:()=>get_store_value(wallet).key2>0||get_store_value(keysOpened)[1]>0||get_store_value(keysOpened)[0]>1e4},{item:"key3",name:"[***] Key",style:"text-pink-400",stylebg:"bg-pink-400",cost:{slurry:1e4,sigils:10},craftTime:860,baseAmount:16,ratio:1.04,unlockAt:()=>get_store_value(wallet).key3>0||get_store_value(keysOpened)[2]>0||get_store_value(keysOpened)[1]>1e5},{item:"key5",name:"[*****] Key [NOT IMPLEMENTED]",style:"text-amber-400",stylebg:"bg-amber-400",cost:{slurry:1e11,sigils:1e5},craftTime:3600,baseAmount:1,ratio:1.06,unlockAt:()=>get_store_value(wallet).key5>0||get_store_value(keysOpened)[4]>0||get_store_value(keysOpened)[3]>1e5},{item:"efire",name:"Fire Essence",style:"text-orange-400",stylebg:"bg-orange-400",cost:{fame:1e15},craftTime:240,baseAmount:1,ratio:1.1,unlockAt:()=>get_store_value(wallet).totalFame>1e15},{item:"eearth",name:"Earth Essence",style:"text-stone-200",stylebg:"bg-stone-200",cost:{dust:1e4},craftTime:240,baseAmount:1,ratio:1.1,unlockAt:()=>get_store_value(wallet).dust>7500},{item:"emagic",name:"Magic Essence",style:"text-amber-200",stylebg:"bg-amber-200",cost:{sigils:1e11},craftTime:240,baseAmount:1,ratio:1.1,unlockAt:()=>get_store_value(wallet).sigils>1e10},{item:"ewater",name:"Water Essence",style:"text-sky-300",stylebg:"bg-sky-300",cost:{orbs:1e15},craftTime:240,baseAmount:1,ratio:1.1,unlockAt:()=>get_store_value(wallet).orbs>1e14},{item:"ecelestial",name:"Celestial Essence",style:"text-transparent bg-clip-text bg-gradient-to-br from-fuchsia-300 to-violet-700",stylebg:"bg-gradient-to-br from-fuchsia-300 to-violet-700",cost:{stars:10},craftTime:240,baseAmount:1,ratio:1.1,unlockAt:()=>get_store_value(wallet).stars>1}]);function object$3(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y,b){m(v=>(v[y]=b,v))},add(y,b){m(v=>(v[y]+=b,v))},sub(y,b,v=!1){m(k=>(v?k[y]-=b:k[y]=Math.max(k[y],0),k))},multiply(y,b){m(v=>(v[y]*=b,v))},divide(y,b){m(v=>(v[y]/=b,v))}}}const allMultipliers=object$3({gems:{description:"Multiplying gem gain by",prefix:"x",unlockAt:1,formula:l=>1+.35*Math.pow(l,.96),colorStyle:"gems"},mineSpeed:{description:"Multiplying mining speed by",prefix:"x",unlockAt:1,formula:l=>1+Math.pow(Math.log(l/1e3+1),.75),colorStyle:"gold"},mineXP:{description:"Multiplying mining experience by",prefix:"x",unlockAt:100,formula:l=>1+Math.log10(l/60+1),colorStyle:"artifacts"},artifacts:{description:"Multiplying artifact drop chance by",prefix:"x",unlockAt:1e3,formula:l=>1+Math.pow(Math.log10(l/1e4+1),.33),colorStyle:"artifacts"},radium:{description:"Multiplying radioactivity gain by ",prefix:"x",unlockAt:1e4,formula:l=>1+Math.log(Math.pow(l,.8)/1100+1),colorStyle:"radium"}});function single$2(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y){m(b=>y)},add(y){m(b=>b+y)},sub(y,b=!1){m(v=>b?v-y:Math.max(v,0))},multiply(y){m(b=>b*y)},divide(y){m(b=>b/y)}}}function array$4(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y){m(b=>y)},add(y){m(b=>b+y)},sub(y,b=!1){m(v=>b?v-y:Math.max(v,0))},multiply(y){m(b=>b*y)},divide(y){m(b=>b/y)}}}const radiumGainText=single$2(0),buttonUpgrades=array$4([{index:0,name:"Stability",description:"The button moves less after each click.",cost:{radium:1},ratio:4,formula:l=>1-Math.pow(l/10.4,.45),unlockAt:()=>!0,isPercent:!1,suffix:"x movement multiplier",isRadiumUpgrade:!0,maxLevel:10,notes:""},{index:1,name:"Hot Button",description:"Increases radioactivity gain from the button.",cost:{crystals:1100},ratio:1.25,formula:l=>1+l*.04,unlockAt:()=>!0,prefix:"x",isPercent:!1,maxLevel:100,notes:""},{index:2,name:"I'm Feeling Nice",description:"The center of the button is highlighted.",cost:{crystals:1e4},ratio:4e150,formula:l=>l,unlockAt:()=>!0,isPercent:!1,maxLevel:1,notes:""},{index:3,name:"Insanity!",description:"Your lifetime Incredible and Perfect clicks increase mining speed; Perfect clicks have a drastically higher impact.",cost:{radium:500},ratio:4e150,formula:l=>1+Math.min(4,(get_store_value(buttonNumClicks).perfect*75e-5+get_store_value(buttonNumClicks).incredible*75e-6)*Math.min(1,l)),unlockAt:()=>!0,isPercent:!1,isRadiumUpgrade:!0,suffix:"x speed multiplier",maxLevel:1,notes:""},{index:4,name:"Fractals",description:"Increases mining experience gained from excellent+ button clicks.",cost:{crystals:1e5},ratio:1.25,formula:l=>1+Math.pow(l,2.5)*1.35,unlockAt:()=>get_store_value(wallet).crystals>1e3,isPercent:!1,suffix:"x multiplier",maxLevel:65,notes:""},{index:5,name:"The Duck",description:'Increases the chance you get "lucky" and multiply your radioactivity.',cost:{crystals:1e6},ratio:4,formula:l=>l*.01,unlockAt:()=>get_store_value(wallet).crystals>1e4,isPercent:!0,suffix:" chance",maxLevel:25,notes:""},{index:6,name:"Gamma Radiation",description:"Clicks sometimes give warp.",cost:{crystals:1e8},ratio:2,formula:l=>l*.04,unlockAt:()=>get_store_value(wallet).warp>1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0,suffix:" chance",maxLevel:8,notes:""},{index:7,name:"Celestial Shattering",description:"Legends say the perfect click can shatter the fabric of space itself...",cost:{radium:1e3},ratio:4,formula:l=>111111,unlockAt:()=>get_store_value(wallet).crystals>1e6,isRadiumUpgrade:!0,isPercent:!1,maxLevel:1,notes:""}]);class formula{static rNorm(d=0,_=1){const m=1-Math.random(),g=Math.random();return Math.sqrt(-2*Math.log(m))*Math.cos(2*Math.PI*g)*_+d}static rNormTest(){console.log("rNorm Bias Test started");const d=Array(400).fill(0),_=Array(400).fill(0),m=Array(5).fill(0);for(let g=0;g<_.length;g++){for(let y=0;y<d.length;y++){for(let b=0;b<m.length;b++)d[b]=this.rNorm();_[y]=formula.sumArray(d)/1e3}m[g]=formula.sumArray(_)/400}return formula.sumArray(m)/5}static gSum(d,_,m){return d*(1-Math.pow(_,m))/(1-_)}static maxNumGeom(d,_,m){return Math.floor(Math.log(d/_*(m-1)+1)/Math.log(m))}static calculateMaxBuy(d,_,m){const g=1+_/100;return(d*(Math.pow(g,m/d)-1)/(g-1)).toFixed(2)}static sumArray(d){return d.reduce((_,m)=>_+m,0)}static productArray(d){return d.reduce((_,m)=>_*m,1)}static calcFameGainKeys(d){const _=[1,1,1,1,1];_[0]=d[0]<1?1:d[0]<10?1.25+d[0]*.075:d[0]<1e3?2+(d[0]-10)*.004:6.8+Math.pow(d[0]-1e3,.4),2+2*1e4+Math.pow(1e4*((d[0]-1e4)/1e3),.4);for(let m=1;m<d.length;m++)d[m]<1||(d[m]<10?_[m]=1.25+d[m]*.075:d[m]<1e4?_[m]=2+d[m]*(m+1)**2/5e3:_[m]=2+2*(m+1)**2+Math.pow((m+1)*((d[m]-1e4)/1e3),.4));return _}static calcFameGemMulti(d){return Math.log10(d+1)}static calcFameGainBeacons(d){return d>1e6?51+Math.pow((d-1e6)/1e6,.75):d>150?1+(d-150)/2e4:d/150}static calcFameTimeMultiplier(d){if(get_store_value(buttonUpgradeLevels)[6]<1)return 1;const _=(Date.now()-d)/1e3;return 1+9*Math.pow(_/86400,2)}static calcMineSize(d){return Math.pow(d+5,2)}static calcMineQuality(d){return 10+d}static calcButtonRewardBonus(){const d=get_store_value(allMultipliers).radium.formula(get_store_value(wallet).radium||0);return 1*get_store_value(buttonUpgrades)[1].formula(get_store_value(buttonUpgradeLevels)[1])*get_store_value(miningUpgrades)[23].formula(get_store_value(miningUpgradeLevels)[23])*(isNaN(d)?1:d)}static calcHardenedGemBonus(d){return get_store_value(miningUpgradeLevels)[20]<1?1:(1+.1*get_store_value(miningUpgradeLevels)[20])*(Math.log(d.good+2)/Math.log(9)+Math.log(d.great+2)/Math.log(7)+Math.log(d.excellent+2)/Math.log(5)+Math.log(d.incredible+2)/Math.log(3)+Math.log(d.perfect+2)/Math.log(2))}static dispCalcHardenedGemBonus(d,_){return _<1?1:(1+.1*_)*(Math.log(d.good/40+2)/Math.log(9)+Math.log(d.great/25+2)/Math.log(7)+Math.log(d.excellent/20+2)/Math.log(5)+Math.log(d.incredible/15+2)/Math.log(3)+Math.log(d.perfect/10+2)/Math.log(2))}static calcKeySlurryGain(d){let _=(Math.pow(d.key1,.7)||0)*.02+(Math.pow(d.key2,.85)||0)*.2+(Math.pow(d.key3,.93)||0)*18+(Math.pow(d.key4,.98)||0)*16500+(Math.pow(d.key5,.999)||0)*145e7;return isNaN(_)?(alert('note: this feature is bugged, please report this on Discord - reduced slurry gained (using "safe" formula)'),d.key1/8e5):_*get_store_value(keyUpgrades)[1].formula(get_store_value(keyUpgradeLevels)[1])}static calcKeySigilGain(d){return d<1e3||get_store_value(keyUpgradeLevels)[3]==0?0:Math.pow(d**2/1e3**2,.45)}static calcKeyCraftAmountGained(d){return get_store_value(keyCrafts)[d].baseAmount*Math.pow(1.1,get_store_value(keyCraftMastery).energizedCrystal[0]-1)*get_store_value(beaconBonuses)[6]}static calcChallengePointGain(d,_,m=!1){const g=[3,4,18];return _.includes("key")&&get_store_value(miningUpgradeLevels)[g[parseInt(_[3])-1]]<1?0:m?ref.challengePointValues[_]*Math.min(d,1):d*ref.challengePointValues[_]||0}static getMineXPPerCycle(){const d=get_store_value(allMultipliers).mineXP.formula(get_store_value(wallet).artifacts||0),_=1*(isNaN(d)?1:d)*Math.max(1,Math.log((get_store_value(wallet).totalFame||0)/20+1));return isNaN(_)?1:_}static calcCrystalGainFromRadium(){const d=get_store_value(wallet).radium||0;return(d<100?30*Math.pow(d,2)*.01:3e3+Math.pow(d-100,.825)*16)*get_store_value(miningUpgrades)[29].formula(get_store_value(miningUpgradeLevels)[29])}}function single$1(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y){m(b=>y)},add(y){m(b=>b+y)},sub(y,b=!1){m(v=>b?v-y:Math.max(v,0))},multiply(y){m(b=>b*y)},divide(y){m(b=>b/y)}}}function array$3(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y){m(b=>y)},add(y){m(b=>b+y)},sub(y,b=!1){m(v=>b?v-y:Math.max(v,0))},multiply(y){m(b=>b*y)},divide(y){m(b=>b/y)}}}function object$2(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y,b){m(v=>(v[y]=b,v))},add(y,b){m(v=>(v[y]+=b,v))},sub(y,b,v=!1){m(k=>(v?k[y]-=b:k[y]=Math.max(k[y],0),k))},multiply(y,b){m(v=>(v[y]*=b,v))},divide(y,b){m(v=>(v[y]/=b,v))}}}const progressThreshold=object$2({gems:167,key1:2e3,key2:5e4,key3:39e4}),upgradeSorting=object$2({base:{on:!0,unlockAt:()=>!0},lootmaster:{on:!0,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10||get_store_value(miningUpgradeLevels)[6]>0},keys:{on:!0,unlockAt:()=>!0},fame:{on:!0,unlockAt:()=>get_store_value(wallet).totalFame>0},crystals:{on:!0,unlockAt:()=>get_store_value(wallet).crystals>0||get_store_value(miningUpgradeLevels)[20]>0},sigils:{on:!0,unlockAt:()=>get_store_value(wallet).sigils>0},dust:{on:!0,unlockAt:()=>get_store_value(wallet).dust>0}}),miningUpgrades=array$3([{index:0,sortType:["base"],name:"Haste",description:"Increases base mining speed.",cost:{gems:5},ratio:1.15,formula:l=>l>100?11+Math.pow((l-100)*.1,.75):l*.1+1,unlockAt:()=>get_store_value(wallet).gems>=1,suffix:"x speed",isPercent:!1,maxLevel:1e3,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{index:1,sortType:["base"],name:"Efficiency",description:"Increases gem yield. Improved after level 100.",cost:{gems:10},ratio:1.15,unlockAt:()=>get_store_value(wallet).gems>=3&&get_store_value(miningUpgradeLevels)[0]>=1,formula:l=>l>1e4?1010297+Math.pow(l-1e4,.6)*.1:l*(1+.01*l)*(l>100?1+.03*(l-100):1),isPercent:!1,prefix:"+",suffix:" gems",maxLevel:1e3,notes:"(1 + floor(level/10)) * level^0.6"},{index:2,sortType:["base"],name:"Fortune",description:"Improves mining droprates for tier I drops.",cost:{gold:10},ratio:1.2,unlockAt:()=>get_store_value(wallet).gems>30&&get_store_value(wallet).gold>5,formula:l=>l>1e4?901+Math.pow(l-1e4,.6)*.08:1+l*.09,isPercent:!0,prefix:"+",maxLevel:1e3,notes:"(1 + floor(level/10)) * level^0.6"},{index:3,sortType:["keys","base"],name:"[*] Key Finder",description:`While mining, you will occasionally find a bundle of T1 [*] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:55,key1:10},ratio:1.3,unlockAt:()=>get_store_value(wallet).key1>=1,formula:l=>1+Math.max(0,Math.pow(l-1,.6)*.15),isPercent:!1,suffix:"x speed",maxLevel:500,notes:"(1 + floor(level/10)) * level^0.6"},{index:4,sortType:["keys"],name:"[**] Key Finder",description:`While mining, you will occasionally find a bundle of T2 [**] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:1e6,key2:10},ratio:1.5,unlockAt:()=>get_store_value(wallet).key2>=1,formula:l=>1+Math.pow(l,.5)*.15,isPercent:!1,suffix:"x speed",maxLevel:500,notes:""},{index:5,sortType:["keys","base"],name:"Key Mastery",description:"Increases the number of keys found when a Key Finder of any rarity triggers.",cost:{orbs:200},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[3]>0,formula:l=>l>1e3?201+Math.pow(l-1e3,.2)*.06:1+l*.2,isPercent:!1,suffix:"x keys",maxLevel:1e3,notes:""},{index:6,sortType:["lootmaster","base"],name:"Lootmaster I",description:"Unlocks a new tier of findable drops.",cost:{gems:4e4,gold:750,key1:25},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10||get_store_value(miningUpgradeLevels)[6]>0,formula:l=>l,isPercent:!1,maxLevel:1,notes:""},{index:7,sortType:["base"],name:"Shiny",description:"Increases the amount of gold and orbs found from mining.",cost:{gems:1150},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10,formula:l=>l>1e4?1501+Math.pow(l-1e4,.7)*.15:1+l*.15,isPercent:!1,suffix:"x gold/orb drops",maxLevel:1e3,notes:""},{index:8,sortType:["crystals"],name:"Efficiency II",description:"Increases gem yield again.",cost:{crystals:690},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10,formula:l=>1+l*.12,isPercent:!0,prefix:"+",suffix:" gems",maxLevel:300,style:"game-btn-crystal",notes:""},{index:9,sortType:["lootmaster"],name:"Lootmaster II",description:"Unlocks a new tier of findable drops.",cost:{orbs:1e6,crystals:3500,beacons:2500,key2:150},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[6]>=.9||get_store_value(miningUpgradeLevels)[9]>0||get_store_value(miningUpgradeLevelsBought)[9]>0,formula:l=>0,isPercent:!1,suffix:" (no bonus)",maxLevel:1,notes:""},{index:10,sortType:["fame"],name:"Hoarder",description:"Significantly improves gem gains.",cost:{fame:5},ratio:1.4,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>1+l*2,isPercent:!1,prefix:"x",noResetRelocate:!0,suffix:" gem bonus",maxLevel:100,style:"game-btn-fame",notes:"index 10"},{index:11,sortType:["fame"],name:"Spelunker",description:"Significantly improves mining drop rate and drop quantity. Diminishing returns after level 10.",cost:{fame:5},ratio:1.4,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>l>10?2.8+Math.pow(l-10,.7):1+l*.18,isPercent:!1,noResetRelocate:!0,suffix:"x drop rate/quanity",maxLevel:100,style:"game-btn-fame",notes:""},{index:12,sortType:["fame"],name:"Paladin",description:"Significantly improves beacon path progress.",cost:{fame:5},ratio:1.4,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>1+.75*l,isPercent:!1,prefix:"x",suffix:" beacon progress",noResetRelocate:!0,maxLevel:100,style:"game-btn-fame",notes:"index 10"},{index:13,sortType:["fame","keys"],name:"Gambler",description:"Increases key open droprates when using keys. Note that some drop chances are capped.",cost:{fame:5},ratio:1.4,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>1+.17*Math.pow(l,.9),isPercent:!1,noResetRelocate:!0,prefix:"x",suffix:" key droprates",maxLevel:100,style:"game-btn-fame",notes:""},{index:14,sortType:["lootmaster"],name:"Lootmaster III",description:"Unlocks a new tier of findable drops, and automatically unlocks LM1 and LM2 if they aren't already.",cost:{slurry:1e6,sigils:1e4,warp:4e3,key3:1e3,trophies:3,artifacts:1},ratio:1e90,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(miningUpgradeLevels)[9]>.003||get_store_value(miningUpgradeLevelsBought)[14]>0,formula:l=>0,isPercent:!0,noResetRelocate:!0,suffix:" (no bonus)",maxLevel:1,style:"game-btn-fame",notes:""},{index:15,sortType:["fame"],name:"Overload",description:"Drop chances above 100% increase the amount of drops.",cost:{fame:1200},ratio:200,unlockAt:()=>get_store_value(wallet).totalFame>200,formula:l=>0,noResetRelocate:!0,isPercent:!0,suffix:"  (N/A)",maxLevel:1,style:"game-btn-fame",notes:"index 15"},{index:16,sortType:["base"],name:"Legendary",description:"Increases fame gain on relocation.",cost:{gems:3e5,gold:6e3},ratio:1.25,unlockAt:()=>get_store_value(wallet).totalFame>60,formula:l=>1+l*.15,isPercent:!0,suffix:"  fame bonus",maxLevel:200,noResetRelocate:!1,notes:"index 16"},{index:17,sortType:["base"],name:"Legendary II",description:"Increases fame gain on relocation.",cost:{orbs:1e4,crystals:1600},ratio:1.25,unlockAt:()=>get_store_value(wallet).totalFame>15e3,formula:l=>1+l*.15,isPercent:!0,suffix:"  fame bonus",maxLevel:150,noResetRelocate:!1,notes:"index 16"},{index:18,sortType:["keys"],name:"[***] Key Finder",description:`While mining, you will occasionally find a bundle of T3 [***] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:1e8,key3:10},ratio:1.5,unlockAt:()=>get_store_value(wallet).key3>0,formula:l=>1+Math.max(0,Math.pow(l-1,.6)*.15),isPercent:!1,suffix:"x speed",maxLevel:400,notes:"(1 + floor(level/10)) * level^0.6"},{index:19,sortType:["sigils"],name:"Legendary III",description:"Increases fame gain on relocation.",cost:{sigils:2500},ratio:2,unlockAt:()=>get_store_value(wallet).sigils>25,formula:l=>1+.1*l,isPercent:!1,suffix:"x fame gain",style:"game-btn-sigil",maxLevel:300,notes:"(1 + floor(level/10)) * level^0.6"},{index:20,sortType:["crystals"],name:"Hardened",description:"Your lifetime number of quality button clicks increase gem gain.",cost:{crystals:4e4},ratio:1.33,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>formula.dispCalcHardenedGemBonus(get_store_value(buttonNumClicks),l),isPercent:!0,suffix:" gems",maxLevel:1e3,style:"game-btn-crystal",notes:"(1 + floor(level/10)) * level^0.6"},{index:21,sortType:["sigils"],name:"Excavator",description:"Artifact droprate from keys is improved.",cost:{sigils:42500,warp:12500},ratio:1.33,unlockAt:()=>get_store_value(wallet).artifacts||get_store_value(wallet).sigils>25e3&&get_store_value(wallet).warp>1e4,formula:l=>1+l*.15,noResetRelocate:!0,isPercent:!0,suffix:" droprate bonus",maxLevel:250,style:"game-btn-sigil",notes:""},{index:22,sortType:["base"],name:"Fortune II",description:"Increases all droprates.",cost:{gems:1e13},ratio:1.65,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+Math.pow(l,.8)/10,isPercent:!1,suffix:"x droprates",maxLevel:400},{index:23,sortType:["base"],name:"Isotopes",description:"Increases radioactivity gain from the button. ",cost:{gems:1e19},ratio:1.65,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+Math.pow(l,.8)*.03,isPercent:!1,prefix:"x",suffix:" radioactivity",maxLevel:400},{index:24,sortType:["base"],name:"Blinding Lights",description:"Increases beacon path progress.",cost:{gems:1e22},ratio:1.65,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+Math.pow(l,.8)/4,isPercent:!0,prefix:"+",suffix:" beacon progress",maxLevel:400},{index:25,sortType:["sigils"],name:"Efficiency III",description:"Increases gem gain again.",cost:{sigils:25},ratio:1.3,unlockAt:()=>get_store_value(wallet).sigils>0,formula:l=>1+Math.pow(l,.9)*.4,isPercent:!0,prefix:"+",suffix:" gem gain",style:"game-btn-sigil",maxLevel:200},{index:26,sortType:["fame","keys"],name:"Lockpicks",description:"Significantly increases the speed and yield of Key Master.",cost:{fame:30},ratio:1.4,unlockAt:()=>get_store_value(wallet).totalFame>200,formula:l=>1+l*.1,noResetRelocate:!0,isPercent:!1,suffix:"x speed/amount",maxLevel:100,style:"game-btn-fame",notes:""},{index:27,sortType:["dust"],name:"Cosmic Brilliance",description:"The first four mining upgrades gain 50 free levels.",cost:{dust:100},ratio:1.25,unlockAt:()=>get_store_value(wallet).dust>0,formula:l=>50*l,noResetRelocate:!0,isDust:!0,isPercent:!1,suffix:" free levels",maxLevel:200,style:"game-btn-dust",notes:""},{index:28,sortType:["dust"],name:"Glorious Space Turtles",description:"Gain fame per second.",cost:{dust:1e5},ratio:1.5,unlockAt:()=>get_store_value(wallet).dust>0,formula:l=>1e3*Math.pow(l,1.5),noResetRelocate:!0,isDust:!0,isPercent:!1,suffix:" fame / sec",maxLevel:250,style:"game-btn-dust",notes:""},{index:29,sortType:["fame"],name:"Cerium Decomposition",description:"Radium produces more crystals.",cost:{fame:1e5},ratio:1.4,unlockAt:()=>get_store_value(wallet).totalFame>1e5,formula:l=>1+l*.16,noResetRelocate:!0,isPercent:!1,suffix:"x crystal gain",maxLevel:100,style:"game-btn-fame",notes:""}]),gemGainFlavorText=single$1(0);function single(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>g)},add(g){m(y=>y+g)},sub(g,y=!1){m(b=>y?b-g:Math.max(b,0))},multiply(g){m(y=>y*g)},divide(g){m(y=>y/g)}}}function array$2(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>g)},add(g){m(y=>y+g)},sub(g,y=!1){m(b=>y?b-g:Math.max(b,0))},multiply(g){m(y=>y*g)},divide(g){m(y=>y/g)}}}function object$1(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>(y=g,y))},setItem(g,y){m(b=>(b[g.toString().toLowerCase()]=y,b))},add(g,y){m(b=>(b[g.toString().toLowerCase()]+=y,b))},sub(g,y,b=!1){m(v=>(b?v[g]-=y:v[g.toString().toLowerCase()]=Math.max(v[g],0),v))},multiply(g,y){m(b=>(b[g.toString().toLowerCase()]*=y,b))},divide(g,y){m(b=>(b[g.toString().toLowerCase()]/=y,b))}}}function dropTable(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g,y){m(b=>(b[g]=y,b))},add(g,y){m(b=>(b[g]+=y,b))},sub(g,y,b=!1){m(v=>(b?v[g]-=y:v[g]=Math.max(v[g],0),v))},multiply(g,y){m(b=>(b[g]*=y,b))},divide(g,y){m(b=>(b[g]/=y,b))},updateTable(){m(g=>{g={};for(let[y,b]of Object.entries(get_store_value(baseMiningDropTable))){let v=b[0]*(ref.dropTiers[y]===1?Math.max(get_store_value(miningUpgrades)[2].formula(get_store_value(miningUpgradeLevels)[2]),1):1)*Math.max(1,get_store_value(miningUpgrades)[6].formula(get_store_value(miningUpgradeLevels)[6]))*Math.max(1,get_store_value(miningUpgrades)[22].formula(get_store_value(miningUpgradeLevels)[22]))*Math.max(1,get_store_value(miningUpgrades)[11].formula(get_store_value(miningUpgradeLevels)[11]))*Math.max(1,get_store_value(beaconBonuses)[2])*(y==="beacons"?get_store_value(beaconUpgrades)[1].formula(get_store_value(beaconUpgradeLevels)[1]):1)*(y==="artifacts"?get_store_value(allMultipliers).artifacts.formula(get_store_value(wallet).artifacts||0):1);g[y]=[v>=b[3]?b[3]+Math.pow((v-b[3])/4,3):v,Math.max(1,b[1]*get_store_value(miningUpgrades)[11].formula(get_store_value(miningUpgradeLevels)[11])*(y==="gold"||y==="orbs"?get_store_value(miningUpgrades)[7].formula(get_store_value(miningUpgradeLevels)[7]):1)),Math.max(1,b[2]*get_store_value(miningUpgrades)[11].formula(get_store_value(miningUpgradeLevels)[11])*(y==="gold"||y==="orbs"?get_store_value(miningUpgrades)[7].formula(get_store_value(miningUpgradeLevels)[7]):1)),b[3]],get_store_value(miningUpgradeLevels)[15]>0&&g[y][0]>1&&(g[y][1]+=Math.max(0,Math.pow((g[y][0]-1)*g[y][1],.45)),g[y][2]+=Math.max(0,Math.pow((g[y][0]-1)*g[y][1],.45)))}return g})}}}const wallet=object$1({gems:0,gold:0}),resources=object$1({}),unlockedRes=single(new Set),visibleTier=single(1),progress=object$1({gems:0,key1:0}),miningUpgradeLevelsBought=array$2(Array(200).fill(0)),miningUpgradeLevelsFree=array$2(Array(200).fill(0)),miningUpgradeLevels=array$2(Array(200).fill(0)),miningUpgradeLevelsBoughtTemp=array$2(Array(200).fill(0)),miningUpgradeLevelsFreeTemp=array$2(Array(200).fill(0)),miningUpgradeLevelsTemp=array$2(Array(200).fill(0)),keyUpgradeLevels=array$2(Array(50).fill(0)),baseMiningDropTable=dropTable({gold:[.2,1,3,1],key1:[.025,1,1,.25],orbs:[.007,1,1,.25],beacons:[.005,1,1,.1],crystals:[.002,.4,.9,.1],sigils:[3e-4,.08,.27,.02],key2:[1e-4,.04,.16,.02],dust:[1e-6,.06,.28,.0025],key3:[2e-7,.01,.03,.0025],artifacts:[33e-8,.04,.05,1e-5]}),miningDropTable=dropTable({gold:[.2,1,3,1],key1:[.025,1,1,.25],orbs:[.007,1,1,.25],beacons:[.005,1,1,.1],crystals:[.002,.4,.9,.1],sigils:[3e-4,.08,.27,.02],key2:[1e-4,.04,.16,.02],dust:[1e-6,.06,.28,.0025],key3:[2e-7,.01,.03,.0025],artifacts:[33e-9,.04,.05,1e-5]}),keysOpened=array$2(Array(5).fill(0)),settings=object$1({UPDATE_SPEED:20,buyAmount:1,activeTab:""}),flags=object$1({relocateNavBack:!1,pressButton:!1,showMineXPGain:-1}),keyItemsUnlocked=object$1({key1:new Set,key2:new Set,key3:new Set,key4:new Set,key5:new Set}),progressThisTick=object$1({}),progressAverage=object$1({}),beaconActivations=array$2(Array(30).fill(0)),beaconLevels=array$2(Array(30).fill(0)),beaconProgress=array$2(Array(30).fill(0)),beaconUpgradeLevels=array$2(Array(20).fill(0)),beaconSmartSplits=array$2(Array(10).fill(0)),enchantUpgradeLevels=array$2(Array(20).fill(0)),automationItemsUnlocked=object$1({}),buttonRadiumProgress=array$2([0,1e6]),enchantProgress=object$1({t1:0,t2:0,t3:0}),activityLog=array$2([]),mineLevel=object$1({level:0,xp:0,xpNextReq:100}),buttonNumClicks=object$1({okay:0,good:0,great:0,excellent:0,incredible:0,perfect:0}),buttonStats=object$1({clicksUntilFame:1e308,totalClicks:0,totalClicksToday:0,todayStartTime:Date.now(),hardenedBonus:1}),buttonUpgradeLevels=array$2(Array(20).fill(0)),stats=object$1({lastRelocate:Date.now(),relocateCount:0}),keyCraftTimes=object$1({energizedCrystal:[-1,-1],key3:[-1,-1],key4:[-1,-1],key5:[-1,-1],beacons:[-1,-1]}),keyCraftMastery=object$1({energizedCrystal:[1,0,3],key3:[1,0,100],key4:[1,0,100],key5:[1,0,100],beacons:[1,0,100]}),keyCraftAmount=object$1({energizedCrystal:0,key3:0,key4:0,key5:0,beacons:0}),antiFlickerFlags=object$1({gems:!1,key1:!1,key2:!1,key3:!1,crafting:!1,beacons:!1}),saveVersion=single(0),startOfGame=single(Date.now()),activityLogShow=object$1({}),challengeActive=single(0),challengeProgress=single(0),challenge3Multi=single(1),challengesCompleted=array$2(Array(30).fill(0));function array$1(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y){m(b=>y)},add(y){m(b=>b+y)},sub(y,b=!1){m(v=>b?v-y:Math.max(v,0))},multiply(y){m(b=>b*y)},divide(y){m(b=>b/y)}}}function object(l){const{subscribe:d,set:_,update:m,get:g}=writable(l);return{subscribe:d,set(y,b){m(v=>(v[y]=b,v))},add(y,b){m(v=>(v[y]+=b,v))},sub(y,b,v=!1){m(k=>(v?k[y]-=b:k[y]=Math.max(k[y],0),k))},multiply(y,b){m(v=>(v[y]*=b,v))},divide(y,b){m(v=>(v[y]/=b,v))}}}const pow=(l,d)=>Math.pow(l,d),enchantThreshold=object({t1:100,t2:4e4,t3:1e9}),enchantUpgrades=array$1([{name:"Mine Size",description:"Increases your mine size, which increases the effect of many enchants below..",cost:{fame:10},tier:1,ratio:1.25,formula:l=>pow(l+5,2),unlockAt:()=>!0,isPercent:!1,suffix:" tiles",maxLevel:1e3,notes:""},{name:"Mine Quality",description:"Increases the quality of your mine, which increases the effect of many enchants below.",cost:{fame:10},tier:1,ratio:1.25,formula:l=>l*l+10,unlockAt:()=>!0,isPercent:!1,suffix:" quality rating",maxLevel:1e3,notes:""},{index:2,name:"Burst",description:"Has a chance to clear a mine level, instantly giving mining cycles (the number of mining cycles is equal to mine size).",cost:{fame:30},tier:1,ratio:1.25,formula:l=>.15/400*l,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:" chance",maxLevel:400,notes:""},{index:3,name:"Orb Rush",description:"Has a chance to give orbs based on mine quality.",cost:{fame:30,gems:1e7},tier:1,ratio:1.25,formula:l=>.12/400*l,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""},{index:4,name:"Lightning Blast",description:"Has a chance to dramatically increase mining speed for 3 seconds (speed based on mine size).",cost:{fame:225},tier:1,ratio:1.3,formula:l=>.02/400*l,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""},{index:5,name:"Scavenger",description:"Has a chance to increase a random mining upgrade level by 1.",cost:{fame:2500},tier:1,ratio:1.3,formula:l=>Math.pow(l/400,2)*.05,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""},{index:6,name:"Key Boon",description:"Gives you keys. Mine size increases key amount, mine quality increases the chance for higher tier keys.",cost:{fame:1e6},tier:1,ratio:1.32,formula:l=>l/400*.025,unlockAt:()=>get_store_value(wallet).fame>=1e4||get_store_value(enchantUpgradeLevels)[0]>=25,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""},{index:7,name:"Clicker Hero",description:'"Clicks" the button for you. Mine size increases crystal gain, Mine quality increases click quality.',cost:{fame:1e6},tier:1,ratio:1.32,formula:l=>l/400*.5,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""}]),automationUpgrades=array$1([{index:0,name:"Jumpstart",description:"Start with 5000 gems and 100 gold.",cost:{fame:100},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{index:1,name:"Deep Pockets",description:"Lootmaster I and II are automatially unlocked and stay unlocked on relocate.",cost:{fame:1850},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{index:2,name:"Beacon Tools",description:"Unlock the ability to split beacons evenly across all paths, and to recall all beacons at once.",cost:{fame:2500},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{index:3,name:"Omnipotent",description:"Except for Lootmaster upgrades, mining upgrades are not reset on relocation.",cost:{fame:25e3},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{index:4,name:"Game On",description:"Unlocks challenges 1 - 3.",cost:{fame:1e5},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{index:5,name:"Another Button",description:'You can now hold enter to click the button really really fast (you will only get "okay" clicks).',cost:{trophies:1},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!1},{index:6,name:"Beaconizer",description:"Start each relocation with 50,000 beacons. Gain 50 beacons per second.",cost:{trophies:2},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:7,name:"Beacon Tools II",description:'You can now "smart split" beacons among chosen paths.',cost:{trophies:2},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:8,name:"Unlimited Power!",description:"Beacon power (and its upgrades) are not reset on relocation.",cost:{trophies:2},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:9,name:"Spellcaster",description:"You can trigger enchants 10% faster.",cost:{trophies:3},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:10,name:"Hellfire",description:"[NOT IMPLEMENTED YET] Unlocks challenges 4 - 6.",cost:{dust:1e207},unlockAt:()=>get_store_value(wallet).trophies>=1||formula.sumArray(get_store_value(challengesCompleted))>0,isPercent:!0},{index:11,name:"Spellcaster II",description:"You can trigger enchants an additional 10% faster.",cost:{dust:1e6,trophies:3},unlockAt:()=>get_store_value(automationItemsUnlocked).spellcaster!==void 0,isPercent:!0}]);function array(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(g){m(y=>g)},add(g){m(y=>y+g)},sub(g,y=!1){m(b=>y?b-g:Math.max(b,0))},multiply(g){m(y=>y*g)},divide(g){m(y=>y/g)},updateChallengeReqs(){m(g=>{for(let y in g)g[y]=get_store_value(baseChallengeGoals)[y]*Math.pow(get_store_value(challengeMultipliers)[y],get_store_value(challengesCompleted)[y]),console.log(get_store_value(baseChallengeGoals)[y]*Math.pow(get_store_value(challengeMultipliers)[y],get_store_value(challengesCompleted)[y]));return g})}}}const challengeUnlockCriteria=array([()=>get_store_value(automationItemsUnlocked)["game on"],()=>get_store_value(automationItemsUnlocked)["game on"],()=>get_store_value(automationItemsUnlocked)["game on"],()=>get_store_value(automationItemsUnlocked).hellfire,()=>get_store_value(automationItemsUnlocked).hellfire,()=>get_store_value(automationItemsUnlocked).hellfire].concat(Array(3).fill(get_store_value(automationItemsUnlocked)["???notimplemented2221391"])).concat(Array(12).fill(!1))),challengeNames=array(["C1: Rusty","C2: Muted","C3: Slowdown","C4: Dark"]),challengeDescriptions=array(["Mining and key finder progress is drastically slowed. (It gets reduced more on each completion).","All non-fame mining upgrades except Lootmaster are reset. You cannot buy mining upgrades.","Every time a mining cycle completes, the next one takes slightly longer. (Each completion increases the slowdown).","All beacon path levels are reset. Beacon path progress is drastically slowed, but each level gives challenge points. All sources of challenge points other than beacon levels are heavily slowed. (Slowdown increases each completion until completion 18.)"]),challengeGoals=array([750,1400,1e4,6e3,6e3,6e3,6e3,6e3,6e3,6e3]),baseChallengeGoals=array([750,1400,1e4,6e3,6e3,6e3,6e3,6e3,6e3,6e3]),challengeMultipliers=array([1.33,1.33,1.175,1.4,1.4,1.2,1.1,1.1,1.1,1.1]),MiningUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$h(l,d,_){const m=l.slice();return m[27]=d[_],m}function create_if_block$k(l){let d,_,m,g=l[7][l[0]].name+"",y,b,v=l[13](l[10][l[0]],0)+"",k,w,I=l[13](l[7][l[0]].maxLevel,0)+"",E,S,N,M,A,P,L=l[7][l[0]].description+"",D,x,U,C,F,J,T=(l[7][l[0]].prefix||"")+"",Y,K=(l[7][l[0]].isPercent?l[14](l[7][l[0]].formula(l[11][l[0]]),3,!0):l[13](l[7][l[0]].formula(l[11][l[0]]),3))+"",ne,Z=(l[7][l[0]].suffix||"")+"",O,V,H,le,B=(l[7][l[0]].prefix||"")+"",R,G=(l[7][l[0]].isPercent?l[14](l[7][l[0]].formula(l[11][l[0]]+Math.max(1,l[5])),3,!0):l[13](l[7][l[0]].formula(l[11][l[0]]+Math.max(1,l[5])),3))+"",$,de=(l[7][l[0]].suffix||"")+"",oe,X,te,q,ee,z,re,ie,W=l[9][l[0]]>0&&create_if_block_5$5(l),Q=l[8].maxBuy&&l[4]&&l[5]>=1&&create_if_block_4$6(l),_e=l[7][l[0]].name=="Expansive"&&create_if_block_3$8();function Ee(ae,me){return ae[10][ae[0]]>=ae[7][ae[0]].maxLevel?create_if_block_1$g:create_else_block$a}let ye=Ee(l),ce=ye(l);return{c(){d=element("div"),_=space(),m=element("div"),y=text(g),b=text(" [ "),k=text(v),w=text(" / "),E=text(I),S=space(),W&&W.c(),N=text(`] 
`),Q&&Q.c(),M=space(),A=element("span"),P=element("div"),D=text(L),x=space(),_e&&_e.c(),U=space(),C=element("div"),F=element("div"),J=element("span"),Y=text(T),ne=text(K),O=text(Z),V=space(),H=element("span"),le=text(`=> 
                    `),R=text(B),$=text(G),oe=text(de),X=space(),te=element("hr"),q=space(),ee=element("div"),ce.c(),this.h()},l(ae){d=claim_element(ae,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(ae),m=claim_element(ae,"DIV",{class:!0});var me=children(m);y=claim_text(me,g),b=claim_text(me," [ "),k=claim_text(me,v),w=claim_text(me," / "),E=claim_text(me,I),S=claim_space(me),W&&W.l(me),N=claim_text(me,`] 
`),Q&&Q.l(me),M=claim_space(me),A=claim_element(me,"SPAN",{class:!0});var ke=children(A);P=claim_element(ke,"DIV",{class:!0});var Se=children(P);D=claim_text(Se,L),x=claim_space(Se),_e&&_e.l(Se),Se.forEach(detach),U=claim_space(ke),C=claim_element(ke,"DIV",{class:!0});var Ne=children(C);F=claim_element(Ne,"DIV",{class:!0});var xe=children(F);J=claim_element(xe,"SPAN",{class:!0});var Pe=children(J);Y=claim_text(Pe,T),ne=claim_text(Pe,K),O=claim_text(Pe,Z),Pe.forEach(detach),V=claim_space(xe),H=claim_element(xe,"SPAN",{class:!0});var Be=children(H);le=claim_text(Be,`=> 
                    `),R=claim_text(Be,B),$=claim_text(Be,G),oe=claim_text(Be,de),Be.forEach(detach),xe.forEach(detach),Ne.forEach(detach),X=claim_space(ke),te=claim_element(ke,"HR",{}),q=claim_space(ke),ee=claim_element(ke,"DIV",{class:!0});var Te=children(ee);ce.l(Te),Te.forEach(detach),ke.forEach(detach),me.forEach(detach),this.h()},h(){attr(d,"class","pt-1"),attr(P,"class","title text-small-gray items-start text-center pb-1"),attr(J,"class","current text-[#cccccc]"),attr(H,"class","current text-[#999999]"),attr(F,"class","tooltip-text-xs text-[#cccccc]"),attr(C,"class","text-center effect-wrapper"),attr(ee,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(A,"class","tooltip tooltip-style svelte-10ri8s1"),attr(m,"class",z="has-tooltip tooltip-text "+(l[2]&&l[10][l[0]]<l[7][l[0]].maxLevel?l[7][l[0]].style||"game-btn":(l[7][l[0]].style||"game-btn")+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(ae,me){insert_hydration(ae,d,me),insert_hydration(ae,_,me),insert_hydration(ae,m,me),append_hydration(m,y),append_hydration(m,b),append_hydration(m,k),append_hydration(m,w),append_hydration(m,E),append_hydration(m,S),W&&W.m(m,null),append_hydration(m,N),Q&&Q.m(m,null),append_hydration(m,M),append_hydration(m,A),append_hydration(A,P),append_hydration(P,D),append_hydration(P,x),_e&&_e.m(P,null),append_hydration(A,U),append_hydration(A,C),append_hydration(C,F),append_hydration(F,J),append_hydration(J,Y),append_hydration(J,ne),append_hydration(J,O),append_hydration(F,V),append_hydration(F,H),append_hydration(H,le),append_hydration(H,R),append_hydration(H,$),append_hydration(H,oe),append_hydration(A,X),append_hydration(A,te),append_hydration(A,q),append_hydration(A,ee),ce.m(ee,null),re||(ie=listen(m,"click",l[17]),re=!0)},p(ae,me){me&129&&g!==(g=ae[7][ae[0]].name+"")&&set_data(y,g),me&1025&&v!==(v=ae[13](ae[10][ae[0]],0)+"")&&set_data(k,v),me&129&&I!==(I=ae[13](ae[7][ae[0]].maxLevel,0)+"")&&set_data(E,I),ae[9][ae[0]]>0?W?W.p(ae,me):(W=create_if_block_5$5(ae),W.c(),W.m(m,N)):W&&(W.d(1),W=null),ae[8].maxBuy&&ae[4]&&ae[5]>=1?Q?Q.p(ae,me):(Q=create_if_block_4$6(ae),Q.c(),Q.m(m,M)):Q&&(Q.d(1),Q=null),me&129&&L!==(L=ae[7][ae[0]].description+"")&&set_data(D,L),ae[7][ae[0]].name=="Expansive"?_e||(_e=create_if_block_3$8(),_e.c(),_e.m(P,null)):_e&&(_e.d(1),_e=null),me&129&&T!==(T=(ae[7][ae[0]].prefix||"")+"")&&set_data(Y,T),me&2177&&K!==(K=(ae[7][ae[0]].isPercent?ae[14](ae[7][ae[0]].formula(ae[11][ae[0]]),3,!0):ae[13](ae[7][ae[0]].formula(ae[11][ae[0]]),3))+"")&&set_data(ne,K),me&129&&Z!==(Z=(ae[7][ae[0]].suffix||"")+"")&&set_data(O,Z),me&129&&B!==(B=(ae[7][ae[0]].prefix||"")+"")&&set_data(R,B),me&2209&&G!==(G=(ae[7][ae[0]].isPercent?ae[14](ae[7][ae[0]].formula(ae[11][ae[0]]+Math.max(1,ae[5])),3,!0):ae[13](ae[7][ae[0]].formula(ae[11][ae[0]]+Math.max(1,ae[5])),3))+"")&&set_data($,G),me&129&&de!==(de=(ae[7][ae[0]].suffix||"")+"")&&set_data(oe,de),ye===(ye=Ee(ae))&&ce?ce.p(ae,me):(ce.d(1),ce=ye(ae),ce&&(ce.c(),ce.m(ee,null))),me&1157&&z!==(z="has-tooltip tooltip-text "+(ae[2]&&ae[10][ae[0]]<ae[7][ae[0]].maxLevel?ae[7][ae[0]].style||"game-btn":(ae[7][ae[0]].style||"game-btn")+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(m,"class",z)},d(ae){ae&&detach(d),ae&&detach(_),ae&&detach(m),W&&W.d(),Q&&Q.d(),_e&&_e.d(),ce.d(),re=!1,ie()}}}function create_if_block_5$5(l){let d,_=l[13](l[9][l[0]],0)+"",m,g;return{c(){d=text("+ "),m=text(_),g=space()},l(y){d=claim_text(y,"+ "),m=claim_text(y,_),g=claim_space(y)},m(y,b){insert_hydration(y,d,b),insert_hydration(y,m,b),insert_hydration(y,g,b)},p(y,b){b&513&&_!==(_=y[13](y[9][y[0]],0)+"")&&set_data(m,_)},d(y){y&&detach(d),y&&detach(m),y&&detach(g)}}}function create_if_block_4$6(l){let d,_,m;return{c(){d=text("(+"),_=text(l[5]),m=text(")")},l(g){d=claim_text(g,"(+"),_=claim_text(g,l[5]),m=claim_text(g,")")},m(g,y){insert_hydration(g,d,y),insert_hydration(g,_,y),insert_hydration(g,m,y)},p(g,y){y&32&&set_data(_,g[5])},d(g){g&&detach(d),g&&detach(_),g&&detach(m)}}}function create_if_block_3$8(l){let d,_;return{c(){d=element("span"),_=text("(Upgrades in orange aren't reset when you relocate.)"),this.h()},l(m){d=claim_element(m,"SPAN",{class:!0});var g=children(d);_=claim_text(g,"(Upgrades in orange aren't reset when you relocate.)"),g.forEach(detach),this.h()},h(){attr(d,"class","text-orange-400")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},d(m){m&&detach(d)}}}function create_else_block$a(l){let d,_=Object.entries(l[1]),m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block$h(get_each_context$h(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y&45122){_=Object.entries(g[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$h(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block$h(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_if_block_1$g(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"This upgrade is at max level."),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$b(l){let d,_=(l[6][l[27][0]]||l[12].has(l[27][0])?ref.displayNames[l[27][0]]?ref.displayNames[l[27][0]]:l[27][0]:"???")+"",m,g,y,b,v=l[13](l[27][1])+"",k,w;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);m=claim_text(E,_),E.forEach(detach),y=claim_space(I),b=claim_element(I,"DIV",{class:!0});var S=children(b);k=claim_text(S,v),S.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[27][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-10ri8s1"),attr(b,"class",w="col-span-2 "+(l[15](l[27][0])?"":"text-red-600")+" text-left")},m(I,E){insert_hydration(I,d,E),append_hydration(d,m),insert_hydration(I,y,E),insert_hydration(I,b,E),append_hydration(b,k)},p(I,E){E&4162&&_!==(_=(I[6][I[27][0]]||I[12].has(I[27][0])?ref.displayNames[I[27][0]]?ref.displayNames[I[27][0]]:I[27][0]:"???")+"")&&set_data(m,_),E&2&&g!==(g=(ref.colors[I[27][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-10ri8s1")&&attr(d,"class",g),E&2&&v!==(v=I[13](I[27][1])+"")&&set_data(k,v),E&2&&w!==(w="col-span-2 "+(I[15](I[27][0])?"":"text-red-600")+" text-left")&&attr(b,"class",w)},d(I){I&&detach(d),I&&detach(y),I&&detach(b)}}}function create_each_block$h(l){let d,_=l[27][1]>=1&&create_if_block_2$b(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[27][1]>=1?_?_.p(m,g):(_=create_if_block_2$b(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$c(l){let d=l[7][l[0]].unlockAt()||l[3]||l[11][l[0]]>0,_,m=d&&create_if_block$k(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&2185&&(d=g[7][g[0]].unlockAt()||g[3]||g[11][g[0]]>0),d?m?m.p(g,y):(m=create_if_block$k(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_fragment$n(l){let d=l[3]||l[2]||l[11][l[0]]>0,_,m=create_key_block$c(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,[y]){y&2061&&safe_not_equal(d,d=g[3]||g[2]||g[11][g[0]]>0)?(m.d(1),m=create_key_block$c(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}function instance$n(l,d,_){let m,g,y,b,v,k,w,I,E;component_subscribe(l,wallet,O=>_(6,m=O)),component_subscribe(l,miningUpgrades,O=>_(7,g=O)),component_subscribe(l,settings,O=>_(8,y=O)),component_subscribe(l,challengeActive,O=>_(20,b=O)),component_subscribe(l,visibleTier,O=>_(21,v=O)),component_subscribe(l,miningUpgradeLevelsFree,O=>_(9,k=O)),component_subscribe(l,miningUpgradeLevelsBought,O=>_(10,w=O)),component_subscribe(l,miningUpgradeLevels,O=>_(11,I=O)),component_subscribe(l,unlockedRes,O=>_(12,E=O));let{index:S}=d,N=()=>{let O={};for(let[V,H]of Object.entries(g[S].cost))O[V]=F(H);return O},M={},A,P=I[S]>0,L,D=!1,x=y.buyAmount;onMount(()=>{setTimeout(()=>{_(1,M=N()),_(2,A=K()),g[S].unlockAt()&&_(3,P=!0),_(3,P=I[S]>0)},50),L=setInterval(()=>{_(2,A=K()),ne(),g[S].unlockAt()&&_(3,P=!0),y.maxBuy?(_(5,x=T()),_(1,M=N())):_(5,x=y.buyAmount)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(L)});const U=(O,V=0)=>O<1e9?O.toFixed(O<1e3?V:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):O.toExponential(3).toString().replace("+",""),C=(O,V=3,H=!1)=>(H&&(O-=1),O<1e9?(O*100).toFixed(O*100<1e3?V:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(O*100).toExponential(V).toString().replace("+","")+"%");function F(O){const V=O*Math.pow(g[S].ratio,w[S]),H=g[S].ratio,le=Math.max(1,x);return formula.gSum(V,H,le)}function J(O){return m[O]>=M[O]}function T(){const O=g[S].maxLevel-w[S];_(4,D=!1);let V=1e9;for(let[H,le]of Object.entries(g[S].cost)){if(!m[H])return 0;const B=le*Math.pow(g[S].ratio,w[S]);V=Math.min(V,formula.maxNumGeom(m[H],B,g[S].ratio))}return _(4,D=!0),Math.min(O,V)}function Y(){if(b!==2&&!(w[S]>=g[S].maxLevel)){_(1,M=N());for(let[O,V]of Object.entries(M))if(V>=1&&(!m[O]||m[O]<V-.003))return;for(let[O,V]of Object.entries(M))V>=1&&set_store_value(wallet,m[O]-=V-.003,m);if(set_store_value(miningUpgradeLevels,I[S]+=Math.min(x,g[S].maxLevel-I[S]),I),set_store_value(miningUpgradeLevelsBought,w[S]+=Math.min(x,g[S].maxLevel-w[S]),w),_(1,M=N()),_(3,P=!0),S==27){const O=Math.min(x,g[27].maxLevel-k[27]);set_store_value(miningUpgradeLevelsFree,k[0]+=50*O,k),set_store_value(miningUpgradeLevelsFree,k[1]+=50*O,k),set_store_value(miningUpgradeLevelsFree,k[2]+=50*O,k),set_store_value(miningUpgradeLevelsFree,k[7]+=50*O,k)}set_store_value(miningUpgradeLevels,I=I.map((O,V)=>w[V]+k[V]),I),miningDropTable.updateTable(),(g[S].name||"")=="Lootmaster I"&&set_store_value(visibleTier,v=2,v),(g[S].name||"")=="Lootmaster II"&&set_store_value(visibleTier,v=3,v),(g[S].name||"")=="Lootmaster III"&&set_store_value(visibleTier,v=4,v)}}function K(){if(b===2||y.maxBuy&&x==0)return!1;_(1,M=N());for(let[O,V]of Object.entries(M))if(V>=1&&m[O]<V-.003||!m[O])return!1;return!0}function ne(){for(let[O,V]of Object.entries(g[S].unlockAt))if(m[O]<V)return!1;return!0}const Z=()=>Y();return l.$$set=O=>{"index"in O&&_(0,S=O.index)},[S,M,A,P,D,x,m,g,y,k,w,I,E,U,C,J,Y,Z]}class MiningUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$n,create_fragment$n,safe_not_equal,{index:0})}}function create_fragment$m(l){let d,_,m,g,y,b,v,k;return{c(){d=element("div"),_=element("div"),m=text("+"),g=space(),y=element("div"),b=text("-"),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);_=claim_element(I,"DIV",{class:!0});var E=children(_);m=claim_text(E,"+"),E.forEach(detach),g=claim_space(I),y=claim_element(I,"DIV",{class:!0});var S=children(y);b=claim_text(S,"-"),S.forEach(detach),I.forEach(detach),this.h()},h(){attr(_,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid select-none m-1"),attr(y,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid select-none m-1"),attr(d,"class","grid grid-cols-2")},m(w,I){insert_hydration(w,d,I),append_hydration(d,_),append_hydration(_,m),append_hydration(d,g),append_hydration(d,y),append_hydration(y,b),v||(k=[listen(_,"click",l[3]),listen(y,"click",l[4])],v=!0)},p:noop,i:noop,o:noop,d(w){w&&detach(d),v=!1,run_all(k)}}}function instance$m(l,d,_){let m,g,y,b;component_subscribe(l,wallet,S=>_(5,m=S)),component_subscribe(l,miningUpgrades,S=>_(6,S)),component_subscribe(l,beaconActivations,S=>_(7,g=S)),component_subscribe(l,beaconSpendAmt,S=>_(8,y=S)),component_subscribe(l,miningUpgradeLevels,S=>_(9,b=S));let{index:v}=d;b[v]>0,onMount(()=>{}),onDestroy(()=>{});function k(){if((isNaN(y)||y<0||!y)&&set_store_value(beaconSpendAmt,y=1,y),!m.beacons||m.beacons===0)return;const S=Math.min(m.beacons,y);set_store_value(wallet,m.beacons-=S,m),set_store_value(beaconActivations,g[v]+=S,g)}function w(){(isNaN(y)||y<0||!y)&&set_store_value(beaconSpendAmt,y=1,y);const S=Math.min(g[v],y);set_store_value(beaconActivations,g[v]-=S,g),set_store_value(wallet,m.beacons+=S,m)}const I=()=>k(),E=()=>w();return l.$$set=S=>{"index"in S&&_(2,v=S.index)},[k,w,v,I,E]}class BeaconToggleButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$m,create_fragment$m,safe_not_equal,{index:2})}}const BeaconPowerUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$g(l,d,_){const m=l.slice();return m[17]=d[_],m}function create_if_block$j(l){let d,_=(ref.displayNames[l[17][0]]?ref.displayNames[l[17][0]]:l[17][0])+"",m,g,y,b,v=l[7](l[17][1])+"",k,w;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);m=claim_text(E,_),E.forEach(detach),y=claim_space(I),b=claim_element(I,"DIV",{class:!0});var S=children(b);k=claim_text(S,v),S.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[17][0]]||ref.colors.default)+" col-span-3 svelte-10ri8s1"),attr(b,"class",w="col-span-2 "+(l[3].beaconPower<l[17][1]?"text-red-600":"")+" text-left")},m(I,E){insert_hydration(I,d,E),append_hydration(d,m),insert_hydration(I,y,E),insert_hydration(I,b,E),append_hydration(b,k)},p(I,E){E&2&&_!==(_=(ref.displayNames[I[17][0]]?ref.displayNames[I[17][0]]:I[17][0])+"")&&set_data(m,_),E&2&&g!==(g=(ref.colors[I[17][0]]||ref.colors.default)+" col-span-3 svelte-10ri8s1")&&attr(d,"class",g),E&2&&v!==(v=I[7](I[17][1])+"")&&set_data(k,v),E&10&&w!==(w="col-span-2 "+(I[3].beaconPower<I[17][1]?"text-red-600":"")+" text-left")&&attr(b,"class",w)},d(I){I&&detach(d),I&&detach(y),I&&detach(b)}}}function create_each_block$g(l){let d,_=l[17][1]>=1&&create_if_block$j(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[17][1]>=1?_?_.p(m,g):(_=create_if_block$j(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$b(l){let d,_,m=l[6][l[0]].description+"",g,y,b,v,k,w=(l[6][l[0]].prefix||"")+"",I,E=(l[6][l[0]].isPercent?l[8](l[6][l[0]].formula(l[5][l[0]]),3,!0):l[7](l[6][l[0]].formula(l[5][l[0]]),3))+"",S,N=(l[6][l[0]].suffix||"")+"",M,A,P,L,D=(l[6][l[0]].prefix||"")+"",x,U=(l[6][l[0]].isPercent?l[8](l[6][l[0]].formula(l[5][l[0]]+l[4].buyAmount),3,!0):l[7](l[6][l[0]].formula(l[5][l[0]]+l[4].buyAmount),3))+"",C,F=(l[6][l[0]].suffix||"")+"",J,T,Y,K,ne,Z=Object.entries(l[1]),O=[];for(let V=0;V<Z.length;V+=1)O[V]=create_each_block$g(get_each_context$g(l,Z,V));return{c(){d=element("span"),_=element("div"),g=text(m),y=space(),b=element("div"),v=element("div"),k=element("span"),I=text(w),S=text(E),M=text(N),A=space(),P=element("span"),L=text(`=> 
                    `),x=text(D),C=text(U),J=text(F),T=space(),Y=element("hr"),K=space(),ne=element("div");for(let V=0;V<O.length;V+=1)O[V].c();this.h()},l(V){d=claim_element(V,"SPAN",{class:!0});var H=children(d);_=claim_element(H,"DIV",{class:!0});var le=children(_);g=claim_text(le,m),le.forEach(detach),y=claim_space(H),b=claim_element(H,"DIV",{class:!0});var B=children(b);v=claim_element(B,"DIV",{class:!0});var R=children(v);k=claim_element(R,"SPAN",{class:!0});var G=children(k);I=claim_text(G,w),S=claim_text(G,E),M=claim_text(G,N),G.forEach(detach),A=claim_space(R),P=claim_element(R,"SPAN",{class:!0});var $=children(P);L=claim_text($,`=> 
                    `),x=claim_text($,D),C=claim_text($,U),J=claim_text($,F),$.forEach(detach),R.forEach(detach),B.forEach(detach),T=claim_space(H),Y=claim_element(H,"HR",{}),K=claim_space(H),ne=claim_element(H,"DIV",{class:!0});var de=children(ne);for(let oe=0;oe<O.length;oe+=1)O[oe].l(de);de.forEach(detach),H.forEach(detach),this.h()},h(){attr(_,"class","title text-small-gray items-start text-center pb-1"),attr(k,"class","current text-[#cccccc]"),attr(P,"class","current text-[#999999]"),attr(v,"class","tooltip-text-xs text-[#cccccc]"),attr(b,"class","text-center effect-wrapper"),attr(ne,"class","pt-1 cost items-start text-center grid grid-cols-5"),attr(d,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-10ri8s1")},m(V,H){insert_hydration(V,d,H),append_hydration(d,_),append_hydration(_,g),append_hydration(d,y),append_hydration(d,b),append_hydration(b,v),append_hydration(v,k),append_hydration(k,I),append_hydration(k,S),append_hydration(k,M),append_hydration(v,A),append_hydration(v,P),append_hydration(P,L),append_hydration(P,x),append_hydration(P,C),append_hydration(P,J),append_hydration(d,T),append_hydration(d,Y),append_hydration(d,K),append_hydration(d,ne);for(let le=0;le<O.length;le+=1)O[le]&&O[le].m(ne,null)},p(V,H){if(H&65&&m!==(m=V[6][V[0]].description+"")&&set_data(g,m),H&65&&w!==(w=(V[6][V[0]].prefix||"")+"")&&set_data(I,w),H&97&&E!==(E=(V[6][V[0]].isPercent?V[8](V[6][V[0]].formula(V[5][V[0]]),3,!0):V[7](V[6][V[0]].formula(V[5][V[0]]),3))+"")&&set_data(S,E),H&65&&N!==(N=(V[6][V[0]].suffix||"")+"")&&set_data(M,N),H&65&&D!==(D=(V[6][V[0]].prefix||"")+"")&&set_data(x,D),H&113&&U!==(U=(V[6][V[0]].isPercent?V[8](V[6][V[0]].formula(V[5][V[0]]+V[4].buyAmount),3,!0):V[7](V[6][V[0]].formula(V[5][V[0]]+V[4].buyAmount),3))+"")&&set_data(C,U),H&65&&F!==(F=(V[6][V[0]].suffix||"")+"")&&set_data(J,F),H&138){Z=Object.entries(V[1]);let le;for(le=0;le<Z.length;le+=1){const B=get_each_context$g(V,Z,le);O[le]?O[le].p(B,H):(O[le]=create_each_block$g(B),O[le].c(),O[le].m(ne,null))}for(;le<O.length;le+=1)O[le].d(1);O.length=Z.length}},d(V){V&&detach(d),destroy_each(O,V)}}}function create_fragment$l(l){let d,_=l[6][l[0]].name+"",m,g,y=l[7](l[5][l[0]],0)+"",b,v,k=l[3].beaconPower,w,I,E,S=create_key_block$b(l);return{c(){d=element("div"),m=text(_),g=text(" ["),b=text(y),v=text(`]
        `),S.c(),this.h()},l(N){d=claim_element(N,"DIV",{class:!0});var M=children(d);m=claim_text(M,_),g=claim_text(M," ["),b=claim_text(M,y),v=claim_text(M,`]
        `),S.l(M),M.forEach(detach),this.h()},h(){attr(d,"class",w="has-tooltip tooltip-text py-1 "+(l[2]?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(N,M){insert_hydration(N,d,M),append_hydration(d,m),append_hydration(d,g),append_hydration(d,b),append_hydration(d,v),S.m(d,null),I||(E=listen(d,"click",l[10]),I=!0)},p(N,[M]){M&65&&_!==(_=N[6][N[0]].name+"")&&set_data(m,_),M&33&&y!==(y=N[7](N[5][N[0]],0)+"")&&set_data(b,y),M&8&&safe_not_equal(k,k=N[3].beaconPower)?(S.d(1),S=create_key_block$b(N),S.c(),S.m(d,null)):S.p(N,M),M&4&&w!==(w="has-tooltip tooltip-text py-1 "+(N[2]?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(d,"class",w)},i:noop,o:noop,d(N){N&&detach(d),S.d(N),I=!1,E()}}}function instance$l(l,d,_){let m,g,y,b;component_subscribe(l,resources,D=>_(3,m=D)),component_subscribe(l,settings,D=>_(4,g=D)),component_subscribe(l,beaconUpgradeLevels,D=>_(5,y=D)),component_subscribe(l,beaconUpgrades,D=>_(6,b=D));let{index:v}=d,k=()=>{let D={};for(let[x,U]of Object.entries(b[v].cost))D[x]=M(U);return D},w={},I;y[v]>0;let E;onMount(()=>{setTimeout(()=>{_(1,w=k()),_(2,I=P())},50),E=setInterval(()=>{_(2,I=P())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(E)});const S=(D,x=0)=>D<1e9?D.toFixed(D<1e3?x:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):D.toExponential(3).toString().replace("+",""),N=(D,x=3,U=!1)=>(U&&(D-=1),D<1e9?(D*100).toFixed(D<999?x:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(D*100).toExponential(x).toString().replace("+","")+"%");function M(D){const x=D*Math.pow(b[v].ratio,y[v]),U=b[v].ratio,C=g.buyAmount;return formula.gSum(x,U,C)}function A(){if(!isNaN(m.beaconPower)){_(1,w=k());for(let[D,x]of Object.entries(w))if(x>=1&&m[D]<x)return;for(let[D,x]of Object.entries(w))x>=1&&set_store_value(resources,m[D]-=x,m);set_store_value(beaconUpgradeLevels,y[v]+=g.buyAmount,y),_(1,w=k())}}function P(){if(isNaN(m.beaconPower))return!1;_(1,w=k());for(let[D,x]of Object.entries(w))if(x>=1&&m[D]<x)return!1;return!0}const L=()=>A();return l.$$set=D=>{"index"in D&&_(0,v=D.index)},[v,w,I,m,g,y,b,S,N,A,L]}class BeaconPowerUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$l,create_fragment$l,safe_not_equal,{index:0})}}function create_fragment$k(l){let d,_,m,g,y,b,v;return{c(){d=element("label"),_=element("input"),m=space(),g=element("span"),y=text("S"),this.h()},l(k){d=claim_element(k,"LABEL",{class:!0});var w=children(d);_=claim_element(w,"INPUT",{type:!0,class:!0}),m=claim_space(w),g=claim_element(w,"SPAN",{class:!0});var I=children(g);y=claim_text(I,"S"),I.forEach(detach),w.forEach(detach),this.h()},h(){attr(_,"type","checkbox"),attr(_,"class","checkbox w-6 h-6"),attr(g,"class","game-text text-med text-center select-none cursor-pointer"),attr(d,"class","input-wrapper mr-3")},m(k,w){insert_hydration(k,d,w),append_hydration(d,_),_.checked=l[1][l[0]],append_hydration(d,m),append_hydration(d,g),append_hydration(g,y),b||(v=[listen(_,"click",l[2]),listen(_,"change",l[3])],b=!0)},p(k,[w]){w&3&&(_.checked=k[1][k[0]])},i:noop,o:noop,d(k){k&&detach(d),b=!1,run_all(v)}}}function instance$k(l,d,_){let m;component_subscribe(l,beaconSmartSplits,v=>_(1,m=v));let{index:g}=d;const y=()=>console.log("clicked");function b(){m[g]=this.checked,beaconSmartSplits.set(m)}return l.$$set=v=>{"index"in v&&_(0,g=v.index)},[g,m,y,b]}class BeaconSmartSplitChecks extends SvelteComponent{constructor(d){super(),init(this,d,instance$k,create_fragment$k,safe_not_equal,{index:0})}}function get_each_context$f(l,d,_){const m=l.slice();return m[33]=d[_],m[35]=_,m}function get_each_context_1$6(l,d,_){const m=l.slice();return m[33]=d[_],m[35]=_,m}function create_else_block_2$2(l){let d;return{c(){d=element("div"),this.h()},l(_){d=claim_element(_,"DIV",{class:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"class","col-span-12")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_4$5(l){let d,_,m,g,y,b,v,k,w,I;function E(M,A){return M[11]["beacon tools ii"]?create_if_block_5$4:create_else_block_1$2}let S=E(l),N=S(l);return{c(){d=element("div"),_=text("Split Beacons Evenly"),m=space(),N.c(),g=space(),y=element("div"),b=text("Recall Beacons"),v=space(),k=element("div"),this.h()},l(M){d=claim_element(M,"DIV",{class:!0});var A=children(d);_=claim_text(A,"Split Beacons Evenly"),A.forEach(detach),m=claim_space(M),N.l(M),g=claim_space(M),y=claim_element(M,"DIV",{class:!0});var P=children(y);b=claim_text(P,"Recall Beacons"),P.forEach(detach),v=claim_space(M),k=claim_element(M,"DIV",{class:!0}),children(k).forEach(detach),this.h()},h(){attr(d,"class","game-btn m-1 text-med col-span-3"),attr(y,"class","game-btn m-1 text-med col-span-3"),attr(k,"class","col-span-1")},m(M,A){insert_hydration(M,d,A),append_hydration(d,_),insert_hydration(M,m,A),N.m(M,A),insert_hydration(M,g,A),insert_hydration(M,y,A),append_hydration(y,b),insert_hydration(M,v,A),insert_hydration(M,k,A),w||(I=[listen(d,"click",l[24]),listen(y,"click",l[26])],w=!0)},p(M,A){S===(S=E(M))&&N?N.p(M,A):(N.d(1),N=S(M),N&&(N.c(),N.m(g.parentNode,g)))},d(M){M&&detach(d),M&&detach(m),N.d(M),M&&detach(g),M&&detach(y),M&&detach(v),M&&detach(k),w=!1,run_all(I)}}}function create_else_block_1$2(l){let d;return{c(){d=element("div"),this.h()},l(_){d=claim_element(_,"DIV",{class:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"class","col-span-3")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_5$4(l){let d,_,m,g;return{c(){d=element("div"),_=text("Smart Split Beacons"),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);_=claim_text(b,"Smart Split Beacons"),b.forEach(detach),this.h()},h(){attr(d,"class","game-btn m-1 text-med col-span-3")},m(y,b){insert_hydration(y,d,b),append_hydration(d,_),m||(g=listen(d,"click",l[25]),m=!0)},p:noop,d(y){y&&detach(d),m=!1,g()}}}function create_if_block_3$7(l){let d,_,m=l[4][l[35]]+"",g;return{c(){d=element("div"),_=text("Unlock at mining level "),g=text(m),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);_=claim_text(b,"Unlock at mining level "),g=claim_text(b,m),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-12 py-3 text-center text-large "+getTextColor(l[35]))},m(y,b){insert_hydration(y,d,b),append_hydration(d,_),append_hydration(d,g)},p(y,b){b[0]&16&&m!==(m=y[4][y[35]]+"")&&set_data(g,m)},i:noop,o:noop,d(y){y&&detach(d)}}}function create_if_block$i(l){let d,_,m=l[35]<10&&create_if_block_1$f(l);return{c(){m&&m.c(),d=empty()},l(g){m&&m.l(g),d=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,d,y),_=!0},p(g,y){g[35]<10&&m.p(g,y)},i(g){_||(transition_in(m),_=!0)},o(g){transition_out(m),_=!1},d(g){m&&m.d(g),g&&detach(d)}}}function create_if_block_1$f(l){let d,_,m,g,y=l[19](l[3][l[35]],0)+"",b,v,k,w,I=l[19](l[9][l[35]],0)+"",E,S,N=l[21](l[12][l[35]],l[12][l[35]]>1e6?1:0)+"",M,A,P,L,D=l[20](Math.max(l[1][l[35]],1),2,!0)+"",x,U,C,F,J,T,Y,K,ne=l[13][l[35]]+"",Z,O,V,H,le=l[20](l[7][l[35]]/l[6][l[35]],l[7][l[35]]/l[6][l[35]]<1e-4?4:2)+"",B,R,G,$,de,oe,X;_=new BeaconToggleButton({props:{index:l[35]}});const te=[create_if_block_2$a,create_else_block$9],q=[];function ee(z,re){return z[11]["beacon tools ii"]?0:1}return C=ee(l),F=q[C]=te[C](l),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),g=element("div"),b=text(y),v=space(),k=element("div"),w=element("div"),E=text(I),S=text(" / "),M=text(N),A=space(),P=element("div"),L=text("+"),x=text(D),U=space(),F.c(),J=space(),T=element("div"),Y=element("div"),K=element("div"),Z=text(ne),O=space(),V=element("div"),H=text("[ "),B=text(le),R=text(" ]"),G=space(),$=element("div"),de=element("div"),oe=element("div"),this.h()},l(z){d=claim_element(z,"DIV",{class:!0});var re=children(d);claim_component(_.$$.fragment,re),re.forEach(detach),m=claim_space(z),g=claim_element(z,"DIV",{class:!0});var ie=children(g);b=claim_text(ie,y),ie.forEach(detach),v=claim_space(z),k=claim_element(z,"DIV",{class:!0});var W=children(k);w=claim_element(W,"DIV",{class:!0});var Q=children(w);E=claim_text(Q,I),S=claim_text(Q," / "),M=claim_text(Q,N),Q.forEach(detach),A=claim_space(W),P=claim_element(W,"DIV",{class:!0});var _e=children(P);L=claim_text(_e,"+"),x=claim_text(_e,D),_e.forEach(detach),W.forEach(detach),U=claim_space(z),F.l(z),J=claim_space(z),T=claim_element(z,"DIV",{class:!0});var Ee=children(T);Y=claim_element(Ee,"DIV",{class:!0});var ye=children(Y);K=claim_element(ye,"DIV",{class:!0});var ce=children(K);Z=claim_text(ce,ne),ce.forEach(detach),O=claim_space(ye),V=claim_element(ye,"DIV",{class:!0});var ae=children(V);H=claim_text(ae,"[ "),B=claim_text(ae,le),R=claim_text(ae," ]"),ae.forEach(detach),ye.forEach(detach),G=claim_space(Ee),$=claim_element(Ee,"DIV",{class:!0});var me=children($);de=claim_element(me,"DIV",{class:!0});var ke=children(de);oe=claim_element(ke,"DIV",{class:!0,style:!0}),children(oe).forEach(detach),ke.forEach(detach),me.forEach(detach),Ee.forEach(detach),this.h()},h(){attr(d,"class","col-span-1"),attr(g,"class","col-span-1 my-1 text-left pl-1 game-text"),attr(w,"class","row-span-1 text-center game-text text-small"),attr(P,"class","row-span-1 text-center game-text text-small"),attr(k,"class","col-span-2 grid grid-rows-2"),attr(K,"class","col-span-3 "+getTextColor(l[35])+" text-left"),attr(V,"class","col-span-2 text-right"),attr(Y,"class","row-span-1 grid grid-cols-5 tooltip-text"),attr(oe,"class",getBgColor(l[35])+" h-1.5 rounded-full"),set_style(oe,"width",(l[14].beacons?"100":l[2][l[35]])+"%"),attr(de,"class","w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700"),attr($,"class","mine-bar-wrapper align-middle"),attr(T,"class","col-span-7 grid grid-rows-2")},m(z,re){insert_hydration(z,d,re),mount_component(_,d,null),insert_hydration(z,m,re),insert_hydration(z,g,re),append_hydration(g,b),insert_hydration(z,v,re),insert_hydration(z,k,re),append_hydration(k,w),append_hydration(w,E),append_hydration(w,S),append_hydration(w,M),append_hydration(k,A),append_hydration(k,P),append_hydration(P,L),append_hydration(P,x),insert_hydration(z,U,re),q[C].m(z,re),insert_hydration(z,J,re),insert_hydration(z,T,re),append_hydration(T,Y),append_hydration(Y,K),append_hydration(K,Z),append_hydration(Y,O),append_hydration(Y,V),append_hydration(V,H),append_hydration(V,B),append_hydration(V,R),append_hydration(T,G),append_hydration(T,$),append_hydration($,de),append_hydration(de,oe),X=!0},p(z,re){(!X||re[0]&8)&&y!==(y=z[19](z[3][z[35]],0)+"")&&set_data(b,y),(!X||re[0]&512)&&I!==(I=z[19](z[9][z[35]],0)+"")&&set_data(E,I),(!X||re[0]&4096)&&N!==(N=z[21](z[12][z[35]],z[12][z[35]]>1e6?1:0)+"")&&set_data(M,N),(!X||re[0]&2)&&D!==(D=z[20](Math.max(z[1][z[35]],1),2,!0)+"")&&set_data(x,D);let ie=C;C=ee(z),C!==ie&&(group_outros(),transition_out(q[ie],1,1,()=>{q[ie]=null}),check_outros(),F=q[C],F||(F=q[C]=te[C](z),F.c()),transition_in(F,1),F.m(J.parentNode,J)),(!X||re[0]&8192)&&ne!==(ne=z[13][z[35]]+"")&&set_data(Z,ne),(!X||re[0]&192)&&le!==(le=z[20](z[7][z[35]]/z[6][z[35]],z[7][z[35]]/z[6][z[35]]<1e-4?4:2)+"")&&set_data(B,le),(!X||re[0]&16388)&&set_style(oe,"width",(z[14].beacons?"100":z[2][z[35]])+"%")},i(z){X||(transition_in(_.$$.fragment,z),transition_in(F),X=!0)},o(z){transition_out(_.$$.fragment,z),transition_out(F),X=!1},d(z){z&&detach(d),destroy_component(_),z&&detach(m),z&&detach(g),z&&detach(v),z&&detach(k),z&&detach(U),q[C].d(z),z&&detach(J),z&&detach(T)}}}function create_else_block$9(l){let d;return{c(){d=element("div"),this.h()},l(_){d=claim_element(_,"DIV",{class:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"class","col-span-1")},m(_,m){insert_hydration(_,d,m)},i:noop,o:noop,d(_){_&&detach(d)}}}function create_if_block_2$a(l){let d,_,m;return _=new BeaconSmartSplitChecks({props:{index:l[35]}}),{c(){d=element("div"),create_component(_.$$.fragment),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var y=children(d);claim_component(_.$$.fragment,y),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-1 py-1 items-center px-1")},m(g,y){insert_hydration(g,d,y),mount_component(_,d,null),m=!0},i(g){m||(transition_in(_.$$.fragment,g),m=!0)},o(g){transition_out(_.$$.fragment,g),m=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block_1$6(l){let d,_,m,g;const y=[create_if_block$i,create_if_block_3$7],b=[];function v(k,w){return k[5].level>=k[4][k[35]]?0:k[35]<10?1:-1}return~(d=v(l))&&(_=b[d]=y[d](l)),{c(){_&&_.c(),m=empty()},l(k){_&&_.l(k),m=empty()},m(k,w){~d&&b[d].m(k,w),insert_hydration(k,m,w),g=!0},p(k,w){let I=d;d=v(k),d===I?~d&&b[d].p(k,w):(_&&(group_outros(),transition_out(b[I],1,1,()=>{b[I]=null}),check_outros()),~d?(_=b[d],_?_.p(k,w):(_=b[d]=y[d](k),_.c()),transition_in(_,1),_.m(m.parentNode,m)):_=null)},i(k){g||(transition_in(_),g=!0)},o(k){transition_out(_),g=!1},d(k){~d&&b[d].d(k),k&&detach(m)}}}function create_each_block$f(l){let d,_,m,g;return m=new BeaconPowerUpgradeButton({props:{index:l[35]}}),{c(){d=element("div"),_=space(),create_component(m.$$.fragment),this.h()},l(y){d=claim_element(y,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(y),claim_component(m.$$.fragment,y),this.h()},h(){attr(d,"class","pt-1")},m(y,b){insert_hydration(y,d,b),insert_hydration(y,_,b),mount_component(m,y,b),g=!0},p:noop,i(y){g||(transition_in(m.$$.fragment,y),g=!0)},o(y){transition_out(m.$$.fragment,y),g=!1},d(y){y&&detach(d),y&&detach(_),destroy_component(m,y)}}}function create_fragment$j(l){let d,_,m,g,y=l[19](l[8].beaconPower||0)+"",b,v,k,w,I,E=l[19](25*l[9].reduce(l[22],1)*l[0][0],0)+"",S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O,V,H,le,B;function R(z,re){return z[11]["beacon tools"]?create_if_block_4$5:create_else_block_2$2}let G=R(l),$=G(l),de=l[9],oe=[];for(let z=0;z<de.length;z+=1)oe[z]=create_each_block_1$6(get_each_context_1$6(l,de,z));const X=z=>transition_out(oe[z],1,1,()=>{oe[z]=null});let te=l[15],q=[];for(let z=0;z<te.length;z+=1)q[z]=create_each_block$f(get_each_context$f(l,te,z));const ee=z=>transition_out(q[z],1,1,()=>{q[z]=null});return{c(){d=element("div"),_=element("div"),m=text("You have "),g=element("span"),b=text(y),v=text(" beacon power."),k=space(),w=element("div"),I=text("+"),S=text(E),N=text(` 
    / sec - multiplied for each beacon path above level 10,000`),M=space(),A=element("div"),P=space(),L=element("div"),D=element("div"),x=element("input"),U=space(),$.c(),C=space();for(let z=0;z<oe.length;z+=1)oe[z].c();F=space(),J=element("div"),T=space();for(let z=0;z<q.length;z+=1)q[z].c();Y=space(),K=element("div"),ne=text("i"),Z=space(),O=element("div"),V=text("s"),this.h()},l(z){d=claim_element(z,"DIV",{class:!0});var re=children(d);_=claim_element(re,"DIV",{class:!0});var ie=children(_);m=claim_text(ie,"You have "),g=claim_element(ie,"SPAN",{class:!0});var W=children(g);b=claim_text(W,y),W.forEach(detach),v=claim_text(ie," beacon power."),ie.forEach(detach),k=claim_space(re),w=claim_element(re,"DIV",{class:!0});var Q=children(w);I=claim_text(Q,"+"),S=claim_text(Q,E),N=claim_text(Q,` 
    / sec - multiplied for each beacon path above level 10,000`),Q.forEach(detach),M=claim_space(re),A=claim_element(re,"DIV",{class:!0}),children(A).forEach(detach),P=claim_space(re),L=claim_element(re,"DIV",{class:!0});var _e=children(L);D=claim_element(_e,"DIV",{class:!0});var Ee=children(D);x=claim_element(Ee,"INPUT",{id:!0,class:!0,placeholder:!0}),Ee.forEach(detach),U=claim_space(_e),$.l(_e),C=claim_space(_e);for(let ae=0;ae<oe.length;ae+=1)oe[ae].l(_e);F=claim_space(_e),J=claim_element(_e,"DIV",{class:!0}),children(J).forEach(detach),T=claim_space(_e);for(let ae=0;ae<q.length;ae+=1)q[ae].l(_e);Y=claim_space(_e),K=claim_element(_e,"DIV",{class:!0});var ye=children(K);ne=claim_text(ye,"i"),ye.forEach(detach),Z=claim_space(_e),O=claim_element(_e,"DIV",{});var ce=children(O);V=claim_text(ce,"s"),ce.forEach(detach),_e.forEach(detach),re.forEach(detach),this.h()},h(){attr(g,"class","text-cyan-300 font-bold"),attr(_,"class","beacon-power-display text-center text-large game-text"),attr(w,"class","beacon-power-tooltip text-center tooltip-text"),attr(A,"class","py-2"),attr(x,"id","max"),attr(x,"class","content-center w-20 bg-gray-700 text-white"),attr(x,"placeholder","1"),attr(D,"class","p-1 col-span-2"),attr(J,"class","py-2"),attr(K,"class","col-span-12 pb-15"),attr(L,"class","beacon-assign-grid grid grid-cols-12"),attr(d,"class","wrapper py-2")},m(z,re){insert_hydration(z,d,re),append_hydration(d,_),append_hydration(_,m),append_hydration(_,g),append_hydration(g,b),append_hydration(_,v),append_hydration(d,k),append_hydration(d,w),append_hydration(w,I),append_hydration(w,S),append_hydration(w,N),append_hydration(d,M),append_hydration(d,A),append_hydration(d,P),append_hydration(d,L),append_hydration(L,D),append_hydration(D,x),set_input_value(x,l[10]),append_hydration(L,U),$.m(L,null),append_hydration(L,C);for(let ie=0;ie<oe.length;ie+=1)oe[ie]&&oe[ie].m(L,null);append_hydration(L,F),append_hydration(L,J),append_hydration(L,T);for(let ie=0;ie<q.length;ie+=1)q[ie]&&q[ie].m(L,null);append_hydration(L,Y),append_hydration(L,K),append_hydration(K,ne),append_hydration(L,Z),append_hydration(L,O),append_hydration(O,V),H=!0,le||(B=listen(x,"input",l[23]),le=!0)},p(z,re){if((!H||re[0]&256)&&y!==(y=z[19](z[8].beaconPower||0)+"")&&set_data(b,y),(!H||re[0]&513)&&E!==(E=z[19](25*z[9].reduce(z[22],1)*z[0][0],0)+"")&&set_data(S,E),re[0]&1024&&x.value!==z[10]&&set_input_value(x,z[10]),G===(G=R(z))&&$?$.p(z,re):($.d(1),$=G(z),$&&($.c(),$.m(L,C))),re[0]&3701502){de=z[9];let ie;for(ie=0;ie<de.length;ie+=1){const W=get_each_context_1$6(z,de,ie);oe[ie]?(oe[ie].p(W,re),transition_in(oe[ie],1)):(oe[ie]=create_each_block_1$6(W),oe[ie].c(),transition_in(oe[ie],1),oe[ie].m(L,F))}for(group_outros(),ie=de.length;ie<oe.length;ie+=1)X(ie);check_outros()}if(re[0]&32768){te=z[15];let ie;for(ie=0;ie<te.length;ie+=1){const W=get_each_context$f(z,te,ie);q[ie]?(q[ie].p(W,re),transition_in(q[ie],1)):(q[ie]=create_each_block$f(W),q[ie].c(),transition_in(q[ie],1),q[ie].m(L,Y))}for(group_outros(),ie=te.length;ie<q.length;ie+=1)ee(ie);check_outros()}},i(z){if(!H){for(let re=0;re<de.length;re+=1)transition_in(oe[re]);for(let re=0;re<te.length;re+=1)transition_in(q[re]);H=!0}},o(z){oe=oe.filter(Boolean);for(let re=0;re<oe.length;re+=1)transition_out(oe[re]);q=q.filter(Boolean);for(let re=0;re<q.length;re+=1)transition_out(q[re]);H=!1},d(z){z&&detach(d),$.d(),destroy_each(oe,z),destroy_each(q,z),le=!1,B()}}}function getBgColor(l){return l<3?"bg-emerald-400":l<6?"bg-yellow-400":l<8?"bg-orange-400":"bg-red-400"}function getTextColor(l){return l<3?"text-emerald-400":l<6?"text-amber-200":l<8?"text-orange-400":"text-red-400"}function instance$j(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U;component_subscribe(l,beaconActivations,B=>_(3,g=B)),component_subscribe(l,wallet,B=>_(27,y=B)),component_subscribe(l,beaconSmartSplits,B=>_(28,b=B)),component_subscribe(l,beaconMiningLevelReqs,B=>_(4,v=B)),component_subscribe(l,mineLevel,B=>_(5,k=B)),component_subscribe(l,settings,B=>_(29,w=B)),component_subscribe(l,beaconNextReqs,B=>_(6,I=B)),component_subscribe(l,beaconProgress,B=>_(7,E=B)),component_subscribe(l,beaconBonuses,B=>_(0,S=B)),component_subscribe(l,resources,B=>_(8,N=B)),component_subscribe(l,beaconLevels,B=>_(9,M=B)),component_subscribe(l,beaconSpendAmt,B=>_(10,A=B)),component_subscribe(l,automationItemsUnlocked,B=>_(11,P=B)),component_subscribe(l,beaconMaxLevels,B=>_(12,L=B)),component_subscribe(l,beaconNameText,B=>_(13,D=B)),component_subscribe(l,antiFlickerFlags,B=>_(14,x=B)),component_subscribe(l,beaconUpgrades,B=>_(15,U=B));let C=S;onMount(()=>{_(1,C=S),setInterval(()=>{for(let B=0;B<30;B++)_(2,m[B]=Math.min(100,E[B]/I[B]*100),m);_(2,m)},w.UPDATE_SPEED)}),onDestroy(()=>{});function F(){let B=!1,R=0;for(;!B&&R<10;)k.level<v[R]&&(B=!0),R++;if(R==10&&(R=11),R==1){set_store_value(beaconActivations,g[0]+=y.beacons,g),set_store_value(wallet,y.beacons=0,y);return}for(let de in g)set_store_value(wallet,y.beacons+=g[de],y),set_store_value(beaconActivations,g[de]=0,g);let G=0;const $=y.beacons;for(let de=0;de<R-1;de++)set_store_value(beaconActivations,g[de]=Math.floor($/(R-1)),g),G+=g[de];set_store_value(wallet,y.beacons-=G,y),G<formula.sumArray(g)&&set_store_value(wallet,y.beacons+=Math.floor(formula.sumArray(g)-G),y)}function J(){if(formula.sumArray(b)==0)return;let B=!1,R=0,G=0;for(;!B&&G<10;)k.level<v[G]&&(B=!0),b[G]&&R++,G++;R==10&&(R=11),R==0&&(R=1);for(let oe in g)set_store_value(wallet,y.beacons+=g[oe],y),set_store_value(beaconActivations,g[oe]=0,g);let $=0;const de=y.beacons;for(let oe=0;oe<G-1;oe++)b[oe]&&(set_store_value(beaconActivations,g[oe]=Math.floor(de/R),g),$+=g[oe]);set_store_value(wallet,y.beacons-=$,y),$<formula.sumArray(g)&&set_store_value(wallet,y.beacons+=Math.floor(formula.sumArray(g)-$),y),console.log(b)}function T(){for(let B in g)set_store_value(wallet,y.beacons+=g[B],y),set_store_value(beaconActivations,g[B]=0,g)}const Y=(B,R=0)=>B<1e9?B.toFixed(B<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):B.toExponential(3).toString().replace("+",""),K=(B,R=3,G=!1)=>(G&&(B-=1),B<1e9?(B*100).toFixed(B*100<1e3?R:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(B*100).toExponential(R).toString().replace("+","")+"%"),ne=(B,R=3)=>B.toExponential(R).toString().replace("+",""),Z=(B,R)=>B*(R>1e4?Math.log10(R)-3:1);function O(){A=this.value,beaconSpendAmt.set(A)}const V=()=>F(),H=()=>J(),le=()=>T();return l.$$.update=()=>{l.$$.dirty[0]&1&&_(1,C=S)},_(2,m=Array(30).fill(0)),[S,C,m,g,v,k,I,E,N,M,A,P,L,D,x,U,F,J,T,Y,K,ne,Z,O,V,H,le]}class Beacons extends SvelteComponent{constructor(d){super(),init(this,d,instance$j,create_fragment$j,safe_not_equal,{},null,[-1,-1])}}const TEST_SERVER_SPEEDUP=1,PROGRESS_BASE=1;function instance$i(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O,V,H,le,B,R,G,$,de,oe,X,te,q,ee,z,re,ie,W,Q,_e,Ee,ye,ce,ae,me;component_subscribe(l,buttonRadiumProgress,j=>_(10,m=j)),component_subscribe(l,wallet,j=>_(11,g=j)),component_subscribe(l,miningUpgrades,j=>_(12,y=j)),component_subscribe(l,miningUpgradeLevelsFree,j=>_(13,b=j)),component_subscribe(l,miningUpgradeLevels,j=>_(14,v=j)),component_subscribe(l,miningUpgradeLevelsBought,j=>_(15,k=j)),component_subscribe(l,enchantUpgradeLevels,j=>_(16,w=j)),component_subscribe(l,enchantUpgrades,j=>_(17,I=j)),component_subscribe(l,beaconLevels,j=>_(18,E=j)),component_subscribe(l,beaconFormulas,j=>_(19,S=j)),component_subscribe(l,beaconBonuses,j=>_(20,N=j)),component_subscribe(l,beaconPowerFlavorText,j=>_(21,M=j)),component_subscribe(l,resources,j=>_(22,A=j)),component_subscribe(l,beaconNums,j=>_(23,P=j)),component_subscribe(l,beaconNextReqs,j=>_(24,L=j)),component_subscribe(l,beaconProgress,j=>_(25,D=j)),component_subscribe(l,challengeActive,j=>_(26,x=j)),component_subscribe(l,challengesCompleted,j=>_(27,U=j)),component_subscribe(l,beaconUpgradeLevels,j=>_(28,C=j)),component_subscribe(l,beaconUpgrades,j=>_(29,F=j)),component_subscribe(l,beaconActivations,j=>_(30,J=j)),component_subscribe(l,miningUpgradeLevelsFreeTemp,j=>_(31,T=j)),component_subscribe(l,miningUpgradeLevelsBoughtTemp,j=>_(32,Y=j)),component_subscribe(l,miningUpgradeLevelsTemp,j=>_(33,K=j)),component_subscribe(l,challengeGoals,j=>_(34,ne=j)),component_subscribe(l,keyCrafts,j=>_(35,Z=j)),component_subscribe(l,keyCraftMastery,j=>_(36,O=j)),component_subscribe(l,keyCraftTimes,j=>_(37,V=j)),component_subscribe(l,keyCraftAmount,j=>_(38,H=j)),component_subscribe(l,visibleTier,j=>_(39,le=j)),component_subscribe(l,miningDropTable,j=>_(40,B=j)),component_subscribe(l,keyGainFlavorText,j=>_(41,R=j)),component_subscribe(l,progress,j=>_(42,G=j)),component_subscribe(l,gemGainFlavorText,j=>_(43,$=j)),component_subscribe(l,allMultipliers,j=>_(44,de=j)),component_subscribe(l,buttonStats,j=>_(45,oe=j)),component_subscribe(l,challenge3Multi,j=>_(46,X=j)),component_subscribe(l,mineLevel,j=>_(47,te=j)),component_subscribe(l,progressAverage,j=>_(48,q=j)),component_subscribe(l,enchantThreshold,j=>_(49,ee=j)),component_subscribe(l,enchantProgress,j=>_(50,z=j)),component_subscribe(l,progressThisTick,j=>_(51,re=j)),component_subscribe(l,progressThreshold,j=>_(52,ie=j)),component_subscribe(l,settings,j=>_(53,W=j)),component_subscribe(l,challengeProgress,j=>_(54,Q=j)),component_subscribe(l,buttonUpgradeLevels,j=>_(55,_e=j)),component_subscribe(l,buttonUpgrades,j=>_(56,Ee=j)),component_subscribe(l,unlockedRes,j=>_(57,ye=j)),component_subscribe(l,automationItemsUnlocked,j=>_(58,ce=j)),component_subscribe(l,activityLog,j=>_(59,ae=j)),component_subscribe(l,activityLogShow,j=>_(60,me=j));const ke=(j,Ie=0)=>j<1e9?j.toFixed(Ie).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):j.toExponential(3).toString().replace("+","");function Se(j,Ie,ue){if(!me[ue])return;const he=[j,Ie];set_store_value(activityLog,ae=[...ae,he],ae),ae.length>100&&ae.shift()}let Ne=Date.now();const xe=W.UPDATE_SPEED;let Pe,Be,Te=0;onMount(()=>{kt(),Pe=Date.now(),setInterval(()=>{Be=TEST_SERVER_SPEEDUP*(Date.now()-Pe)/xe,Xe(Be),be(),fe(),De(),W.activeTab!=="beacons"?Te>=10?(Ce(Be*10,!0),Te=0):Te++:(Ce(Be),Te++),ce.beaconizer&&set_store_value(wallet,g.beacons=(g.beacons||0)+50*(xe*Be/1e3),g),Pe=Date.now()},xe),setInterval(()=>{for(let[j,Ie]of Object.entries(g))Ie>0&&!ye.has(j)&&ye.add(j)},773+Math.random()*227),setInterval(()=>{He(Be)},xe+Math.random()*3)});function be(){if(te.xp>=te.xpNextReq){set_store_value(mineLevel,te.xp-=te.xpNextReq,te),set_store_value(mineLevel,te.level++,te);const j=te.level,Ie=15e-5;set_store_value(mineLevel,te.xpNextReq=100*j**3*Math.pow(1.01+j**2*Ie,j)*Math.pow(2+Math.max(0,j-69)*.3,j>69?j:0),te)}}let Ve=1;function He(j){x!==3&&set_store_value(challenge3Multi,X=1,X);let Ie=de.mineSpeed.formula(g.artifacts||0),ue=1,he=1;x===1&&(ue=.5/(1+U[0]),he=Math.max(.15,.54-U[0]*.03));let je=Math.pow(PROGRESS_BASE*y[0].formula(v[0])*Math.max(1,N[1])*Ee[3].formula(_e[3])*Ve*X*ue*Ie,he),ve=ie.gems*(xe/1e3)*25;je>ve&&(je=ve+Math.sqrt(je-ve)),set_store_value(progressAverage,q.gems=je,q),set_store_value(progressThisTick,re.gems=je*j,re);let Fe=Math.pow((v[3]>0?PROGRESS_BASE*y[3].formula(v[3]):0)*y[26].formula(v[26])*Ve*X*Ie*ue,he);ve=ie.key1*(xe/1e3)*25,Fe>ve&&(Fe=ve+Math.sqrt(Fe-ve)),set_store_value(progressAverage,q.key1=Fe,q),set_store_value(progressThisTick,re.key1=Fe*j,re);let lt=Math.pow((v[4]>0?PROGRESS_BASE*y[4].formula(v[4]):0)*y[26].formula(v[26])*Ve*X*Ie*ue,he);ve=ie.key2*(xe/1e3)*10,lt>ve&&(lt=ve+Math.sqrt(lt-ve)),set_store_value(progressAverage,q.key2=lt,q),set_store_value(progressThisTick,re.key2=lt*j,re);let rt=Math.pow((v[18]>0?PROGRESS_BASE*y[18].formula(v[18]):0)*y[26].formula(v[26])*N[5]*Ve*X*Ie*ue,he);ve=ie.key3*(xe/1e3)*1,rt>ve&&(rt=ve+Math.sqrt(rt-ve)),set_store_value(progressAverage,q.key3=rt,q),set_store_value(progressThisTick,re.key3=rt*j,re)}let We=0,Ze=0,$e=0;function et(){isNaN(z.t1)&&set_store_value(enchantProgress,z.t1=Ze,z),isNaN(te.xp)&&set_store_value(mineLevel,te.xp=We,te),isNaN(re.gems)&&set_store_value(progressThisTick,re.gems=0,re),isNaN(re.key1)&&set_store_value(progressThisTick,re.key1=0,re),isNaN(re.key2)&&set_store_value(progressThisTick,re.key2=0,re),isNaN(re.key3)&&set_store_value(progressThisTick,re.key3=0,re),isNaN(re.key4)&&set_store_value(progressThisTick,re.key4=0,re),isNaN(re.key5)&&set_store_value(progressThisTick,re.key5=0,re),isNaN(g.challengePoints)&&set_store_value(wallet,g.challengePoints=$e,g)}function Xe(j){Ze=z.t1||0,We=te.xp||0,$e=Q||0;const Ie=ie.gems,ue=[ie.key1,ie.key2,ie.key3,ie.key4,ie.key5];if(!(j>1e3/xe*120&&!W.offlineProgress)){if(set_store_value(wallet,g.crystals+=j*formula.calcCrystalGainFromRadium()/xe,g),j>16||document.hidden){if(console.log("oi"),Qe(re.gems/ie.gems*.9),We=te.xp,set_store_value(mineLevel,te.xp+=re.gems/ie.gems*formula.getMineXPPerCycle(),te),x!==0&&set_store_value(wallet,g.warp=(g.warp||0)+Math.log(q.gems+1)*(xe/1e3)*(1+U[x-1]*.33),g),isNaN(te.xp)&&set_store_value(mineLevel,te.xp=We,te),_t(re.gems/ie.gems*.9),Ge(re.key1/ie.key1*.9,ue),Ke(re.key2/ie.key2*.9,ue),Ue(re.key3/ie.key3*.9,ue),Ze=z.t1,set_store_value(enchantProgress,z.t1+=re.gems/ie.gems,z),z.t1>ee.t1&&(Oe(Math.floor(z.t1/ee.t1)),set_store_value(enchantProgress,z.t1%=ee.t1,z)),isNaN(Ze)&&set_store_value(enchantProgress,z.t1=Ze,z),x!==0&&x!==4&&set_store_value(wallet,g.warp=(g.warp||0)+Math.log(G.gems+1)*(xe/1e3)*(1+U[x-1]*.33),g),et(),x!==0)for(let he of["gems","key1","key2","key3","key4","key5"])Le((re[he]||0)/(ie[he]||1),he);return}for(let[he,je]of Object.entries(re))isNaN(G[he])&&set_store_value(progress,G[he]=0,G),set_store_value(progress,G[he]+=je,G);if(G.gems>=Ie){for(let[he,je]of Object.entries(z))set_store_value(enchantProgress,z[he]+=Math.floor(G.gems/Ie),z),z[he]>=ee[he]&&(Oe(Math.floor(z[he]/ee[he])),set_store_value(enchantProgress,z[he]%=ee[he],z));Qe(G.gems/Ie,q.gems),_t(Math.floor(G.gems/Ie)),set_store_value(mineLevel,te.xp+=G.gems/Ie*formula.getMineXPPerCycle(),te),set_store_value(progress,G.gems=0,G)}G.key1>=ue[0]&&Ge(Math.floor(G.key1/ue[0]),ue),G.key2>=ue[1]&&Ke(Math.floor(G.key2/ue[1]),ue),G.key3>=ue[2]&&Ue(Math.floor(G.key3/ue[2]),ue),x!==0&&set_store_value(wallet,g.warp=(g.warp||0)+Math.log(G.gems+1)*(xe/1e3)*(1+U[x-1]*.33),g),set_store_value(wallet,g.fame=(g.fame||0)+y[28].formula(v[28])*(xe/1e3),g),et()}}function Le(j,Ie){set_store_value(wallet,g.challengePoints=(g.challengePoints||0)+formula.calcChallengePointGain(j,Ie),g)}let Re=Date.now();function Qe(j,Ie){isNaN(j)&&(j=1),x===3&&set_store_value(challenge3Multi,X*=.999-U[2]*.001,X);const he=(1+y[1].formula(v[1]))*y[8].formula(v[8])*Math.max(1,N[3])*Math.max(1,y[10].formula(v[10]))*Math.max(1,y[20].formula(v[20]))*Math.max(1,y[25].formula(v[25]))*Math.max(1,de.gems.formula(g.artifacts||0))*oe.hardenedBonus*de.gems.formula(g.artifacts||0);Date.now()-Re>1e3&&(set_store_value(gemGainFlavorText,$=he,$),Re=Date.now()),set_store_value(wallet,g.gems+=he*j,g),x!==0&&Le(j,"gems")}function Ge(j,Ie){const he=8*N[5]*y[5].formula(v[5])*y[26].formula(v[26]);set_store_value(wallet,g.key1=(g.key1||0)+he*j,g),set_store_value(progress,G.key1%=Ie[0],G),set_store_value(keyGainFlavorText,R.key1=he,R),x!==0&&Le(j,"key1")}function Ke(j,Ie){const he=1*N[5]*y[5].formula(v[5])*y[26].formula(v[26]);set_store_value(wallet,g.key2=(g.key2||0)+he*j,g),set_store_value(progress,G.key2%=Ie[1],G),set_store_value(keyGainFlavorText,R.key2=he,R),x!==0&&Le(j,"key2")}function Ue(j,Ie){const he=.075*N[5]*y[5].formula(v[5])*y[26].formula(v[26]);set_store_value(wallet,g.key3=(g.key3||0)+he*j,g),set_store_value(progress,G.key3%=Ie[2],G),set_store_value(keyGainFlavorText,R.key3=he,R),x!==0&&Le(j,"key3")}function _t(j){let Ie={};for(let[ue,he]of Object.entries(B))if(le>=ref.dropTiers[ue]){if(he[0]>=1){Ie[ue]=(Ie[ue]||0)+j*(he[1]+Math.random()*(he[2]-he[1]));continue}else if(j>1/he[0]){const je=Math.sqrt(j*he[0]*(1-he[0])),ve=Array.from({length:Math.floor(Math.sqrt(j))},()=>Math.floor(he[1]+Math.random()*(he[2]-he[1]))),Fe=Math.random()*2.83+.01,lt=he[0]*j+Math.max((Math.random()>.5?1:-1)*je*Math.pow(Fe/(Fe-5),6),0),rt=(ve[Math.floor(Math.random()*ve.length)]+ve[Math.floor(Math.random()*ve.length)]+ve[Math.floor(Math.random()*ve.length)])/3;Ie[ue]=(Ie[ue]||0)+lt*rt}else if(Math.random()/j<he[0]){const je=he[1]+Math.random()*(he[2]-he[1]);Ie[ue]=(Ie[ue]||0)+je}}for(let[ue,he]of Object.entries(Ie))set_store_value(wallet,g[ue]=(g[ue]||0)+he,g)}function fe(){for(let[j,Ie]of Z.entries()){const ue=Ie.item;if(!V[ue]){set_store_value(keyCraftTimes,V[ue]=[-1,-1],V),set_store_value(keyCraftAmount,H[ue]=0,H),set_store_value(keyCraftMastery,O[ue]=[1,0,10],O);continue}const he=V[ue][1];Date.now()>he&&he!=-1&&(set_store_value(keyCraftAmount,H[ue]++,H),set_store_value(wallet,g[ue]=(g[ue]||0)+formula.calcKeyCraftAmountGained(j),g),set_store_value(keyCraftTimes,V[ue][1]=-1,V),set_store_value(keyCraftMastery,O[ue][1]=parseInt(O[ue][1]||0)+1,O),O[ue][1]>=O[ue][2]&&(set_store_value(keyCraftMastery,O[ue][0]++,O),set_store_value(keyCraftMastery,O[ue][1]=0,O),ue=="energizedCrystal"?set_store_value(keyCraftMastery,O[ue][2]=3,O):set_store_value(keyCraftMastery,O[ue][2]=10+15*O[ue][0]*Math.pow(1.25,O[ue][0]),O),set_store_value(keyCraftMastery,O[ue][2]=Math.floor(O[ue][2]),O),Se("[Keys] Crafting Mastery for "+Ie.name+"increased! ("+O[ue][0]+")","text-amber-400","crafting")),Se("[Crafting] Crafting complete: +"+ke(formula.calcKeyCraftAmountGained(j))+" "+Z[j].name,Z[j].style||"text-white","crafting"))}}function De(){if(g.challengePoints>(ne[x-1]||1e300)){if(set_store_value(challengesCompleted,U[x-1]++,U),set_store_value(wallet,g.challengePoints=0,g),set_store_value(wallet,g.trophies=(g.trophies||0)+1,g),challengeGoals.updateChallengeReqs(),Se("[Challenges] Challenge "+x+" completed! (Completion "+U[x-1]+")","text-amber-400","challenges"),x===2){set_store_value(challengeActive,x=0,x);for(let j in v)set_store_value(miningUpgradeLevelsBought,k[j]=Y[j],k),set_store_value(miningUpgradeLevelsFree,b[j]=T[j],b);for(let j in v)set_store_value(miningUpgradeLevelsTemp,K[j]=0,K),set_store_value(miningUpgradeLevelsBoughtTemp,Y[j]=0,Y),set_store_value(miningUpgradeLevelsFreeTemp,T[j]=0,T);set_store_value(miningUpgradeLevels,v=v.map((j,Ie)=>k[Ie]+b[Ie]),v),console.log(v),console.log(k)}set_store_value(challengeActive,x=0,x),set_store_value(wallet,g.challengePoints=0,g)}}let we=new Set;function Ce(j,Ie=!1){isNaN(A.beaconPower)&&set_store_value(resources,A.beaconPower=0,A);const ue=J.map(ve=>ve*j*Math.max(1,F[0].formula(C[0]))*Math.max(1,F[2].formula(C[2]))*Math.max(1,y[12].formula(v[12]))*Math.max(1,y[24].formula(v[24]))),he=x==4?Math.max(1e-18,.01/Math.pow(10,U[3]||0)):1;set_store_value(beaconProgress,D=D.map((ve,Fe)=>ve+Math.pow(ue[Fe],x==4?Math.max(.05,.9-U[3]*.05):1)*he),D);for(let ve=0;ve<10;ve++)if(isNaN(D[ve])&&set_store_value(beaconProgress,D[ve]=0,D),D[ve]>=L[ve]&&!we.has(ve)){we.add(ve);const Fe=Math.min(Math.max(1,formula.maxNumGeom(D[ve],L[ve],P[ve][1])),Ie?20:2);x===4&&set_store_value(wallet,g.challengePoints+=Fe*ref.challengePointValues.beaconLevels,g),set_store_value(beaconProgress,D[ve]-=Math.max(L[ve],formula.gSum(L[ve],P[ve][1],Fe)),D),set_store_value(beaconLevels,E[ve]+=Fe,E);const lt=1.0000025;set_store_value(beaconBonuses,N[ve]=S[ve](E[ve])*Math.pow(lt,E[ve]),N);const rt=1.0005;set_store_value(beaconNextReqs,L[ve]=(P[ve][0]+1)*E[ve]*Math.pow(rt,E[ve]),L),Date.now()-Ne>1e3&&(Ne=Date.now(),miningDropTable.updateTable()),we.delete(ve)}const je=25*(xe/1e3)*E.reduce((ve,Fe)=>ve*(Fe>1e4?Math.log10(Fe)-3:1),1)*N[0]*j;set_store_value(resources,A.beaconPower=(A.beaconPower||0)+je,A),challengeActive!==0&&set_store_value(wallet,g.challengePoints=(g.challengePoints||0)+formula.calcChallengePointGain(je,"beaconPower"),g),set_store_value(beaconPowerFlavorText,M=je,M)}function kt(){for(let j=0;j<E.length;j++)set_store_value(beaconBonuses,N[j]=S[j](E[j]),N)}let se=!1;function Oe(j,Ie){if(j>100)return;const ue=I[0].formula(w[0]),he=I[1].formula(w[1]);for(let[je,ve]of I.entries())if(Math.random()/j<ve.formula(w[je]))switch(je){case 0:break;case 1:break;case 2:Qe(ue),Se("[Burst] +"+ke(ue)+" mining cycles","text-violet-300","burst");break;case 3:const lt=(Math.random()+.3)*Math.pow(1+he,3);set_store_value(wallet,g.orbs+=lt,g),Se("[Orb Rush] +"+ke(lt)+" orbs","text-violet-300","orb rush");break;case 4:if(se)break;Ve*=Math.pow(ue,.7)*3+3,se=!0,setTimeout(()=>{Ve/=Math.pow(ue,.7)*3+3,Math.abs(Ve-Math.round(Ve))<.1&&(Ve=Math.round(Ve)),se=!1},3e3),Se("[Lightning Blast] "+ke(Math.pow(ue,.7)*3+3)+"x mining speed for 3 seconds!","text-violet-300","lightning blast");break;case 5:const rt=[0,1,2,3,4,7,8];let ut=!1;for(;!ut;){const Nt=Math.floor(Math.random()*rt.length),St=rt[Nt];k[St]<y[St].maxLevel&&(set_store_value(miningUpgradeLevels,v[St]++,v),set_store_value(miningUpgradeLevelsFree,b[St]++,b),ut=!0,Se("[Scavenger] Added 1 level of "+y[St].name+"!","text-violet-300","scavenger"))}break;case 6:const ze=Math.random()+.2*(he/1e6),ge=ue;let Me;const qe=Math.random()*.2+.9;let Ye=1+Math.floor(qe*ge);ze>1.18?(Me=5,Ye=Ye/25e4+1,Se("[KEY BOON] INCREDIBLE! +"+ke(Ye)+" [*****] keys!","text-amber-400","key boon")):ze>1.15?(Me=4,Ye=Ye/1e4+1,Se("[Key Boon] Excellent! +"+ke(Ye)+" [****] keys","text-violet-400","key boon")):ze>.9975?(Me=3,Ye=Ye/1e3+1,Se("[Key Boon] Great! +"+ke(Ye)+" [***] keys","text-pink-300","key boon")):ze>.925?(Me=2,Ye=Ye/10+1,Se("[Key Boon] Great! +"+ke(Ye)+" [**] keys","text-blue-300","key boon")):(Me=1,Ye=Ye*10+1,Se("[Key Boon] +"+ke(Ye)+" [*] keys","text-green-300","key boon")),set_store_value(wallet,g["key"+Me]+=Ye,g);break;case 7:const ot=ue/100,st=Math.random()*(400-he/2550);let tt,wt,It;st<1?(tt=600,wt="PERFECT! +",It="text-amber-500"):st<=2?(tt=300,wt="INCREDIBLE +",It="text-pink-500"):st<=4?(tt=140,wt="Excellent +",It="text-violet-500"):st<=7?(tt=60,wt="Great +",It="text-sky-500"):st<=10?(tt=25,wt="Good +",It="text-green-500"):(tt=10,wt="Okay +",It="text-gray-400"),tt=Math.floor(tt*ot),set_store_value(buttonRadiumProgress,m[0]+=tt,m),m[0]>=m[1]&&(set_store_value(wallet,g.radium+=Math.floor(m[0]/m[1]),g),set_store_value(buttonRadiumProgress,m[0]%=m[1],m)),Se("[Clicker Hero] "+wt+ke(tt)+" radioactivity",It,"clicker hero");break}}return[]}class Adders extends SvelteComponent{constructor(d){super(),init(this,d,instance$i,null,safe_not_equal,{},null,[-1,-1,-1])}}function get_each_context$e(l,d,_){const m=l.slice();return m[34]=d[_],m}function get_each_context_1$5(l,d,_){const m=l.slice();return m[37]=d[_],m}function get_each_context_2$2(l,d,_){const m=l.slice();return m[40]=d[_],m}function create_if_block_7$1(l){let d,_,m,g=l[21][Math.max(0,ref.dropTiers[l[40][0]]-1)]+"",y,b,v,k,w,I=(l[13][l[40][0]]?ref.displayNames[l[40][0]]||l[40][0]:"???")+"",E,S,N,M,A=l[23](Math.min(1,l[40][1][0]),l[40][1][0]<.001?l[40][1][0]<1e-4?l[40][1][0]<1e-5?6:5:4:3)+"",P,L,D,x,U,C=l[22](l[40][1][1],0)+"",F,J,T=l[22](l[40][1][2],0)+"",Y,K,ne;return{c(){d=element("div"),_=element("div"),m=text("["),y=text(g),b=text("]"),k=space(),w=element("div"),E=text(I),N=space(),M=element("div"),P=text(A),D=space(),x=element("div"),U=text("[ "),F=text(C),J=text(" - "),Y=text(T),K=text(" ]"),ne=space(),this.h()},l(Z){d=claim_element(Z,"DIV",{class:!0});var O=children(d);_=claim_element(O,"DIV",{class:!0});var V=children(_);m=claim_text(V,"["),y=claim_text(V,g),b=claim_text(V,"]"),V.forEach(detach),k=claim_space(O),w=claim_element(O,"DIV",{class:!0});var H=children(w);E=claim_text(H,I),H.forEach(detach),N=claim_space(O),M=claim_element(O,"DIV",{class:!0});var le=children(M);P=claim_text(le,A),le.forEach(detach),D=claim_space(O),x=claim_element(O,"DIV",{class:!0});var B=children(x);U=claim_text(B,"[ "),F=claim_text(B,C),J=claim_text(B," - "),Y=claim_text(B,T),K=claim_text(B," ]"),B.forEach(detach),ne=claim_space(O),O.forEach(detach),this.h()},h(){attr(_,"class",v="col-span-1 text-left "+(ref.dropTierColors[ref.dropTiers[l[40][0]]]||"text-white")),attr(w,"class",S="col-span-3 text-left pl-[8px] "+(ref.colors[l[40][0]]||"text-white")),attr(M,"class",L="col-span-3 "+(l[40][1][0]>=l[40][1][3]?"text-amber-200":"")+" text-left pl-1"),attr(x,"class","col-span-2 text-right pl-1"),attr(d,"class","drop-table-disp grid grid-cols-9")},m(Z,O){insert_hydration(Z,d,O),append_hydration(d,_),append_hydration(_,m),append_hydration(_,y),append_hydration(_,b),append_hydration(d,k),append_hydration(d,w),append_hydration(w,E),append_hydration(d,N),append_hydration(d,M),append_hydration(M,P),append_hydration(d,D),append_hydration(d,x),append_hydration(x,U),append_hydration(x,F),append_hydration(x,J),append_hydration(x,Y),append_hydration(x,K),append_hydration(d,ne)},p(Z,O){O[0]&1&&g!==(g=Z[21][Math.max(0,ref.dropTiers[Z[40][0]]-1)]+"")&&set_data(y,g),O[0]&1&&v!==(v="col-span-1 text-left "+(ref.dropTierColors[ref.dropTiers[Z[40][0]]]||"text-white"))&&attr(_,"class",v),O[0]&8193&&I!==(I=(Z[13][Z[40][0]]?ref.displayNames[Z[40][0]]||Z[40][0]:"???")+"")&&set_data(E,I),O[0]&1&&S!==(S="col-span-3 text-left pl-[8px] "+(ref.colors[Z[40][0]]||"text-white"))&&attr(w,"class",S),O[0]&1&&A!==(A=Z[23](Math.min(1,Z[40][1][0]),Z[40][1][0]<.001?Z[40][1][0]<1e-4?Z[40][1][0]<1e-5?6:5:4:3)+"")&&set_data(P,A),O[0]&1&&L!==(L="col-span-3 "+(Z[40][1][0]>=Z[40][1][3]?"text-amber-200":"")+" text-left pl-1")&&attr(M,"class",L),O[0]&1&&C!==(C=Z[22](Z[40][1][1],0)+"")&&set_data(F,C),O[0]&1&&T!==(T=Z[22](Z[40][1][2],0)+"")&&set_data(Y,T)},d(Z){Z&&detach(d)}}}function create_each_block_2$2(l){let d,_=l[12]>=ref.dropTiers[l[40][0]]&&create_if_block_7$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[12]>=ref.dropTiers[m[40][0]]?_?_.p(m,g):(_=create_if_block_7$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block_1$1(l){let d,_,m,g=Object.entries(l[0]).sort(func),y=[];for(let b=0;b<g.length;b+=1)y[b]=create_each_block_2$2(get_each_context_2$2(l,g,b));return{c(){d=element("div"),_=text(`Hover for Possible Drops
        `),m=element("span");for(let b=0;b<y.length;b+=1)y[b].c();this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var v=children(d);_=claim_text(v,`Hover for Possible Drops
        `),m=claim_element(v,"SPAN",{class:!0});var k=children(m);for(let w=0;w<y.length;w+=1)y[w].l(k);k.forEach(detach),v.forEach(detach),this.h()},h(){attr(m,"class","px-2 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-20 pointer-events-none"),attr(d,"class","has-tooltip mining-flavor game-btn text-med text-center items-right")},m(b,v){insert_hydration(b,d,v),append_hydration(d,_),append_hydration(d,m);for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(m,null)},p(b,v){if(v[0]&14692353){g=Object.entries(b[0]).sort(func);let k;for(k=0;k<g.length;k+=1){const w=get_each_context_2$2(b,g,k);y[k]?y[k].p(w,v):(y[k]=create_each_block_2$2(w),y[k].c(),y[k].m(m,null))}for(;k<y.length;k+=1)y[k].d(1);y.length=g.length}},d(b){b&&detach(d),destroy_each(y,b)}}}function create_if_block_6$3(l){let d,_,m,g,y,b,v,k;return{c(){d=element("div"),_=element("div"),m=text("Mining Upgrades"),g=space(),y=element("div"),b=text("Dust Upgrades"),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);_=claim_element(I,"DIV",{class:!0});var E=children(_);m=claim_text(E,"Mining Upgrades"),E.forEach(detach),g=claim_space(I),y=claim_element(I,"DIV",{class:!0});var S=children(y);b=claim_text(S,"Dust Upgrades"),S.forEach(detach),I.forEach(detach),this.h()},h(){attr(_,"class","mx-1 p-1 col-span-3 game-btn text-med"),attr(y,"class","mx-1 p-1 col-span-3 game-btn text-med"),attr(d,"class","pt-2 grid grid-cols-6")},m(w,I){insert_hydration(w,d,I),append_hydration(d,_),append_hydration(_,m),append_hydration(d,g),append_hydration(d,y),append_hydration(y,b),v||(k=[listen(_,"click",l[27]),listen(y,"click",l[28])],v=!0)},p:noop,d(w){w&&detach(d),v=!1,run_all(k)}}}function create_if_block_4$4(l){let d,_=Object.entries(l[9]),m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block_1$5(get_each_context_1$5(l,_,g));return{c(){d=element("div");for(let g=0;g<m.length;g+=1)m[g].c();this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var y=children(d);for(let b=0;b<m.length;b+=1)m[b].l(y);y.forEach(detach),this.h()},h(){attr(d,"class","pt-2 grid grid-cols-8")},m(g,y){insert_hydration(g,d,y);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(d,null)},p(g,y){if(y[0]&1049088){_=Object.entries(g[9]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context_1$5(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block_1$5(v),m[b].c(),m[b].m(d,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){g&&detach(d),destroy_each(m,g)}}}function create_if_block_5$3(l){let d,_=l[37][0]+"",m,g,y,b,v;function k(){return l[29](l[37])}return{c(){d=element("div"),m=text(_),g=space(),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),g=claim_space(I),I.forEach(detach),this.h()},h(){attr(d,"class",y="m-1 text-center "+(l[9][l[37][0]].on?"control-btn-toggleon":"control-btn")+" col-span-1 tooltip-text select-none")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),append_hydration(d,g),b||(v=listen(d,"click",k),b=!0)},p(w,I){l=w,I[0]&512&&_!==(_=l[37][0]+"")&&set_data(m,_),I[0]&512&&y!==(y="m-1 text-center "+(l[9][l[37][0]].on?"control-btn-toggleon":"control-btn")+" col-span-1 tooltip-text select-none")&&attr(d,"class",y)},d(w){w&&detach(d),b=!1,v()}}}function create_each_block_1$5(l){let d,_=l[37][1]!==void 0&&create_if_block_5$3(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[37][1]!==void 0?_?_.p(m,g):(_=create_if_block_5$3(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_if_block_3$6(l){let d,_,m,g,y,b,v,k,w,I=(l[18].key1>1?l[22](l[18].key1,0):"???")+"",E,S,N,M,A=l[22](l[14].key1*(1e3/l[11].UPDATE_SPEED)/l[1].key1,3)+"",P,L,D;return{c(){d=element("div"),_=element("div"),m=element("div"),g=element("div"),y=space(),b=element("div"),v=element("div"),k=text("[*] "),w=element("strong"),E=text(I),S=space(),N=element("span"),M=text("x "),P=text(A),L=text(" / sec"),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var U=children(d);_=claim_element(U,"DIV",{class:!0});var C=children(_);m=claim_element(C,"DIV",{class:!0});var F=children(m);g=claim_element(F,"DIV",{class:!0,style:!0}),children(g).forEach(detach),F.forEach(detach),C.forEach(detach),U.forEach(detach),y=claim_space(x),b=claim_element(x,"DIV",{class:!0});var J=children(b);v=claim_element(J,"DIV",{class:!0});var T=children(v);k=claim_text(T,"[*] "),w=claim_element(T,"STRONG",{});var Y=children(w);E=claim_text(Y,I),Y.forEach(detach),S=claim_space(T),N=claim_element(T,"SPAN",{class:!0});var K=children(N);M=claim_text(K,"x "),P=claim_text(K,A),L=claim_text(K," / sec"),K.forEach(detach),T.forEach(detach),J.forEach(detach),this.h()},h(){attr(g,"class","bg-emerald-400 h-2.5 rounded-full"),set_style(g,"width",l[16].keyfinder?"100%":l[7]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(N,"class",D=l[14].key1*(1e3/l[11].UPDATE_SPEED)/l[1].key1>25?"text-amber-200":""),attr(v,"class","text-[#989898] text-small"),attr(b,"class","col-span-3 pl-1 text-left align-text-middle")},m(x,U){insert_hydration(x,d,U),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),insert_hydration(x,y,U),insert_hydration(x,b,U),append_hydration(b,v),append_hydration(v,k),append_hydration(v,w),append_hydration(w,E),append_hydration(v,S),append_hydration(v,N),append_hydration(N,M),append_hydration(N,P),append_hydration(N,L)},p(x,U){U[0]&65664&&set_style(g,"width",x[16].keyfinder?"100%":x[7]),U[0]&262144&&I!==(I=(x[18].key1>1?x[22](x[18].key1,0):"???")+"")&&set_data(E,I),U[0]&18434&&A!==(A=x[22](x[14].key1*(1e3/x[11].UPDATE_SPEED)/x[1].key1,3)+"")&&set_data(P,A),U[0]&18434&&D!==(D=x[14].key1*(1e3/x[11].UPDATE_SPEED)/x[1].key1>25?"text-amber-200":"")&&attr(N,"class",D)},d(x){x&&detach(d),x&&detach(y),x&&detach(b)}}}function create_if_block_2$9(l){let d,_,m,g,y,b,v,k,w,I=(l[18].key2>1?l[22](l[18].key2,0):"???")+"",E,S,N,M,A=l[22](l[14].key2*(1e3/l[11].UPDATE_SPEED)/l[1].key2,3)+"",P,L,D;return{c(){d=element("div"),_=element("div"),m=element("div"),g=element("div"),y=space(),b=element("div"),v=element("div"),k=text("[**] "),w=element("strong"),E=text(I),S=space(),N=element("span"),M=text("x "),P=text(A),L=text(" / sec"),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var U=children(d);_=claim_element(U,"DIV",{class:!0});var C=children(_);m=claim_element(C,"DIV",{class:!0});var F=children(m);g=claim_element(F,"DIV",{class:!0,style:!0}),children(g).forEach(detach),F.forEach(detach),C.forEach(detach),U.forEach(detach),y=claim_space(x),b=claim_element(x,"DIV",{class:!0});var J=children(b);v=claim_element(J,"DIV",{class:!0});var T=children(v);k=claim_text(T,"[**] "),w=claim_element(T,"STRONG",{});var Y=children(w);E=claim_text(Y,I),Y.forEach(detach),S=claim_space(T),N=claim_element(T,"SPAN",{class:!0});var K=children(N);M=claim_text(K,"x "),P=claim_text(K,A),L=claim_text(K," / sec"),K.forEach(detach),T.forEach(detach),J.forEach(detach),this.h()},h(){attr(g,"class","bg-blue-400 h-2.5 rounded-full"),set_style(g,"width",l[16].keyfinder?"100%":l[6]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(N,"class",D=l[14].key2*(1e3/l[11].UPDATE_SPEED)/l[1].key2>10?"text-amber-200":""),attr(v,"class","text-[#989898] text-small"),attr(b,"class","col-span-3 pl-1 text-left align-text-middle")},m(x,U){insert_hydration(x,d,U),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),insert_hydration(x,y,U),insert_hydration(x,b,U),append_hydration(b,v),append_hydration(v,k),append_hydration(v,w),append_hydration(w,E),append_hydration(v,S),append_hydration(v,N),append_hydration(N,M),append_hydration(N,P),append_hydration(N,L)},p(x,U){U[0]&65600&&set_style(g,"width",x[16].keyfinder?"100%":x[6]),U[0]&262144&&I!==(I=(x[18].key2>1?x[22](x[18].key2,0):"???")+"")&&set_data(E,I),U[0]&18434&&A!==(A=x[22](x[14].key2*(1e3/x[11].UPDATE_SPEED)/x[1].key2,3)+"")&&set_data(P,A),U[0]&18434&&D!==(D=x[14].key2*(1e3/x[11].UPDATE_SPEED)/x[1].key2>10?"text-amber-200":"")&&attr(N,"class",D)},d(x){x&&detach(d),x&&detach(y),x&&detach(b)}}}function create_if_block_1$e(l){let d,_,m,g,y,b,v,k,w,I=(l[18].key3>1?l[22](l[18].key3,0):"???")+"",E,S,N,M,A=l[22](l[14].key3*(1e3/l[11].UPDATE_SPEED)/l[1].key3,3)+"",P,L,D;return{c(){d=element("div"),_=element("div"),m=element("div"),g=element("div"),y=space(),b=element("div"),v=element("div"),k=text("[***] "),w=element("strong"),E=text(I),S=space(),N=element("span"),M=text("x "),P=text(A),L=text(" / sec"),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var U=children(d);_=claim_element(U,"DIV",{class:!0});var C=children(_);m=claim_element(C,"DIV",{class:!0});var F=children(m);g=claim_element(F,"DIV",{class:!0,style:!0}),children(g).forEach(detach),F.forEach(detach),C.forEach(detach),U.forEach(detach),y=claim_space(x),b=claim_element(x,"DIV",{class:!0});var J=children(b);v=claim_element(J,"DIV",{class:!0});var T=children(v);k=claim_text(T,"[***] "),w=claim_element(T,"STRONG",{});var Y=children(w);E=claim_text(Y,I),Y.forEach(detach),S=claim_space(T),N=claim_element(T,"SPAN",{class:!0});var K=children(N);M=claim_text(K,"x "),P=claim_text(K,A),L=claim_text(K," / sec"),K.forEach(detach),T.forEach(detach),J.forEach(detach),this.h()},h(){attr(g,"class","bg-pink-400 h-2.5 rounded-full"),set_style(g,"width",l[16].keyfinder?"100%":l[5]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(N,"class",D=l[14].key3*(1e3/l[11].UPDATE_SPEED)/l[1].key3>1?"text-amber-200":""),attr(v,"class","text-[#989898] text-small"),attr(b,"class","col-span-3 pl-1 text-left align-text-middle")},m(x,U){insert_hydration(x,d,U),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),insert_hydration(x,y,U),insert_hydration(x,b,U),append_hydration(b,v),append_hydration(v,k),append_hydration(v,w),append_hydration(w,E),append_hydration(v,S),append_hydration(v,N),append_hydration(N,M),append_hydration(N,P),append_hydration(N,L)},p(x,U){U[0]&65568&&set_style(g,"width",x[16].keyfinder?"100%":x[5]),U[0]&262144&&I!==(I=(x[18].key3>1?x[22](x[18].key3,0):"???")+"")&&set_data(E,I),U[0]&18434&&A!==(A=x[22](x[14].key3*(1e3/x[11].UPDATE_SPEED)/x[1].key3,3)+"")&&set_data(P,A),U[0]&18434&&D!==(D=x[14].key3*(1e3/x[11].UPDATE_SPEED)/x[1].key3>1?"text-amber-200":"")&&attr(N,"class",D)},d(x){x&&detach(d),x&&detach(y),x&&detach(b)}}}function create_else_block$8(l){return{c:noop,l:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_if_block$h(l){let d,_,m;return _=new MiningUpgradeButton({props:{index:l[34]}}),{c(){d=element("div"),create_component(_.$$.fragment),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var y=children(d);claim_component(_.$$.fragment,y),y.forEach(detach),this.h()},h(){attr(d,"class","w-1/2 mine-upgrade-button-wrapper")},m(g,y){insert_hydration(g,d,y),mount_component(_,d,null),m=!0},p(g,y){const b={};y[0]&16&&(b.index=g[34]),_.$set(b)},i(g){m||(transition_in(_.$$.fragment,g),m=!0)},o(g){transition_out(_.$$.fragment,g),m=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$e(l){let d,_,m,g,y;const b=[create_if_block$h,create_else_block$8],v=[];function k(w,I){return I[0]&1048&&(d=null),d==null&&(d=!!((w[3]=="regular"&&!w[10][w[34]].isDust||w[3]=="dust"&&w[10][w[34]].isDust)&&w[24](w[34]))),d?0:1}return _=k(l,[-1,-1]),m=v[_]=b[_](l),{c(){m.c(),g=empty()},l(w){m.l(w),g=empty()},m(w,I){v[_].m(w,I),insert_hydration(w,g,I),y=!0},p(w,I){let E=_;_=k(w,I),_===E?v[_].p(w,I):(group_outros(),transition_out(v[E],1,1,()=>{v[E]=null}),check_outros(),m=v[_],m?m.p(w,I):(m=v[_]=b[_](w),m.c()),transition_in(m,1),m.m(g.parentNode,g))},i(w){y||(transition_in(m),y=!0)},o(w){transition_out(m),y=!1},d(w){v[_].d(w),w&&detach(g)}}}function create_key_block$a(l){let d,_,m,g,y=l[4],b=[];for(let k=0;k<y.length;k+=1)b[k]=create_each_block$e(get_each_context$e(l,y,k));const v=k=>transition_out(b[k],1,1,()=>{b[k]=null});return{c(){d=element("div");for(let k=0;k<b.length;k+=1)b[k].c();_=space(),m=element("div"),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var w=children(d);for(let I=0;I<b.length;I+=1)b[I].l(w);_=claim_space(w),m=claim_element(w,"DIV",{class:!0}),children(m).forEach(detach),w.forEach(detach),this.h()},h(){attr(m,"class","col-span-2 py-7"),attr(d,"class","mine-upgrade-wrapper flex flex-wrap")},m(k,w){insert_hydration(k,d,w);for(let I=0;I<b.length;I+=1)b[I]&&b[I].m(d,null);append_hydration(d,_),append_hydration(d,m),g=!0},p(k,w){if(w[0]&16778264){y=k[4];let I;for(I=0;I<y.length;I+=1){const E=get_each_context$e(k,y,I);b[I]?(b[I].p(E,w),transition_in(b[I],1)):(b[I]=create_each_block$e(E),b[I].c(),transition_in(b[I],1),b[I].m(d,_))}for(group_outros(),I=y.length;I<b.length;I+=1)v(I);check_outros()}},i(k){if(!g){for(let w=0;w<y.length;w+=1)transition_in(b[w]);g=!0}},o(k){b=b.filter(Boolean);for(let w=0;w<b.length;w+=1)transition_out(b[w]);g=!1},d(k){k&&detach(d),destroy_each(b,k)}}}function create_fragment$i(l){let d,_=l[2],m,g,y,b,v,k,w=l[14].gems>l[1].gems?"~":"",I,E,S=(l[15]>1?l[22](l[15],0):1)+"",N,M,A,P,L=l[22](l[14].gems*(1e3/l[11].UPDATE_SPEED)/l[1].gems,2)+"",D,x,U,C,F,J,T,Y,K,ne,Z,O,V=l[9],H,le=create_key_block_1$1(l),B=l[13].dust&&create_if_block_6$3(l),R=l[3]==="regular"&&create_if_block_4$4(l),G=l[17][3]>0&&create_if_block_3$6(l),$=l[17][4]>0&&create_if_block_2$9(l),de=l[17][18]>0&&create_if_block_1$e(l),oe=create_key_block$a(l);return{c(){d=element("div"),le.c(),m=space(),B&&B.c(),g=space(),R&&R.c(),y=space(),b=element("div"),v=text(`gem progress [ 
        `),k=element("strong"),I=text(w),E=space(),N=text(S),M=space(),A=element("span"),P=text("x "),D=text(L),x=text(" times / sec ]"),C=space(),F=element("div"),J=element("div"),T=element("div"),Y=space(),K=element("div"),G&&G.c(),ne=space(),$&&$.c(),Z=space(),de&&de.c(),O=space(),oe.c(),this.h()},l(X){d=claim_element(X,"DIV",{class:!0});var te=children(d);le.l(te),m=claim_space(te),B&&B.l(te),g=claim_space(te),R&&R.l(te),y=claim_space(te),b=claim_element(te,"DIV",{class:!0});var q=children(b);v=claim_text(q,`gem progress [ 
        `),k=claim_element(q,"STRONG",{});var ee=children(k);I=claim_text(ee,w),E=claim_space(ee),N=claim_text(ee,S),ee.forEach(detach),M=claim_space(q),A=claim_element(q,"SPAN",{class:!0});var z=children(A);P=claim_text(z,"x "),D=claim_text(z,L),x=claim_text(z," times / sec ]"),z.forEach(detach),q.forEach(detach),C=claim_space(te),F=claim_element(te,"DIV",{class:!0});var re=children(F);J=claim_element(re,"DIV",{class:!0});var ie=children(J);T=claim_element(ie,"DIV",{class:!0,style:!0}),children(T).forEach(detach),ie.forEach(detach),re.forEach(detach),Y=claim_space(te),K=claim_element(te,"DIV",{class:!0});var W=children(K);G&&G.l(W),ne=claim_space(W),$&&$.l(W),Z=claim_space(W),de&&de.l(W),W.forEach(detach),O=claim_space(te),oe.l(te),te.forEach(detach),this.h()},h(){attr(A,"class",U=l[14].gems*(1e3/l[11].UPDATE_SPEED)/l[1].gems>25?"text-amber-200":""),attr(b,"class","text-[#989898] text-small pt-4"),attr(T,"class","bg-red-300 h-2.5 rounded-full"),set_style(T,"width",l[16].gems?"100%":l[8]),attr(J,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(F,"class","mine-bar-wrapper pb-2"),attr(K,"class","grid grid-cols-12 align-middle"),attr(d,"class","wrapper py-2")},m(X,te){insert_hydration(X,d,te),le.m(d,null),append_hydration(d,m),B&&B.m(d,null),append_hydration(d,g),R&&R.m(d,null),append_hydration(d,y),append_hydration(d,b),append_hydration(b,v),append_hydration(b,k),append_hydration(k,I),append_hydration(k,E),append_hydration(k,N),append_hydration(b,M),append_hydration(b,A),append_hydration(A,P),append_hydration(A,D),append_hydration(A,x),append_hydration(d,C),append_hydration(d,F),append_hydration(F,J),append_hydration(J,T),append_hydration(d,Y),append_hydration(d,K),G&&G.m(K,null),append_hydration(K,ne),$&&$.m(K,null),append_hydration(K,Z),de&&de.m(K,null),append_hydration(d,O),oe.m(d,null),H=!0},p(X,te){te[0]&4&&safe_not_equal(_,_=X[2])?(le.d(1),le=create_key_block_1$1(X),le.c(),le.m(d,m)):le.p(X,te),X[13].dust?B?B.p(X,te):(B=create_if_block_6$3(X),B.c(),B.m(d,g)):B&&(B.d(1),B=null),X[3]==="regular"?R?R.p(X,te):(R=create_if_block_4$4(X),R.c(),R.m(d,y)):R&&(R.d(1),R=null),(!H||te[0]&16386)&&w!==(w=X[14].gems>X[1].gems?"~":"")&&set_data(I,w),(!H||te[0]&32768)&&S!==(S=(X[15]>1?X[22](X[15],0):1)+"")&&set_data(N,S),(!H||te[0]&18434)&&L!==(L=X[22](X[14].gems*(1e3/X[11].UPDATE_SPEED)/X[1].gems,2)+"")&&set_data(D,L),(!H||te[0]&18434&&U!==(U=X[14].gems*(1e3/X[11].UPDATE_SPEED)/X[1].gems>25?"text-amber-200":""))&&attr(A,"class",U),(!H||te[0]&65792)&&set_style(T,"width",X[16].gems?"100%":X[8]),X[17][3]>0?G?G.p(X,te):(G=create_if_block_3$6(X),G.c(),G.m(K,ne)):G&&(G.d(1),G=null),X[17][4]>0?$?$.p(X,te):($=create_if_block_2$9(X),$.c(),$.m(K,Z)):$&&($.d(1),$=null),X[17][18]>0?de?de.p(X,te):(de=create_if_block_1$e(X),de.c(),de.m(K,null)):de&&(de.d(1),de=null),te[0]&512&&safe_not_equal(V,V=X[9])?(group_outros(),transition_out(oe,1,1,noop),check_outros(),oe=create_key_block$a(X),oe.c(),transition_in(oe,1),oe.m(d,null)):oe.p(X,te)},i(X){H||(transition_in(oe),H=!0)},o(X){transition_out(oe),H=!1},d(X){X&&detach(d),le.d(X),B&&B.d(),R&&R.d(),G&&G.d(),$&&$.d(),de&&de.d(),oe.d(X)}}}const func=(l,d)=>d[1][0]-l[1][0];function instance$h(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U;component_subscribe(l,upgradeSorting,R=>_(9,k=R)),component_subscribe(l,miningUpgrades,R=>_(10,w=R)),component_subscribe(l,settings,R=>_(11,I=R)),component_subscribe(l,miningDropTable,R=>_(0,E=R)),component_subscribe(l,progressThreshold,R=>_(1,S=R)),component_subscribe(l,progress,R=>_(26,N=R)),component_subscribe(l,visibleTier,R=>_(12,M=R)),component_subscribe(l,wallet,R=>_(13,A=R)),component_subscribe(l,progressAverage,R=>_(14,P=R)),component_subscribe(l,gemGainFlavorText,R=>_(15,L=R)),component_subscribe(l,antiFlickerFlags,R=>_(16,D=R)),component_subscribe(l,miningUpgradeLevels,R=>_(17,x=R)),component_subscribe(l,keyGainFlavorText,R=>_(18,U=R));let C=!1,F=w,J="regular";onMount(()=>{setInterval(()=>{_(2,C=!C)},517),setInterval(()=>{Object.entries(E).sort((R,G)=>G[1][0]-R[1][0])},5e3)});function T(R){_(3,J=R)}function Y(R){if(k[R]!==void 0&&set_store_value(upgradeSorting,k[R].on=!k[R].on,k),I.exclusiveSort&&k[R].on)for(let G of Object.keys(k))k[G]!==void 0&&G!==R&&set_store_value(upgradeSorting,k[G].on=!1,k)}const K=["I","II","III","IV","V","VI","VII","VIII","IX","X"],ne=(R,G=0)=>isNaN(R)?"???":R<1e9?R.toFixed(R<1e3?G:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):R.toExponential(3).toString().replace("+",""),Z=(R,G=3,$=!1)=>($&&(R-=1),R<1e9?(R*100).toFixed(R<1e3?G:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(R*100).toExponential(G).toString().replace("+","")+"%"),O=(R,G)=>{const $=ref.miningUpgradeSortOrder[(R[1].name||"default").toLowerCase()]||ref.miningUpgradeSortOrder.default,de=ref.miningUpgradeSortOrder[(G[1].name||"default").toLowerCase()]||ref.miningUpgradeSortOrder.default;return $-de},V=R=>{for(let G of w[R].sortType)if(k[G].on)return!0;return!1},H=()=>T("regular"),le=()=>T("dust"),B=R=>Y(R[0]);return l.$$.update=()=>{l.$$.dirty[0]&67108866&&_(8,m=`${Math.min(1,N.gems/S.gems)*100}%`),l.$$.dirty[0]&67108866&&_(7,g=`${Math.min(1,N.key1/S.key1)*100}%`),l.$$.dirty[0]&67108866&&_(6,y=`${Math.min(1,N.key2/S.key2)*100}%`),l.$$.dirty[0]&67108866&&_(5,b=`${Math.min(1,N.key3/S.key3)*100}%`),l.$$.dirty[0]&1,l.$$.dirty[0]&33554432&&_(4,v=F.map((R,G)=>G).sort((R,G)=>O([R,F[R]],[G,F[G]])))},[E,S,C,J,v,b,y,g,m,k,w,I,M,A,P,L,D,x,U,T,Y,K,ne,Z,V,F,N,H,le,B]}class Mining extends SvelteComponent{constructor(d){super(),init(this,d,instance$h,create_fragment$i,safe_not_equal,{},null,[-1,-1])}}const KeyOpenButton_svelte_svelte_type_style_lang="";function create_else_block_2$1(l){let d;return{c(){d=text("---")},l(_){d=claim_text(_,"---")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_6$2(l){let d=l[8]()+"",_;return{c(){_=text(d)},l(m){_=claim_text(m,d)},m(m,g){insert_hydration(m,_,g)},p:noop,d(m){m&&detach(_)}}}function create_if_block_3$5(l){let d;function _(y,b){return y[1]==1?create_if_block_4$3:y[1]=="max"?create_if_block_5$2:create_else_block_1$1}let m=_(l),g=m(l);return{c(){g.c(),d=empty()},l(y){g.l(y),d=empty()},m(y,b){g.m(y,b),insert_hydration(y,d,b)},p(y,b){m!==(m=_(y))&&(g.d(1),g=m(y),g&&(g.c(),g.m(d.parentNode,d)))},d(y){g.d(y),y&&detach(d)}}}function create_if_block$g(l){let d;function _(y,b){return y[1]==1?create_if_block_1$d:y[1]=="max"?create_if_block_2$8:create_else_block$7}let m=_(l),g=m(l);return{c(){g.c(),d=empty()},l(y){g.l(y),d=empty()},m(y,b){g.m(y,b),insert_hydration(y,d,b)},p(y,b){m===(m=_(y))&&g?g.p(y,b):(g.d(1),g=m(y),g&&(g.c(),g.m(d.parentNode,d)))},d(y){g.d(y),y&&detach(d)}}}function create_else_block_1$1(l){let d;return{c(){d=text("---")},l(_){d=claim_text(_,"---")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_5$2(l){let d;return{c(){d=text("Open All")},l(_){d=claim_text(_,"Open All")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_4$3(l){let d;return{c(){d=text("Find a key of this rarity to use it.")},l(_){d=claim_text(_,"Find a key of this rarity to use it.")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_else_block$7(l){let d,_=l[4](parseInt(l[1]),0)+"",m;return{c(){d=text("x"),m=text(_)},l(g){d=claim_text(g,"x"),m=claim_text(g,_)},m(g,y){insert_hydration(g,d,y),insert_hydration(g,m,y)},p(g,y){y&2&&_!==(_=g[4](parseInt(g[1]),0)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m)}}}function create_if_block_2$8(l){let d;return{c(){d=text("Open All")},l(_){d=claim_text(_,"Open All")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_1$d(l){let d,_,m=l[6]()+"",g,y,b;return{c(){d=text("Use "),_=element("span"),g=text(m),b=text(" Key"),this.h()},l(v){d=claim_text(v,"Use "),_=claim_element(v,"SPAN",{class:!0});var k=children(_);g=claim_text(k,m),k.forEach(detach),b=claim_text(v," Key"),this.h()},h(){attr(_,"class",y=null_to_empty(ref.colors["key"+l[0]])+" svelte-10ri8s1")},m(v,k){insert_hydration(v,d,k),insert_hydration(v,_,k),append_hydration(_,g),insert_hydration(v,b,k)},p(v,k){k&1&&y!==(y=null_to_empty(ref.colors["key"+v[0]])+" svelte-10ri8s1")&&attr(_,"class",y)},d(v){v&&detach(d),v&&detach(_),v&&detach(b)}}}function create_fragment$h(l){let d,_,m,g,y,b;function v(I,E){return E&8&&(_=null),_==null&&(_=!!(I[3]&&I[7]())),_?create_if_block$g:(m==null&&(m=!!I[7]()),m?create_if_block_3$5:I[1]==1?create_if_block_6$2:create_else_block_2$1)}let k=v(l,-1),w=k(l);return{c(){d=element("div"),w.c(),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);w.l(E),E.forEach(detach),this.h()},h(){attr(d,"class",g="has-tooltip tooltip-text "+(l[2]&&l[7]()?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(I,E){insert_hydration(I,d,E),w.m(d,null),y||(b=listen(d,"click",l[9]),y=!0)},p(I,[E]){k===(k=v(I,E))&&w?w.p(I,E):(w.d(1),w=k(I),w&&(w.c(),w.m(d,null))),E&4&&g!==(g="has-tooltip tooltip-text "+(I[2]&&I[7]()?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(d,"class",g)},i:noop,o:noop,d(I){I&&detach(d),w.d(),y=!1,b()}}}function instance$g(l,d,_){let m,g,y,b,v;component_subscribe(l,wallet,T=>_(12,m=T)),component_subscribe(l,keysOpened,T=>_(13,g=T)),component_subscribe(l,beaconLevels,T=>_(14,y=T)),component_subscribe(l,keyRewardText,T=>_(15,b=T)),component_subscribe(l,keyItemsUnlocked,T=>_(16,v=T));let{rarity:k,amt:w}=d,I,E,S;onMount(()=>{setTimeout(()=>{_(2,I=D())},50),S=setInterval(()=>{_(2,I=D()),_(3,E=x())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(S)});const N=(T,Y=0)=>T<1e9?T.toFixed(T<1e3?Y:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):T.toExponential(3).toString().replace("+","");function M(){if(w=="max"){const T=m["key"+k.toString()];set_store_value(wallet,m["key"+k.toString()]=0,m),A(T)}else C()&&m["key"+k.toString()]>=w&&(set_store_value(wallet,m["key"+k.toString()]-=parseInt(w),m),set_store_value(keysOpened,g["key"+(k-1)]+=parseInt(w),g),A(w))}function A(T){T=Number(T);let Y={};set_store_value(keysOpened,g[k-1]+=Number(T),g);let K;switch(k){case 1:K=get_store_value(key1DropTable);break;case 2:K=get_store_value(key2DropTable);break;case 3:K=get_store_value(key3DropTable);break;case 4:K=get_store_value(key4DropTable);break;case 5:K=get_store_value(key5DropTable);break}for(let[Z,O]of Object.entries(K))if(Z!="tier")if(Number(T)*O[0]>=1){const V=Math.min(T,4e7),H=formula.sumArray(Array.from({length:Math.floor(Math.sqrt(V))},()=>Math.floor(O[1]+Math.random()*(O[2]-O[1]))).sort(()=>.5-Math.random()).slice(0,3))/3,le=formula.sumArray(Array.from({length:Math.floor(Math.sqrt(V))},()=>formula.rNorm()).sort(()=>.5-Math.random()).slice(0,3))/3,R=Math.sqrt(V*O[0]*(1-O[0]))*le,G=O[0]*V+R;let $=Math.max(G*O[1],G*H);T>V&&($*=T/V),Z.includes("key")&&Z[3]==K.tier&&$>T*.33&&($=Math.min($,T*O[0]*.33)),Y[Z]=(Y[Z]||0)+Math.floor($),Z.includes("key")&&(Y[Z]=Math.min(Y[Z]*.33,T))}else if(Number(T)==1){Y[Z]=Math.random()<O[0]?O[1]+Math.random()*(O[2]-O[1]):0;continue}else{const V=T,H=O[0],le=Math.random();let B=Math.exp(-1*V*H),R=0,G=!1;const $=[0,1,2,6,24,120,720,5040,40320,362880];for(;!G&&R<9;)console.log(le),le<1-B?(R++,B+=Math.exp(-1*V*H)*Math.pow(V*H,R)/$[R]):G=!0;V*H>.97&&(R+=(T-R)*(1-H**25+H**25*Math.random())),Y[Z]=(Y[Z]||0)+R*(O[1]+Math.random()*(O[2]-O[1])),console.log(Y[Z])}isNaN(m["key"+k])&&set_store_value(wallet,m["key"+k]=0,m);const ne={};for(let[Z,O]of Object.entries(Y))Y[Z]=Math.floor(O),Y[Z]>0&&(set_store_value(wallet,m[Z]=(m[Z]||0)+O,m),v["key"+k].add(Z),ne[Z]=O);L(ne)}let P;function L(T){set_store_value(keyRewardText,b=T,b),Object.keys(T).length===0&&set_store_value(keyRewardText,b={},b),P&&clearTimeout(P),P=setTimeout(()=>{set_store_value(keyRewardText,b="",b)},3e4)}function D(){return w=="max"?m["key"+k.toString()]>=1:m["key"+k.toString()]>=w}function x(){return m["key"+k.toString()]>0||g["key"+(k-1)]>0}function U(){return["T1 [*]","T2 [**]","T3 [***]","T4 [****]","T5 [*****]"][k-1]}function C(){switch(k){case 1:return m.key1&&m.key1>=1;case 2:return m.beacons&&m.beacons>=1||formula.sumArray(y)>0;case 3:return m.sigils&&m.sigils>=1||g[2]>=1;case 4:return m.artifacts&&m.artifacts>=1||g[3]>=1;case 5:return m.holyLight&&m.holyLight>=1}}function F(){switch(k){case 1:return"Requires 1 [*] key";case 2:return"Requires 1 beacon";case 3:return"Requires 1 sigil";case 4:return"Requires 1 artifact (any kind)";case 5:return"Requires 1 holy light"}}const J=()=>M();return l.$$set=T=>{"rarity"in T&&_(0,k=T.rarity),"amt"in T&&_(1,w=T.amt)},[k,w,I,E,N,M,U,C,F,J]}class KeyOpenButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$g,create_fragment$h,safe_not_equal,{rarity:0,amt:1})}}const KeySlurryConvertButton_svelte_svelte_type_style_lang="";function create_if_block$f(l){let d,_,m,g,y=l[4](Math.floor(l[0]))+"",b,v,k,w,I,E,S,N,M,A,P,L=l[4](l[0])+"",D,x,U,C,F=l[2]>1&&create_if_block_1$c(l);return{c(){d=element("div"),_=text(`Convert Keys Into Slurry 
    `),m=element("span"),g=text("[ +"),b=text(y),v=text(" ]"),k=space(),F&&F.c(),w=space(),I=element("span"),E=element("div"),S=text("Converts all keys into key slurry."),N=space(),M=element("div"),A=element("div"),P=text("You will gain "),D=text(L),x=text(" slurry."),this.h()},l(J){d=claim_element(J,"DIV",{class:!0});var T=children(d);_=claim_text(T,`Convert Keys Into Slurry 
    `),m=claim_element(T,"SPAN",{class:!0});var Y=children(m);g=claim_text(Y,"[ +"),b=claim_text(Y,y),v=claim_text(Y," ]"),Y.forEach(detach),k=claim_space(T),F&&F.l(T),w=claim_space(T),I=claim_element(T,"SPAN",{class:!0});var K=children(I);E=claim_element(K,"DIV",{class:!0});var ne=children(E);S=claim_text(ne,"Converts all keys into key slurry."),ne.forEach(detach),N=claim_space(K),M=claim_element(K,"DIV",{class:!0});var Z=children(M);A=claim_element(Z,"DIV",{class:!0});var O=children(A);P=claim_text(O,"You will gain "),D=claim_text(O,L),x=claim_text(O," slurry."),O.forEach(detach),Z.forEach(detach),K.forEach(detach),T.forEach(detach),this.h()},h(){attr(m,"class","text-teal-400"),attr(E,"class","title text-small-gray items-start text-center pb-1"),attr(A,"class","text-small game-text"),attr(M,"class","text-center effect-wrapper"),attr(I,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class","has-tooltip tooltip-text game-btn text-teal-400 py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(J,T){insert_hydration(J,d,T),append_hydration(d,_),append_hydration(d,m),append_hydration(m,g),append_hydration(m,b),append_hydration(m,v),append_hydration(d,k),F&&F.m(d,null),append_hydration(d,w),append_hydration(d,I),append_hydration(I,E),append_hydration(E,S),append_hydration(I,N),append_hydration(I,M),append_hydration(M,A),append_hydration(A,P),append_hydration(A,D),append_hydration(A,x),U||(C=listen(d,"click",l[7]),U=!0)},p(J,T){T&1&&y!==(y=J[4](Math.floor(J[0]))+"")&&set_data(b,y),J[2]>1?F?F.p(J,T):(F=create_if_block_1$c(J),F.c(),F.m(d,w)):F&&(F.d(1),F=null),T&1&&L!==(L=J[4](J[0])+"")&&set_data(D,L)},d(J){J&&detach(d),F&&F.d(),U=!1,C()}}}function create_if_block_1$c(l){let d,_,m=l[4](Math.floor(l[2]))+"",g,y;return{c(){d=element("span"),_=text("[ +"),g=text(m),y=text(" ]"),this.h()},l(b){d=claim_element(b,"SPAN",{class:!0});var v=children(d);_=claim_text(v,"[ +"),g=claim_text(v,m),y=claim_text(v," ]"),v.forEach(detach),this.h()},h(){attr(d,"class","text-fuchsia-600")},m(b,v){insert_hydration(b,d,v),append_hydration(d,_),append_hydration(d,g),append_hydration(d,y)},p(b,v){v&4&&m!==(m=b[4](Math.floor(b[2]))+"")&&set_data(g,m)},d(b){b&&detach(d)}}}function create_key_block$9(l){let d,_=(l[3].gold>3e4||l[3].slurry>0)&&create_if_block$f(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[3].gold>3e4||m[3].slurry>0?_?_.p(m,g):(_=create_if_block$f(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$g(l){let d=l[1],_,m=create_key_block$9(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,[y]){y&2&&safe_not_equal(d,d=g[1])?(m.d(1),m=create_key_block$9(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}function instance$f(l,d,_){let m,g,y;component_subscribe(l,wallet,S=>_(3,y=S));let b,v,k={key1:y.key1,key2:y.key2,key3:y.key3,key4:y.key4,key5:y.key5};onMount(()=>{_(1,b=!1),v=setInterval(()=>{_(6,k={key1:y.key1,key2:y.key2,key3:y.key3,key4:y.key4,key5:y.key5})},217)}),onDestroy(()=>{clearInterval(v)});const w=(S,N=0)=>S<1e9?S.toFixed(S<1e3?N:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):S.toExponential(3).toString().replace("+","");function I(){set_store_value(wallet,y.slurry+=m,y),g>=1&&set_store_value(wallet,y.sigils+=g,y);for(let S of Object.keys(y))S.includes("key")&&set_store_value(wallet,y[S]=0,y)}const E=()=>I();return l.$$.update=()=>{l.$$.dirty&64&&_(0,m=formula.calcKeySlurryGain(k)),l.$$.dirty&1&&_(2,g=formula.calcKeySigilGain(m))},[m,b,g,y,w,I,k,E]}class KeySlurryConvertButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$f,create_fragment$g,safe_not_equal,{})}}const SlurryUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$d(l,d,_){const m=l.slice();return m[21]=d[_],m}function create_if_block$e(l){let d,_=l[5][l[0]].name+"",m,g,y=l[7][l[0]]+"",b,v,k=l[5][l[0]].maxLevel+"",w,I,E,S,N,M=l[7][l[0]]+"",A,P,L=l[5][l[0]].maxLevel+"",D,x,U=l[5][l[0]].description+"",C,F,J,T,Y,K=(l[5][l[0]].prefix||"")+"",ne,Z=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[7][l[0]]),3,!1):l[9](l[5][l[0]].formula(l[7][l[0]]),3))+"",O,V=(l[5][l[0]].suffix||"")+"",H,le,B,R,G=(l[5][l[0]].prefix||"")+"",$,de=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[7][l[0]]+l[6].buyAmount),3,!1):l[9](l[5][l[0]].formula(l[7][l[0]]+l[6].buyAmount),3))+"",oe,X=(l[5][l[0]].suffix||"")+"",te,q,ee,z,re,ie,W,Q;function _e(ce,ae){return ce[7][ce[0]]>=ce[5][ce[0]].maxLevel?create_if_block_1$b:create_else_block$6}let Ee=_e(l),ye=Ee(l);return{c(){d=element("div"),m=text(_),g=text(" ["),b=text(y),v=text(" / "),w=text(k),I=text(`]
         `),E=element("span"),S=element("div"),N=text("["),A=text(M),P=text(" / "),D=text(L),x=text(`] 
           `),C=text(U),F=space(),J=element("div"),T=element("div"),Y=element("span"),ne=text(K),O=text(Z),H=text(V),le=space(),B=element("span"),R=text(`=> 
                    `),$=text(G),oe=text(de),te=text(X),q=space(),ee=element("hr"),z=space(),re=element("div"),ye.c(),this.h()},l(ce){d=claim_element(ce,"DIV",{class:!0});var ae=children(d);m=claim_text(ae,_),g=claim_text(ae," ["),b=claim_text(ae,y),v=claim_text(ae," / "),w=claim_text(ae,k),I=claim_text(ae,`]
         `),E=claim_element(ae,"SPAN",{class:!0});var me=children(E);S=claim_element(me,"DIV",{class:!0});var ke=children(S);N=claim_text(ke,"["),A=claim_text(ke,M),P=claim_text(ke," / "),D=claim_text(ke,L),x=claim_text(ke,`] 
           `),C=claim_text(ke,U),ke.forEach(detach),F=claim_space(me),J=claim_element(me,"DIV",{class:!0});var Se=children(J);T=claim_element(Se,"DIV",{class:!0});var Ne=children(T);Y=claim_element(Ne,"SPAN",{class:!0});var xe=children(Y);ne=claim_text(xe,K),O=claim_text(xe,Z),H=claim_text(xe,V),xe.forEach(detach),le=claim_space(Ne),B=claim_element(Ne,"SPAN",{class:!0});var Pe=children(B);R=claim_text(Pe,`=> 
                    `),$=claim_text(Pe,G),oe=claim_text(Pe,de),te=claim_text(Pe,X),Pe.forEach(detach),Ne.forEach(detach),Se.forEach(detach),q=claim_space(me),ee=claim_element(me,"HR",{}),z=claim_space(me),re=claim_element(me,"DIV",{class:!0});var Be=children(re);ye.l(Be),Be.forEach(detach),me.forEach(detach),ae.forEach(detach),this.h()},h(){attr(S,"class","title text-small-gray items-start text-center pb-1"),attr(Y,"class","current text-[#cccccc]"),attr(B,"class","current text-[#999999]"),attr(T,"class","tooltip-text-xs text-[#cccccc]"),attr(J,"class","text-center effect-wrapper"),attr(re,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(E,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",ie="has-tooltip tooltip-text "+(l[7][l[0]]>=l[5][l[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":l[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(ce,ae){insert_hydration(ce,d,ae),append_hydration(d,m),append_hydration(d,g),append_hydration(d,b),append_hydration(d,v),append_hydration(d,w),append_hydration(d,I),append_hydration(d,E),append_hydration(E,S),append_hydration(S,N),append_hydration(S,A),append_hydration(S,P),append_hydration(S,D),append_hydration(S,x),append_hydration(S,C),append_hydration(E,F),append_hydration(E,J),append_hydration(J,T),append_hydration(T,Y),append_hydration(Y,ne),append_hydration(Y,O),append_hydration(Y,H),append_hydration(T,le),append_hydration(T,B),append_hydration(B,R),append_hydration(B,$),append_hydration(B,oe),append_hydration(B,te),append_hydration(E,q),append_hydration(E,ee),append_hydration(E,z),append_hydration(E,re),ye.m(re,null),W||(Q=listen(d,"click",l[13]),W=!0)},p(ce,ae){ae&33&&_!==(_=ce[5][ce[0]].name+"")&&set_data(m,_),ae&129&&y!==(y=ce[7][ce[0]]+"")&&set_data(b,y),ae&33&&k!==(k=ce[5][ce[0]].maxLevel+"")&&set_data(w,k),ae&129&&M!==(M=ce[7][ce[0]]+"")&&set_data(A,M),ae&33&&L!==(L=ce[5][ce[0]].maxLevel+"")&&set_data(D,L),ae&33&&U!==(U=ce[5][ce[0]].description+"")&&set_data(C,U),ae&33&&K!==(K=(ce[5][ce[0]].prefix||"")+"")&&set_data(ne,K),ae&161&&Z!==(Z=(ce[5][ce[0]].isPercent?ce[10](ce[5][ce[0]].formula(ce[7][ce[0]]),3,!1):ce[9](ce[5][ce[0]].formula(ce[7][ce[0]]),3))+"")&&set_data(O,Z),ae&33&&V!==(V=(ce[5][ce[0]].suffix||"")+"")&&set_data(H,V),ae&33&&G!==(G=(ce[5][ce[0]].prefix||"")+"")&&set_data($,G),ae&225&&de!==(de=(ce[5][ce[0]].isPercent?ce[10](ce[5][ce[0]].formula(ce[7][ce[0]]+ce[6].buyAmount),3,!1):ce[9](ce[5][ce[0]].formula(ce[7][ce[0]]+ce[6].buyAmount),3))+"")&&set_data(oe,de),ae&33&&X!==(X=(ce[5][ce[0]].suffix||"")+"")&&set_data(te,X),Ee===(Ee=_e(ce))&&ye?ye.p(ce,ae):(ye.d(1),ye=Ee(ce),ye&&(ye.c(),ye.m(re,null))),ae&165&&ie!==(ie="has-tooltip tooltip-text "+(ce[7][ce[0]]>=ce[5][ce[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":ce[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",ie)},d(ce){ce&&detach(d),ye.d(),W=!1,Q()}}}function create_else_block$6(l){let d,_=Object.entries(l[1]),m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block$d(get_each_context$d(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y&4882){_=Object.entries(g[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$d(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block$d(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_if_block_1$b(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"This upgrade is at max level."),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$7(l){let d,_=(l[4][l[21][0]]||l[8].has(l[21][0])?ref.displayNames[l[21][0]]?ref.displayNames[l[21][0]]:l[21][0]:"???")+"",m,g,y,b,v=l[9](l[21][1])+"",k,w;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);m=claim_text(E,_),E.forEach(detach),y=claim_space(I),b=claim_element(I,"DIV",{class:!0});var S=children(b);k=claim_text(S,v),S.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[21][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(b,"class",w="col-span-2 text-left "+(l[12](l[21][0])?"":"text-red-600"))},m(I,E){insert_hydration(I,d,E),append_hydration(d,m),insert_hydration(I,y,E),insert_hydration(I,b,E),append_hydration(b,k)},p(I,E){E&274&&_!==(_=(I[4][I[21][0]]||I[8].has(I[21][0])?ref.displayNames[I[21][0]]?ref.displayNames[I[21][0]]:I[21][0]:"???")+"")&&set_data(m,_),E&2&&g!==(g=(ref.colors[I[21][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",g),E&2&&v!==(v=I[9](I[21][1])+"")&&set_data(k,v),E&2&&w!==(w="col-span-2 text-left "+(I[12](I[21][0])?"":"text-red-600"))&&attr(b,"class",w)},d(I){I&&detach(d),I&&detach(y),I&&detach(b)}}}function create_each_block$d(l){let d,_=l[21][1]>=1&&create_if_block_2$7(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[21][1]>=1?_?_.p(m,g):(_=create_if_block_2$7(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$8(l){let d=l[5][l[0]].unlockAt()||l[3]||l[7][l[0]]>0,_,m=d&&create_if_block$e(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&169&&(d=g[5][g[0]].unlockAt()||g[3]||g[7][g[0]]>0),d?m?m.p(g,y):(m=create_if_block$e(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_fragment$f(l){let d=l[3]||l[2]||l[7][l[0]]>0,_,m=create_key_block$8(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,[y]){y&141&&safe_not_equal(d,d=g[3]||g[2]||g[7][g[0]]>0)?(m.d(1),m=create_key_block$8(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}function instance$e(l,d,_){let m,g,y,b,v;component_subscribe(l,wallet,J=>_(4,m=J)),component_subscribe(l,keyUpgrades,J=>_(5,g=J)),component_subscribe(l,settings,J=>_(6,y=J)),component_subscribe(l,keyUpgradeLevels,J=>_(7,b=J)),component_subscribe(l,unlockedRes,J=>_(8,v=J));let{index:k}=d,w=()=>{let J={};for(let[T,Y]of Object.entries(g[k].cost))J[T]=P(Y);return J},I={},E,S=b[k]>0,N;onMount(()=>{setTimeout(()=>{_(1,I=w()),_(2,E=U()),g[k].unlockAt()&&_(3,S=!0),_(3,S=b[k]>0)},50),N=setInterval(()=>{_(2,E=U()),C(),g[k].unlockAt()&&_(3,S=!0)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(N)});const M=(J,T=0)=>J<1e9?J.toFixed(J<1e3?T:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):J.toExponential(3).toString().replace("+",""),A=(J,T=3,Y=!1)=>(Y&&(J-=1),J<1e9?(J*100).toFixed(J*100<1e3?T:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(J*100).toExponential(T).toString().replace("+","")+"%");function P(J){const T=J*Math.pow(g[k].ratio,b[k]),Y=g[k].ratio,K=y.buyAmount;return formula.gSum(T,Y,K)}function L(){if(!(b[k]>=g[k].maxLevel)){_(1,I=w());for(let[J,T]of Object.entries(I))if(T>=1&&m[J]<T||!m[J])return;for(let[J,T]of Object.entries(I))T>=1&&set_store_value(wallet,m[J]-=T,m);set_store_value(keyUpgradeLevels,b[k]+=y.buyAmount,b),_(1,I=w()),_(3,S=!0),x()}}function D(J){return m[J]>=I[J]}function x(){key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable()}function U(){_(1,I=w());for(let[J,T]of Object.entries(I))if(T>=1&&m[J]<T||!m[J])return!1;return!0}function C(){for(let[J,T]of Object.entries(g[k].unlockAt))if(m[J]<T)return!1;return!0}const F=()=>L();return l.$$set=J=>{"index"in J&&_(0,k=J.index)},[k,I,E,S,m,g,y,b,v,M,A,L,D,F]}class SlurryUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$e,create_fragment$f,safe_not_equal,{index:0})}}const SlurryCraftButton_svelte_svelte_type_style_lang="";function get_each_context$c(l,d,_){const m=l.slice();return m[34]=d[_],m}function create_if_block$d(l){let d,_,m=l[4],g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U=l[13](l[2][l[12]][0])+"",C,F,J,T,Y,K,ne,Z,O=l[13](l[2][l[12]][1])+"",V,H,le=l[13](l[2][l[12]][2])+"",B,R,G,$,de,oe,X=create_key_block_1(l);function te(W,Q){return W[4]>W[7]?create_if_block_2$6:create_else_block_1}let q=te(l),ee=q(l);function z(W,Q){return W[12]=="energizedCrystal"?create_if_block_1$a:create_else_block$5}let ie=z(l)(l);return{c(){d=element("div"),_=element("div"),X.c(),g=space(),y=element("span"),b=element("div"),ee.c(),w=space(),I=element("div"),E=element("div"),S=element("div"),N=element("div"),M=element("div"),P=space(),L=element("div"),D=element("div"),x=text("Skill "),C=text(U),F=space(),ie.c(),J=space(),T=element("div"),Y=element("div"),K=element("span"),ne=element("span"),Z=text("[ "),V=text(O),H=text(" / "),B=text(le),R=text(" crafts ]"),G=space(),$=element("div"),this.h()},l(W){d=claim_element(W,"DIV",{class:!0});var Q=children(d);_=claim_element(Q,"DIV",{class:!0});var _e=children(_);X.l(_e),g=claim_space(_e),y=claim_element(_e,"SPAN",{class:!0});var Ee=children(y);b=claim_element(Ee,"DIV",{class:!0});var ye=children(b);ee.l(ye),ye.forEach(detach),Ee.forEach(detach),_e.forEach(detach),w=claim_space(Q),I=claim_element(Q,"DIV",{class:!0});var ce=children(I);E=claim_element(ce,"DIV",{class:!0});var ae=children(E);S=claim_element(ae,"DIV",{class:!0});var me=children(S);N=claim_element(me,"DIV",{class:!0});var ke=children(N);M=claim_element(ke,"DIV",{class:!0,style:!0}),children(M).forEach(detach),ke.forEach(detach),me.forEach(detach),ae.forEach(detach),P=claim_space(ce),L=claim_element(ce,"DIV",{class:!0});var Se=children(L);D=claim_element(Se,"DIV",{class:!0});var Ne=children(D);x=claim_text(Ne,"Skill "),C=claim_text(Ne,U),F=claim_space(Ne),ie.l(Ne),Ne.forEach(detach),J=claim_space(Se),T=claim_element(Se,"DIV",{class:!0});var xe=children(T);Y=claim_element(xe,"DIV",{class:!0});var Pe=children(Y);K=claim_element(Pe,"SPAN",{class:!0});var Be=children(K);ne=claim_element(Be,"SPAN",{class:!0});var Te=children(ne);Z=claim_text(Te,"[ "),V=claim_text(Te,O),H=claim_text(Te," / "),B=claim_text(Te,le),R=claim_text(Te," crafts ]"),Te.forEach(detach),Be.forEach(detach),G=claim_space(Pe),$=claim_element(Pe,"DIV",{class:!0,style:!0}),children($).forEach(detach),Pe.forEach(detach),xe.forEach(detach),Se.forEach(detach),ce.forEach(detach),Q.forEach(detach),this.h()},h(){attr(b,"class","cost items-center text-center grid grid-cols-4"),attr(y,"class",v="px-2 mx-4 "+(l[4]>l[7]?"max-w-[90px]":"max-w-[300px]")+" tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(_,"class",k="has-tooltip tooltip-text "+(l[3]&&l[4]<=l[7]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 pr-2 items-center text-center border-solid mr-3 col-span-4 select-none svelte-uygk22"),attr(M,"class",A=l[1][l[0]].stylebg+" h-2.5 rounded-full svelte-uygk22"),set_style(M,"width",l[5]+"%"),attr(N,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(S,"class","mine-bar-wrapper align-middle"),attr(E,"class","row-span-1"),attr(D,"class","col-span-3 text-left text-small text-amber-400"),attr(ne,"class","col-span-1 text-center text-amber-400 pb-1"),attr(K,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none grid grid-cols-1 svelte-uygk22"),attr($,"class","bg-amber-400 h-1 rounded-full"),set_style($,"width",l[6]+"%"),attr(Y,"class","has-tooltip w-full my-1 bg-gray-200 rounded-full h-1 dark:bg-gray-700 svelte-uygk22"),attr(T,"class","col-span-6 mine-bar-wrapper align-middle"),attr(L,"class","row-span-1 grid grid-cols-9"),attr(I,"class","col-span-8 grid grid-rows-2 align-middle items-right"),attr(d,"class","wrapper grid grid-cols-12 py-1")},m(W,Q){insert_hydration(W,d,Q),append_hydration(d,_),X.m(_,null),append_hydration(_,g),append_hydration(_,y),append_hydration(y,b),ee.m(b,null),append_hydration(d,w),append_hydration(d,I),append_hydration(I,E),append_hydration(E,S),append_hydration(S,N),append_hydration(N,M),append_hydration(I,P),append_hydration(I,L),append_hydration(L,D),append_hydration(D,x),append_hydration(D,C),append_hydration(D,F),ie.m(D,null),append_hydration(L,J),append_hydration(L,T),append_hydration(T,Y),append_hydration(Y,K),append_hydration(K,ne),append_hydration(ne,Z),append_hydration(ne,V),append_hydration(ne,H),append_hydration(ne,B),append_hydration(ne,R),append_hydration(Y,G),append_hydration(Y,$),de||(oe=listen(_,"click",l[15]),de=!0)},p(W,Q){Q[0]&16&&safe_not_equal(m,m=W[4])?(X.d(1),X=create_key_block_1(W),X.c(),X.m(_,g)):X.p(W,Q),q===(q=te(W))&&ee?ee.p(W,Q):(ee.d(1),ee=q(W),ee&&(ee.c(),ee.m(b,null))),Q[0]&144&&v!==(v="px-2 mx-4 "+(W[4]>W[7]?"max-w-[90px]":"max-w-[300px]")+" tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22")&&attr(y,"class",v),Q[0]&152&&k!==(k="has-tooltip tooltip-text "+(W[3]&&W[4]<=W[7]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 pr-2 items-center text-center border-solid mr-3 col-span-4 select-none svelte-uygk22")&&attr(_,"class",k),Q[0]&3&&A!==(A=W[1][W[0]].stylebg+" h-2.5 rounded-full svelte-uygk22")&&attr(M,"class",A),Q[0]&32&&set_style(M,"width",W[5]+"%"),Q[0]&4&&U!==(U=W[13](W[2][W[12]][0])+"")&&set_data(C,U),ie.p(W,Q),Q[0]&4&&O!==(O=W[13](W[2][W[12]][1])+"")&&set_data(V,O),Q[0]&4&&le!==(le=W[13](W[2][W[12]][2])+"")&&set_data(B,le),Q[0]&64&&set_style($,"width",W[6]+"%")},d(W){W&&detach(d),X.d(W),ee.d(),ie.d(),de=!1,oe()}}}function create_else_block_2(l){let d,_,m=l[1][l[0]].name+"",g,y;return{c(){d=text(`Craft 
        `),_=element("span"),g=text(m),this.h()},l(b){d=claim_text(b,`Craft 
        `),_=claim_element(b,"SPAN",{class:!0});var v=children(_);g=claim_text(v,m),v.forEach(detach),this.h()},h(){attr(_,"class",y=null_to_empty(l[1][l[0]].style||"text-white")+" svelte-uygk22")},m(b,v){insert_hydration(b,d,v),insert_hydration(b,_,v),append_hydration(_,g)},p(b,v){v[0]&3&&m!==(m=b[1][b[0]].name+"")&&set_data(g,m),v[0]&3&&y!==(y=null_to_empty(b[1][b[0]].style||"text-white")+" svelte-uygk22")&&attr(_,"class",y)},d(b){b&&detach(d),b&&detach(_)}}}function create_if_block_4$2(l){let d,_=l[13](l[5],2)+"",m,g;return{c(){d=text("Crafting... "),m=text(_),g=text("%")},l(y){d=claim_text(y,"Crafting... "),m=claim_text(y,_),g=claim_text(y,"%")},m(y,b){insert_hydration(y,d,b),insert_hydration(y,m,b),insert_hydration(y,g,b)},p(y,b){b[0]&32&&_!==(_=y[13](y[5],2)+"")&&set_data(m,_)},d(y){y&&detach(d),y&&detach(m),y&&detach(g)}}}function create_key_block_1(l){let d;function _(y,b){return y[4]>y[7]?create_if_block_4$2:create_else_block_2}let m=_(l),g=m(l);return{c(){g.c(),d=empty()},l(y){g.l(y),d=empty()},m(y,b){g.m(y,b),insert_hydration(y,d,b)},p(y,b){m===(m=_(y))&&g?g.p(y,b):(g.d(1),g=m(y),g&&(g.c(),g.m(d.parentNode,d)))},d(y){g.d(y),y&&detach(d)}}}function create_else_block_1(l){let d,_,m,g,y,b,v,k,w=l[13](l[1][l[0]].craftTime*Math.pow(.9,l[9]-1),0)+"",I,E,S=Object.entries(l[8]),N=[];for(let M=0;M<S.length;M+=1)N[M]=create_each_block$c(get_each_context$c(l,S,M));return{c(){for(let M=0;M<N.length;M+=1)N[M].c();d=space(),_=element("div"),m=element("hr"),g=space(),y=element("div"),b=text("time"),v=space(),k=element("div"),I=text(w),E=text(" seconds"),this.h()},l(M){for(let D=0;D<N.length;D+=1)N[D].l(M);d=claim_space(M),_=claim_element(M,"DIV",{class:!0});var A=children(_);m=claim_element(A,"HR",{}),A.forEach(detach),g=claim_space(M),y=claim_element(M,"DIV",{class:!0});var P=children(y);b=claim_text(P,"time"),P.forEach(detach),v=claim_space(M),k=claim_element(M,"DIV",{class:!0});var L=children(k);I=claim_text(L,w),E=claim_text(L," seconds"),L.forEach(detach),this.h()},h(){attr(_,"class","col-span-4 py-1 items-center justify-center line"),attr(y,"class","text-teal-100 text-left text-xs pr-3 col-span-2"),attr(k,"class","col-span-2 text-xs text-left")},m(M,A){for(let P=0;P<N.length;P+=1)N[P]&&N[P].m(M,A);insert_hydration(M,d,A),insert_hydration(M,_,A),append_hydration(_,m),insert_hydration(M,g,A),insert_hydration(M,y,A),append_hydration(y,b),insert_hydration(M,v,A),insert_hydration(M,k,A),append_hydration(k,I),append_hydration(k,E)},p(M,A){if(A[0]&11520){S=Object.entries(M[8]);let P;for(P=0;P<S.length;P+=1){const L=get_each_context$c(M,S,P);N[P]?N[P].p(L,A):(N[P]=create_each_block$c(L),N[P].c(),N[P].m(d.parentNode,d))}for(;P<N.length;P+=1)N[P].d(1);N.length=S.length}A[0]&515&&w!==(w=M[13](M[1][M[0]].craftTime*Math.pow(.9,M[9]-1),0)+"")&&set_data(I,w)},d(M){destroy_each(N,M),M&&detach(d),M&&detach(_),M&&detach(g),M&&detach(y),M&&detach(v),M&&detach(k)}}}function create_if_block_2$6(l){let d,_;return{c(){d=element("div"),_=text("Crafting..."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"Crafting..."),g.forEach(detach),this.h()},h(){attr(d,"class","tooltip-text text-center")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_3$4(l){let d,_=(l[10][l[34][0]]||l[11].has(l[34][0])?ref.displayNames[l[34][0]]?ref.displayNames[l[34][0]]:l[34][0]:"???")+"",m,g,y,b,v=l[13](l[34][1])+"",k;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),y=claim_space(w),b=claim_element(w,"DIV",{class:!0});var E=children(b);k=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[34][0]]||ref.colors.default)+" text-left pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,y,I),insert_hydration(w,b,I),append_hydration(b,k)},p(w,I){I[0]&3328&&_!==(_=(w[10][w[34][0]]||w[11].has(w[34][0])?ref.displayNames[w[34][0]]?ref.displayNames[w[34][0]]:w[34][0]:"???")+"")&&set_data(m,_),I[0]&256&&g!==(g=(ref.colors[w[34][0]]||ref.colors.default)+" text-left pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",g),I[0]&256&&v!==(v=w[13](w[34][1])+"")&&set_data(k,v)},d(w){w&&detach(d),w&&detach(y),w&&detach(b)}}}function create_each_block$c(l){let d,_=l[34][1]>=1&&create_if_block_3$4(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[34][1]>=1?_?_.p(m,g):(_=create_if_block_3$4(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_else_block$5(l){let d,_=l[13](1/Math.pow(.9,l[9]-1),1)+"",m,g;return{c(){d=text("["),m=text(_),g=text("x speed]")},l(y){d=claim_text(y,"["),m=claim_text(y,_),g=claim_text(y,"x speed]")},m(y,b){insert_hydration(y,d,b),insert_hydration(y,m,b),insert_hydration(y,g,b)},p(y,b){b[0]&512&&_!==(_=y[13](1/Math.pow(.9,y[9]-1),1)+"")&&set_data(m,_)},d(y){y&&detach(d),y&&detach(m),y&&detach(g)}}}function create_if_block_1$a(l){let d,_=l[13](Math.pow(1.1,l[9]-1),1)+"",m,g;return{c(){d=text("["),m=text(_),g=text("x ALL craft yields]")},l(y){d=claim_text(y,"["),m=claim_text(y,_),g=claim_text(y,"x ALL craft yields]")},m(y,b){insert_hydration(y,d,b),insert_hydration(y,m,b),insert_hydration(y,g,b)},p(y,b){b[0]&512&&_!==(_=y[13](Math.pow(1.1,y[9]-1),1)+"")&&set_data(m,_)},d(y){y&&detach(d),y&&detach(m),y&&detach(g)}}}function create_key_block$7(l){let d=l[1][l[0]].unlockAt(),_,m=d&&create_if_block$d(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y[0]&3&&(d=g[1][g[0]].unlockAt()),d?m?m.p(g,y):(m=create_if_block$d(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_fragment$e(l){let d=l[10][l[12]]>=.9,_,m=create_key_block$7(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,y){y[0]&1024&&safe_not_equal(d,d=g[10][g[12]]>=.9)?(m.d(1),m=create_key_block$7(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}function instance$d(l,d,_){let m,g,y,b,v,k,w,I,E,S,N;component_subscribe(l,wallet,R=>_(10,b=R)),component_subscribe(l,keyCrafts,R=>_(1,v=R)),component_subscribe(l,keyCraftTimes,R=>_(22,k=R)),component_subscribe(l,keyCraftMastery,R=>_(2,w=R)),component_subscribe(l,keyUpgradeLevels,R=>_(23,I=R)),component_subscribe(l,keyUpgrades,R=>_(24,E=R)),component_subscribe(l,keyCraftAmount,R=>_(25,S=R)),component_subscribe(l,unlockedRes,R=>_(11,N=R));let{index:M}=d,A,P,L=v[M].item;console.log(L);let D=k[L][0],x=k[L][1];w[L]||set_store_value(keyCraftMastery,w[L]=[1,0,10],w);let U=0,C=R=>x!=D?Math.min(100,x>R?(R-D)/(x-D)*100:0):0,F=0;const J=()=>w[L][1]/w[L][2]*100;let T,Y,K=Date.now();onMount(()=>{setTimeout(()=>{_(8,g=m()),_(3,A=H())},209),T=setInterval(()=>{_(7,K=Date.now()),_(5,U=C(K)),_(6,F=J())},23+Math.random()*11),D=k[L][0],_(4,x=k[L][1]),Y=setInterval(()=>{_(8,g=m())},793),P=setInterval(()=>{_(3,A=H()),le()},100+Math.random()*20)}),onDestroy(()=>{clearInterval(P),clearInterval(T),clearInterval(Y)});const ne=(R,G=0)=>R<1e9?R.toFixed(R<1e3?G:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):R.toExponential(3).toString().replace("+","");function Z(R){const G=R*Math.pow(L=="energizedCrystal"?E[2].formula(I[2]):v[M].ratio,S[L]),$=L=="energizedCrystal"?E[2].formula(I[2]):v[M].ratio,de=1;return formula.gSum(G,$,de)}function O(){let R=v[M].craftTime;return R*=Math.pow(.9,w[L][0]-1),R*1e3}function V(){if(x>K||b.slurry<1)return;_(8,g=m());for(let[G,$]of Object.entries(g))if($>=1&&b[G]<$)return;for(let[G,$]of Object.entries(g))$>=1&&set_store_value(wallet,b[G]-=$,b);_(8,g=m()),D=Date.now(),set_store_value(keyCraftTimes,k[L][0]=D,k);const R=D+O();_(4,x=R),set_store_value(keyCraftTimes,k[L][1]=R,k)}function H(){_(8,g=m());for(let[R,G]of Object.entries(g))if(G>=1&&b[R]<G)return!1;return!0}function le(){for(let[R,G]of Object.entries(v[M].unlockAt))if(b[R]<G)return!1;return!0}const B=()=>V();return l.$$set=R=>{"index"in R&&_(0,M=R.index)},l.$$.update=()=>{l.$$.dirty[0]&3&&(m=()=>{let R={};for(let[G,$]of Object.entries(v[M].cost))R[G]=Z($);return R}),l.$$.dirty[0]&4&&_(9,y=w[L][0])},_(8,g={}),[M,v,w,A,x,U,F,K,g,y,b,N,L,ne,V,B]}class SlurryCraftButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$d,create_fragment$e,safe_not_equal,{index:0},null,[-1,-1])}}function get_each_context$b(l,d,_){const m=l.slice();return m[16]=d[_],m[18]=_,m}function get_each_context_1$4(l,d,_){const m=l.slice();return m[16]=d[_],m[18]=_,m}function get_each_context_2$1(l,d,_){const m=l.slice();return m[20]=d[_],m}function get_each_context_3$1(l,d,_){const m=l.slice();return m[18]=d[_],m}function get_each_context_4$1(l,d,_){const m=l.slice();return m[25]=d[_],m}function get_each_context_5(l,d,_){const m=l.slice();return m[16]=d[_],m[18]=_,m}function create_if_block_6$1(l){let d;return{c(){d=text("+")},l(_){d=claim_text(_,"+")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block_5(l){let d,_=" "+l[8](l[16],0),m,g,y,b=l[18]+1<l[1].length&&create_if_block_6$1();return{c(){d=element("span"),m=text(_),g=space(),b&&b.c(),y=empty(),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var k=children(d);m=claim_text(k,_),k.forEach(detach),g=claim_space(v),b&&b.l(v),y=empty(),this.h()},h(){attr(d,"class",ref.colors["key"+(l[18]+1).toString()])},m(v,k){insert_hydration(v,d,k),append_hydration(d,m),insert_hydration(v,g,k),b&&b.m(v,k),insert_hydration(v,y,k)},p(v,k){k&2&&_!==(_=" "+v[8](v[16],0))&&set_data(m,_),v[18]+1<v[1].length?b||(b=create_if_block_6$1(),b.c(),b.m(y.parentNode,y)):b&&(b.d(1),b=null)},d(v){v&&detach(d),v&&detach(g),b&&b.d(v),v&&detach(y)}}}function create_if_block_5$1(l){let d,_,m=(ref.displayNames[l[25][0]]||l[25][0])+"",g,y,b,v,k=l[9](l[25][1][0],l[25][1][0]<1e-5?5:3)+"",w,I,E,S,N,M=l[8](l[25][1][1],0)+"",A,P,L=l[8](l[25][1][2],0)+"",D,x;return{c(){d=element("div"),_=element("div"),g=text(m),b=space(),v=element("div"),w=text(k),E=space(),S=element("div"),N=text("[ "),A=text(M),P=text(" - "),D=text(L),x=text(" ]"),this.h()},l(U){d=claim_element(U,"DIV",{class:!0});var C=children(d);_=claim_element(C,"DIV",{class:!0});var F=children(_);g=claim_text(F,m),F.forEach(detach),b=claim_space(C),v=claim_element(C,"DIV",{class:!0});var J=children(v);w=claim_text(J,k),J.forEach(detach),E=claim_space(C),S=claim_element(C,"DIV",{class:!0});var T=children(S);N=claim_text(T,"[ "),A=claim_text(T,M),P=claim_text(T," - "),D=claim_text(T,L),x=claim_text(T," ]"),T.forEach(detach),C.forEach(detach),this.h()},h(){attr(_,"class",y="col-span-3 text-left pl-[8px] "+(ref.colors[l[25][0]]||"text-white")),attr(v,"class",I="col-span-3 text-left pl-1 "+(l[25][1][0]>=1?"text-red-400":l[25][1][4]>0&&l[25][1][0]>=l[25][1][4]?"text-amber-200":"")),attr(S,"class","col-span-3 text-right pl-1"),attr(d,"class","drop-table-disp grid grid-cols-10")},m(U,C){insert_hydration(U,d,C),append_hydration(d,_),append_hydration(_,g),append_hydration(d,b),append_hydration(d,v),append_hydration(v,w),append_hydration(d,E),append_hydration(d,S),append_hydration(S,N),append_hydration(S,A),append_hydration(S,P),append_hydration(S,D),append_hydration(S,x)},p(U,C){C&1&&m!==(m=(ref.displayNames[U[25][0]]||U[25][0])+"")&&set_data(g,m),C&1&&y!==(y="col-span-3 text-left pl-[8px] "+(ref.colors[U[25][0]]||"text-white"))&&attr(_,"class",y),C&1&&k!==(k=U[9](U[25][1][0],U[25][1][0]<1e-5?5:3)+"")&&set_data(w,k),C&1&&I!==(I="col-span-3 text-left pl-1 "+(U[25][1][0]>=1?"text-red-400":U[25][1][4]>0&&U[25][1][0]>=U[25][1][4]?"text-amber-200":""))&&attr(v,"class",I),C&1&&M!==(M=U[8](U[25][1][1],0)+"")&&set_data(A,M),C&1&&L!==(L=U[8](U[25][1][2],0)+"")&&set_data(D,L)},d(U){U&&detach(d)}}}function create_each_block_4$1(l){let d=l[25][0]!="tier"&&l[4]["key"+l[18]].has(l[25][0]),_,m=d&&create_if_block_5$1(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&17&&(d=g[25][0]!="tier"&&g[4]["key"+g[18]].has(g[25][0])),d?m?m.p(g,y):(m=create_if_block_5$1(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_if_block_4$1(l){let d,_,m,g,y,b,v,k=Object.entries(l[0][l[18]-1]).length-l[4]["key"+l[18]].size-1+"",w,I;return{c(){d=element("div"),_=element("div"),m=text("???"),g=space(),y=element("div"),b=text("There are "),v=element("span"),w=text(k),I=text(`
                                    more items that can drop from this key.`),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);_=claim_element(S,"DIV",{class:!0});var N=children(_);m=claim_text(N,"???"),N.forEach(detach),g=claim_space(S),y=claim_element(S,"DIV",{class:!0});var M=children(y);b=claim_text(M,"There are "),v=claim_element(M,"SPAN",{class:!0});var A=children(v);w=claim_text(A,k),A.forEach(detach),I=claim_text(M,`
                                    more items that can drop from this key.`),M.forEach(detach),S.forEach(detach),this.h()},h(){attr(_,"class","col-span-2 text-left pl-[8px] text-white"),attr(v,"class","text-white font-bold"),attr(y,"class","col-span-7 text-center pl-1"),attr(d,"class","drop-table-disp grid grid-cols-10")},m(E,S){insert_hydration(E,d,S),append_hydration(d,_),append_hydration(_,m),append_hydration(d,g),append_hydration(d,y),append_hydration(y,b),append_hydration(y,v),append_hydration(v,w),append_hydration(y,I)},p(E,S){S&17&&k!==(k=Object.entries(E[0][E[18]-1]).length-E[4]["key"+E[18]].size-1+"")&&set_data(w,k)},d(E){E&&detach(d)}}}function create_key_block$6(ctx){let span,t,show_if=ctx[4]["key"+ctx[18]].size<Object.entries(get_store_value(eval("key"+ctx[18]+"DropTable"))).length-1,each_value_4=Object.entries(ctx[0][ctx[18]-1]),each_blocks=[];for(let l=0;l<each_value_4.length;l+=1)each_blocks[l]=create_each_block_4$1(get_each_context_4$1(ctx,each_value_4,l));let if_block=show_if&&create_if_block_4$1(ctx);return{c(){span=element("span");for(let l=0;l<each_blocks.length;l+=1)each_blocks[l].c();t=space(),if_block&&if_block.c(),this.h()},l(l){span=claim_element(l,"SPAN",{class:!0});var d=children(span);for(let _=0;_<each_blocks.length;_+=1)each_blocks[_].l(d);t=claim_space(d),if_block&&if_block.l(d),d.forEach(detach),this.h()},h(){attr(span,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-8 pointer-events-none")},m(l,d){insert_hydration(l,span,d);for(let _=0;_<each_blocks.length;_+=1)each_blocks[_]&&each_blocks[_].m(span,null);append_hydration(span,t),if_block&&if_block.m(span,null)},p(ctx,dirty){if(dirty&785){each_value_4=Object.entries(ctx[0][ctx[18]-1]);let l;for(l=0;l<each_value_4.length;l+=1){const d=get_each_context_4$1(ctx,each_value_4,l);each_blocks[l]?each_blocks[l].p(d,dirty):(each_blocks[l]=create_each_block_4$1(d),each_blocks[l].c(),each_blocks[l].m(span,t))}for(;l<each_blocks.length;l+=1)each_blocks[l].d(1);each_blocks.length=each_value_4.length}dirty&16&&(show_if=ctx[4]["key"+ctx[18]].size<Object.entries(get_store_value(eval("key"+ctx[18]+"DropTable"))).length-1),show_if?if_block?if_block.p(ctx,dirty):(if_block=create_if_block_4$1(ctx),if_block.c(),if_block.m(span,null)):if_block&&(if_block.d(1),if_block=null)},d(l){l&&detach(span),destroy_each(each_blocks,l),if_block&&if_block.d()}}}function create_each_block_3$1(l){let d,_=(l[2]["key"+l[18]]>=1||l[3]>=l[18]?ref.keyMainNames[l[18]]:"?????")+"",m,g,y,b=l[8](Math.floor(l[2]["key"+l[18]]))+"",v,k,w,I,E=l[1],S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O=create_key_block$6(l);return M=new KeyOpenButton({props:{rarity:l[18],amt:"1"}}),L=new KeyOpenButton({props:{rarity:l[18],amt:"25"}}),U=new KeyOpenButton({props:{rarity:l[18],amt:"500"}}),J=new KeyOpenButton({props:{rarity:l[18],amt:"10000"}}),K=new KeyOpenButton({props:{rarity:l[18],amt:"max"}}),{c(){d=element("div"),m=text(_),g=space(),y=element("div"),v=text(b),k=space(),w=element("div"),I=text(`[drops]
                    `),O.c(),S=space(),N=element("div"),create_component(M.$$.fragment),A=space(),P=element("div"),create_component(L.$$.fragment),D=space(),x=element("div"),create_component(U.$$.fragment),C=space(),F=element("div"),create_component(J.$$.fragment),T=space(),Y=element("div"),create_component(K.$$.fragment),ne=space(),this.h()},l(V){d=claim_element(V,"DIV",{class:!0});var H=children(d);m=claim_text(H,_),H.forEach(detach),g=claim_space(V),y=claim_element(V,"DIV",{class:!0});var le=children(y);v=claim_text(le,b),le.forEach(detach),k=claim_space(V),w=claim_element(V,"DIV",{class:!0});var B=children(w);I=claim_text(B,`[drops]
                    `),O.l(B),B.forEach(detach),S=claim_space(V),N=claim_element(V,"DIV",{class:!0});var R=children(N);claim_component(M.$$.fragment,R),R.forEach(detach),A=claim_space(V),P=claim_element(V,"DIV",{class:!0});var G=children(P);claim_component(L.$$.fragment,G),G.forEach(detach),D=claim_space(V),x=claim_element(V,"DIV",{class:!0});var $=children(x);claim_component(U.$$.fragment,$),$.forEach(detach),C=claim_space(V),F=claim_element(V,"DIV",{class:!0});var de=children(F);claim_component(J.$$.fragment,de),de.forEach(detach),T=claim_space(V),Y=claim_element(V,"DIV",{class:!0});var oe=children(Y);claim_component(K.$$.fragment,oe),ne=claim_space(oe),oe.forEach(detach),this.h()},h(){attr(d,"class","col-span-1 py-1 "+ref.colors["key"+l[18]]),attr(y,"class","col-span-1 text-med py-1 text-left "+ref.colors["key"+l[18]]),attr(w,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid m-1 col-span-1 select-none"),attr(N,"class","col-span-3 py-1 text-left "+ref.colors["key"+l[18]]),attr(P,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(x,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(F,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(Y,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]])},m(V,H){insert_hydration(V,d,H),append_hydration(d,m),insert_hydration(V,g,H),insert_hydration(V,y,H),append_hydration(y,v),insert_hydration(V,k,H),insert_hydration(V,w,H),append_hydration(w,I),O.m(w,null),insert_hydration(V,S,H),insert_hydration(V,N,H),mount_component(M,N,null),insert_hydration(V,A,H),insert_hydration(V,P,H),mount_component(L,P,null),insert_hydration(V,D,H),insert_hydration(V,x,H),mount_component(U,x,null),insert_hydration(V,C,H),insert_hydration(V,F,H),mount_component(J,F,null),insert_hydration(V,T,H),insert_hydration(V,Y,H),mount_component(K,Y,null),append_hydration(Y,ne),Z=!0},p(V,H){(!Z||H&12)&&_!==(_=(V[2]["key"+V[18]]>=1||V[3]>=V[18]?ref.keyMainNames[V[18]]:"?????")+"")&&set_data(m,_),(!Z||H&4)&&b!==(b=V[8](Math.floor(V[2]["key"+V[18]]))+"")&&set_data(v,b),H&2&&safe_not_equal(E,E=V[1])?(O.d(1),O=create_key_block$6(V),O.c(),O.m(w,null)):O.p(V,H)},i(V){Z||(transition_in(M.$$.fragment,V),transition_in(L.$$.fragment,V),transition_in(U.$$.fragment,V),transition_in(J.$$.fragment,V),transition_in(K.$$.fragment,V),Z=!0)},o(V){transition_out(M.$$.fragment,V),transition_out(L.$$.fragment,V),transition_out(U.$$.fragment,V),transition_out(J.$$.fragment,V),transition_out(K.$$.fragment,V),Z=!1},d(V){V&&detach(d),V&&detach(g),V&&detach(y),V&&detach(k),V&&detach(w),O.d(V),V&&detach(S),V&&detach(N),destroy_component(M),V&&detach(A),V&&detach(P),destroy_component(L),V&&detach(D),V&&detach(x),destroy_component(U),V&&detach(C),V&&detach(F),destroy_component(J),V&&detach(T),V&&detach(Y),destroy_component(K)}}}function create_if_block_2$5(l){let d,_,m,g,y=Object.entries(l[5]),b=[];for(let v=0;v<y.length;v+=1)b[v]=create_each_block_2$1(get_each_context_2$1(l,y,v));return{c(){d=element("div"),_=element("div"),m=text("You received the following rewards:"),g=space();for(let v=0;v<b.length;v+=1)b[v].c();this.h()},l(v){d=claim_element(v,"DIV",{class:!0});var k=children(d);_=claim_element(k,"DIV",{class:!0});var w=children(_);m=claim_text(w,"You received the following rewards:"),w.forEach(detach),g=claim_space(k);for(let I=0;I<b.length;I+=1)b[I].l(k);k.forEach(detach),this.h()},h(){attr(_,"class","col-span-8 game-text text-center pt-1"),attr(d,"class","grid grid-cols-8")},m(v,k){insert_hydration(v,d,k),append_hydration(d,_),append_hydration(_,m),append_hydration(d,g);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(d,null)},p(v,k){if(k&288){y=Object.entries(v[5]);let w;for(w=0;w<y.length;w+=1){const I=get_each_context_2$1(v,y,w);b[w]?b[w].p(I,k):(b[w]=create_each_block_2$1(I),b[w].c(),b[w].m(d,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=y.length}},d(v){v&&detach(d),destroy_each(b,v)}}}function create_if_block_3$3(l){let d,_,m,g=(ref.displayNames[l[20][0]]?ref.displayNames[l[20][0]]:l[20][0])+"",y,b,v,k,w,I=l[8](Number(l[20][1]),0)+"",E,S,N,M;return{c(){d=element("div"),_=space(),m=element("div"),y=text(g),b=text(":"),k=space(),w=element("div"),E=text(I),N=space(),M=element("div"),this.h()},l(A){d=claim_element(A,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(A),m=claim_element(A,"DIV",{class:!0});var P=children(m);y=claim_text(P,g),b=claim_text(P,":"),P.forEach(detach),k=claim_space(A),w=claim_element(A,"DIV",{class:!0});var L=children(w);E=claim_text(L,I),L.forEach(detach),N=claim_space(A),M=claim_element(A,"DIV",{class:!0}),children(M).forEach(detach),this.h()},h(){attr(d,"class","col-span-3"),attr(m,"class",v="col-span-1 text-med text-left pt-1 "+(ref.colors[l[20][0]]||"text-white")),attr(w,"class",S="col-span-1 text-med pt-1 text-left "+(ref.colors[l[20][0]]||"text-white")),attr(M,"class","col-span-3")},m(A,P){insert_hydration(A,d,P),insert_hydration(A,_,P),insert_hydration(A,m,P),append_hydration(m,y),append_hydration(m,b),insert_hydration(A,k,P),insert_hydration(A,w,P),append_hydration(w,E),insert_hydration(A,N,P),insert_hydration(A,M,P)},p(A,P){P&32&&g!==(g=(ref.displayNames[A[20][0]]?ref.displayNames[A[20][0]]:A[20][0])+"")&&set_data(y,g),P&32&&v!==(v="col-span-1 text-med text-left pt-1 "+(ref.colors[A[20][0]]||"text-white"))&&attr(m,"class",v),P&32&&I!==(I=A[8](Number(A[20][1]),0)+"")&&set_data(E,I),P&32&&S!==(S="col-span-1 text-med pt-1 text-left "+(ref.colors[A[20][0]]||"text-white"))&&attr(w,"class",S)},d(A){A&&detach(d),A&&detach(_),A&&detach(m),A&&detach(k),A&&detach(w),A&&detach(N),A&&detach(M)}}}function create_each_block_2$1(l){let d=Number(l[20][1])>=.99997,_,m=d&&create_if_block_3$3(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&32&&(d=Number(g[20][1])>=.99997),d?m?m.p(g,y):(m=create_if_block_3$3(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_else_block$4(l){let d,_;return{c(){d=element("div"),_=text("Unlock a new feature at 30,000 gold"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"Unlock a new feature at 30,000 gold"),g.forEach(detach),this.h()},h(){attr(d,"class","game-btn-noafford text-center py-2")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},i:noop,o:noop,d(m){m&&detach(d)}}}function create_if_block_1$9(l){let d,_;return d=new KeySlurryConvertButton({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_each_block_1$4(l){let d,_,m,g;return _=new SlurryUpgradeButton({props:{index:l[18]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-3")},m(y,b){insert_hydration(y,d,b),mount_component(_,d,null),append_hydration(d,m),g=!0},p:noop,i(y){g||(transition_in(_.$$.fragment,y),g=!0)},o(y){transition_out(_.$$.fragment,y),g=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_if_block$c(l){let d,_,m=l[7],g=[];for(let b=0;b<m.length;b+=1)g[b]=create_each_block$b(get_each_context$b(l,m,b));const y=b=>transition_out(g[b],1,1,()=>{g[b]=null});return{c(){d=element("div");for(let b=0;b<g.length;b+=1)g[b].c();this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var v=children(d);for(let k=0;k<g.length;k+=1)g[k].l(v);v.forEach(detach),this.h()},h(){attr(d,"class","grid grid-cols-12 pt-2")},m(b,v){insert_hydration(b,d,v);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(d,null);_=!0},p(b,v){if(v&128){m=b[7];let k;for(k=0;k<m.length;k+=1){const w=get_each_context$b(b,m,k);g[k]?(g[k].p(w,v),transition_in(g[k],1)):(g[k]=create_each_block$b(w),g[k].c(),transition_in(g[k],1),g[k].m(d,null))}for(group_outros(),k=m.length;k<g.length;k+=1)y(k);check_outros()}},i(b){if(!_){for(let v=0;v<m.length;v+=1)transition_in(g[v]);_=!0}},o(b){g=g.filter(Boolean);for(let v=0;v<g.length;v+=1)transition_out(g[v]);_=!1},d(b){b&&detach(d),destroy_each(g,b)}}}function create_each_block$b(l){let d,_,m,g;return _=new SlurryCraftButton({props:{index:l[18]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-12")},m(y,b){insert_hydration(y,d,b),mount_component(_,d,null),append_hydration(d,m),g=!0},p:noop,i(y){g||(transition_in(_.$$.fragment,y),g=!0)},o(y){transition_out(_.$$.fragment,y),g=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_fragment$d(l){let d,_,m,g,y=l[8](formula.sumArray(l[1]))+"",b,v,k,w,I,E,S=Object.keys(l[5]).length>0,N,M,A,P,L,D,x,U,C,F,J,T,Y,K=l[1],ne=[];for(let X=0;X<K.length;X+=1)ne[X]=create_each_block_5(get_each_context_5(l,K,X));let Z=[1,2,3,4,5],O=[];for(let X=0;X<5;X+=1)O[X]=create_each_block_3$1(get_each_context_3$1(l,Z,X));const V=X=>transition_out(O[X],1,1,()=>{O[X]=null});let H=S&&create_if_block_2$5(l);const le=[create_if_block_1$9,create_else_block$4],B=[];function R(X,te){return X[2].gold>3e4||X[2].slurry>0?0:1}P=R(l),L=B[P]=le[P](l);let G=l[6],$=[];for(let X=0;X<G.length;X+=1)$[X]=create_each_block_1$4(get_each_context_1$4(l,G,X));const de=X=>transition_out($[X],1,1,()=>{$[X]=null});let oe=l[2].slurry>1&&create_if_block$c(l);return{c(){d=element("div"),_=element("div"),m=element("div"),g=text("Total Keys Opened: "),b=text(y),v=text(`
            [ 
                `);for(let X=0;X<ne.length;X+=1)ne[X].c();k=text(`
         ]`),w=space();for(let X=0;X<5;X+=1)O[X].c();I=space(),E=element("div"),H&&H.c(),N=space(),M=element("div"),A=element("div"),L.c(),D=space(),x=element("div");for(let X=0;X<$.length;X+=1)$[X].c();U=space(),C=element("div"),F=space(),oe&&oe.c(),J=space(),T=element("div"),this.h()},l(X){d=claim_element(X,"DIV",{class:!0});var te=children(d);_=claim_element(te,"DIV",{class:!0});var q=children(_);m=claim_element(q,"DIV",{class:!0});var ee=children(m);g=claim_text(ee,"Total Keys Opened: "),b=claim_text(ee,y),v=claim_text(ee,`
            [ 
                `);for(let Q=0;Q<ne.length;Q+=1)ne[Q].l(ee);k=claim_text(ee,`
         ]`),ee.forEach(detach),w=claim_space(q);for(let Q=0;Q<5;Q+=1)O[Q].l(q);q.forEach(detach),I=claim_space(te),E=claim_element(te,"DIV",{class:!0});var z=children(E);H&&H.l(z),z.forEach(detach),N=claim_space(te),M=claim_element(te,"DIV",{class:!0});var re=children(M);A=claim_element(re,"DIV",{class:!0});var ie=children(A);L.l(ie),ie.forEach(detach),re.forEach(detach),D=claim_space(te),x=claim_element(te,"DIV",{class:!0});var W=children(x);for(let Q=0;Q<$.length;Q+=1)$[Q].l(W);W.forEach(detach),U=claim_space(te),C=claim_element(te,"DIV",{class:!0}),children(C).forEach(detach),F=claim_space(te),oe&&oe.l(te),J=claim_space(te),T=claim_element(te,"DIV",{class:!0}),children(T).forEach(detach),te.forEach(detach),this.h()},h(){attr(m,"class","col-span-10 pt-3 pb-2 tooltip-text text-center"),attr(_,"class","grid grid-cols-10"),attr(E,"class","reward-disp-wrapper items-center"),attr(A,"class","wrapper"),attr(M,"class","pt-6"),attr(x,"class","grid grid-cols-12 pt-2"),attr(C,"class","py-3"),attr(T,"class","pb-16"),attr(d,"class","key-amount-wrapper items-center")},m(X,te){insert_hydration(X,d,te),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(m,b),append_hydration(m,v);for(let q=0;q<ne.length;q+=1)ne[q]&&ne[q].m(m,null);append_hydration(m,k),append_hydration(_,w);for(let q=0;q<5;q+=1)O[q]&&O[q].m(_,null);append_hydration(d,I),append_hydration(d,E),H&&H.m(E,null),append_hydration(d,N),append_hydration(d,M),append_hydration(M,A),B[P].m(A,null),append_hydration(d,D),append_hydration(d,x);for(let q=0;q<$.length;q+=1)$[q]&&$[q].m(x,null);append_hydration(d,U),append_hydration(d,C),append_hydration(d,F),oe&&oe.m(d,null),append_hydration(d,J),append_hydration(d,T),Y=!0},p(X,[te]){if((!Y||te&2)&&y!==(y=X[8](formula.sumArray(X[1]))+"")&&set_data(b,y),te&258){K=X[1];let ee;for(ee=0;ee<K.length;ee+=1){const z=get_each_context_5(X,K,ee);ne[ee]?ne[ee].p(z,te):(ne[ee]=create_each_block_5(z),ne[ee].c(),ne[ee].m(m,k))}for(;ee<ne.length;ee+=1)ne[ee].d(1);ne.length=K.length}if(te&799){Z=[1,2,3,4,5];let ee;for(ee=0;ee<5;ee+=1){const z=get_each_context_3$1(X,Z,ee);O[ee]?(O[ee].p(z,te),transition_in(O[ee],1)):(O[ee]=create_each_block_3$1(z),O[ee].c(),transition_in(O[ee],1),O[ee].m(_,null))}for(group_outros(),ee=5;ee<5;ee+=1)V(ee);check_outros()}te&32&&(S=Object.keys(X[5]).length>0),S?H?H.p(X,te):(H=create_if_block_2$5(X),H.c(),H.m(E,null)):H&&(H.d(1),H=null);let q=P;if(P=R(X),P!==q&&(group_outros(),transition_out(B[q],1,1,()=>{B[q]=null}),check_outros(),L=B[P],L||(L=B[P]=le[P](X),L.c()),transition_in(L,1),L.m(A,null)),te&64){G=X[6];let ee;for(ee=0;ee<G.length;ee+=1){const z=get_each_context_1$4(X,G,ee);$[ee]?($[ee].p(z,te),transition_in($[ee],1)):($[ee]=create_each_block_1$4(z),$[ee].c(),transition_in($[ee],1),$[ee].m(x,null))}for(group_outros(),ee=G.length;ee<$.length;ee+=1)de(ee);check_outros()}X[2].slurry>1?oe?(oe.p(X,te),te&4&&transition_in(oe,1)):(oe=create_if_block$c(X),oe.c(),transition_in(oe,1),oe.m(d,J)):oe&&(group_outros(),transition_out(oe,1,1,()=>{oe=null}),check_outros())},i(X){if(!Y){for(let te=0;te<5;te+=1)transition_in(O[te]);transition_in(L);for(let te=0;te<G.length;te+=1)transition_in($[te]);transition_in(oe),Y=!0}},o(X){O=O.filter(Boolean);for(let te=0;te<5;te+=1)transition_out(O[te]);transition_out(L),$=$.filter(Boolean);for(let te=0;te<$.length;te+=1)transition_out($[te]);transition_out(oe),Y=!1},d(X){X&&detach(d),destroy_each(ne,X),destroy_each(O,X),H&&H.d(),B[P].d(),destroy_each($,X),oe&&oe.d()}}}function instance$c(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A;component_subscribe(l,key5DropTable,D=>_(10,g=D)),component_subscribe(l,key4DropTable,D=>_(11,y=D)),component_subscribe(l,key3DropTable,D=>_(12,b=D)),component_subscribe(l,key2DropTable,D=>_(13,v=D)),component_subscribe(l,key1DropTable,D=>_(14,k=D)),component_subscribe(l,keysOpened,D=>_(1,w=D)),component_subscribe(l,wallet,D=>_(2,I=D)),component_subscribe(l,visibleTier,D=>_(3,E=D)),component_subscribe(l,keyItemsUnlocked,D=>_(4,S=D)),component_subscribe(l,keyRewardText,D=>_(5,N=D)),component_subscribe(l,keyUpgrades,D=>_(6,M=D)),component_subscribe(l,keyCrafts,D=>_(7,A=D)),onMount(()=>{console.log(m),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable()});const P=(D,x=0)=>(D=Number(D),D<1e9?D.toFixed(D<1e3?x:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):D.toExponential(3).toString().replace("+","")),L=(D,x=3,U=!1)=>(U&&(D-=1),D<1e9?(D*100).toFixed(D<1e3?x:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(D*100).toExponential(x).toString().replace("+","")+"%");return l.$$.update=()=>{l.$$.dirty&31744&&_(0,m=[k,v,b,y,g])},[m,w,I,E,S,N,M,A,P,L,g,y,b,v,k]}class Keys extends SvelteComponent{constructor(d){super(),init(this,d,instance$c,create_fragment$d,safe_not_equal,{})}}const EnchantUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$a(l,d,_){const m=l.slice();return m[22]=d[_],m}function create_if_block$b(l){let d,_=l[7][l[0]].name+"",m,g,y=l[11](l[9][l[0]],0)+"",b,v,k=l[11](l[7][l[0]].maxLevel,0)+"",w,I,E,S,N,M=l[7][l[0]].description+"",A,P,L,D,x,U=(l[7][l[0]].prefix||"")+"",C,F=(l[7][l[0]].isPercent?l[12](l[7][l[0]].formula(l[9][l[0]]),3,!1):l[11](l[7][l[0]].formula(l[9][l[0]]),3))+"",J,T=(l[7][l[0]].suffix||"")+"",Y,K,ne,Z,O=(l[7][l[0]].prefix||"")+"",V,H=(l[7][l[0]].isPercent?l[12](l[7][l[0]].formula(l[9][l[0]]+l[5]),3,!1):l[11](l[7][l[0]].formula(l[9][l[0]]+l[5]),3))+"",le,B=(l[7][l[0]].suffix||"")+"",R,G,$,de,oe,X,te,q,ee=l[8].maxBuy&&l[4]&&l[5]>=1&&create_if_block_3$2(l);function z(W,Q){return W[9][W[0]]>=W[7][W[0]].maxLevel?create_if_block_1$8:create_else_block$3}let re=z(l),ie=re(l);return{c(){d=element("div"),m=text(_),g=text(" ["),b=text(y),v=text(" / "),w=text(k),I=text(`] 
`),ee&&ee.c(),E=space(),S=element("span"),N=element("div"),A=text(M),P=space(),L=element("div"),D=element("div"),x=element("span"),C=text(U),J=text(F),Y=text(T),K=space(),ne=element("span"),Z=text(`=> 
                    `),V=text(O),le=text(H),R=text(B),G=space(),$=element("hr"),de=space(),oe=element("div"),ie.c(),this.h()},l(W){d=claim_element(W,"DIV",{class:!0});var Q=children(d);m=claim_text(Q,_),g=claim_text(Q," ["),b=claim_text(Q,y),v=claim_text(Q," / "),w=claim_text(Q,k),I=claim_text(Q,`] 
`),ee&&ee.l(Q),E=claim_space(Q),S=claim_element(Q,"SPAN",{class:!0});var _e=children(S);N=claim_element(_e,"DIV",{class:!0});var Ee=children(N);A=claim_text(Ee,M),Ee.forEach(detach),P=claim_space(_e),L=claim_element(_e,"DIV",{class:!0});var ye=children(L);D=claim_element(ye,"DIV",{class:!0});var ce=children(D);x=claim_element(ce,"SPAN",{class:!0});var ae=children(x);C=claim_text(ae,U),J=claim_text(ae,F),Y=claim_text(ae,T),ae.forEach(detach),K=claim_space(ce),ne=claim_element(ce,"SPAN",{class:!0});var me=children(ne);Z=claim_text(me,`=> 
                    `),V=claim_text(me,O),le=claim_text(me,H),R=claim_text(me,B),me.forEach(detach),ce.forEach(detach),ye.forEach(detach),G=claim_space(_e),$=claim_element(_e,"HR",{}),de=claim_space(_e),oe=claim_element(_e,"DIV",{class:!0});var ke=children(oe);ie.l(ke),ke.forEach(detach),_e.forEach(detach),Q.forEach(detach),this.h()},h(){attr(N,"class","title text-small-gray items-start text-center pb-1"),attr(x,"class","current text-[#cccccc]"),attr(ne,"class","current text-[#999999]"),attr(D,"class","tooltip-text-xs text-[#cccccc]"),attr(L,"class","text-center effect-wrapper"),attr(oe,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(S,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",X="has-tooltip tooltip-text "+(l[2]&&l[4]&&l[9][l[0]]<l[7][l[0]].maxLevel?"game-btn-encht"+l[7][l[0]].tier:"game-btn-encht"+l[7][l[0]].tier+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(W,Q){insert_hydration(W,d,Q),append_hydration(d,m),append_hydration(d,g),append_hydration(d,b),append_hydration(d,v),append_hydration(d,w),append_hydration(d,I),ee&&ee.m(d,null),append_hydration(d,E),append_hydration(d,S),append_hydration(S,N),append_hydration(N,A),append_hydration(S,P),append_hydration(S,L),append_hydration(L,D),append_hydration(D,x),append_hydration(x,C),append_hydration(x,J),append_hydration(x,Y),append_hydration(D,K),append_hydration(D,ne),append_hydration(ne,Z),append_hydration(ne,V),append_hydration(ne,le),append_hydration(ne,R),append_hydration(S,G),append_hydration(S,$),append_hydration(S,de),append_hydration(S,oe),ie.m(oe,null),te||(q=listen(d,"click",l[14]),te=!0)},p(W,Q){Q&129&&_!==(_=W[7][W[0]].name+"")&&set_data(m,_),Q&513&&y!==(y=W[11](W[9][W[0]],0)+"")&&set_data(b,y),Q&129&&k!==(k=W[11](W[7][W[0]].maxLevel,0)+"")&&set_data(w,k),W[8].maxBuy&&W[4]&&W[5]>=1?ee?ee.p(W,Q):(ee=create_if_block_3$2(W),ee.c(),ee.m(d,E)):ee&&(ee.d(1),ee=null),Q&129&&M!==(M=W[7][W[0]].description+"")&&set_data(A,M),Q&129&&U!==(U=(W[7][W[0]].prefix||"")+"")&&set_data(C,U),Q&641&&F!==(F=(W[7][W[0]].isPercent?W[12](W[7][W[0]].formula(W[9][W[0]]),3,!1):W[11](W[7][W[0]].formula(W[9][W[0]]),3))+"")&&set_data(J,F),Q&129&&T!==(T=(W[7][W[0]].suffix||"")+"")&&set_data(Y,T),Q&129&&O!==(O=(W[7][W[0]].prefix||"")+"")&&set_data(V,O),Q&673&&H!==(H=(W[7][W[0]].isPercent?W[12](W[7][W[0]].formula(W[9][W[0]]+W[5]),3,!1):W[11](W[7][W[0]].formula(W[9][W[0]]+W[5]),3))+"")&&set_data(le,H),Q&129&&B!==(B=(W[7][W[0]].suffix||"")+"")&&set_data(R,B),re===(re=z(W))&&ie?ie.p(W,Q):(ie.d(1),ie=re(W),ie&&(ie.c(),ie.m(oe,null))),Q&661&&X!==(X="has-tooltip tooltip-text "+(W[2]&&W[4]&&W[9][W[0]]<W[7][W[0]].maxLevel?"game-btn-encht"+W[7][W[0]].tier:"game-btn-encht"+W[7][W[0]].tier+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",X)},d(W){W&&detach(d),ee&&ee.d(),ie.d(),te=!1,q()}}}function create_if_block_3$2(l){let d,_,m;return{c(){d=text("(+"),_=text(l[5]),m=text(")")},l(g){d=claim_text(g,"(+"),_=claim_text(g,l[5]),m=claim_text(g,")")},m(g,y){insert_hydration(g,d,y),insert_hydration(g,_,y),insert_hydration(g,m,y)},p(g,y){y&32&&set_data(_,g[5])},d(g){g&&detach(d),g&&detach(_),g&&detach(m)}}}function create_else_block$3(l){let d,_=Object.entries(l[1]),m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block$a(get_each_context$a(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y&3138){_=Object.entries(g[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$a(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block$a(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_if_block_1$8(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"This upgrade is at max level."),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$4(l){let d,_=(l[6][l[22][0]]||l[10].has(l[22][0])?ref.displayNames[l[22][0]]?ref.displayNames[l[22][0]]:l[22][0]:"???")+"",m,g,y,b,v=l[11](l[22][1])+"",k;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),y=claim_space(w),b=claim_element(w,"DIV",{class:!0});var E=children(b);k=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[22][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,y,I),insert_hydration(w,b,I),append_hydration(b,k)},p(w,I){I&1090&&_!==(_=(w[6][w[22][0]]||w[10].has(w[22][0])?ref.displayNames[w[22][0]]?ref.displayNames[w[22][0]]:w[22][0]:"???")+"")&&set_data(m,_),I&2&&g!==(g=(ref.colors[w[22][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",g),I&2&&v!==(v=w[11](w[22][1])+"")&&set_data(k,v)},d(w){w&&detach(d),w&&detach(y),w&&detach(b)}}}function create_each_block$a(l){let d,_=l[22][1]>=1&&create_if_block_2$4(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[22][1]>=1?_?_.p(m,g):(_=create_if_block_2$4(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$5(l){let d=l[7][l[0]].unlockAt()||l[3]||l[9][l[0]]>0,_,m=d&&create_if_block$b(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&649&&(d=g[7][g[0]].unlockAt()||g[3]||g[9][g[0]]>0),d?m?m.p(g,y):(m=create_if_block$b(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_fragment$c(l){let d=l[3]||l[2]||l[9][l[0]]>0,_,m=create_key_block$5(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,[y]){y&525&&safe_not_equal(d,d=g[3]||g[2]||g[9][g[0]]>0)?(m.d(1),m=create_key_block$5(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}function instance$b(l,d,_){let m,g,y,b,v;component_subscribe(l,wallet,T=>_(6,m=T)),component_subscribe(l,enchantUpgrades,T=>_(7,g=T)),component_subscribe(l,settings,T=>_(8,y=T)),component_subscribe(l,enchantUpgradeLevels,T=>_(9,b=T)),component_subscribe(l,unlockedRes,T=>_(10,v=T));let{index:k}=d,w=()=>{let T={};for(let[Y,K]of Object.entries(g[k].cost))T[Y]=D(K);return T},I={},E,S=b[k]>0,N,M=!0,A=y.buyAmount;onMount(()=>{setTimeout(()=>{_(1,I=w()),_(2,E=C()),g[k].unlockAt()&&_(3,S=!0),_(3,S=b[k]>0)},50),N=setInterval(()=>{_(2,E=C()),F(),g[k].unlockAt()&&_(3,S=!0),y.maxBuy?(_(5,A=U()),_(1,I=w())):_(5,A=y.buyAmount)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(N)});const P=(T,Y=0)=>T<1e9?T.toFixed(T<1e3?Y:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):T.toExponential(3).toString().replace("+",""),L=(T,Y=3,K=!1)=>(K&&(T-=1),T<1e9?(T*100).toFixed(T*100<1e3?Y:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(T*100).toExponential(Y).toString().replace("+","")+"%");function D(T){const Y=T*Math.pow(g[k].ratio,b[k]),K=g[k].ratio,ne=Math.max(1,A);return formula.gSum(Y,K,ne)}function x(){_(1,I=w());for(let[T,Y]of Object.entries(I))if(Y>=1&&m[T]<Y)return;for(let[T,Y]of Object.entries(I))Y>=1&&set_store_value(wallet,m[T]-=Y,m);set_store_value(enchantUpgradeLevels,b[k]+=A,b),_(1,I=w()),_(3,S=!0)}function U(){_(4,M=!1);let T=1e9;for(let[Y,K]of Object.entries(g[k].cost)){const ne=K*Math.pow(g[k].ratio,b[k]);T=Math.min(T,formula.maxNumGeom(m[Y],ne,g[k].ratio))}return _(4,M=!0),T}function C(){if(y.maxBuy&&A==0)return!1;_(1,I=w());for(let[T,Y]of Object.entries(I))if(Y>=1&&m[T]<Y)return!1;return!0}function F(){for(let[T,Y]of Object.entries(g[k].unlockAt))if(m[T]<Y)return!1;return!0}const J=()=>x();return l.$$set=T=>{"index"in T&&_(0,k=T.index)},[k,I,E,S,M,A,m,g,y,b,v,P,L,x,J]}class EnchantUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$b,create_fragment$c,safe_not_equal,{index:0})}}function get_each_context$9(l,d,_){const m=l.slice();return m[44]=d[_],m[46]=_,m}function get_each_context_1$3(l,d,_){const m=l.slice();return m[47]=d[_],m[46]=_,m}function create_if_block$a(l){let d,_,m,g,y,b,v,k,w,I,E,S,N,M,A=l[6](Math.floor(l[8]()),0)+"",P,L,D,x,U,C,F,J,T=l[8]()>=10?"Relocate":"You need to gain at least 10 fame to relocate.",Y,K,ne,Z,O,V,H=l[3],le,B,R,G=l[6](l[5].relocateCount)+"",$,de,oe,X,te=create_key_block$4(l);return{c(){d=element("div"),_=element("div"),m=element("div"),g=text(`Relocate to a new mine and gain
        fame based on your past success.`),y=space(),b=element("div"),v=text("Relocating resets all previous resources and upgrades."),k=space(),w=element("div"),I=text("Tier 1 and 2 keys will be reset."),E=space(),S=element("div"),N=text(`You will gain 
        `),M=element("span"),P=text(A),L=text(" fame by relocating."),D=space(),x=element("div"),U=element("hr"),C=space(),F=element("div"),J=element("div"),Y=text(T),K=space(),ne=element("div"),Z=element("hr"),O=space(),V=element("div"),te.c(),le=space(),B=element("div"),R=text("You have relocated "),$=text(G),de=text(" times."),this.h()},l(q){d=claim_element(q,"DIV",{class:!0});var ee=children(d);_=claim_element(ee,"DIV",{class:!0});var z=children(_);m=claim_element(z,"DIV",{class:!0});var re=children(m);g=claim_text(re,`Relocate to a new mine and gain
        fame based on your past success.`),re.forEach(detach),y=claim_space(z),b=claim_element(z,"DIV",{class:!0});var ie=children(b);v=claim_text(ie,"Relocating resets all previous resources and upgrades."),ie.forEach(detach),k=claim_space(z),w=claim_element(z,"DIV",{class:!0});var W=children(w);I=claim_text(W,"Tier 1 and 2 keys will be reset."),W.forEach(detach),E=claim_space(z),S=claim_element(z,"DIV",{class:!0});var Q=children(S);N=claim_text(Q,`You will gain 
        `),M=claim_element(Q,"SPAN",{class:!0});var _e=children(M);P=claim_text(_e,A),_e.forEach(detach),L=claim_text(Q," fame by relocating."),Q.forEach(detach),D=claim_space(z),x=claim_element(z,"DIV",{class:!0});var Ee=children(x);U=claim_element(Ee,"HR",{}),Ee.forEach(detach),C=claim_space(z),F=claim_element(z,"DIV",{class:!0});var ye=children(F);J=claim_element(ye,"DIV",{class:!0});var ce=children(J);Y=claim_text(ce,T),ce.forEach(detach),ye.forEach(detach),z.forEach(detach),K=claim_space(ee),ne=claim_element(ee,"DIV",{class:!0});var ae=children(ne);Z=claim_element(ae,"HR",{}),ae.forEach(detach),O=claim_space(ee),V=claim_element(ee,"DIV",{class:!0});var me=children(V);te.l(me),me.forEach(detach),ee.forEach(detach),le=claim_space(q),B=claim_element(q,"DIV",{class:!0});var ke=children(B);R=claim_text(ke,"You have relocated "),$=claim_text(ke,G),de=claim_text(ke," times."),ke.forEach(detach),this.h()},h(){attr(m,"class","col-span-12"),attr(b,"class","col-span-12"),attr(w,"class","col-span-12"),attr(M,"class","text-orange-400 font-bold"),attr(S,"class","col-span-12 py-1"),attr(x,"class","col-span-12 py-1"),attr(J,"class",(l[8]()>=10?"game-btn":"game-btn-noafford")+" text-center"),attr(F,"class","col-span-12 pt-3"),attr(_,"class","grid grid-cols-12 game-text text-center"),attr(ne,"class","py-2"),attr(V,"class","grid grid-cols-12"),attr(d,"class","wrapper pt-1"),attr(B,"class","pt-3 pb-16 tooltip-text text-center w-full")},m(q,ee){insert_hydration(q,d,ee),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(_,y),append_hydration(_,b),append_hydration(b,v),append_hydration(_,k),append_hydration(_,w),append_hydration(w,I),append_hydration(_,E),append_hydration(_,S),append_hydration(S,N),append_hydration(S,M),append_hydration(M,P),append_hydration(S,L),append_hydration(_,D),append_hydration(_,x),append_hydration(x,U),append_hydration(_,C),append_hydration(_,F),append_hydration(F,J),append_hydration(J,Y),append_hydration(d,K),append_hydration(d,ne),append_hydration(ne,Z),append_hydration(d,O),append_hydration(d,V),te.m(V,null),insert_hydration(q,le,ee),insert_hydration(q,B,ee),append_hydration(B,R),append_hydration(B,$),append_hydration(B,de),oe||(X=listen(J,"click",l[14]),oe=!0)},p(q,ee){ee[0]&8&&safe_not_equal(H,H=q[3])?(te.d(1),te=create_key_block$4(q),te.c(),te.m(V,null)):te.p(q,ee),ee[0]&32&&G!==(G=q[6](q[5].relocateCount)+"")&&set_data($,G)},d(q){q&&detach(d),te.d(q),q&&detach(le),q&&detach(B),oe=!1,X()}}}function create_if_block_3$1(l){let d;return{c(){d=text("*")},l(_){d=claim_text(_,"*")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block_1$3(l){let d,_=" "+l[6](l[4][l[46]],2),m,g,y,b=l[46]+1<l[2].length&&create_if_block_3$1();return{c(){d=element("span"),m=text(_),g=space(),b&&b.c(),y=empty(),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var k=children(d);m=claim_text(k,_),k.forEach(detach),g=claim_space(v),b&&b.l(v),y=empty(),this.h()},h(){attr(d,"class",ref.colors["key"+(l[46]+1).toString()])},m(v,k){insert_hydration(v,d,k),append_hydration(d,m),insert_hydration(v,g,k),b&&b.m(v,k),insert_hydration(v,y,k)},p(v,k){k[0]&16&&_!==(_=" "+v[6](v[4][v[46]],2))&&set_data(m,_),v[46]+1<v[2].length?b||(b=create_if_block_3$1(),b.c(),b.m(y.parentNode,y)):b&&(b.d(1),b=null)},d(v){v&&detach(d),v&&detach(g),b&&b.d(v),v&&detach(y)}}}function create_if_block_2$3(l){let d,_,m,g,y,b,v=l[6](l[44].value(),3)+"",k,w,I;return{c(){d=element("div"),_=text("???"),m=space(),g=element("div"),y=element("span"),b=text("x"),k=text(v),w=space(),I=element("div"),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);_=claim_text(S,"???"),S.forEach(detach),m=claim_space(E),g=claim_element(E,"DIV",{class:!0});var N=children(g);y=claim_element(N,"SPAN",{class:!0});var M=children(y);b=claim_text(M,"x"),k=claim_text(M,v),M.forEach(detach),N.forEach(detach),w=claim_space(E),I=claim_element(E,"DIV",{class:!0}),children(I).forEach(detach),this.h()},h(){attr(d,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-3 text-left py-1"),attr(y,"class","font-bold"),attr(g,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-2 text-right py-1"),attr(I,"class","col-span-7")},m(E,S){insert_hydration(E,d,S),append_hydration(d,_),insert_hydration(E,m,S),insert_hydration(E,g,S),append_hydration(g,y),append_hydration(y,b),append_hydration(y,k),insert_hydration(E,w,S),insert_hydration(E,I,S)},p:noop,d(E){E&&detach(d),E&&detach(m),E&&detach(g),E&&detach(w),E&&detach(I)}}}function create_if_block_1$7(l){let d,_=l[44].name+"",m,g,y,b,v,k,w=l[6](l[44].value(),3)+"",I,E,S;return{c(){d=element("div"),m=text(_),g=text(":"),y=space(),b=element("div"),v=element("span"),k=text("x"),I=text(w),E=space(),S=element("div"),this.h()},l(N){d=claim_element(N,"DIV",{class:!0});var M=children(d);m=claim_text(M,_),g=claim_text(M,":"),M.forEach(detach),y=claim_space(N),b=claim_element(N,"DIV",{class:!0});var A=children(b);v=claim_element(A,"SPAN",{class:!0});var P=children(v);k=claim_text(P,"x"),I=claim_text(P,w),P.forEach(detach),A.forEach(detach),E=claim_space(N),S=claim_element(N,"DIV",{class:!0}),children(S).forEach(detach),this.h()},h(){attr(d,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-3 text-left py-1"),attr(v,"class",""),attr(b,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-2 text-right py-1"),attr(S,"class","col-span-7")},m(N,M){insert_hydration(N,d,M),append_hydration(d,m),append_hydration(d,g),insert_hydration(N,y,M),insert_hydration(N,b,M),append_hydration(b,v),append_hydration(v,k),append_hydration(v,I),insert_hydration(N,E,M),insert_hydration(N,S,M)},p:noop,d(N){N&&detach(d),N&&detach(y),N&&detach(b),N&&detach(E),N&&detach(S)}}}function create_each_block$9(l){let d;function _(y,b){if(y[46]>0&&y[44].criteria())return create_if_block_1$7;if(y[46]>0)return create_if_block_2$3}let m=_(l),g=m&&m(l);return{c(){g&&g.c(),d=empty()},l(y){g&&g.l(y),d=empty()},m(y,b){g&&g.m(y,b),insert_hydration(y,d,b)},p(y,b){g&&g.p(y,b)},d(y){g&&g.d(y),y&&detach(d)}}}function create_key_block$4(l){let d,_,m,g,y,b,v=l[6](formula.productArray(l[4]),3)+"",k,w,I,E,S,N,M,A=l[2],P=[];for(let x=0;x<A.length;x+=1)P[x]=create_each_block_1$3(get_each_context_1$3(l,A,x));let L=l[7],D=[];for(let x=0;x<L.length;x+=1)D[x]=create_each_block$9(get_each_context$9(l,L,x));return{c(){d=element("div"),_=text("Keys Used:"),m=space(),g=element("div"),y=element("span"),b=text("+"),k=text(v),w=space(),I=element("div"),E=text(`[ 
        `);for(let x=0;x<P.length;x+=1)P[x].c();S=text(`
         ]`),N=space();for(let x=0;x<D.length;x+=1)D[x].c();M=empty(),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var U=children(d);_=claim_text(U,"Keys Used:"),U.forEach(detach),m=claim_space(x),g=claim_element(x,"DIV",{class:!0});var C=children(g);y=claim_element(C,"SPAN",{class:!0});var F=children(y);b=claim_text(F,"+"),k=claim_text(F,v),F.forEach(detach),C.forEach(detach),w=claim_space(x),I=claim_element(x,"DIV",{class:!0});var J=children(I);E=claim_text(J,`[ 
        `);for(let T=0;T<P.length;T+=1)P[T].l(J);S=claim_text(J,`
         ]`),J.forEach(detach),N=claim_space(x);for(let T=0;T<D.length;T+=1)D[T].l(x);M=empty(),this.h()},h(){attr(d,"class","col-span-3 game-text text-left py-1"),attr(y,"class",""),attr(g,"class","col-span-2 py-1 game-text text-right"),attr(I,"class","col-span-7 game-text text-center px-2 py-1")},m(x,U){insert_hydration(x,d,U),append_hydration(d,_),insert_hydration(x,m,U),insert_hydration(x,g,U),append_hydration(g,y),append_hydration(y,b),append_hydration(y,k),insert_hydration(x,w,U),insert_hydration(x,I,U),append_hydration(I,E);for(let C=0;C<P.length;C+=1)P[C]&&P[C].m(I,null);append_hydration(I,S),insert_hydration(x,N,U);for(let C=0;C<D.length;C+=1)D[C]&&D[C].m(x,U);insert_hydration(x,M,U)},p(x,U){if(U[0]&16&&v!==(v=x[6](formula.productArray(x[4]),3)+"")&&set_data(k,v),U[0]&84){A=x[2];let C;for(C=0;C<A.length;C+=1){const F=get_each_context_1$3(x,A,C);P[C]?P[C].p(F,U):(P[C]=create_each_block_1$3(F),P[C].c(),P[C].m(I,S))}for(;C<P.length;C+=1)P[C].d(1);P.length=A.length}if(U[0]&192){L=x[7];let C;for(C=0;C<L.length;C+=1){const F=get_each_context$9(x,L,C);D[C]?D[C].p(F,U):(D[C]=create_each_block$9(F),D[C].c(),D[C].m(M.parentNode,M))}for(;C<D.length;C+=1)D[C].d(1);D.length=L.length}},d(x){x&&detach(d),x&&detach(m),x&&detach(g),x&&detach(w),x&&detach(I),destroy_each(P,x),x&&detach(N),destroy_each(D,x),x&&detach(M)}}}function create_fragment$b(l){let d,_=!l[0]&&create_if_block$a(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[0]?_&&(_.d(1),_=null):_?_.p(m,g):(_=create_if_block$a(m),_.c(),_.m(d.parentNode,d))},i:noop,o:noop,d(m){_&&_.d(m),m&&detach(d)}}}function instance$a(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O,V;component_subscribe(l,miningUpgradeLevelsFree,q=>_(21,b=q)),component_subscribe(l,miningUpgradeLevelsBought,q=>_(22,v=q)),component_subscribe(l,miningUpgradeLevels,q=>_(23,k=q)),component_subscribe(l,visibleTier,q=>_(24,w=q)),component_subscribe(l,automationItemsUnlocked,q=>_(25,I=q)),component_subscribe(l,wallet,q=>_(9,E=q)),component_subscribe(l,beaconUpgradeLevels,q=>_(26,S=q)),component_subscribe(l,miningUpgrades,q=>_(27,N=q)),component_subscribe(l,beaconBonuses,q=>_(10,M=q)),component_subscribe(l,keysOpened,q=>_(2,A=q)),component_subscribe(l,baseBeaconNextReqs,q=>_(28,P=q)),component_subscribe(l,beaconLevels,q=>_(11,L=q)),component_subscribe(l,beaconNextReqs,q=>_(29,D=q)),component_subscribe(l,beaconActivations,q=>_(30,x=q)),component_subscribe(l,beaconProgress,q=>_(31,U=q)),component_subscribe(l,progressThisTick,q=>_(32,C=q)),component_subscribe(l,progressAverage,q=>_(33,F=q)),component_subscribe(l,progress,q=>_(34,J=q)),component_subscribe(l,resources,q=>_(35,T=q)),component_subscribe(l,stats,q=>_(5,Y=q)),component_subscribe(l,flags,q=>_(36,K=q)),component_subscribe(l,beaconFormulas,q=>_(37,ne=q)),component_subscribe(l,mineLevel,q=>_(38,Z=q)),component_subscribe(l,enchantThreshold,q=>_(12,O=q)),component_subscribe(l,enchantProgress,q=>_(13,V=q));let H=!0,le,{ghost:B}=d;onMount(()=>{setTimeout(()=>{_(4,m=formula.calcFameGainKeys(A)),g=formula.calcFameGemMulti(E.gems),y=formula.calcFameGainBeacons(formula.sumArray(L))},100),le=setInterval(()=>{_(3,H=!H),console.log(formula.productArray(m))},1049)}),onDestroy(()=>{clearInterval(le)});const R=(q,ee=0)=>q<1e9?q.toFixed(q<1e3?ee:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):q.toExponential(3).toString().replace("+",""),G=[{name:"Keys Used",value:()=>formula.productArray(m||[]),criteria:!0},{name:"Mining Level",value:()=>Z.level**1.5*.15+1,colorRef:"gold",criteria:()=>E.gems>0},{name:"Gem Amount",value:()=>g,colorRef:"gems",criteria:()=>E.gems>0},{name:"Beacon Paths",value:()=>y,colorRef:"beacons",criteria:()=>E.beacons>0||formula.sumArray(L)>0},{name:"Fame Bonus (Beacons)",value:()=>ne[4](L[4]),colorRef:"beacons",criteria:()=>E.beacons>0||formula.sumArray(L)>0},{name:"Legendary Upgrades",value:()=>N[16].formula(k[16])*N[17].formula(k[17])*N[19].formula(k[19]),colorRef:"",criteria:()=>E.totalFame>200||E.fame>200||k[16]>0||k[17]>0||k[19]>0}];function $(){return formula.productArray(m)*(Z.level**1.5*.15+1)*g*y*N[16].formula(k[16])*N[17].formula(k[17])*N[19].formula(k[19])*ne[4](L[4])}const de=["gems","gold","orbs","beacons","key1","key2"],oe=["beaconPower"];function X(){if($()>=10&&confirm("Are you sure? Relocating will reset all previous progress."))try{set_store_value(flags,K.relocateNavBack=!0,K),set_store_value(wallet,E.fame=(E.fame||0)+$(),E),set_store_value(wallet,E.totalFame=(E.fame||0)+$(),E),set_store_value(stats,Y.lastRelocate=Date.now(),Y),set_store_value(stats,Y.relocateCount=(Y.relocateCount||0)+1,Y);for(let q of de)set_store_value(wallet,E[q]=0,E);for(let q of oe)I["unlimited power!"]&&q=="beaconPower"||set_store_value(resources,T[q]=0,T);for(let q of Object.entries(J))set_store_value(progress,J[q[0]]=0,J),set_store_value(progressAverage,F[q[0]]=0,F),set_store_value(progressThisTick,C[q[0]]=0,C);if(!I["persistent beacons"])for(let q in L)set_store_value(beaconLevels,L[q]=0,L),set_store_value(beaconProgress,U[q]=0,U),set_store_value(beaconActivations,x[q]=0,x);for(let q in D)set_store_value(beaconNextReqs,D[q]=(L[q]+1)*P[q],D);set_store_value(keysOpened,A=Array(A.length).fill(0),A),set_store_value(beaconBonuses,M=Array(30).fill(1),M),set_store_value(miningUpgradeLevels,k[6]=0,k),set_store_value(miningUpgradeLevelsBought,v[6]=0,v),set_store_value(miningUpgradeLevels,k[9]=0,k),set_store_value(miningUpgradeLevelsBought,v[9]=0,v),set_store_value(visibleTier,w=1,w);for(let q in N)set_store_value(miningUpgradeLevels,k[q]=v[q],k),set_store_value(miningUpgradeLevelsFree,b[q]=q==0||q==1||q==2||q==7?N[27].formula(k[27]):0,b),I.omnipotent||N[q].noResetRelocate||(set_store_value(miningUpgradeLevelsBought,v[q]=0,v),set_store_value(miningUpgradeLevels,k[q]=v[q]+b[q],k));console.log(I),I["unlimited power!"]||set_store_value(beaconUpgradeLevels,S=Array(S.length).fill(0),S),I.jumpstart&&(set_store_value(wallet,E.gems=5e3,E),set_store_value(wallet,E.gold=100,E)),I.beaconizer&&set_store_value(wallet,E.beacons=5e4,E),(I["deep pockets"]||k[14]>=1)&&(set_store_value(miningUpgradeLevels,k[6]=1,k),set_store_value(miningUpgradeLevelsBought,v[6]=1,v),set_store_value(miningUpgradeLevels,k[9]=1,k),set_store_value(miningUpgradeLevelsBought,v[9]=1,v),set_store_value(visibleTier,w=3,w)),set_store_value(miningUpgradeLevels,k=k.map((q,ee)=>v[ee]+b[ee]),k)}catch(q){console.log("Error! Please report this on discord. Code: relocate "+q)}}const te=()=>X();return l.$$set=q=>{"ghost"in q&&_(0,B=q.ghost)},l.$$.update=()=>{l.$$.dirty[0]&12288&&V.t1/O.t1*100,l.$$.dirty[0]&1024,l.$$.dirty[0]&4&&_(4,m=formula.calcFameGainKeys(A)),l.$$.dirty[0]&512&&(g=formula.calcFameGemMulti(E.gems)),l.$$.dirty[0]&2048&&(y=formula.calcFameGainBeacons(formula.sumArray(L)))},Array(30).fill(0),[B,X,A,H,m,Y,R,G,$,E,M,L,O,V,te]}class Relocate extends SvelteComponent{constructor(d){super(),init(this,d,instance$a,create_fragment$b,safe_not_equal,{ghost:0,relocate:1},null,[-1,-1])}get relocate(){return this.$$.ctx[1]}}function get_each_context$8(l,d,_){const m=l.slice();return m[27]=d[_],m[29]=_,m}function get_each_context_1$2(l,d,_){const m=l.slice();return m[27]=d[_],m[29]=_,m}function create_if_block_1$6(l){let d,_,m,g;return _=new EnchantUpgradeButton({props:{index:l[29]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(y,b){insert_hydration(y,d,b),mount_component(_,d,null),append_hydration(d,m),g=!0},i(y){g||(transition_in(_.$$.fragment,y),g=!0)},o(y){transition_out(_.$$.fragment,y),g=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_each_block_1$2(l){let d,_,m=l[29]<2&&create_if_block_1$6(l);return{c(){m&&m.c(),d=empty()},l(g){m&&m.l(g),d=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,d,y),_=!0},p:noop,i(g){_||(transition_in(m),_=!0)},o(g){transition_out(m),_=!1},d(g){m&&m.d(g),g&&detach(d)}}}function create_if_block$9(l){let d,_,m,g;return _=new EnchantUpgradeButton({props:{index:l[29]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(y,b){insert_hydration(y,d,b),mount_component(_,d,null),append_hydration(d,m),g=!0},i(y){g||(transition_in(_.$$.fragment,y),g=!0)},o(y){transition_out(_.$$.fragment,y),g=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_each_block$8(l){let d=l[29]>=2&&l[3][l[29]].unlockAt(),_,m,g=d&&create_if_block$9(l);return{c(){g&&g.c(),_=empty()},l(y){g&&g.l(y),_=empty()},m(y,b){g&&g.m(y,b),insert_hydration(y,_,b),m=!0},p(y,b){b&8&&(d=y[29]>=2&&y[3][y[29]].unlockAt()),d?g?b&8&&transition_in(g,1):(g=create_if_block$9(y),g.c(),transition_in(g,1),g.m(_.parentNode,_)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros())},i(y){m||(transition_in(g),m=!0)},o(y){transition_out(g),m=!1},d(y){g&&g.d(y),y&&detach(_)}}}function create_fragment$a(l){let d,_,m,g,y,b=l[8](.01*l[4].gems*(1e3/l[5].UPDATE_SPEED)/l[6].gems,2)+"",v,k,w,I,E,S,N,M,A,P,L,D,x,U=l[7].enchants?"":l[8](l[1].t1,0)+" / "+l[8](l[0].t1,0),C,F,J,T,Y,K,ne=Object.entries(l[3]),Z=[];for(let B=0;B<ne.length;B+=1)Z[B]=create_each_block_1$2(get_each_context_1$2(l,ne,B));const O=B=>transition_out(Z[B],1,1,()=>{Z[B]=null});let V=Object.entries(l[3]),H=[];for(let B=0;B<V.length;B+=1)H[B]=create_each_block$8(get_each_context$8(l,V,B));const le=B=>transition_out(H[B],1,1,()=>{H[B]=null});return{c(){d=element("div"),_=element("div");for(let B=0;B<Z.length;B+=1)Z[B].c();m=space(),g=element("div"),y=text(`enchant progress
        [ `),v=text(b),k=text(" / sec ]"),w=space(),I=element("div"),E=element("div"),S=element("div"),N=element("div"),M=element("div"),P=space(),L=element("div"),D=element("div"),x=element("strong"),C=text(U),J=space(),T=element("div"),Y=element("div");for(let B=0;B<H.length;B+=1)H[B].c();this.h()},l(B){d=claim_element(B,"DIV",{class:!0});var R=children(d);_=claim_element(R,"DIV",{class:!0});var G=children(_);for(let W=0;W<Z.length;W+=1)Z[W].l(G);G.forEach(detach),m=claim_space(R),g=claim_element(R,"DIV",{class:!0});var $=children(g);y=claim_text($,`enchant progress
        [ `),v=claim_text($,b),k=claim_text($," / sec ]"),$.forEach(detach),w=claim_space(R),I=claim_element(R,"DIV",{class:!0});var de=children(I);E=claim_element(de,"DIV",{class:!0});var oe=children(E);S=claim_element(oe,"DIV",{class:!0});var X=children(S);N=claim_element(X,"DIV",{class:!0});var te=children(N);M=claim_element(te,"DIV",{class:!0,style:!0}),children(M).forEach(detach),te.forEach(detach),X.forEach(detach),oe.forEach(detach),P=claim_space(de),L=claim_element(de,"DIV",{class:!0});var q=children(L);D=claim_element(q,"DIV",{class:!0});var ee=children(D);x=claim_element(ee,"STRONG",{});var z=children(x);C=claim_text(z,U),z.forEach(detach),ee.forEach(detach),q.forEach(detach),de.forEach(detach),J=claim_space(R),T=claim_element(R,"DIV",{class:!0});var re=children(T);Y=claim_element(re,"DIV",{class:!0});var ie=children(Y);for(let W=0;W<H.length;W+=1)H[W].l(ie);ie.forEach(detach),re.forEach(detach),R.forEach(detach),this.h()},h(){attr(_,"class","fame-upgrade-wrapper grid grid-cols-2"),attr(g,"class","text-[#989898] text-small pt-4"),attr(M,"class","bg-violet-300 h-2.5 rounded-full"),set_style(M,"width",l[7].enchants?"100%":l[2]),attr(N,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(S,"class","ench-t1-wrapper align-middle"),attr(E,"class",A=l[7].enchants?"col-span-12":"col-span-10"),attr(D,"class","text-[#989898] text-small"),attr(L,"class",F=(l[7].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle"),attr(I,"class","grid grid-cols-12 pt-1"),attr(Y,"class","fame-upgrade-wrapper grid grid-cols-2 pt-2"),attr(T,"class","py-2"),attr(d,"class","wrapper py-2")},m(B,R){insert_hydration(B,d,R),append_hydration(d,_);for(let G=0;G<Z.length;G+=1)Z[G]&&Z[G].m(_,null);append_hydration(d,m),append_hydration(d,g),append_hydration(g,y),append_hydration(g,v),append_hydration(g,k),append_hydration(d,w),append_hydration(d,I),append_hydration(I,E),append_hydration(E,S),append_hydration(S,N),append_hydration(N,M),append_hydration(I,P),append_hydration(I,L),append_hydration(L,D),append_hydration(D,x),append_hydration(x,C),append_hydration(d,J),append_hydration(d,T),append_hydration(T,Y);for(let G=0;G<H.length;G+=1)H[G]&&H[G].m(Y,null);K=!0},p(B,[R]){if(R&8){ne=Object.entries(B[3]);let G;for(G=0;G<ne.length;G+=1){const $=get_each_context_1$2(B,ne,G);Z[G]?(Z[G].p($,R),transition_in(Z[G],1)):(Z[G]=create_each_block_1$2($),Z[G].c(),transition_in(Z[G],1),Z[G].m(_,null))}for(group_outros(),G=ne.length;G<Z.length;G+=1)O(G);check_outros()}if((!K||R&112)&&b!==(b=B[8](.01*B[4].gems*(1e3/B[5].UPDATE_SPEED)/B[6].gems,2)+"")&&set_data(v,b),(!K||R&132)&&set_style(M,"width",B[7].enchants?"100%":B[2]),(!K||R&128&&A!==(A=B[7].enchants?"col-span-12":"col-span-10"))&&attr(E,"class",A),(!K||R&131)&&U!==(U=B[7].enchants?"":B[8](B[1].t1,0)+" / "+B[8](B[0].t1,0))&&set_data(C,U),(!K||R&128&&F!==(F=(B[7].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle"))&&attr(L,"class",F),R&8){V=Object.entries(B[3]);let G;for(G=0;G<V.length;G+=1){const $=get_each_context$8(B,V,G);H[G]?(H[G].p($,R),transition_in(H[G],1)):(H[G]=create_each_block$8($),H[G].c(),transition_in(H[G],1),H[G].m(Y,null))}for(group_outros(),G=V.length;G<H.length;G+=1)le(G);check_outros()}},i(B){if(!K){for(let R=0;R<ne.length;R+=1)transition_in(Z[R]);for(let R=0;R<V.length;R+=1)transition_in(H[R]);K=!0}},o(B){Z=Z.filter(Boolean);for(let R=0;R<Z.length;R+=1)transition_out(Z[R]);H=H.filter(Boolean);for(let R=0;R<H.length;R+=1)transition_out(H[R]);K=!1},d(B){B&&detach(d),destroy_each(Z,B),destroy_each(H,B)}}}function instance$9(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L;component_subscribe(l,wallet,U=>_(9,v=U)),component_subscribe(l,beaconLevels,U=>_(10,k=U)),component_subscribe(l,keysOpened,U=>_(11,w=U)),component_subscribe(l,beaconBonuses,U=>_(12,I=U)),component_subscribe(l,enchantThreshold,U=>_(0,E=U)),component_subscribe(l,enchantProgress,U=>_(1,S=U)),component_subscribe(l,enchantUpgrades,U=>_(3,N=U)),component_subscribe(l,progressAverage,U=>_(4,M=U)),component_subscribe(l,settings,U=>_(5,A=U)),component_subscribe(l,progressThreshold,U=>_(6,P=U)),component_subscribe(l,antiFlickerFlags,U=>_(7,L=U));let D;onMount(()=>{setTimeout(()=>{g=formula.calcFameGainKeys(w),y=formula.calcFameGemMulti(v.gems),b=formula.calcFameGainBeacons(formula.sumArray(k))},100),D=setInterval(()=>{},1049)}),onDestroy(()=>{clearInterval(D)});const x=(U,C=0)=>U<1e9?U.toFixed(U<1e3?C:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):U.toExponential(3).toString().replace("+","");return v.gems>0,v.beacons>0,l.$$.update=()=>{l.$$.dirty&3&&_(2,m=`${S.t1/E.t1*100}%`),l.$$.dirty&4096,l.$$.dirty&2048&&(g=formula.calcFameGainKeys(w)),l.$$.dirty&512&&(y=formula.calcFameGemMulti(v.gems)),l.$$.dirty&1024&&(b=formula.calcFameGainBeacons(formula.sumArray(k)))},Array(30).fill(0),[E,S,m,N,M,A,P,L,x,v,k,w,I]}class Enchants extends SvelteComponent{constructor(d){super(),init(this,d,instance$9,create_fragment$a,safe_not_equal,{})}}const AutomationUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$7(l,d,_){const m=l.slice();return m[17]=d[_],m}function create_if_block$8(l){let d,_=l[5][l[0]].name+"",m,g,y,b,v=l[5][l[0]].description+"",k,w,I,E,S,N,M,A;function P(x,U){return x[4][x[5][x[0]].id]?create_if_block_1$5:create_else_block$2}let L=P(l),D=L(l);return{c(){d=element("div"),m=text(_),g=space(),y=element("span"),b=element("div"),k=text(v),w=space(),I=element("hr"),E=space(),S=element("div"),D.c(),this.h()},l(x){d=claim_element(x,"DIV",{class:!0});var U=children(d);m=claim_text(U,_),g=claim_space(U),y=claim_element(U,"SPAN",{class:!0});var C=children(y);b=claim_element(C,"DIV",{class:!0});var F=children(b);k=claim_text(F,v),F.forEach(detach),w=claim_space(C),I=claim_element(C,"HR",{}),E=claim_space(C),S=claim_element(C,"DIV",{class:!0});var J=children(S);D.l(J),J.forEach(detach),C.forEach(detach),U.forEach(detach),this.h()},h(){attr(b,"class","title text-small-gray items-start text-center pb-1"),attr(S,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(y,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-1f4i5s3"),attr(d,"class",N="has-tooltip tooltip-text "+(l[2]?l[4][l[5][l[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn":l[4][l[5][l[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-1f4i5s3")},m(x,U){insert_hydration(x,d,U),append_hydration(d,m),append_hydration(d,g),append_hydration(d,y),append_hydration(y,b),append_hydration(b,k),append_hydration(y,w),append_hydration(y,I),append_hydration(y,E),append_hydration(y,S),D.m(S,null),M||(A=listen(d,"click",l[10]),M=!0)},p(x,U){U&33&&_!==(_=x[5][x[0]].name+"")&&set_data(m,_),U&33&&v!==(v=x[5][x[0]].description+"")&&set_data(k,v),L===(L=P(x))&&D?D.p(x,U):(D.d(1),D=L(x),D&&(D.c(),D.m(S,null))),U&53&&N!==(N="has-tooltip tooltip-text "+(x[2]?x[4][x[5][x[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn":x[4][x[5][x[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-1f4i5s3")&&attr(d,"class",N)},d(x){x&&detach(d),D.d(),M=!1,A()}}}function create_else_block$2(l){let d,_=Object.entries(l[1]),m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block$7(get_each_context$7(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y&394){_=Object.entries(g[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$7(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block$7(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_if_block_1$5(l){let d,_;return{c(){d=element("div"),_=text("This automation has been purchased!"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"This automation has been purchased!"),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$2(l){let d,_=(l[3][l[17][0]]||l[7].has(l[17][0])?ref.displayNames[l[17][0]]?ref.displayNames[l[17][0]]:l[17][0]:"???")+"",m,g,y,b,v=l[8](l[17][1])+"",k;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),y=claim_space(w),b=claim_element(w,"DIV",{class:!0});var E=children(b);k=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[17][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-1f4i5s3"),attr(b,"class","col-span-2 text-left")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,y,I),insert_hydration(w,b,I),append_hydration(b,k)},p(w,I){I&138&&_!==(_=(w[3][w[17][0]]||w[7].has(w[17][0])?ref.displayNames[w[17][0]]?ref.displayNames[w[17][0]]:w[17][0]:"???")+"")&&set_data(m,_),I&2&&g!==(g=(ref.colors[w[17][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-1f4i5s3")&&attr(d,"class",g),I&2&&v!==(v=w[8](w[17][1])+"")&&set_data(k,v)},d(w){w&&detach(d),w&&detach(y),w&&detach(b)}}}function create_each_block$7(l){let d,_=l[17][1]>=1&&create_if_block_2$2(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[17][1]>=1?_?_.p(m,g):(_=create_if_block_2$2(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$3(l){let d=l[5][l[0]].unlockAt()||permUnlocked||l[6][l[0]]>0,_,m=d&&create_if_block$8(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&97&&(d=g[5][g[0]].unlockAt()||permUnlocked||g[6][g[0]]>0),d?m?m.p(g,y):(m=create_if_block$8(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_fragment$9(l){let d=l[2],_,m=create_key_block$3(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,[y]){y&4&&safe_not_equal(d,d=g[2])?(m.d(1),m=create_key_block$3(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}let permUnlocked=!1;function instance$8(l,d,_){let m,g,y,b,v,k;component_subscribe(l,wallet,D=>_(3,m=D)),component_subscribe(l,enchantThreshold,D=>_(12,g=D)),component_subscribe(l,automationItemsUnlocked,D=>_(4,y=D)),component_subscribe(l,automationUpgrades,D=>_(5,b=D)),component_subscribe(l,enchantUpgradeLevels,D=>_(6,v=D)),component_subscribe(l,unlockedRes,D=>_(7,k=D));let{index:w}=d,I=()=>{let D={};for(let[x,U]of Object.entries(b[w].cost))D[x]=U;return D},E={},S,N;onMount(()=>{setTimeout(()=>{_(1,E=I()),_(2,S=P())},50),N=setInterval(()=>{_(2,S=P())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(N)});const M=(D,x=0)=>D<1e9?D.toFixed(D<1e3?x:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):D.toExponential(3).toString().replace("+","");function A(){if(!y[b[w].name.toLowerCase()]){_(1,E=I());for(let[D,x]of Object.entries(E))if(x>=1&&m[D]<x||!m[D])return;for(let[D,x]of Object.entries(E))x>=1&&set_store_value(wallet,m[D]-=x,m);set_store_value(automationItemsUnlocked,y[b[w].name.toLowerCase()]=!0,y),y["spellcaster ii"]?set_store_value(enchantThreshold,g.t1=81,g):y.spellcaster&&set_store_value(enchantThreshold,g.t1=90,g)}}function P(){_(1,E=I());for(let[D,x]of Object.entries(E))if(x>=1&&m[D]<x||!m[D])return!1;return!0}const L=()=>A();return l.$$set=D=>{"index"in D&&_(0,w=D.index)},[w,E,S,m,y,b,v,k,M,A,L]}class AutomationUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$8,create_fragment$9,safe_not_equal,{index:0})}}function get_each_context$6(l,d,_){const m=l.slice();return m[26]=d[_],m[28]=_,m}function create_if_block$7(l){let d,_,m,g;return _=new AutomationUpgradeButton({props:{index:l[28]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(y,b){insert_hydration(y,d,b),mount_component(_,d,null),append_hydration(d,m),g=!0},i(y){g||(transition_in(_.$$.fragment,y),g=!0)},o(y){transition_out(_.$$.fragment,y),g=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_each_block$6(l){let d=l[1][l[28]].unlockAt()&&(l[0]||!l[2][l[26][1].name.toLowerCase()]),_,m,g=d&&create_if_block$7(l);return{c(){g&&g.c(),_=empty()},l(y){g&&g.l(y),_=empty()},m(y,b){g&&g.m(y,b),insert_hydration(y,_,b),m=!0},p(y,b){b&7&&(d=y[1][y[28]].unlockAt()&&(y[0]||!y[2][y[26][1].name.toLowerCase()])),d?g?b&7&&transition_in(g,1):(g=create_if_block$7(y),g.c(),transition_in(g,1),g.m(_.parentNode,_)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros())},i(y){m||(transition_in(g),m=!0)},o(y){transition_out(g),m=!1},d(y){g&&g.d(y),y&&detach(_)}}}function create_fragment$8(l){let d,_,m,g,y,b,v,k,w,I,E,S,N,M,A=Object.entries(l[1]),P=[];for(let D=0;D<A.length;D+=1)P[D]=create_each_block$6(get_each_context$6(l,A,D));const L=D=>transition_out(P[D],1,1,()=>{P[D]=null});return{c(){d=element("div"),_=element("div"),m=element("div"),g=element("div"),y=element("label"),b=element("input"),v=space(),k=element("span"),w=text("Show purchased upgrades"),E=space();for(let D=0;D<P.length;D+=1)P[D].c();this.h()},l(D){d=claim_element(D,"DIV",{class:!0});var x=children(d);_=claim_element(x,"DIV",{class:!0});var U=children(_);m=claim_element(U,"DIV",{class:!0});var C=children(m);g=claim_element(C,"DIV",{class:!0});var F=children(g);y=claim_element(F,"LABEL",{class:!0});var J=children(y);b=claim_element(J,"INPUT",{type:!0,class:!0}),v=claim_space(J),k=claim_element(J,"SPAN",{class:!0});var T=children(k);w=claim_text(T,"Show purchased upgrades"),T.forEach(detach),J.forEach(detach),F.forEach(detach),E=claim_space(C);for(let Y=0;Y<P.length;Y+=1)P[Y].l(C);C.forEach(detach),U.forEach(detach),x.forEach(detach),this.h()},h(){b.hidden=!0,attr(b,"type","checkbox"),attr(b,"class","form-checkbox display-none"),attr(k,"class",I="p-1 col-span-2 items-center game-text "+(l[0]?"game-btn-toggleon":"game-btn")),attr(y,"class","items-center col-span-2"),attr(g,"class","col-span-2 p-1 content-center items-center"),attr(m,"class","fame-upgrade-wrapper grid grid-cols-2 pt-2"),attr(_,"class","py-2"),attr(d,"class","wrapper py-2")},m(D,x){insert_hydration(D,d,x),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(g,y),append_hydration(y,b),b.checked=l[0],append_hydration(y,v),append_hydration(y,k),append_hydration(k,w),append_hydration(m,E);for(let U=0;U<P.length;U+=1)P[U]&&P[U].m(m,null);S=!0,N||(M=listen(b,"change",l[9]),N=!0)},p(D,[x]){if(x&1&&(b.checked=D[0]),(!S||x&1&&I!==(I="p-1 col-span-2 items-center game-text "+(D[0]?"game-btn-toggleon":"game-btn")))&&attr(k,"class",I),x&7){A=Object.entries(D[1]);let U;for(U=0;U<A.length;U+=1){const C=get_each_context$6(D,A,U);P[U]?(P[U].p(C,x),transition_in(P[U],1)):(P[U]=create_each_block$6(C),P[U].c(),transition_in(P[U],1),P[U].m(m,null))}for(group_outros(),U=A.length;U<P.length;U+=1)L(U);check_outros()}},i(D){if(!S){for(let x=0;x<A.length;x+=1)transition_in(P[x]);S=!0}},o(D){P=P.filter(Boolean);for(let x=0;x<P.length;x+=1)transition_out(P[x]);S=!1},d(D){D&&detach(d),destroy_each(P,D),N=!1,M()}}}function instance$7(l,d,_){let m,g,y,b,v,k,w,I,E,S,N;component_subscribe(l,wallet,L=>_(3,b=L)),component_subscribe(l,beaconLevels,L=>_(4,v=L)),component_subscribe(l,keysOpened,L=>_(5,k=L)),component_subscribe(l,beaconBonuses,L=>_(6,w=L)),component_subscribe(l,enchantThreshold,L=>_(7,I=L)),component_subscribe(l,enchantProgress,L=>_(8,E=L)),component_subscribe(l,automationUpgrades,L=>_(1,S=L)),component_subscribe(l,automationItemsUnlocked,L=>_(2,N=L));let M,A=!1;onMount(()=>{setTimeout(()=>{m=formula.calcFameGainKeys(k),g=formula.calcFameGemMulti(b.gems),y=formula.calcFameGainBeacons(formula.sumArray(v))},100),M=setInterval(()=>{},1049)}),onDestroy(()=>{clearInterval(M)}),b.gems>0,b.beacons>0;function P(){A=this.checked,_(0,A)}return l.$$.update=()=>{l.$$.dirty&384&&E.t1/I.t1*100,l.$$.dirty&64,l.$$.dirty&32&&(m=formula.calcFameGainKeys(k)),l.$$.dirty&8&&(g=formula.calcFameGemMulti(b.gems)),l.$$.dirty&16&&(y=formula.calcFameGainBeacons(formula.sumArray(v)))},Array(30).fill(0),[A,S,N,b,v,k,w,I,E,P]}class Automation extends SvelteComponent{constructor(d){super(),init(this,d,instance$7,create_fragment$8,safe_not_equal,{})}}function create_if_block_1$4(l){let d,_,m;return{c(){d=element("div"),_=text(l[1]),this.h()},l(g){d=claim_element(g,"DIV",{class:!0,style:!0});var y=children(d);_=claim_text(y,l[1]),y.forEach(detach),this.h()},h(){attr(d,"class",m="fixed flex w-[350px] h-[35px] "+l[2]+" text-center items-center justify-center"),set_style(d,"top",l[4].y+"px"),set_style(d,"left",l[4].x+"px")},m(g,y){insert_hydration(g,d,y),append_hydration(d,_)},p(g,y){y&2&&set_data(_,g[1]),y&4&&m!==(m="fixed flex w-[350px] h-[35px] "+g[2]+" text-center items-center justify-center")&&attr(d,"class",m),y&16&&set_style(d,"top",g[4].y+"px"),y&16&&set_style(d,"left",g[4].x+"px")},d(g){g&&detach(d)}}}function create_if_block$6(l){let d,_,m;return{c(){d=element("button"),this.h()},l(g){d=claim_element(g,"BUTTON",{id:!0,class:!0,style:!0});var y=children(d);y.forEach(detach),this.h()},h(){attr(d,"id","button"),attr(d,"class","fixed w-[20px] h-[20px] bg-gray-400 bg-opacity-50 text-white flex items-center justify-center rounded-full cursor-pointer transition-all duration-300"),set_style(d,"top",l[3].y+40+"px"),set_style(d,"left",l[3].x+40+"px")},m(g,y){insert_hydration(g,d,y),_||(m=listen(d,"click",l[9]),_=!0)},p(g,y){y&8&&set_style(d,"top",g[3].y+40+"px"),y&8&&set_style(d,"left",g[3].x+40+"px")},d(g){g&&detach(d),_=!1,m()}}}function create_fragment$7(l){let d,_,m,g,y,b,v,k,w,I,E=l[0]&&create_if_block_1$4(l),S=l[6][2]>0&&create_if_block$6(l);return{c(){d=element("div"),_=text("Click the outer area of the button once to enable key-clicking."),m=space(),E&&E.c(),g=space(),y=element("button"),v=space(),S&&S.c(),k=empty(),this.h()},l(N){d=claim_element(N,"DIV",{class:!0});var M=children(d);_=claim_text(M,"Click the outer area of the button once to enable key-clicking."),M.forEach(detach),m=claim_space(N),E&&E.l(N),g=claim_space(N),y=claim_element(N,"BUTTON",{id:!0,class:!0,style:!0}),children(y).forEach(detach),v=claim_space(N),S&&S.l(N),k=empty(),this.h()},h(){attr(d,"class","game-text text-small text-center"),attr(y,"id","button"),attr(y,"class",b="fixed "+l[5]+" w-[100px] h-[100px] border-4 border-white border-opacity-50 text-white flex items-center justify-center rounded-full cursor-pointer transition-all duration-300"),set_style(y,"top",l[3].y+"px"),set_style(y,"left",l[3].x+"px")},m(N,M){insert_hydration(N,d,M),append_hydration(d,_),insert_hydration(N,m,M),E&&E.m(N,M),insert_hydration(N,g,M),insert_hydration(N,y,M),insert_hydration(N,v,M),S&&S.m(N,M),insert_hydration(N,k,M),w||(I=[listen(window,"keydown",prevent_default(l[9]&&l[7])),listen(window,"keyup",l[8]),listen(y,"click",l[9]),listen(y,"keydown",l[9])],w=!0)},p(N,[M]){N[0]?E?E.p(N,M):(E=create_if_block_1$4(N),E.c(),E.m(g.parentNode,g)):E&&(E.d(1),E=null),M&32&&b!==(b="fixed "+N[5]+" w-[100px] h-[100px] border-4 border-white border-opacity-50 text-white flex items-center justify-center rounded-full cursor-pointer transition-all duration-300")&&attr(y,"class",b),M&8&&set_style(y,"top",N[3].y+"px"),M&8&&set_style(y,"left",N[3].x+"px"),N[6][2]>0?S?S.p(N,M):(S=create_if_block$6(N),S.c(),S.m(k.parentNode,k)):S&&(S.d(1),S=null)},i:noop,o:noop,d(N){N&&detach(d),N&&detach(m),E&&E.d(N),N&&detach(g),N&&detach(y),N&&detach(v),S&&S.d(N),N&&detach(k),w=!1,run_all(I)}}}const BUTTON_SIZE=100;function instance$6(l,d,_){let m,g,y,b,v,k,w,I,E,S,N;component_subscribe(l,flags,K=>_(12,g=K)),component_subscribe(l,buttonUpgradeLevels,K=>_(6,y=K)),component_subscribe(l,buttonUpgrades,K=>_(13,b=K)),component_subscribe(l,buttonNumClicks,K=>_(14,v=K)),component_subscribe(l,buttonStats,K=>_(15,k=K)),component_subscribe(l,wallet,K=>_(16,w=K)),component_subscribe(l,radiumGainText,K=>_(17,I=K)),component_subscribe(l,buttonRadiumProgress,K=>_(18,E=K)),component_subscribe(l,mineLevel,K=>_(19,S=K)),component_subscribe(l,automationItemsUnlocked,K=>_(20,N=K));let M=!1,A="",P="",L={x:0,y:0},D={x:0,y:0};function x(K){K.keyCode>0&&(C=!0)}function U(K){K.keyCode>0&&(C=!1)}let C=!1;const F=K=>{if(C&&!N["another button"])return;_(4,D={x:L.x-100,y:L.y-18});const ne=K?K.clientX:0,Z=K?K.clientY:0;let O=Math.sqrt(Math.abs(ne-L.x-BUTTON_SIZE/2)**2+Math.abs(Z-L.y-BUTTON_SIZE/2)**2),V=0;set_store_value(buttonStats,k.totalClicks++,k);const H=Math.random()<b[5].formula(y[5]);Math.random()<b[6].formula(y[6])&&set_store_value(wallet,w.warp=(w.warp||0)+Math.ceil(Math.random()*45),w);let B=0;O<ref.buttonDistances.perfect?(V=ref.buttonBaseRewards.perfect,_(1,A="PERFECT"),_(2,P="text-large text-amber-500 border-amber-500 font-bold"),set_store_value(buttonNumClicks,v.perfect++,v),B=3*b[4].formula(y[4])):O<=ref.buttonDistances.incredible?(V=ref.buttonBaseRewards.incredible,_(1,A="Incredible"),_(2,P="text-large text-pink-500 border-pink-500 font-bold"),set_store_value(buttonNumClicks,v.incredible++,v),B=3*b[4].formula(y[4])):O<=ref.buttonDistances.excellent?(V=ref.buttonBaseRewards.excellent,_(1,A="Excellent"),_(2,P="text-med text-violet-500 border-violet-500"),set_store_value(buttonNumClicks,v.excellent++,v),B=2*b[4].formula(y[4])):O<=ref.buttonDistances.great?(V=ref.buttonBaseRewards.great,_(1,A="Great"),_(2,P="text-med text-sky-500 border-sky-500"),set_store_value(buttonNumClicks,v.great++,v),B=1):O<=ref.buttonDistances.good?(V=ref.buttonBaseRewards.good,_(1,A="Good"),_(2,P="text-med text-green-500 border-green-500"),set_store_value(buttonNumClicks,v.good++,v),B=1):(V=ref.buttonBaseRewards.okay,_(1,A="Okay"),_(2,P="text-small text-gray-500 border-gray-500"),set_store_value(buttonNumClicks,v.okay++,v),B=1),set_store_value(mineLevel,S.xp+=B,S),V=V*formula.calcButtonRewardBonus(),set_store_value(radiumGainText,I="+ "+Y(V),I),V+E[0]>E[1]&&set_store_value(radiumGainText,I+="   [ + "+Y(Math.floor((V+E[0])/E[1]))+" radium ]",I),V+E[0]>E[1]*5&&set_store_value(radiumGainText,I="+ "+Y(Math.floor(V+E[0]/E[1]))+" radium",I),isNaN(w.radium)&&set_store_value(wallet,w.radium=1,w),set_store_value(buttonRadiumProgress,E[0]+=V,E),E[0]>=E[1]&&(set_store_value(wallet,w.radium=(w.radium||0)+Math.floor(E[0]/E[1]),w),set_store_value(buttonRadiumProgress,E[0]%=E[1],E)),setTimeout(()=>{set_store_value(radiumGainText,I="",I)},375);let R;H&&(R=8+Math.round(Math.random()*12),V*=R),H&&_(1,A+=" [ LUCKY! ]"),O<ref.buttonDistances.perfect&&y[7]>0&&(set_store_value(wallet,w.stars=(w.stars||0)+1,w),_(5,m="bg-fuchsia-300 transition-colors duration-300 ease-in-out hover:bg-violet-600"),setTimeout(()=>{_(5,m="")},700)),set_store_value(buttonStats,k.hardenedBonus=formula.calcHardenedGemBonus(v),k),document.getElementById("box");const G=350,$=950,de=300,oe=550,X=($+G)/2,te=(oe+de)/2,q=b[0].formula(y[0]);console.log(q);let ee=X+(Math.random()*($-G)-($-G)/2)*q,z=te+(Math.random()*(oe-de)-(oe-de)/2)*q;console.log(ee-X,z-te),ee<G&&(ee=G),ee>$&&(ee=$),z<de&&(z=de),z>oe&&(z=oe),_(3,L={x:ee,y:z}),set_store_value(flags,g.showMineXPGain=B,g),setTimeout(()=>{set_store_value(flags,g.showMineXPGain=-1,g)},700),T(H)};let J;function T(K){clearTimeout(J),_(0,M=!0),J=setTimeout(()=>{_(0,M=!1)},K?900:500)}onMount(()=>{_(3,L={x:650,y:320})});const Y=(K,ne=0)=>K<1e9?K.toFixed(K<1e3?ne:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):K.toExponential(3).toString().replace("+","");return _(5,m=""),[M,A,P,L,D,m,y,x,U,F]}class ButtonItem extends SvelteComponent{constructor(d){super(),init(this,d,instance$6,create_fragment$7,safe_not_equal,{})}}const ButtonUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$5(l,d,_){const m=l.slice();return m[19]=d[_],m}function create_if_block$5(l){let d,_,m=l[5][l[0]].name+"",g,y,b=l[9](l[6][l[0]],0)+"",v,k,w=l[9](l[5][l[0]].maxLevel,0)+"",I,E,S,N,M,A,P=l[5][l[0]].description+"",L,D,x,U,C,F=(l[5][l[0]].prefix||"")+"",J,T=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[6][l[0]]),3,!1):l[9](l[5][l[0]].formula(l[6][l[0]]),3))+"",Y,K=(l[5][l[0]].suffix||"")+"",ne,Z,O,V,H=(l[5][l[0]].prefix||"")+"",le,B=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[6][l[0]]+l[7].buyAmount),3,!1):l[9](l[5][l[0]].formula(l[6][l[0]]+l[7].buyAmount),3))+"",R,G=(l[5][l[0]].suffix||"")+"",$,de,oe,X,te,q,ee,z;function re(Q,_e){return Q[6][Q[0]]>=Q[5][Q[0]].maxLevel?create_if_block_1$3:create_else_block$1}let ie=re(l),W=ie(l);return{c(){d=element("div"),_=element("span"),g=text(m),y=text(" ["),v=text(b),k=text(" / "),I=text(w),E=text("]"),N=space(),M=element("span"),A=element("div"),L=text(P),D=space(),x=element("div"),U=element("div"),C=element("span"),J=text(F),Y=text(T),ne=text(K),Z=space(),O=element("span"),V=text(`=> 
                    `),le=text(H),R=text(B),$=text(G),de=space(),oe=element("hr"),X=space(),te=element("div"),W.c(),this.h()},l(Q){d=claim_element(Q,"DIV",{class:!0});var _e=children(d);_=claim_element(_e,"SPAN",{class:!0});var Ee=children(_);g=claim_text(Ee,m),y=claim_text(Ee," ["),v=claim_text(Ee,b),k=claim_text(Ee," / "),I=claim_text(Ee,w),E=claim_text(Ee,"]"),Ee.forEach(detach),N=claim_space(_e),M=claim_element(_e,"SPAN",{class:!0});var ye=children(M);A=claim_element(ye,"DIV",{class:!0});var ce=children(A);L=claim_text(ce,P),ce.forEach(detach),D=claim_space(ye),x=claim_element(ye,"DIV",{class:!0});var ae=children(x);U=claim_element(ae,"DIV",{class:!0});var me=children(U);C=claim_element(me,"SPAN",{class:!0});var ke=children(C);J=claim_text(ke,F),Y=claim_text(ke,T),ne=claim_text(ke,K),ke.forEach(detach),Z=claim_space(me),O=claim_element(me,"SPAN",{class:!0});var Se=children(O);V=claim_text(Se,`=> 
                    `),le=claim_text(Se,H),R=claim_text(Se,B),$=claim_text(Se,G),Se.forEach(detach),me.forEach(detach),ae.forEach(detach),de=claim_space(ye),oe=claim_element(ye,"HR",{}),X=claim_space(ye),te=claim_element(ye,"DIV",{class:!0});var Ne=children(te);W.l(Ne),Ne.forEach(detach),ye.forEach(detach),_e.forEach(detach),this.h()},h(){attr(_,"class",S=l[5][l[0]].isRadiumUpgrade?"text-lime-300":"text-indigo-300"),attr(A,"class","title text-small-gray items-start text-center pb-1"),attr(C,"class","current text-[#cccccc]"),attr(O,"class","current text-[#999999]"),attr(U,"class","tooltip-text-xs text-[#cccccc]"),attr(x,"class","text-center effect-wrapper"),attr(te,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(M,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",q="has-tooltip tooltip-text "+(l[6][l[0]]>=l[5][l[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":l[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(Q,_e){insert_hydration(Q,d,_e),append_hydration(d,_),append_hydration(_,g),append_hydration(_,y),append_hydration(_,v),append_hydration(_,k),append_hydration(_,I),append_hydration(_,E),append_hydration(d,N),append_hydration(d,M),append_hydration(M,A),append_hydration(A,L),append_hydration(M,D),append_hydration(M,x),append_hydration(x,U),append_hydration(U,C),append_hydration(C,J),append_hydration(C,Y),append_hydration(C,ne),append_hydration(U,Z),append_hydration(U,O),append_hydration(O,V),append_hydration(O,le),append_hydration(O,R),append_hydration(O,$),append_hydration(M,de),append_hydration(M,oe),append_hydration(M,X),append_hydration(M,te),W.m(te,null),ee||(z=listen(d,"click",l[12]),ee=!0)},p(Q,_e){_e&33&&m!==(m=Q[5][Q[0]].name+"")&&set_data(g,m),_e&65&&b!==(b=Q[9](Q[6][Q[0]],0)+"")&&set_data(v,b),_e&33&&w!==(w=Q[9](Q[5][Q[0]].maxLevel,0)+"")&&set_data(I,w),_e&33&&S!==(S=Q[5][Q[0]].isRadiumUpgrade?"text-lime-300":"text-indigo-300")&&attr(_,"class",S),_e&33&&P!==(P=Q[5][Q[0]].description+"")&&set_data(L,P),_e&33&&F!==(F=(Q[5][Q[0]].prefix||"")+"")&&set_data(J,F),_e&97&&T!==(T=(Q[5][Q[0]].isPercent?Q[10](Q[5][Q[0]].formula(Q[6][Q[0]]),3,!1):Q[9](Q[5][Q[0]].formula(Q[6][Q[0]]),3))+"")&&set_data(Y,T),_e&33&&K!==(K=(Q[5][Q[0]].suffix||"")+"")&&set_data(ne,K),_e&33&&H!==(H=(Q[5][Q[0]].prefix||"")+"")&&set_data(le,H),_e&225&&B!==(B=(Q[5][Q[0]].isPercent?Q[10](Q[5][Q[0]].formula(Q[6][Q[0]]+Q[7].buyAmount),3,!1):Q[9](Q[5][Q[0]].formula(Q[6][Q[0]]+Q[7].buyAmount),3))+"")&&set_data(R,B),_e&33&&G!==(G=(Q[5][Q[0]].suffix||"")+"")&&set_data($,G),ie===(ie=re(Q))&&W?W.p(Q,_e):(W.d(1),W=ie(Q),W&&(W.c(),W.m(te,null))),_e&101&&q!==(q="has-tooltip tooltip-text "+(Q[6][Q[0]]>=Q[5][Q[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":Q[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",q)},d(Q){Q&&detach(d),W.d(),ee=!1,z()}}}function create_else_block$1(l){let d,_=Object.entries(l[1]),m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block$5(get_each_context$5(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y&786){_=Object.entries(g[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$5(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block$5(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_if_block_1$3(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var g=children(d);_=claim_text(g,"This upgrade is at max level."),g.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$1(l){let d,_=(l[4][l[19][0]]||l[8].has(l[19][0])?ref.displayNames[l[19][0]]?ref.displayNames[l[19][0]]:l[19][0]:"???")+"",m,g,y,b,v=l[9](l[19][1])+"",k;return{c(){d=element("div"),m=text(_),y=space(),b=element("div"),k=text(v),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),y=claim_space(w),b=claim_element(w,"DIV",{class:!0});var E=children(b);k=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",g=(ref.colors[l[19][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(w,I){insert_hydration(w,d,I),append_hydration(d,m),insert_hydration(w,y,I),insert_hydration(w,b,I),append_hydration(b,k)},p(w,I){I&274&&_!==(_=(w[4][w[19][0]]||w[8].has(w[19][0])?ref.displayNames[w[19][0]]?ref.displayNames[w[19][0]]:w[19][0]:"???")+"")&&set_data(m,_),I&2&&g!==(g=(ref.colors[w[19][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",g),I&2&&v!==(v=w[9](w[19][1])+"")&&set_data(k,v)},d(w){w&&detach(d),w&&detach(y),w&&detach(b)}}}function create_each_block$5(l){let d,_=l[19][1]>=1&&create_if_block_2$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[19][1]>=1?_?_.p(m,g):(_=create_if_block_2$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$2(l){let d=l[5][l[0]].unlockAt()||l[3]||l[6][l[0]]>0,_,m=d&&create_if_block$5(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&105&&(d=g[5][g[0]].unlockAt()||g[3]||g[6][g[0]]>0),d?m?m.p(g,y):(m=create_if_block$5(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_fragment$6(l){let d=l[3]||l[2]||l[6][l[0]]>0,_,m=create_key_block$2(l);return{c(){m.c(),_=empty()},l(g){m.l(g),_=empty()},m(g,y){m.m(g,y),insert_hydration(g,_,y)},p(g,[y]){y&77&&safe_not_equal(d,d=g[3]||g[2]||g[6][g[0]]>0)?(m.d(1),m=create_key_block$2(g),m.c(),m.m(_.parentNode,_)):m.p(g,y)},i:noop,o:noop,d(g){g&&detach(_),m.d(g)}}}function instance$5(l,d,_){let m,g,y,b,v;component_subscribe(l,wallet,C=>_(4,m=C)),component_subscribe(l,buttonUpgrades,C=>_(5,g=C)),component_subscribe(l,buttonUpgradeLevels,C=>_(6,y=C)),component_subscribe(l,settings,C=>_(7,b=C)),component_subscribe(l,unlockedRes,C=>_(8,v=C));let{index:k}=d,w=()=>{let C={};for(let[F,J]of Object.entries(g[k].cost))C[F]=P(J);return C},I={},E,S=y[k]>0,N;onMount(()=>{setTimeout(()=>{_(1,I=w()),_(2,E=D()),g[k].unlockAt()&&_(3,S=!0),_(3,S=y[k]>0)},50),N=setInterval(()=>{_(2,E=D()),x(),g[k].unlockAt()&&_(3,S=!0)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(N)});const M=(C,F=0)=>C<1e9?C.toFixed(C<1e3?F:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):C.toExponential(3).toString().replace("+",""),A=(C,F=3,J=!1)=>(J&&(C-=1),C<1e9?(C*100).toFixed(C*100<1e3?F:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(C*100).toExponential(F).toString().replace("+","")+"%");function P(C){const F=C*Math.pow(g[k].ratio,y[k]),J=g[k].ratio,T=b.buyAmount;return formula.gSum(F,J,T)}function L(){_(1,I=w());for(let[C,F]of Object.entries(I))if(F>=1&&m[C]<F||!m[C])return;for(let[C,F]of Object.entries(I))F>=1&&set_store_value(wallet,m[C]-=F,m);set_store_value(buttonUpgradeLevels,y[k]+=Math.min(b.buyAmount,g[k].maxLevel-y[k]),y),_(3,S=!0)}function D(){_(1,I=w());for(let[C,F]of Object.entries(I))if(F>=1&&m[C]<F||!m[C])return!1;return!0}function x(){for(let[C,F]of Object.entries(g[k].unlockAt))if(m[C]<F)return!1;return!0}const U=()=>L();return l.$$set=C=>{"index"in C&&_(0,k=C.index)},[k,I,E,S,m,g,y,b,v,M,A,L,U]}class ButtonUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$5,create_fragment$6,safe_not_equal,{index:0})}}function get_each_context$4(l,d,_){const m=l.slice();return m[11]=d[_],m[13]=_,m}function get_each_context_1$1(l,d,_){const m=l.slice();return m[14]=d[_][0],m[15]=d[_][1],m}function create_if_block$4(l){let d,_;return{c(){d=element("span"),_=text(l[5]),this.h()},l(m){d=claim_element(m,"SPAN",{class:!0});var g=children(d);_=claim_text(g,l[5]),g.forEach(detach),this.h()},h(){attr(d,"class","text-lime-300 text-opacity-70 text-med pl-2")},m(m,g){insert_hydration(m,d,g),append_hydration(d,_)},p(m,g){g&32&&set_data(_,m[5])},d(m){m&&detach(d)}}}function create_each_block_1$1(l){let d,_,m=l[14]+"",g,y,b,v,k=l[14]!=="okay"?"<"+l[7](ref.buttonDistances[l[14]])+"px":"",w,I,E,S,N,M=l[7](ref.buttonBaseRewards[l[14]]*formula.calcButtonRewardBonus())+"",A,P;return{c(){d=element("div"),_=element("span"),g=text(m),y=space(),b=element("div"),v=element("span"),w=text(k),I=space(),E=element("div"),S=element("span"),N=text("+"),A=text(M),P=space(),this.h()},l(L){d=claim_element(L,"DIV",{class:!0});var D=children(d);_=claim_element(D,"SPAN",{class:!0});var x=children(_);g=claim_text(x,m),x.forEach(detach),D.forEach(detach),y=claim_space(L),b=claim_element(L,"DIV",{class:!0});var U=children(b);v=claim_element(U,"SPAN",{class:!0});var C=children(v);w=claim_text(C,k),C.forEach(detach),U.forEach(detach),I=claim_space(L),E=claim_element(L,"DIV",{class:!0});var F=children(E);S=claim_element(F,"SPAN",{class:!0});var J=children(S);N=claim_text(J,"+"),A=claim_text(J,M),J.forEach(detach),P=claim_space(F),F.forEach(detach),this.h()},h(){attr(_,"class",l[15]),attr(d,"class","col-span-2 text-small text-left"),attr(v,"class",l[15]+" text-small"),attr(b,"class","col-span-2 text-small text-center"),attr(S,"class","tooltip-text text-small"),attr(E,"class","col-span-2 text-small text-right")},m(L,D){insert_hydration(L,d,D),append_hydration(d,_),append_hydration(_,g),insert_hydration(L,y,D),insert_hydration(L,b,D),append_hydration(b,v),append_hydration(v,w),insert_hydration(L,I,D),insert_hydration(L,E,D),append_hydration(E,S),append_hydration(S,N),append_hydration(S,A),append_hydration(E,P)},p:noop,d(L){L&&detach(d),L&&detach(y),L&&detach(b),L&&detach(I),L&&detach(E)}}}function create_each_block$4(l){let d,_,m,g;return _=new ButtonUpgradeButton({props:{index:l[13]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-3 pb-1 ")},m(y,b){insert_hydration(y,d,b),mount_component(_,d,null),append_hydration(d,m),g=!0},p:noop,i(y){g||(transition_in(_.$$.fragment,y),g=!0)},o(y){transition_out(_.$$.fragment,y),g=!1},d(y){y&&detach(d),destroy_component(_)}}}function create_fragment$5(l){let d,_,m,g,y=l[7](l[3].totalClicks)+"",b,v,k,w=l[7](l[4].perfect,0)+"",I,E,S,N=l[7](l[4].incredible,0)+"",M,A,P,L=l[7](l[4].excellent,0)+"",D,x,U,C=l[7](l[4].great,0)+"",F,J,T,Y=l[7](l[4].good,0)+"",K,ne,Z,O=l[7](l[4].okay,0)+"",V,H,le,B,R,G,$,de,oe,X=l[7](l[1],l[1]>100?0:2)+"",te,q,ee,z,re,ie,W,Q,_e,Ee,ye,ce,ae,me,ke=l[7](l[0][0])+"",Se,Ne,xe=l[7](l[0][1])+"",Pe,Be,Te,be,Ve,He,We,Ze,$e,et,Xe,Le,Re=l[5].length>0&&create_if_block$4(l),Qe=Object.entries(ref.buttonColors),Ge=[];for(let fe=0;fe<Qe.length;fe+=1)Ge[fe]=create_each_block_1$1(get_each_context_1$1(l,Qe,fe));let Ke=l[6],Ue=[];for(let fe=0;fe<Ke.length;fe+=1)Ue[fe]=create_each_block$4(get_each_context$4(l,Ke,fe));const _t=fe=>transition_out(Ue[fe],1,1,()=>{Ue[fe]=null});return Xe=new ButtonItem({}),{c(){d=element("div"),_=element("div"),m=element("div"),g=text("Total Clicks: "),b=text(y),v=text(` 
          [ 
          `),k=element("span"),I=text(w),E=text(` + 
          `),S=element("span"),M=text(N),A=text(` + 
          `),P=element("span"),D=text(L),x=text(` + 
          `),U=element("span"),F=text(C),J=text(` + 
          `),T=element("span"),K=text(Y),ne=text(` + 
          `),Z=element("span"),V=text(O),H=text(`
           ]`),le=space(),B=element("div"),R=text("Your "),G=element("span"),$=text("radium"),de=text(`
          is producing 
          `),oe=element("span"),te=text(X),q=text("  crystals"),ee=text(" per second"),z=space(),re=element("div"),ie=element("div"),W=element("div"),Q=element("div"),_e=element("div"),Ee=space(),ye=element("div"),ce=element("div"),ae=text(`Radioactivity 
            `),me=element("span"),Se=text(ke),Ne=text(" / "),Pe=text(xe),Be=space(),Re&&Re.c(),Te=space(),be=element("span"),Ve=element("div"),He=element("div"),We=text("Radioactivity Gains"),Ze=space();for(let fe=0;fe<Ge.length;fe+=1)Ge[fe].c();$e=space();for(let fe=0;fe<Ue.length;fe+=1)Ue[fe].c();et=space(),create_component(Xe.$$.fragment),this.h()},l(fe){d=claim_element(fe,"DIV",{class:!0});var De=children(d);_=claim_element(De,"DIV",{class:!0});var we=children(_);m=claim_element(we,"DIV",{class:!0});var Ce=children(m);g=claim_text(Ce,"Total Clicks: "),b=claim_text(Ce,y),v=claim_text(Ce,` 
          [ 
          `),k=claim_element(Ce,"SPAN",{class:!0});var kt=children(k);I=claim_text(kt,w),kt.forEach(detach),E=claim_text(Ce,` + 
          `),S=claim_element(Ce,"SPAN",{class:!0});var se=children(S);M=claim_text(se,N),se.forEach(detach),A=claim_text(Ce,` + 
          `),P=claim_element(Ce,"SPAN",{class:!0});var Oe=children(P);D=claim_text(Oe,L),Oe.forEach(detach),x=claim_text(Ce,` + 
          `),U=claim_element(Ce,"SPAN",{class:!0});var j=children(U);F=claim_text(j,C),j.forEach(detach),J=claim_text(Ce,` + 
          `),T=claim_element(Ce,"SPAN",{class:!0});var Ie=children(T);K=claim_text(Ie,Y),Ie.forEach(detach),ne=claim_text(Ce,` + 
          `),Z=claim_element(Ce,"SPAN",{class:!0});var ue=children(Z);V=claim_text(ue,O),ue.forEach(detach),H=claim_text(Ce,`
           ]`),Ce.forEach(detach),le=claim_space(we),B=claim_element(we,"DIV",{class:!0});var he=children(B);R=claim_text(he,"Your "),G=claim_element(he,"SPAN",{class:!0});var je=children(G);$=claim_text(je,"radium"),je.forEach(detach),de=claim_text(he,`
          is producing 
          `),oe=claim_element(he,"SPAN",{class:!0});var ve=children(oe);te=claim_text(ve,X),q=claim_text(ve,"  crystals"),ve.forEach(detach),ee=claim_text(he," per second"),he.forEach(detach),z=claim_space(we),re=claim_element(we,"DIV",{class:!0});var Fe=children(re);ie=claim_element(Fe,"DIV",{class:!0});var lt=children(ie);W=claim_element(lt,"DIV",{class:!0});var rt=children(W);Q=claim_element(rt,"DIV",{class:!0});var ut=children(Q);_e=claim_element(ut,"DIV",{class:!0,style:!0});var ze=children(_e);ze.forEach(detach),ut.forEach(detach),rt.forEach(detach),lt.forEach(detach),Ee=claim_space(Fe),ye=claim_element(Fe,"DIV",{class:!0});var ge=children(ye);ce=claim_element(ge,"DIV",{class:!0});var Me=children(ce);ae=claim_text(Me,`Radioactivity 
            `),me=claim_element(Me,"SPAN",{class:!0});var qe=children(me);Se=claim_text(qe,ke),Ne=claim_text(qe," / "),Pe=claim_text(qe,xe),qe.forEach(detach),Be=claim_space(Me),Re&&Re.l(Me),Me.forEach(detach),Te=claim_space(ge),be=claim_element(ge,"SPAN",{class:!0});var Ye=children(be);Ve=claim_element(Ye,"DIV",{class:!0});var ot=children(Ve);He=claim_element(ot,"DIV",{class:!0});var st=children(He);We=claim_text(st,"Radioactivity Gains"),st.forEach(detach),Ze=claim_space(ot);for(let tt=0;tt<Ge.length;tt+=1)Ge[tt].l(ot);ot.forEach(detach),Ye.forEach(detach),ge.forEach(detach),Fe.forEach(detach),$e=claim_space(we);for(let tt=0;tt<Ue.length;tt+=1)Ue[tt].l(we);we.forEach(detach),et=claim_space(De),claim_component(Xe.$$.fragment,De),De.forEach(detach),this.h()},h(){attr(k,"class","text-amber-500 font-bold"),attr(S,"class","text-pink-500"),attr(P,"class","text-violet-500"),attr(U,"class","text-sky-500"),attr(T,"class","text-green-500"),attr(Z,"class","text-gray-500"),attr(m,"class","text-center pb-3 text-med game-text col-span-12"),attr(G,"class",ref.colors.radium),attr(oe,"class",ref.colors.crystals+" font-bold"),attr(B,"class","pb-3 col-span-12 game-text text-center"),attr(_e,"class","bg-lime-300 w-4 h-4 rounded-sm relative z-0"),set_style(_e,"width",l[2]),set_style(_e,"transition","width 0.1s"),attr(Q,"class","flex justify-start items-left"),attr(W,"class","w-full my-1 bg-gray-200 rounded-sm h-4 dark:bg-gray-700"),attr(ie,"class","col-span-9"),attr(me,"class","text-lime-300 text-med pl-3"),attr(ce,"class","tooltip-text text-med"),attr(He,"class","col-span-6 text-center"),attr(Ve,"class","grid grid-cols-6"),attr(be,"class","tooltip tooltip-style"),attr(ye,"class","col-span-3 text-left align-text-middle has-tooltip"),attr(re,"class","col-span-12 pb-3 game-text text-center"),attr(_,"class","grid grid-cols-12"),attr(d,"class","wrapper pt-2")},m(fe,De){insert_hydration(fe,d,De),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(m,b),append_hydration(m,v),append_hydration(m,k),append_hydration(k,I),append_hydration(m,E),append_hydration(m,S),append_hydration(S,M),append_hydration(m,A),append_hydration(m,P),append_hydration(P,D),append_hydration(m,x),append_hydration(m,U),append_hydration(U,F),append_hydration(m,J),append_hydration(m,T),append_hydration(T,K),append_hydration(m,ne),append_hydration(m,Z),append_hydration(Z,V),append_hydration(m,H),append_hydration(_,le),append_hydration(_,B),append_hydration(B,R),append_hydration(B,G),append_hydration(G,$),append_hydration(B,de),append_hydration(B,oe),append_hydration(oe,te),append_hydration(oe,q),append_hydration(B,ee),append_hydration(_,z),append_hydration(_,re),append_hydration(re,ie),append_hydration(ie,W),append_hydration(W,Q),append_hydration(Q,_e),append_hydration(re,Ee),append_hydration(re,ye),append_hydration(ye,ce),append_hydration(ce,ae),append_hydration(ce,me),append_hydration(me,Se),append_hydration(me,Ne),append_hydration(me,Pe),append_hydration(ce,Be),Re&&Re.m(ce,null),append_hydration(ye,Te),append_hydration(ye,be),append_hydration(be,Ve),append_hydration(Ve,He),append_hydration(He,We),append_hydration(Ve,Ze);for(let we=0;we<Ge.length;we+=1)Ge[we]&&Ge[we].m(Ve,null);append_hydration(_,$e);for(let we=0;we<Ue.length;we+=1)Ue[we]&&Ue[we].m(_,null);append_hydration(d,et),mount_component(Xe,d,null),Le=!0},p(fe,[De]){if((!Le||De&8)&&y!==(y=fe[7](fe[3].totalClicks)+"")&&set_data(b,y),(!Le||De&16)&&w!==(w=fe[7](fe[4].perfect,0)+"")&&set_data(I,w),(!Le||De&16)&&N!==(N=fe[7](fe[4].incredible,0)+"")&&set_data(M,N),(!Le||De&16)&&L!==(L=fe[7](fe[4].excellent,0)+"")&&set_data(D,L),(!Le||De&16)&&C!==(C=fe[7](fe[4].great,0)+"")&&set_data(F,C),(!Le||De&16)&&Y!==(Y=fe[7](fe[4].good,0)+"")&&set_data(K,Y),(!Le||De&16)&&O!==(O=fe[7](fe[4].okay,0)+"")&&set_data(V,O),(!Le||De&2)&&X!==(X=fe[7](fe[1],fe[1]>100?0:2)+"")&&set_data(te,X),(!Le||De&4)&&set_style(_e,"width",fe[2]),(!Le||De&1)&&ke!==(ke=fe[7](fe[0][0])+"")&&set_data(Se,ke),(!Le||De&1)&&xe!==(xe=fe[7](fe[0][1])+"")&&set_data(Pe,xe),fe[5].length>0?Re?Re.p(fe,De):(Re=create_if_block$4(fe),Re.c(),Re.m(ce,null)):Re&&(Re.d(1),Re=null),De&128){Qe=Object.entries(ref.buttonColors);let we;for(we=0;we<Qe.length;we+=1){const Ce=get_each_context_1$1(fe,Qe,we);Ge[we]?Ge[we].p(Ce,De):(Ge[we]=create_each_block_1$1(Ce),Ge[we].c(),Ge[we].m(Ve,null))}for(;we<Ge.length;we+=1)Ge[we].d(1);Ge.length=Qe.length}if(De&64){Ke=fe[6];let we;for(we=0;we<Ke.length;we+=1){const Ce=get_each_context$4(fe,Ke,we);Ue[we]?(Ue[we].p(Ce,De),transition_in(Ue[we],1)):(Ue[we]=create_each_block$4(Ce),Ue[we].c(),transition_in(Ue[we],1),Ue[we].m(_,null))}for(group_outros(),we=Ke.length;we<Ue.length;we+=1)_t(we);check_outros()}},i(fe){if(!Le){for(let De=0;De<Ke.length;De+=1)transition_in(Ue[De]);transition_in(Xe.$$.fragment,fe),Le=!0}},o(fe){Ue=Ue.filter(Boolean);for(let De=0;De<Ue.length;De+=1)transition_out(Ue[De]);transition_out(Xe.$$.fragment,fe),Le=!1},d(fe){fe&&detach(d),Re&&Re.d(),destroy_each(Ge,fe),destroy_each(Ue,fe),destroy_component(Xe)}}}function instance$4(l,d,_){let m,g,y,b,v,k,w;component_subscribe(l,buttonRadiumProgress,S=>_(0,y=S)),component_subscribe(l,buttonStats,S=>_(3,b=S)),component_subscribe(l,buttonNumClicks,S=>_(4,v=S)),component_subscribe(l,radiumGainText,S=>_(5,k=S)),component_subscribe(l,buttonUpgrades,S=>_(6,w=S));let I;onMount(()=>{I=setInterval(()=>{_(1,g=formula.calcCrystalGainFromRadium())},653)}),onDestroy(()=>{clearInterval(I)});const E=(S,N=0)=>S<1e9?S.toFixed(S<1e3?N:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):S.toExponential(3).toString().replace("+","");return l.$$.update=()=>{l.$$.dirty&1&&_(2,m=`${Math.min(1,y[0]/y[1])*100}%`)},_(1,g=formula.calcCrystalGainFromRadium()),[y,g,m,b,v,k,w,E]}class Button extends SvelteComponent{constructor(d){super(),init(this,d,instance$4,create_fragment$5,safe_not_equal,{})}}function create_fragment$4(l){let d,_,m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O,V,H,le,B,R,G,$,de,oe,X,te,q,ee,z,re,ie,W,Q,_e,Ee,ye,ce,ae,me,ke,Se,Ne,xe,Pe,Be;return{c(){d=element("div"),_=element("div"),m=text("Discord Server"),g=space(),y=element("div"),b=element("a"),v=text("Join our Discord for updates, discussion, and more!"),k=space(),w=element("div"),I=text("Mining"),E=space(),S=element("div"),N=text("Each time the red progress bar fills up, gain gems and have a chance for additional drops. "),M=element("br"),A=text(" Use your currencies on upgrades to your mining rig."),P=space(),L=element("div"),D=text("Keys"),x=space(),U=element("div"),C=text(`Use your found keys here! You unlock more information on drops after receiving at least one of the respective item from the respective key.
        `),F=element("br"),J=text(" Slurry (unlocked later) - Break down your keys into slurry. With the help of mysterious sigils, you can craft some of the most powerful items in the game (assuming you have already obtained at least one of that item)."),T=space(),Y=element("div"),K=text("Beacons"),ne=space(),Z=element("div"),O=text(`Allocate beacons into paths, leveling them up over time and gaining bonuses. Each color tier requires drastically more power than the previous one, so you'll need to work up to the later paths. 
    `),V=element("br"),H=text("You gain beacon power based on your beacon levels. Beacon power can augment your beacon paths."),le=space(),B=element("div"),R=text("Enchants"),G=space(),$=element("div"),de=text("Every time a mining cycle completes, you gain 1 progress point towards an enchant cycle. When the enchant bar of each respective color fills, there's a chance for all enchants of the same color as the bar to fire (chance shown on tooltips), giving a very powerful bonus. Upgrade your enchants to increase the proc chance."),oe=space(),X=element("div"),te=text("Relocate"),q=space(),ee=element("div"),z=text(`Reset to gain fame. Fame can be spent on powerful mining upgrades and enchants. It's recommended for your first relocation to gain at least 25 fame, which should take about 1-2 hours. 
    `),re=element("br"),ie=text("HINT: Are you stuck? Each fame multiplier is color-coded based on the resource it deals with. If you are struggling to increase fame gains, you may be able to increase a specific multiplier by checking the tab where that resource is generated/used."),W=space(),Q=element("div"),_e=text("Button"),Ee=space(),ye=element("div"),ce=text("Click the button to gain crystals, which are used in a variety of upgrades. The center of the button gives better rewards, but you'll have to be precise."),ae=space(),me=element("div"),ke=text("Notes"),Se=space(),Ne=element("div"),xe=text(`This game is balanced around playing manually without the use of any tools. Most things are automatic by default, and the mechanics that require active play do it for a reason, and/or can be automated in a reasonable time.
        `),Pe=element("br"),Be=text(" You are free to play however you want, but using autoclickers/scripts will likely ruin some of the experience of the game."),this.h()},l(Te){d=claim_element(Te,"DIV",{class:!0});var be=children(d);_=claim_element(be,"DIV",{class:!0});var Ve=children(_);m=claim_text(Ve,"Discord Server"),Ve.forEach(detach),g=claim_space(be),y=claim_element(be,"DIV",{class:!0});var He=children(y);b=claim_element(He,"A",{href:!0,class:!0,target:!0});var We=children(b);v=claim_text(We,"Join our Discord for updates, discussion, and more!"),We.forEach(detach),He.forEach(detach),k=claim_space(be),w=claim_element(be,"DIV",{class:!0});var Ze=children(w);I=claim_text(Ze,"Mining"),Ze.forEach(detach),E=claim_space(be),S=claim_element(be,"DIV",{class:!0});var $e=children(S);N=claim_text($e,"Each time the red progress bar fills up, gain gems and have a chance for additional drops. "),M=claim_element($e,"BR",{}),A=claim_text($e," Use your currencies on upgrades to your mining rig."),$e.forEach(detach),P=claim_space(be),L=claim_element(be,"DIV",{class:!0});var et=children(L);D=claim_text(et,"Keys"),et.forEach(detach),x=claim_space(be),U=claim_element(be,"DIV",{class:!0});var Xe=children(U);C=claim_text(Xe,`Use your found keys here! You unlock more information on drops after receiving at least one of the respective item from the respective key.
        `),F=claim_element(Xe,"BR",{}),J=claim_text(Xe," Slurry (unlocked later) - Break down your keys into slurry. With the help of mysterious sigils, you can craft some of the most powerful items in the game (assuming you have already obtained at least one of that item)."),Xe.forEach(detach),T=claim_space(be),Y=claim_element(be,"DIV",{class:!0});var Le=children(Y);K=claim_text(Le,"Beacons"),Le.forEach(detach),ne=claim_space(be),Z=claim_element(be,"DIV",{class:!0});var Re=children(Z);O=claim_text(Re,`Allocate beacons into paths, leveling them up over time and gaining bonuses. Each color tier requires drastically more power than the previous one, so you'll need to work up to the later paths. 
    `),V=claim_element(Re,"BR",{}),H=claim_text(Re,"You gain beacon power based on your beacon levels. Beacon power can augment your beacon paths."),Re.forEach(detach),le=claim_space(be),B=claim_element(be,"DIV",{class:!0});var Qe=children(B);R=claim_text(Qe,"Enchants"),Qe.forEach(detach),G=claim_space(be),$=claim_element(be,"DIV",{class:!0});var Ge=children($);de=claim_text(Ge,"Every time a mining cycle completes, you gain 1 progress point towards an enchant cycle. When the enchant bar of each respective color fills, there's a chance for all enchants of the same color as the bar to fire (chance shown on tooltips), giving a very powerful bonus. Upgrade your enchants to increase the proc chance."),Ge.forEach(detach),oe=claim_space(be),X=claim_element(be,"DIV",{class:!0});var Ke=children(X);te=claim_text(Ke,"Relocate"),Ke.forEach(detach),q=claim_space(be),ee=claim_element(be,"DIV",{class:!0});var Ue=children(ee);z=claim_text(Ue,`Reset to gain fame. Fame can be spent on powerful mining upgrades and enchants. It's recommended for your first relocation to gain at least 25 fame, which should take about 1-2 hours. 
    `),re=claim_element(Ue,"BR",{}),ie=claim_text(Ue,"HINT: Are you stuck? Each fame multiplier is color-coded based on the resource it deals with. If you are struggling to increase fame gains, you may be able to increase a specific multiplier by checking the tab where that resource is generated/used."),Ue.forEach(detach),W=claim_space(be),Q=claim_element(be,"DIV",{class:!0});var _t=children(Q);_e=claim_text(_t,"Button"),_t.forEach(detach),Ee=claim_space(be),ye=claim_element(be,"DIV",{class:!0});var fe=children(ye);ce=claim_text(fe,"Click the button to gain crystals, which are used in a variety of upgrades. The center of the button gives better rewards, but you'll have to be precise."),fe.forEach(detach),ae=claim_space(be),me=claim_element(be,"DIV",{class:!0});var De=children(me);ke=claim_text(De,"Notes"),De.forEach(detach),Se=claim_space(be),Ne=claim_element(be,"DIV",{class:!0});var we=children(Ne);xe=claim_text(we,`This game is balanced around playing manually without the use of any tools. Most things are automatic by default, and the mechanics that require active play do it for a reason, and/or can be automated in a reasonable time.
        `),Pe=claim_element(we,"BR",{}),Be=claim_text(we," You are free to play however you want, but using autoclickers/scripts will likely ruin some of the experience of the game."),we.forEach(detach),be.forEach(detach),this.h()},h(){attr(_,"class","text-large text-left pb-2 text-gray-300"),attr(b,"href","https://discord.gg/BNp27Vvcqm"),attr(b,"class","border-2 border-violet-300 bg-violet-600 hover:bg-violet-400 p-1"),attr(b,"target","_blank"),attr(y,"class","text-small text-white pb-4"),attr(w,"class","text-large text-left pb-2 text-gray-300"),attr(S,"class","text-small text-white pb-4"),attr(L,"class","text-large text-left pb-2 text-gray-300"),attr(U,"class","text-small text-white pb-4"),attr(Y,"class","text-large text-left pb-2 text-gray-300"),attr(Z,"class","text-small text-white pb-4"),attr(B,"class","text-large text-left pb-2 text-gray-300"),attr($,"class","text-small text-white pb-4"),attr(X,"class","text-large text-left pb-2 text-gray-300"),attr(ee,"class","text-small text-white pb-4"),attr(Q,"class","text-large text-left pb-2 text-gray-300"),attr(ye,"class","text-small text-white pb-4"),attr(me,"class","text-large text-left pb-2 text-gray-300"),attr(Ne,"class","text-small text-white pb-4"),attr(d,"class","wrapper pt-3")},m(Te,be){insert_hydration(Te,d,be),append_hydration(d,_),append_hydration(_,m),append_hydration(d,g),append_hydration(d,y),append_hydration(y,b),append_hydration(b,v),append_hydration(d,k),append_hydration(d,w),append_hydration(w,I),append_hydration(d,E),append_hydration(d,S),append_hydration(S,N),append_hydration(S,M),append_hydration(S,A),append_hydration(d,P),append_hydration(d,L),append_hydration(L,D),append_hydration(d,x),append_hydration(d,U),append_hydration(U,C),append_hydration(U,F),append_hydration(U,J),append_hydration(d,T),append_hydration(d,Y),append_hydration(Y,K),append_hydration(d,ne),append_hydration(d,Z),append_hydration(Z,O),append_hydration(Z,V),append_hydration(Z,H),append_hydration(d,le),append_hydration(d,B),append_hydration(B,R),append_hydration(d,G),append_hydration(d,$),append_hydration($,de),append_hydration(d,oe),append_hydration(d,X),append_hydration(X,te),append_hydration(d,q),append_hydration(d,ee),append_hydration(ee,z),append_hydration(ee,re),append_hydration(ee,ie),append_hydration(d,W),append_hydration(d,Q),append_hydration(Q,_e),append_hydration(d,Ee),append_hydration(d,ye),append_hydration(ye,ce),append_hydration(d,ae),append_hydration(d,me),append_hydration(me,ke),append_hydration(d,Se),append_hydration(d,Ne),append_hydration(Ne,xe),append_hydration(Ne,Pe),append_hydration(Ne,Be)},p:noop,i:noop,o:noop,d(Te){Te&&detach(d)}}}class Help extends SvelteComponent{constructor(d){super(),init(this,d,null,create_fragment$4,safe_not_equal,{})}}function get_each_context$3(l,d,_){const m=l.slice();return m[19]=d[_],m}function create_if_block$3(l){let d,_,m=l[19].name+"",g,y,b,v,k;function w(){return l[15](l[19])}return{c(){d=element("div"),_=element("div"),g=text(m),b=space(),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);_=claim_element(E,"DIV",{class:!0});var S=children(_);g=claim_text(S,m),S.forEach(detach),b=claim_space(E),E.forEach(detach),this.h()},h(){attr(_,"class",y="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1][l[19].name.toLowerCase()]?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(d,"class","col-span-3 grid-cols-3 pt-1")},m(I,E){insert_hydration(I,d,E),append_hydration(d,_),append_hydration(_,g),append_hydration(d,b),v||(k=listen(_,"click",w),v=!0)},p(I,E){l=I,E&8&&m!==(m=l[19].name+"")&&set_data(g,m),E&10&&y!==(y="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1][l[19].name.toLowerCase()]?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(_,"class",y)},d(I){I&&detach(d),v=!1,k()}}}function create_each_block$3(l){let d,_=!(l[19].name=="Mine Size"||l[19].name=="Mine Quality")&&create_if_block$3(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[19].name=="Mine Size"||m[19].name=="Mine Quality"?_&&(_.d(1),_=null):_?_.p(m,g):(_=create_if_block$3(m),_.c(),_.m(d.parentNode,d))},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$3(l){let d,_,m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O,V,H,le,B,R,G,$,de,oe,X,te,q,ee,z,re,ie,W,Q,_e,Ee,ye,ce,ae,me,ke,Se,Ne,xe,Pe,Be,Te,be,Ve,He,We,Ze,$e,et,Xe,Le,Re,Qe,Ge,Ke,Ue,_t,fe,De,we,Ce,kt,se,Oe,j,Ie,ue,he,je,ve,Fe,lt,rt,ut=l[3],ze=[];for(let ge=0;ge<ut.length;ge+=1)ze[ge]=create_each_block$3(get_each_context$3(l,ut,ge));return{c(){d=element("div"),_=element("div"),m=element("div"),g=text("Anti-Flickering - Bar will appear as solid when enabled"),y=space(),b=element("div"),v=element("div"),k=element("div"),w=text("Mining (gems)"),E=space(),S=element("div"),N=text("Mining (key finder)"),A=space(),P=element("div"),L=text("Crafting"),x=space(),U=element("div"),C=text("Beacons"),J=space(),T=element("div"),Y=element("div"),K=text("Enchants"),Z=space(),O=element("div"),V=space(),H=element("div"),le=element("div"),B=text("Enable/disable activity log entries"),R=space(),G=element("div"),$=element("div"),de=element("div"),oe=text("Crafting"),te=space(),q=element("div"),ee=element("div"),z=text("Challenges"),ie=space(),W=element("div"),Q=space();for(let ge=0;ge<ze.length;ge+=1)ze[ge].c();_e=space(),Ee=element("div"),ye=space(),ce=element("div"),ae=element("div"),me=text("Progression"),ke=space(),Se=element("div"),Ne=element("div"),xe=element("div"),Pe=text("Offline Progress"),Te=space(),be=element("div"),Ve=space(),He=element("div"),We=element("div"),Ze=text("Other"),$e=space(),et=element("div"),Xe=element("div"),Le=element("div"),Re=text(`Exclusive Sort
                        `),Qe=element("span"),Ge=text("When enabled, changing upgrade sort tags will remove all other sorting tags."),Ue=space(),_t=element("div"),fe=element("div"),De=text(`Tutorial Mode
                        `),we=element("span"),Ce=text("When enabled, hovering over resource displays will show the sources of that resource. NOTE: This may spoil some future content."),se=space(),Oe=element("div"),j=text("About"),Ie=space(),ue=element("div"),he=text("version 0.0.4 (alpha)"),je=space(),ve=element("div"),Fe=text("created by bejewelled, all rights reserved"),this.h()},l(ge){d=claim_element(ge,"DIV",{class:!0});var Me=children(d);_=claim_element(Me,"DIV",{class:!0});var qe=children(_);m=claim_element(qe,"DIV",{class:!0});var Ye=children(m);g=claim_text(Ye,"Anti-Flickering - Bar will appear as solid when enabled"),Ye.forEach(detach),y=claim_space(qe),b=claim_element(qe,"DIV",{class:!0});var ot=children(b);v=claim_element(ot,"DIV",{class:!0});var st=children(v);k=claim_element(st,"DIV",{class:!0});var tt=children(k);w=claim_text(tt,"Mining (gems)"),tt.forEach(detach),E=claim_space(st),S=claim_element(st,"DIV",{class:!0});var wt=children(S);N=claim_text(wt,"Mining (key finder)"),wt.forEach(detach),A=claim_space(st),P=claim_element(st,"DIV",{class:!0});var It=children(P);L=claim_text(It,"Crafting"),It.forEach(detach),x=claim_space(st),U=claim_element(st,"DIV",{class:!0});var Nt=children(U);C=claim_text(Nt,"Beacons"),Nt.forEach(detach),st.forEach(detach),J=claim_space(ot),T=claim_element(ot,"DIV",{class:!0});var St=children(T);Y=claim_element(St,"DIV",{class:!0});var Lt=children(Y);K=claim_text(Lt,"Enchants"),Lt.forEach(detach),St.forEach(detach),ot.forEach(detach),qe.forEach(detach),Z=claim_space(Me),O=claim_element(Me,"DIV",{class:!0}),children(O).forEach(detach),V=claim_space(Me),H=claim_element(Me,"DIV",{class:!0});var Dt=children(H);le=claim_element(Dt,"DIV",{class:!0});var Ut=children(le);B=claim_text(Ut,"Enable/disable activity log entries"),Ut.forEach(detach),R=claim_space(Dt),G=claim_element(Dt,"DIV",{class:!0});var nt=children(G);$=claim_element(nt,"DIV",{class:!0});var yt=children($);de=claim_element(yt,"DIV",{class:!0});var Pt=children(de);oe=claim_text(Pt,"Crafting"),Pt.forEach(detach),yt.forEach(detach),te=claim_space(nt),q=claim_element(nt,"DIV",{class:!0});var Bt=children(q);ee=claim_element(Bt,"DIV",{class:!0});var pt=children(ee);z=claim_text(pt,"Challenges"),pt.forEach(detach),Bt.forEach(detach),ie=claim_space(nt),W=claim_element(nt,"DIV",{class:!0}),children(W).forEach(detach),Q=claim_space(nt);for(let dt=0;dt<ze.length;dt+=1)ze[dt].l(nt);nt.forEach(detach),Dt.forEach(detach),Me.forEach(detach),_e=claim_space(ge),Ee=claim_element(ge,"DIV",{class:!0}),children(Ee).forEach(detach),ye=claim_space(ge),ce=claim_element(ge,"DIV",{class:!0});var Tt=children(ce);ae=claim_element(Tt,"DIV",{class:!0});var qt=children(ae);me=claim_text(qt,"Progression"),qt.forEach(detach),ke=claim_space(Tt),Se=claim_element(Tt,"DIV",{class:!0});var it=children(Se);Ne=claim_element(it,"DIV",{class:!0});var ht=children(Ne);xe=claim_element(ht,"DIV",{class:!0});var Ct=children(xe);Pe=claim_text(Ct,"Offline Progress"),Ct.forEach(detach),ht.forEach(detach),it.forEach(detach),Tt.forEach(detach),Te=claim_space(ge),be=claim_element(ge,"DIV",{class:!0}),children(be).forEach(detach),Ve=claim_space(ge),He=claim_element(ge,"DIV",{class:!0});var vt=children(He);We=claim_element(vt,"DIV",{class:!0});var At=children(We);Ze=claim_text(At,"Other"),At.forEach(detach),$e=claim_space(vt),et=claim_element(vt,"DIV",{class:!0});var ct=children(et);Xe=claim_element(ct,"DIV",{class:!0});var ft=children(Xe);Le=claim_element(ft,"DIV",{class:!0});var mt=children(Le);Re=claim_text(mt,`Exclusive Sort
                        `),Qe=claim_element(mt,"SPAN",{class:!0});var xt=children(Qe);Ge=claim_text(xt,"When enabled, changing upgrade sort tags will remove all other sorting tags."),xt.forEach(detach),mt.forEach(detach),ft.forEach(detach),Ue=claim_space(ct),_t=claim_element(ct,"DIV",{class:!0});var jt=children(_t);fe=claim_element(jt,"DIV",{class:!0});var Mt=children(fe);De=claim_text(Mt,`Tutorial Mode
                        `),we=claim_element(Mt,"SPAN",{class:!0});var Jt=children(we);Ce=claim_text(Jt,"When enabled, hovering over resource displays will show the sources of that resource. NOTE: This may spoil some future content."),Jt.forEach(detach),Mt.forEach(detach),jt.forEach(detach),ct.forEach(detach),vt.forEach(detach),se=claim_space(ge),Oe=claim_element(ge,"DIV",{class:!0});var gt=children(Oe);j=claim_text(gt,"About"),gt.forEach(detach),Ie=claim_space(ge),ue=claim_element(ge,"DIV",{class:!0});var pe=children(ue);he=claim_text(pe,"version 0.0.4 (alpha)"),pe.forEach(detach),je=claim_space(ge),ve=claim_element(ge,"DIV",{class:!0});var Ae=children(ve);Fe=claim_text(Ae,"created by bejewelled, all rights reserved"),Ae.forEach(detach),this.h()},h(){attr(m,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(k,"class",I="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].gems?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(S,"class",M="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].keyfinder?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(P,"class",D="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(U,"class",F="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].beacons?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(v,"class","wrapper col-span-1 grid grid-cols-8"),attr(Y,"class",ne="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[2].enchants?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(T,"class","wrapper col-span-1 py-1 grid grid-cols-8"),attr(b,"class","wrapper grid grid-cols-1 py-1"),attr(_,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(O,"class","pb-1"),attr(le,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(de,"class",X="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr($,"class","col-span-3 grid-cols-3 pt-1"),attr(ee,"class",re="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[1].challenges?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(q,"class","col-span-3 grid-cols-3 pt-1"),attr(W,"class","col-span-12 py-1"),attr(G,"class","grid grid-cols-12 py-1"),attr(H,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(d,"class","wrapper pt-3"),attr(Ee,"class","pb-1"),attr(ae,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(xe,"class",Be="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[0].offlineProgress?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(Ne,"class","col-span-3 grid-cols-3 pt-1"),attr(Se,"class","grid grid-cols-12 py-1"),attr(ce,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(be,"class","pb-1"),attr(We,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(Qe,"class","tooltip tooltip-style"),attr(Le,"class",Ke="setting has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(l[0].exclusiveSort?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(Xe,"class","col-span-3 grid-cols-3 pt-1"),attr(we,"class","tooltip tooltip-style"),attr(fe,"class",kt="setting select-none has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(l[0].tutorialMode?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(_t,"class","col-span-3 grid-cols-3 pt-1"),attr(et,"class","grid grid-cols-12 py-1"),attr(He,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600"),attr(Oe,"class","text-large text-gray-300 text-left pb-2"),attr(ue,"class","text-small tooltip-text"),attr(ve,"class","text-small tooltip-text")},m(ge,Me){insert_hydration(ge,d,Me),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(_,y),append_hydration(_,b),append_hydration(b,v),append_hydration(v,k),append_hydration(k,w),append_hydration(v,E),append_hydration(v,S),append_hydration(S,N),append_hydration(v,A),append_hydration(v,P),append_hydration(P,L),append_hydration(v,x),append_hydration(v,U),append_hydration(U,C),append_hydration(b,J),append_hydration(b,T),append_hydration(T,Y),append_hydration(Y,K),append_hydration(d,Z),append_hydration(d,O),append_hydration(d,V),append_hydration(d,H),append_hydration(H,le),append_hydration(le,B),append_hydration(H,R),append_hydration(H,G),append_hydration(G,$),append_hydration($,de),append_hydration(de,oe),append_hydration(G,te),append_hydration(G,q),append_hydration(q,ee),append_hydration(ee,z),append_hydration(G,ie),append_hydration(G,W),append_hydration(G,Q);for(let qe=0;qe<ze.length;qe+=1)ze[qe]&&ze[qe].m(G,null);insert_hydration(ge,_e,Me),insert_hydration(ge,Ee,Me),insert_hydration(ge,ye,Me),insert_hydration(ge,ce,Me),append_hydration(ce,ae),append_hydration(ae,me),append_hydration(ce,ke),append_hydration(ce,Se),append_hydration(Se,Ne),append_hydration(Ne,xe),append_hydration(xe,Pe),insert_hydration(ge,Te,Me),insert_hydration(ge,be,Me),insert_hydration(ge,Ve,Me),insert_hydration(ge,He,Me),append_hydration(He,We),append_hydration(We,Ze),append_hydration(He,$e),append_hydration(He,et),append_hydration(et,Xe),append_hydration(Xe,Le),append_hydration(Le,Re),append_hydration(Le,Qe),append_hydration(Qe,Ge),append_hydration(et,Ue),append_hydration(et,_t),append_hydration(_t,fe),append_hydration(fe,De),append_hydration(fe,we),append_hydration(we,Ce),insert_hydration(ge,se,Me),insert_hydration(ge,Oe,Me),append_hydration(Oe,j),insert_hydration(ge,Ie,Me),insert_hydration(ge,ue,Me),append_hydration(ue,he),insert_hydration(ge,je,Me),insert_hydration(ge,ve,Me),append_hydration(ve,Fe),lt||(rt=[listen(k,"click",l[8]),listen(S,"click",l[9]),listen(P,"click",l[10]),listen(U,"click",l[11]),listen(Y,"click",l[12]),listen(de,"click",l[13]),listen(ee,"click",l[14]),listen(xe,"click",l[16]),listen(Le,"click",l[17]),listen(fe,"click",l[18])],lt=!0)},p(ge,[Me]){if(Me&4&&I!==(I="setting col-span-2 mx-1 px-1 py-1 text-center "+(ge[2].gems?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(k,"class",I),Me&4&&M!==(M="setting col-span-2 mx-1 px-1 py-1 text-center "+(ge[2].keyfinder?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(S,"class",M),Me&4&&D!==(D="setting col-span-2 mx-1 px-1 py-1 text-center "+(ge[2].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(P,"class",D),Me&4&&F!==(F="setting col-span-2 mx-1 px-1 py-1 text-center "+(ge[2].beacons?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(U,"class",F),Me&4&&ne!==(ne="setting col-span-2 mx-1 px-1 py-1 text-center "+(ge[2].enchants?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(Y,"class",ne),Me&2&&X!==(X="setting col-span-3 mx-1 px-1 py-1 text-center "+(ge[1].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(de,"class",X),Me&2&&re!==(re="setting col-span-3 mx-1 px-1 py-1 text-center "+(ge[1].challenges?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(ee,"class",re),Me&42){ut=ge[3];let qe;for(qe=0;qe<ut.length;qe+=1){const Ye=get_each_context$3(ge,ut,qe);ze[qe]?ze[qe].p(Ye,Me):(ze[qe]=create_each_block$3(Ye),ze[qe].c(),ze[qe].m(G,null))}for(;qe<ze.length;qe+=1)ze[qe].d(1);ze.length=ut.length}Me&1&&Be!==(Be="setting col-span-3 mx-1 px-1 py-1 text-center "+(ge[0].offlineProgress?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(xe,"class",Be),Me&1&&Ke!==(Ke="setting has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(ge[0].exclusiveSort?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(Le,"class",Ke),Me&1&&kt!==(kt="setting select-none has-tooltip col-span-3 mx-1 px-1 py-1 text-center "+(ge[0].tutorialMode?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(fe,"class",kt)},i:noop,o:noop,d(ge){ge&&detach(d),destroy_each(ze,ge),ge&&detach(_e),ge&&detach(Ee),ge&&detach(ye),ge&&detach(ce),ge&&detach(Te),ge&&detach(be),ge&&detach(Ve),ge&&detach(He),ge&&detach(se),ge&&detach(Oe),ge&&detach(Ie),ge&&detach(ue),ge&&detach(je),ge&&detach(ve),lt=!1,run_all(rt)}}}function instance$3(l,d,_){let m,g,y,b;component_subscribe(l,settings,F=>_(0,m=F)),component_subscribe(l,activityLogShow,F=>_(1,g=F)),component_subscribe(l,antiFlickerFlags,F=>_(2,y=F)),component_subscribe(l,enchantUpgrades,F=>_(3,b=F));function v(F){set_store_value(antiFlickerFlags,y[F]=!y[F],y)}function k(F){set_store_value(activityLogShow,g[F]=!g[F],g)}function w(){set_store_value(settings,m.offlineProgress=!m.offlineProgress,m)}function I(F,J=null){m[F]?J==null?set_store_value(settings,m[F]=!m[F],m):set_store_value(settings,m[F]=J,m):set_store_value(settings,m[F]=J||!0,m)}return[m,g,y,b,v,k,w,I,()=>v("gems"),()=>v("keyfinder"),()=>v("crafting"),()=>v("beacons"),()=>v("enchants"),()=>k("crafting"),()=>k("challenges"),F=>k(F.name.toLowerCase()),()=>w(),()=>I("exclusiveSort"),()=>I("tutorialMode")]}class Settings extends SvelteComponent{constructor(d){super(),init(this,d,instance$3,create_fragment$3,safe_not_equal,{})}}function get_each_context$2(l,d,_){const m=l.slice();return m[23]=d[_],m[25]=_,m}function create_if_block$2(l){let d,_=l[23]+"",m,g,y=l[3][l[25]]+"",b,v,k,w,I=l[4][l[25]]+"",E,S,N,M,A,P,L,D,x=l[6](l[5][l[25]])+"",U,C,F,J,T,Y,K,ne;function Z(le,B){return le[0]==le[25]+1?create_if_block_1$2:create_else_block}let O=Z(l),V=O(l);function H(){return l[8](l[25])}return{c(){d=element("div"),m=text(_),g=text(" ["),b=text(y),v=text("]"),k=space(),w=element("div"),E=text(I),S=space(),N=element("div"),M=element("div"),A=element("div"),P=text("points"),L=space(),D=element("div"),U=text(x),C=space(),F=element("div"),V.c(),T=space(),Y=element("div"),this.h()},l(le){d=claim_element(le,"DIV",{class:!0});var B=children(d);m=claim_text(B,_),g=claim_text(B," ["),b=claim_text(B,y),v=claim_text(B,"]"),B.forEach(detach),k=claim_space(le),w=claim_element(le,"DIV",{class:!0});var R=children(w);E=claim_text(R,I),R.forEach(detach),S=claim_space(le),N=claim_element(le,"DIV",{class:!0});var G=children(N);M=claim_element(G,"DIV",{class:!0});var $=children(M);A=claim_element($,"DIV",{class:!0});var de=children(A);P=claim_text(de,"points"),de.forEach(detach),L=claim_space($),D=claim_element($,"DIV",{class:!0});var oe=children(D);U=claim_text(oe,x),oe.forEach(detach),$.forEach(detach),G.forEach(detach),C=claim_space(le),F=claim_element(le,"DIV",{class:!0});var X=children(F);V.l(X),X.forEach(detach),T=claim_space(le),Y=claim_element(le,"DIV",{class:!0}),children(Y).forEach(detach),this.h()},h(){attr(d,"class","col-span-2 game-text text-left"),attr(w,"class","col-span-6 align-middle tooltip-text text-xs text-justify"),attr(A,"class","text-center text-amber-500"),attr(D,"class","text-left col-span-1"),attr(M,"class","grid grid-cols-2"),attr(N,"class","col-span-2 tooltip-text text-xs"),attr(F,"class",J="col-span-2 ml-2 align-middle mb-5 text-center "+(l[0]==l[25]+1?"game-btn-toggleon":"game-btn")),attr(Y,"class","col-span-12 py-1")},m(le,B){insert_hydration(le,d,B),append_hydration(d,m),append_hydration(d,g),append_hydration(d,b),append_hydration(d,v),insert_hydration(le,k,B),insert_hydration(le,w,B),append_hydration(w,E),insert_hydration(le,S,B),insert_hydration(le,N,B),append_hydration(N,M),append_hydration(M,A),append_hydration(A,P),append_hydration(M,L),append_hydration(M,D),append_hydration(D,U),insert_hydration(le,C,B),insert_hydration(le,F,B),V.m(F,null),insert_hydration(le,T,B),insert_hydration(le,Y,B),K||(ne=listen(F,"click",H),K=!0)},p(le,B){l=le,B&2&&_!==(_=l[23]+"")&&set_data(m,_),B&8&&y!==(y=l[3][l[25]]+"")&&set_data(b,y),B&16&&I!==(I=l[4][l[25]]+"")&&set_data(E,I),B&32&&x!==(x=l[6](l[5][l[25]])+"")&&set_data(U,x),O!==(O=Z(l))&&(V.d(1),V=O(l),V&&(V.c(),V.m(F,null))),B&1&&J!==(J="col-span-2 ml-2 align-middle mb-5 text-center "+(l[0]==l[25]+1?"game-btn-toggleon":"game-btn"))&&attr(F,"class",J)},d(le){le&&detach(d),le&&detach(k),le&&detach(w),le&&detach(S),le&&detach(N),le&&detach(C),le&&detach(F),V.d(),le&&detach(T),le&&detach(Y),K=!1,ne()}}}function create_else_block(l){let d;return{c(){d=text("Start")},l(_){d=claim_text(_,"Start")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_1$2(l){let d;return{c(){d=text("Exit")},l(_){d=claim_text(_,"Exit")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block$2(l){let d=l[2][l[25]](),_,m=d&&create_if_block$2(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y&4&&(d=g[2][g[25]]()),d?m?m.p(g,y):(m=create_if_block$2(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_key_block$1(l){let d,_=l[1],m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block$2(get_each_context$2(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y&255){_=g[1];let b;for(b=0;b<_.length;b+=1){const v=get_each_context$2(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block$2(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_fragment$2(l){let d,_,m,g,y=l[0],b=create_key_block$1(l);return{c(){d=element("div"),_=element("div"),m=space(),g=element("div"),b.c(),this.h()},l(v){d=claim_element(v,"DIV",{class:!0});var k=children(d);_=claim_element(k,"DIV",{class:!0});var w=children(_);w.forEach(detach),m=claim_space(k),g=claim_element(k,"DIV",{class:!0});var I=children(g);b.l(I),I.forEach(detach),k.forEach(detach),this.h()},h(){attr(_,"class","py-2"),attr(g,"class","grid grid-cols-12"),attr(d,"class","wrapper py-2")},m(v,k){insert_hydration(v,d,k),append_hydration(d,_),append_hydration(d,m),append_hydration(d,g),b.m(g,null)},p(v,[k]){k&1&&safe_not_equal(y,y=v[0])?(b.d(1),b=create_key_block$1(v),b.c(),b.m(g,null)):b.p(v,k)},i:noop,o:noop,d(v){v&&detach(d),b.d(v)}}}function instance$2(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U;component_subscribe(l,challengeActive,T=>_(0,m=T)),component_subscribe(l,wallet,T=>_(9,g=T)),component_subscribe(l,baseBeaconNextReqs,T=>_(10,y=T)),component_subscribe(l,beaconNextReqs,T=>_(11,b=T)),component_subscribe(l,beaconProgress,T=>_(12,v=T)),component_subscribe(l,beaconLevels,T=>_(13,k=T)),component_subscribe(l,miningUpgradeLevelsFreeTemp,T=>_(14,w=T)),component_subscribe(l,miningUpgradeLevelsBoughtTemp,T=>_(15,I=T)),component_subscribe(l,miningUpgradeLevelsFree,T=>_(16,E=T)),component_subscribe(l,miningUpgradeLevelsBought,T=>_(17,S=T)),component_subscribe(l,miningUpgradeLevels,T=>_(18,N=T)),component_subscribe(l,miningUpgradeLevelsTemp,T=>_(19,M=T)),component_subscribe(l,miningUpgrades,T=>_(20,A=T)),component_subscribe(l,challengeNames,T=>_(1,P=T)),component_subscribe(l,challengeUnlockCriteria,T=>_(2,L=T)),component_subscribe(l,challengesCompleted,T=>_(3,D=T)),component_subscribe(l,challengeDescriptions,T=>_(4,x=T)),component_subscribe(l,challengeGoals,T=>_(5,U=T));const C=(T,Y=0)=>T<1e9?T.toFixed(T<1e3?Y:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):T.toExponential(3).toString().replace("+","");function F(T){if(challengeGoals.updateChallengeReqs(),m==T){if(confirm("Are you sure? Challenge progress will be lost.")){if(m===2){for(let Y in N)set_store_value(miningUpgradeLevelsBought,S[Y]=I[Y],S),set_store_value(miningUpgradeLevelsFree,E[Y]=w[Y],E);for(let Y in N)set_store_value(miningUpgradeLevelsTemp,M[Y]=0,M),set_store_value(miningUpgradeLevelsBoughtTemp,I[Y]=0,I),set_store_value(miningUpgradeLevelsFreeTemp,w[Y]=0,w)}set_store_value(challengeActive,m=0,m),set_store_value(wallet,g.challengePoints=0,g)}}else if(console.log(T),set_store_value(wallet,g.challengePoints=0,g),T==2){if(confirm("Are you sure? ALL mining upgrades will be lost!")){set_store_value(wallet,g.challengePoints=0,g),set_store_value(challengeActive,m=T,m);for(let K in A)console.log(A[K].name),set_store_value(miningUpgradeLevelsTemp,M[K]=N[K],M),set_store_value(miningUpgradeLevelsBoughtTemp,I[K]=S[K],I),set_store_value(miningUpgradeLevelsFreeTemp,w[K]=E[K],w);for(let K in N)set_store_value(miningUpgradeLevels,N[K]=0,N),set_store_value(miningUpgradeLevelsBought,S[K]=0,S),set_store_value(miningUpgradeLevelsFree,E[K]=0,E);console.log(I),console.log(w),set_store_value(wallet,g.challengePoints=0,g),set_store_value(challengeActive,m=T,m)}}else if(T==4){if(confirm("Are you sure? ALL beacon path levels will be lost!"))for(let K in k)set_store_value(beaconLevels,k[K]=0,k),set_store_value(beaconProgress,v[K]=0,v),set_store_value(beaconNextReqs,b[K]=y[K],b);set_store_value(wallet,g.challengePoints=0,g),set_store_value(challengeActive,m=T,m)}else set_store_value(wallet,g.challengePoints=0,g),set_store_value(challengeActive,m=T,m)}return[m,P,L,D,x,U,C,F,T=>F(T+1)]}class Challenges extends SvelteComponent{constructor(d){super(),init(this,d,instance$2,create_fragment$2,safe_not_equal,{})}}function get_each_context$1(l,d,_){const m=l.slice();return m[11]=d[_],m}function create_if_block_1$1(l){let d,_=l[11][1].description+"",m,g,y,b=l[11][1].prefix+"",v,k=l[2](l[11][1].formula(l[0].artifacts),3)+"",w,I,E,S;return{c(){d=element("div"),m=text(_),g=space(),y=element("div"),v=text(b),w=text(k),E=space(),S=element("div"),this.h()},l(N){d=claim_element(N,"DIV",{class:!0});var M=children(d);m=claim_text(M,_),M.forEach(detach),g=claim_space(N),y=claim_element(N,"DIV",{class:!0});var A=children(y);v=claim_text(A,b),w=claim_text(A,k),A.forEach(detach),E=claim_space(N),S=claim_element(N,"DIV",{class:!0}),children(S).forEach(detach),this.h()},h(){attr(d,"class","col-span-4 game-text text-right"),attr(y,"class",I="ml-2 col-span-2 text-left "+ref.colors[l[11][1].colorStyle]),attr(S,"class","col-span-6")},m(N,M){insert_hydration(N,d,M),append_hydration(d,m),insert_hydration(N,g,M),insert_hydration(N,y,M),append_hydration(y,v),append_hydration(y,w),insert_hydration(N,E,M),insert_hydration(N,S,M)},p(N,M){M&2&&_!==(_=N[11][1].description+"")&&set_data(m,_),M&2&&b!==(b=N[11][1].prefix+"")&&set_data(v,b),M&3&&k!==(k=N[2](N[11][1].formula(N[0].artifacts),3)+"")&&set_data(w,k),M&2&&I!==(I="ml-2 col-span-2 text-left "+ref.colors[N[11][1].colorStyle])&&attr(y,"class",I)},d(N){N&&detach(d),N&&detach(g),N&&detach(y),N&&detach(E),N&&detach(S)}}}function create_each_block$1(l){let d,_=l[0].artifacts>=l[11][1].unlockAt&&create_if_block_1$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,g){_&&_.m(m,g),insert_hydration(m,d,g)},p(m,g){m[0].artifacts>=m[11][1].unlockAt?_?_.p(m,g):(_=create_if_block_1$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_if_block$1(l){let d,_,m,g=l[2](l[3]())+"",y,b,v,k;return{c(){d=element("div"),_=text("[ Next bonus at "),m=element("span"),y=text(g),b=text(" artifacts ]"),v=space(),k=element("div"),this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var I=children(d);_=claim_text(I,"[ Next bonus at "),m=claim_element(I,"SPAN",{class:!0});var E=children(m);y=claim_text(E,g),E.forEach(detach),b=claim_text(I," artifacts ]"),I.forEach(detach),v=claim_space(w),k=claim_element(w,"DIV",{class:!0}),children(k).forEach(detach),this.h()},h(){attr(m,"class","text-slate-200"),attr(d,"class","col-span-4 pb-1 artifact-display text-right game-text"),attr(k,"class","col-span-8")},m(w,I){insert_hydration(w,d,I),append_hydration(d,_),append_hydration(d,m),append_hydration(m,y),append_hydration(d,b),insert_hydration(w,v,I),insert_hydration(w,k,I)},p:noop,d(w){w&&detach(d),w&&detach(v),w&&detach(k)}}}function create_fragment$1(l){let d,_,m,g,y,b=l[2](l[0].artifacts)+"",v,k,w,I,E,S,N=l[3]()>0,M=Object.entries(l[1]),A=[];for(let L=0;L<M.length;L+=1)A[L]=create_each_block$1(get_each_context$1(l,M,L));let P=N&&create_if_block$1(l);return{c(){d=element("div"),_=element("div"),m=element("div"),g=text("You have "),y=element("span"),v=text(b),k=text(" artifacts."),w=space(),I=element("div"),E=space();for(let L=0;L<A.length;L+=1)A[L].c();S=space(),P&&P.c(),this.h()},l(L){d=claim_element(L,"DIV",{class:!0});var D=children(d);_=claim_element(D,"DIV",{class:!0});var x=children(_);m=claim_element(x,"DIV",{class:!0});var U=children(m);g=claim_text(U,"You have "),y=claim_element(U,"SPAN",{class:!0});var C=children(y);v=claim_text(C,b),C.forEach(detach),k=claim_text(U," artifacts."),U.forEach(detach),w=claim_space(x),I=claim_element(x,"DIV",{class:!0}),children(I).forEach(detach),E=claim_space(x);for(let F=0;F<A.length;F+=1)A[F].l(x);S=claim_space(x),P&&P.l(x),x.forEach(detach),D.forEach(detach),this.h()},h(){attr(y,"class","text-slate-200"),attr(m,"class","col-span-12 pb-1 artifact-display text-center game-text"),attr(I,"class","col-span-12 divider py-3"),attr(_,"class","grid grid-cols-12 artifact-page"),attr(d,"class","wrapper py-2")},m(L,D){insert_hydration(L,d,D),append_hydration(d,_),append_hydration(_,m),append_hydration(m,g),append_hydration(m,y),append_hydration(y,v),append_hydration(m,k),append_hydration(_,w),append_hydration(_,I),append_hydration(_,E);for(let x=0;x<A.length;x+=1)A[x]&&A[x].m(_,null);append_hydration(_,S),P&&P.m(_,null)},p(L,[D]){if(D&1&&b!==(b=L[2](L[0].artifacts)+"")&&set_data(v,b),D&7){M=Object.entries(L[1]);let x;for(x=0;x<M.length;x+=1){const U=get_each_context$1(L,M,x);A[x]?A[x].p(U,D):(A[x]=create_each_block$1(U),A[x].c(),A[x].m(_,S))}for(;x<A.length;x+=1)A[x].d(1);A.length=M.length}N&&P.p(L,D)},i:noop,o:noop,d(L){L&&detach(d),destroy_each(A,L),P&&P.d()}}}function instance$1(l,d,_){let m,g;component_subscribe(l,wallet,v=>_(0,m=v)),component_subscribe(l,allMultipliers,v=>_(1,g=v)),onDestroy(()=>{});const y=(v,k=0)=>v<1e9?v.toFixed(v<1e3?k:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):v.toExponential(3).toString().replace("+","");function b(){const v=Array(Object.keys(g).length).fill(0);let k=0;for(let I of Object.entries(g))v[k]=I[1].unlockAt,k++;k=0;const w=m.artifacts;for(let I in v)if(v[I]>w)return v[I];return-1}return m.gems>0,m.beacons>0,[m,g,y,b]}class Artifacts extends SvelteComponent{constructor(d){super(),init(this,d,instance$1,create_fragment$1,safe_not_equal,{})}}const _page_svelte_svelte_type_style_lang="";function get_each_context(l,d,_){const m=l.slice();return m[82]=d[_],m}function get_each_context_1(l,d,_){const m=l.slice();return m[85]=d[_],m}function get_each_context_2(l,d,_){const m=l.slice();return m[88]=d[_],m}function get_each_context_3(l,d,_){const m=l.slice();return m[91]=d[_],m}function get_each_context_4(l,d,_){const m=l.slice();return m[88]=d[_],m}function create_if_block_19(l){let d,_;return d=new Adders({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_18(l){let d,_,m,g,y=l[22](l[0].challengePoints,0)+"",b,v,k=l[22](l[3][l[2]-1],0)+"",w,I,E,S,N,M,A;return{c(){d=element("div"),_=text("Challenge "),m=text(l[2]),g=text(` 
            [ `),b=text(y),v=text(" / "),w=text(k),I=text(`
            ]`),E=space(),S=element("div"),N=element("div"),M=element("div"),A=element("div"),this.h()},l(P){d=claim_element(P,"DIV",{class:!0});var L=children(d);_=claim_text(L,"Challenge "),m=claim_text(L,l[2]),g=claim_text(L,` 
            [ `),b=claim_text(L,y),v=claim_text(L," / "),w=claim_text(L,k),I=claim_text(L,`
            ]`),L.forEach(detach),E=claim_space(P),S=claim_element(P,"DIV",{class:!0});var D=children(S);N=claim_element(D,"DIV",{class:!0});var x=children(N);M=claim_element(x,"DIV",{class:!0});var U=children(M);A=claim_element(U,"DIV",{class:!0,style:!0});var C=children(A);C.forEach(detach),U.forEach(detach),x.forEach(detach),D.forEach(detach),this.h()},h(){attr(d,"class","col-span-12 text-amber-500 text-left text-small pb-1"),attr(A,"class","bg-amber-500 h-2.5 rounded-full"),set_style(A,"width",Math.min(100,l[12])+"%"),attr(M,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(N,"class","mine-bar-wrapper pb-2"),attr(S,"class","col-span-12")},m(P,L){insert_hydration(P,d,L),append_hydration(d,_),append_hydration(d,m),append_hydration(d,g),append_hydration(d,b),append_hydration(d,v),append_hydration(d,w),append_hydration(d,I),insert_hydration(P,E,L),insert_hydration(P,S,L),append_hydration(S,N),append_hydration(N,M),append_hydration(M,A)},p(P,L){L[0]&4&&set_data(m,P[2]),L[0]&1&&y!==(y=P[22](P[0].challengePoints,0)+"")&&set_data(b,y),L[0]&12&&k!==(k=P[22](P[3][P[2]-1],0)+"")&&set_data(w,k),L[0]&4096&&set_style(A,"width",Math.min(100,P[12])+"%")},d(P){P&&detach(d),P&&detach(E),P&&detach(S)}}}function create_if_block_16(l){let d,_=(ref.displayNames[l[88][0]]||l[88][0])+"",m,g,y,b,v,k=l[22](Math.floor(l[88][1]),0)+"",w,I=l[15].tutorialMode&&create_if_block_17(l);return{c(){d=element("div"),m=text(_),g=space(),I&&I.c(),b=space(),v=element("div"),w=text(k),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);m=claim_text(S,_),g=claim_space(S),I&&I.l(S),S.forEach(detach),b=claim_space(E),v=claim_element(E,"DIV",{class:!0});var N=children(v);w=claim_text(N,k),N.forEach(detach),this.h()},h(){attr(d,"class",y=ref.colors[l[88][0]]+" res-name has-tooltip col-span-7"),attr(v,"class","game-text res-amount col-span-5")},m(E,S){insert_hydration(E,d,S),append_hydration(d,m),append_hydration(d,g),I&&I.m(d,null),insert_hydration(E,b,S),insert_hydration(E,v,S),append_hydration(v,w)},p(E,S){S[0]&1&&_!==(_=(ref.displayNames[E[88][0]]||E[88][0])+"")&&set_data(m,_),E[15].tutorialMode?I?I.p(E,S):(I=create_if_block_17(E),I.c(),I.m(d,null)):I&&(I.d(1),I=null),S[0]&1&&y!==(y=ref.colors[E[88][0]]+" res-name has-tooltip col-span-7")&&attr(d,"class",y),S[0]&1&&k!==(k=E[22](Math.floor(E[88][1]),0)+"")&&set_data(w,k)},d(E){E&&detach(d),I&&I.d(),E&&detach(b),E&&detach(v)}}}function create_if_block_17(l){let d,_=ref.tutorialModeDescriptions[l[88][0]]+"",m;return{c(){d=element("span"),m=text(_),this.h()},l(g){d=claim_element(g,"SPAN",{class:!0});var y=children(d);m=claim_text(y,_),y.forEach(detach),this.h()},h(){attr(d,"class","tooltip tooltip-style")},m(g,y){insert_hydration(g,d,y),append_hydration(d,m)},p(g,y){y[0]&1&&_!==(_=ref.tutorialModeDescriptions[g[88][0]]+"")&&set_data(m,_)},d(g){g&&detach(d)}}}function create_each_block_4(l){let d=l[0][l[88][0]]&&l[0][l[88][0]]>=1&&!l[88][0].includes("key")&&!ref.walletExclude[l[88][0]]&&(ref.dropTiers[l[88][0]]||ref.dropTiers.default)==l[91],_,m=d&&create_if_block_16(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y[0]&1&&(d=g[0][g[88][0]]&&g[0][g[88][0]]>=1&&!g[88][0].includes("key")&&!ref.walletExclude[g[88][0]]&&(ref.dropTiers[g[88][0]]||ref.dropTiers.default)==g[91]),d?m?m.p(g,y):(m=create_if_block_16(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_each_block_3(l){let d,_,m=Object.entries(l[0]),g=[];for(let y=0;y<m.length;y+=1)g[y]=create_each_block_4(get_each_context_4(l,m,y));return{c(){for(let y=0;y<g.length;y+=1)g[y].c();d=space(),_=element("div"),this.h()},l(y){for(let b=0;b<g.length;b+=1)g[b].l(y);d=claim_space(y),_=claim_element(y,"DIV",{class:!0}),children(_).forEach(detach),this.h()},h(){attr(_,"class","res-break py-2 border-1 border-gray-700 col-span-12")},m(y,b){for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(y,b);insert_hydration(y,d,b),insert_hydration(y,_,b)},p(y,b){if(b[0]&4227073){m=Object.entries(y[0]);let v;for(v=0;v<m.length;v+=1){const k=get_each_context_4(y,m,v);g[v]?g[v].p(k,b):(g[v]=create_each_block_4(k),g[v].c(),g[v].m(d.parentNode,d))}for(;v<g.length;v+=1)g[v].d(1);g.length=m.length}},d(y){destroy_each(g,y),y&&detach(d),y&&detach(_)}}}function create_if_block_14(l){let d,_=(ref.displayNames[l[88][0]]||l[88][0])+"",m,g,y,b,v,k=l[22](Math.floor(l[88][1]),0)+"",w,I=l[15].tutorialMode&&create_if_block_15(l);return{c(){d=element("div"),m=text(_),g=space(),I&&I.c(),b=space(),v=element("div"),w=text(k),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var S=children(d);m=claim_text(S,_),g=claim_space(S),I&&I.l(S),S.forEach(detach),b=claim_space(E),v=claim_element(E,"DIV",{class:!0});var N=children(v);w=claim_text(N,k),N.forEach(detach),this.h()},h(){attr(d,"class",y=ref.colors[l[88][0]]+" res-name has-tooltip col-span-7"),attr(v,"class","game-text res-amount col-span-5")},m(E,S){insert_hydration(E,d,S),append_hydration(d,m),append_hydration(d,g),I&&I.m(d,null),insert_hydration(E,b,S),insert_hydration(E,v,S),append_hydration(v,w)},p(E,S){S[0]&1&&_!==(_=(ref.displayNames[E[88][0]]||E[88][0])+"")&&set_data(m,_),E[15].tutorialMode?I?I.p(E,S):(I=create_if_block_15(E),I.c(),I.m(d,null)):I&&(I.d(1),I=null),S[0]&1&&y!==(y=ref.colors[E[88][0]]+" res-name has-tooltip col-span-7")&&attr(d,"class",y),S[0]&1&&k!==(k=E[22](Math.floor(E[88][1]),0)+"")&&set_data(w,k)},d(E){E&&detach(d),I&&I.d(),E&&detach(b),E&&detach(v)}}}function create_if_block_15(l){let d,_=ref.tutorialModeDescriptions[l[88][0]]+"",m;return{c(){d=element("span"),m=text(_),this.h()},l(g){d=claim_element(g,"SPAN",{class:!0});var y=children(d);m=claim_text(y,_),y.forEach(detach),this.h()},h(){attr(d,"class","tooltip tooltip-style")},m(g,y){insert_hydration(g,d,y),append_hydration(d,m)},p(g,y){y[0]&1&&_!==(_=ref.tutorialModeDescriptions[g[88][0]]+"")&&set_data(m,_)},d(g){g&&detach(d)}}}function create_each_block_2(l){let d=(l[0][l[88][0]]||l[16].has(l[88][0]))&&l[88][0].includes("key"),_,m=d&&create_if_block_14(l);return{c(){m&&m.c(),_=empty()},l(g){m&&m.l(g),_=empty()},m(g,y){m&&m.m(g,y),insert_hydration(g,_,y)},p(g,y){y[0]&65537&&(d=(g[0][g[88][0]]||g[16].has(g[88][0]))&&g[88][0].includes("key")),d?m?m.p(g,y):(m=create_if_block_14(g),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(g){m&&m.d(g),g&&detach(_)}}}function create_if_block_13(l){let d,_,m=l[22](l[14].showMineXPGain,0)+"",g,y;return{c(){d=element("div"),_=text("+ "),g=text(m),this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var v=children(d);_=claim_text(v,"+ "),g=claim_text(v,m),v.forEach(detach),this.h()},h(){attr(d,"class",y="text-small "+(l[1].level>69?"text-red-500":"text-cyan-400")+" col-span-5 text-left pt-4 pb-1 px-1")},m(b,v){insert_hydration(b,d,v),append_hydration(d,_),append_hydration(d,g)},p(b,v){v[0]&16384&&m!==(m=b[22](b[14].showMineXPGain,0)+"")&&set_data(g,m),v[0]&2&&y!==(y="text-small "+(b[1].level>69?"text-red-500":"text-cyan-400")+" col-span-5 text-left pt-4 pb-1 px-1")&&attr(d,"class",y)},d(b){b&&detach(d)}}}function create_if_block_12(l){let d,_,m=l[17].slice().reverse(),g=[];for(let y=0;y<m.length;y+=1)g[y]=create_each_block_1(get_each_context_1(l,m,y));return{c(){d=element("div"),_=element("div");for(let y=0;y<g.length;y+=1)g[y].c();this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);_=claim_element(b,"DIV",{class:!0});var v=children(_);for(let k=0;k<g.length;k+=1)g[k].l(v);v.forEach(detach),b.forEach(detach),this.h()},h(){attr(_,"class","scrollable-area absolute inset-0 overflow-y-auto"),attr(d,"class","alog-cont col-span-12 h-64 relative bg-gray-700 border-4 border-gray-600")},m(y,b){insert_hydration(y,d,b),append_hydration(d,_);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(_,null)},p(y,b){if(b[0]&131072){m=y[17].slice().reverse();let v;for(v=0;v<m.length;v+=1){const k=get_each_context_1(y,m,v);g[v]?g[v].p(k,b):(g[v]=create_each_block_1(k),g[v].c(),g[v].m(_,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=m.length}},d(y){y&&detach(d),destroy_each(g,y)}}}function create_each_block_1(l){let d,_=l[85][0]+"",m,g;return{c(){d=element("div"),m=text(_),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var b=children(d);m=claim_text(b,_),b.forEach(detach),this.h()},h(){attr(d,"class",g="alog-text text-small "+l[85][1]+" col-span-12 pt-1 pl-1")},m(y,b){insert_hydration(y,d,b),append_hydration(d,m)},p(y,b){b[0]&131072&&_!==(_=y[85][0]+"")&&set_data(m,_),b[0]&131072&&g!==(g="alog-text text-small "+y[85][1]+" col-span-12 pt-1 pl-1")&&attr(d,"class",g)},d(y){y&&detach(d)}}}function create_each_block(l){let d,_=l[82]+"",m,g,y,b;function v(){return l[36](l[82])}return{c(){d=element("button"),m=text(_),this.h()},l(k){d=claim_element(k,"BUTTON",{class:!0});var w=children(d);m=claim_text(w,_),w.forEach(detach),this.h()},h(){attr(d,"class",g="px-1 py-1 text-small "+(l[23][l[82]]&&l[23][l[82]]()?l[82]===l[4]?"control-btn-selected":"control-btn":"control-btn-nounlock"))},m(k,w){insert_hydration(k,d,w),append_hydration(d,m),y||(b=listen(d,"click",v),y=!0)},p(k,w){l=k,w[0]&16&&g!==(g="px-1 py-1 text-small "+(l[23][l[82]]&&l[23][l[82]]()?l[82]===l[4]?"control-btn-selected":"control-btn":"control-btn-nounlock"))&&attr(d,"class",g)},d(k){k&&detach(d),y=!1,b()}}}function create_key_block(l){let d,_=ref.tabs,m=[];for(let g=0;g<_.length;g+=1)m[g]=create_each_block(get_each_context(l,_,g));return{c(){for(let g=0;g<m.length;g+=1)m[g].c();d=empty()},l(g){for(let y=0;y<m.length;y+=1)m[y].l(g);d=empty()},m(g,y){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(g,y);insert_hydration(g,d,y)},p(g,y){if(y[0]&8912912){_=ref.tabs;let b;for(b=0;b<_.length;b+=1){const v=get_each_context(g,_,b);m[b]?m[b].p(v,y):(m[b]=create_each_block(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(g){destroy_each(m,g),g&&detach(d)}}}function create_if_block_11(l){let d,_;return d=new Settings({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_10(l){let d,_;return d=new Help({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_9(l){let d,_;return d=new Artifacts({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_8(l){let d,_;return d=new Challenges({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_7(l){let d,_;return d=new Automation({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_6(l){let d,_;return d=new Button({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_5(l){let d,_;return d=new Enchants({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_4(l){let d,_;return d=new Relocate({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_3(l){let d,_;return d=new Beacons({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_2(l){let d,_;return d=new Keys({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_1(l){let d,_;return d=new Mining({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,g){mount_component(d,m,g),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block(l){let d,_=(ref.tabNotUnlockedText[l[4]]||"")+"",m;return{c(){d=element("div"),m=text(_),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var y=children(d);m=claim_text(y,_),y.forEach(detach),this.h()},h(){attr(d,"class","game-text")},m(g,y){insert_hydration(g,d,y),append_hydration(d,m)},p(g,y){y[0]&16&&_!==(_=(ref.tabNotUnlockedText[g[4]]||"")+"")&&set_data(m,_)},d(g){g&&detach(d)}}}function create_fragment(l){let d,_,m,g,y,b,v,k,w,I,E,S,N,M,A=l[1].level+"",P,L,D,x,U,C,F,J,T=l[22](l[1].xp,0)+"",Y,K,ne=l[22](l[1].xpNextReq,0)+"",Z,O,V,H,le,B,R,G=l[22](l[11],2)+"",$,de,oe,X,te,q,ee,z,re,ie,W,Q,_e,Ee,ye,ce,ae,me,ke=l[9]?"-":"+",Se,Ne,xe,Pe,Be,Te,be,Ve,He,We,Ze,$e,et,Xe,Le,Re,Qe,Ge,Ke,Ue,_t,fe,De,we,Ce,kt,se,Oe,j,Ie,ue,he,je,ve,Fe,lt,rt,ut,ze,ge,Me,qe=l[10],Ye,ot,st,tt,wt,It,Nt,St,Lt,Dt,Ut,nt,yt,Pt,Bt=l[23][l[4]]&&!l[23][l[4]]()||!l[23][l[4]],pt,Tt,qt,it=l[8]&&create_if_block_19(),ht=l[2]!==0&&create_if_block_18(l),Ct=[1,2,3,4,5,6],vt=[];for(let pe=0;pe<6;pe+=1)vt[pe]=create_each_block_3(get_each_context_3(l,Ct,pe));let At=Object.entries(l[0]),ct=[];for(let pe=0;pe<At.length;pe+=1)ct[pe]=create_each_block_2(get_each_context_2(l,At,pe));let ft=l[14].showMineXPGain>=0&&create_if_block_13(l),mt=l[9]&&create_if_block_12(l),xt=create_key_block(l);const jt=[create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_10,create_if_block_11],Mt=[];function Jt(pe,Ae){return Ae[0]&16&&(st=null),Ae[0]&16&&(tt=null),Ae[0]&16&&(wt=null),Ae[0]&16&&(It=null),Ae[0]&16&&(Nt=null),Ae[0]&16&&(St=null),Ae[0]&16&&(Lt=null),Ae[0]&16&&(Dt=null),Ae[0]&16&&(Ut=null),st==null&&(st=!!(pe[4]==="mining"&&pe[23].mining())),st?0:(tt==null&&(tt=!!(pe[4]==="keys"&&pe[23].mining())),tt?1:(wt==null&&(wt=!!(pe[4]==="beacons"&&pe[23].beacons())),wt?2:(It==null&&(It=!!(pe[4]==="relocate"&&pe[23].relocate())),It?3:(Nt==null&&(Nt=!!(pe[4]==="enchants"&&pe[23].enchants())),Nt?4:(St==null&&(St=!!(pe[4]==="button"&&pe[23].button())),St?5:(Lt==null&&(Lt=!!(pe[4]==="automation"&&pe[23].automation())),Lt?6:(Dt==null&&(Dt=!!(pe[4]==="challenges"&&pe[23].challenges())),Dt?7:(Ut==null&&(Ut=!!(pe[4]==="artifacts"&&pe[23].artifacts())),Ut?8:pe[4]==="help"?9:pe[4]==="settings"?10:-1))))))))}~(nt=Jt(l,[-1,-1,-1,-1]))&&(yt=Mt[nt]=jt[nt](l));let gt=Bt&&create_if_block(l);return{c(){it&&it.c(),d=space(),_=element("div"),m=element("div"),g=element("div"),y=element("div"),b=space(),v=element("div"),ht&&ht.c(),k=space();for(let pe=0;pe<6;pe+=1)vt[pe].c();w=space();for(let pe=0;pe<ct.length;pe+=1)ct[pe].c();I=space(),E=element("div"),S=element("div"),N=text(`Mining Level 
                    `),M=element("span"),P=text(A),D=space(),ft&&ft.c(),x=space(),U=element("span"),C=element("div"),F=element("div"),J=text("[ "),Y=text(T),K=text(" / "),Z=text(ne),O=text(" ]"),H=space(),le=element("div"),B=text("Each mine operation gives "),R=element("strong"),$=text(G),de=text(" xp."),oe=space(),X=element("div"),te=text("This value increases based on the total amount of fame gained across all reset tiers."),q=space(),ee=element("div"),z=element("div"),re=element("div"),ie=element("div"),Q=space(),_e=element("div"),Ee=space(),ye=element("div"),ce=text("Activity Log"),ae=space(),me=element("div"),Se=text(ke),Ne=space(),xe=element("div"),Pe=space(),mt&&mt.c(),Be=space(),Te=element("div"),be=element("div"),Ve=element("button"),He=text("Save"),Ze=space(),$e=element("button"),et=text("Import"),Xe=space(),Le=element("button"),Re=text("Export"),Ge=space(),Ke=element("button"),Ue=text("Buy x"),_t=text(l[7]),fe=space(),De=element("button"),we=text(`Buy Max
                    `),Ce=element("span"),kt=text("Buy Max only works on Mining and Enchant upgrades."),Oe=space(),j=element("button"),Ie=text("Help!"),ue=space(),he=element("button"),je=text("Settings"),ve=space(),Fe=element("button"),lt=text("Reset"),rt=space(),ut=element("button"),ze=text("v0.0.4a-9"),ge=space(),Me=element("div"),xt.c(),Ye=space(),ot=element("div"),yt&&yt.c(),Pt=space(),gt&&gt.c(),this.h()},l(pe){it&&it.l(pe),d=claim_space(pe),_=claim_element(pe,"DIV",{class:!0});var Ae=children(_);m=claim_element(Ae,"DIV",{class:!0});var dt=children(m);g=claim_element(dt,"DIV",{class:!0});var Je=children(g);y=claim_element(Je,"DIV",{class:!0}),children(y).forEach(detach),b=claim_space(Je),v=claim_element(Je,"DIV",{class:!0});var at=children(v);ht&&ht.l(at),k=claim_space(at);for(let Vt=0;Vt<6;Vt+=1)vt[Vt].l(at);w=claim_space(at);for(let Vt=0;Vt<ct.length;Vt+=1)ct[Vt].l(at);I=claim_space(at),E=claim_element(at,"DIV",{class:!0});var Ot=children(E);S=claim_element(Ot,"DIV",{class:!0});var zt=children(S);N=claim_text(zt,`Mining Level 
                    `),M=claim_element(zt,"SPAN",{class:!0});var Xt=children(M);P=claim_text(Xt,A),Xt.forEach(detach),zt.forEach(detach),D=claim_space(Ot),ft&&ft.l(Ot),x=claim_space(Ot),U=claim_element(Ot,"SPAN",{class:!0});var Qt=children(U);C=claim_element(Qt,"DIV",{class:!0});var Rt=children(C);F=claim_element(Rt,"DIV",{class:!0});var Ft=children(F);J=claim_text(Ft,"[ "),Y=claim_text(Ft,T),K=claim_text(Ft," / "),Z=claim_text(Ft,ne),O=claim_text(Ft," ]"),Ft.forEach(detach),H=claim_space(Rt),le=claim_element(Rt,"DIV",{class:!0});var Kt=children(le);B=claim_text(Kt,"Each mine operation gives "),R=claim_element(Kt,"STRONG",{});var Zt=children(R);$=claim_text(Zt,G),Zt.forEach(detach),de=claim_text(Kt," xp."),Kt.forEach(detach),oe=claim_space(Rt),X=claim_element(Rt,"DIV",{class:!0});var $t=children(X);te=claim_text($t,"This value increases based on the total amount of fame gained across all reset tiers."),$t.forEach(detach),Rt.forEach(detach),Qt.forEach(detach),Ot.forEach(detach),q=claim_space(at),ee=claim_element(at,"DIV",{class:!0});var ea=children(ee);z=claim_element(ea,"DIV",{class:!0});var ta=children(z);re=claim_element(ta,"DIV",{class:!0});var aa=children(re);ie=claim_element(aa,"DIV",{class:!0,style:!0}),children(ie).forEach(detach),aa.forEach(detach),ta.forEach(detach),ea.forEach(detach),Q=claim_space(at),_e=claim_element(at,"DIV",{class:!0}),children(_e).forEach(detach),Ee=claim_space(at),ye=claim_element(at,"DIV",{class:!0});var la=children(ye);ce=claim_text(la,"Activity Log"),la.forEach(detach),ae=claim_space(at),me=claim_element(at,"DIV",{class:!0});var na=children(me);Se=claim_text(na,ke),na.forEach(detach),Ne=claim_space(at),xe=claim_element(at,"DIV",{class:!0}),children(xe).forEach(detach),Pe=claim_space(at),mt&&mt.l(at),at.forEach(detach),Je.forEach(detach),Be=claim_space(dt),Te=claim_element(dt,"DIV",{class:!0});var Gt=children(Te);be=claim_element(Gt,"DIV",{class:!0});var bt=children(be);Ve=claim_element(bt,"BUTTON",{class:!0});var ra=children(Ve);He=claim_text(ra,"Save"),ra.forEach(detach),Ze=claim_space(bt),$e=claim_element(bt,"BUTTON",{class:!0});var oa=children($e);et=claim_text(oa,"Import"),oa.forEach(detach),Xe=claim_space(bt),Le=claim_element(bt,"BUTTON",{class:!0});var sa=children(Le);Re=claim_text(sa,"Export"),sa.forEach(detach),Ge=claim_space(bt),Ke=claim_element(bt,"BUTTON",{class:!0});var Ht=children(Ke);Ue=claim_text(Ht,"Buy x"),_t=claim_text(Ht,l[7]),Ht.forEach(detach),fe=claim_space(bt),De=claim_element(bt,"BUTTON",{class:!0});var Wt=children(De);we=claim_text(Wt,`Buy Max
                    `),Ce=claim_element(Wt,"SPAN",{class:!0});var ia=children(Ce);kt=claim_text(ia,"Buy Max only works on Mining and Enchant upgrades."),ia.forEach(detach),Wt.forEach(detach),Oe=claim_space(bt),j=claim_element(bt,"BUTTON",{class:!0});var ca=children(j);Ie=claim_text(ca,"Help!"),ca.forEach(detach),ue=claim_space(bt),he=claim_element(bt,"BUTTON",{class:!0});var da=children(he);je=claim_text(da,"Settings"),da.forEach(detach),ve=claim_space(bt),Fe=claim_element(bt,"BUTTON",{class:!0});var _a=children(Fe);lt=claim_text(_a,"Reset"),_a.forEach(detach),rt=claim_space(bt),ut=claim_element(bt,"BUTTON",{class:!0});var pa=children(ut);ze=claim_text(pa,"v0.0.4a-9"),pa.forEach(detach),bt.forEach(detach),ge=claim_space(Gt),Me=claim_element(Gt,"DIV",{class:!0});var ma=children(Me);xt.l(ma),ma.forEach(detach),Ye=claim_space(Gt),ot=claim_element(Gt,"DIV",{class:!0});var Yt=children(ot);yt&&yt.l(Yt),Pt=claim_space(Yt),gt&&gt.l(Yt),Yt.forEach(detach),Gt.forEach(detach),dt.forEach(detach),Ae.forEach(detach),this.h()},h(){attr(y,"class","res-display-space py-2"),attr(M,"class",L="font-bold "+(l[1].level>69?"text-red-500":"text-cyan-400")),attr(S,"class","text-[#989898] text-small col-span-2 text-left pt-4 pb-1"),attr(F,"class",V="col-span-3 text-center "+(l[1].level>69?"text-red-500":"text-cyan-500")),attr(le,"class","col-span-3 text-center"),attr(X,"class","col-span-3 text-center"),attr(C,"class","grid grid-cols-3"),attr(U,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none max-w-[300px] text-center weight-bold"),attr(E,"class","col-span-12 grid grid-cols-7 has-tooltip"),attr(ie,"class",W=(l[1].level>69?"bg-red-500":"bg-cyan-500")+" h-2.5 rounded-full"),set_style(ie,"width",l[13]+"%"),attr(re,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(z,"class","mine-bar-wrapper pb-2"),attr(ee,"class","col-span-12"),attr(_e,"class","alog-break pt-4 col-span-12"),attr(ye,"class","alog-title game-text col-span-9 "),attr(me,"class","alog-minimize col-span-3 game-btn text-center game-text"),attr(xe,"class","col-span-12 py-1"),attr(v,"class","res-display-wrap grid grid-cols-12"),attr(g,"class","px-2 res-display col-span-3"),attr(Ve,"class",We="py-1 text-small save-btn control-btn "+(l[5]?"bg-green-400":"")),attr($e,"class","py-1 text-small save-btn control-btn"),attr(Le,"class",Qe="py-1 text-small save-btn control-btn "+(l[6]?"bg-green-400":"")),attr(Ke,"class","py-1 px-1 text-small save-btn control-btn"),attr(Ce,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none max-w-[300px] text-center weight-bold"),attr(De,"class",se="py-1 px-1 text-small save-btn has-tooltip "+(l[15].maxBuy?"game-btn-toggleon":"control-btn")),attr(j,"class","py-1 px-1 text-small save-btn control-btn"),attr(he,"class","py-1 px-1 text-small save-btn control-btn"),attr(Fe,"class","py-1 text-small border-2 border-red-600 text-red-600 hover:bg-red-950"),attr(ut,"class","text-xs text-gray-600"),attr(be,"class","py-1 control-buttons resize-none"),attr(Me,"class","row-span-1 tab-buttons"),attr(ot,"class","row-span-10 main-panel-display"),attr(Te,"class","px-2 py-2 main-panel col-span-8 flexbox"),attr(m,"class","main-page grid grid-cols-12"),attr(_,"class","wrapper")},m(pe,Ae){it&&it.m(pe,Ae),insert_hydration(pe,d,Ae),insert_hydration(pe,_,Ae),append_hydration(_,m),append_hydration(m,g),append_hydration(g,y),append_hydration(g,b),append_hydration(g,v),ht&&ht.m(v,null),append_hydration(v,k);for(let dt=0;dt<6;dt+=1)vt[dt]&&vt[dt].m(v,null);append_hydration(v,w);for(let dt=0;dt<ct.length;dt+=1)ct[dt]&&ct[dt].m(v,null);append_hydration(v,I),append_hydration(v,E),append_hydration(E,S),append_hydration(S,N),append_hydration(S,M),append_hydration(M,P),append_hydration(E,D),ft&&ft.m(E,null),append_hydration(E,x),append_hydration(E,U),append_hydration(U,C),append_hydration(C,F),append_hydration(F,J),append_hydration(F,Y),append_hydration(F,K),append_hydration(F,Z),append_hydration(F,O),append_hydration(C,H),append_hydration(C,le),append_hydration(le,B),append_hydration(le,R),append_hydration(R,$),append_hydration(le,de),append_hydration(C,oe),append_hydration(C,X),append_hydration(X,te),append_hydration(v,q),append_hydration(v,ee),append_hydration(ee,z),append_hydration(z,re),append_hydration(re,ie),append_hydration(v,Q),append_hydration(v,_e),append_hydration(v,Ee),append_hydration(v,ye),append_hydration(ye,ce),append_hydration(v,ae),append_hydration(v,me),append_hydration(me,Se),append_hydration(v,Ne),append_hydration(v,xe),append_hydration(v,Pe),mt&&mt.m(v,null),append_hydration(m,Be),append_hydration(m,Te),append_hydration(Te,be),append_hydration(be,Ve),append_hydration(Ve,He),append_hydration(be,Ze),append_hydration(be,$e),append_hydration($e,et),append_hydration(be,Xe),append_hydration(be,Le),append_hydration(Le,Re),append_hydration(be,Ge),append_hydration(be,Ke),append_hydration(Ke,Ue),append_hydration(Ke,_t),append_hydration(be,fe),append_hydration(be,De),append_hydration(De,we),append_hydration(De,Ce),append_hydration(Ce,kt),append_hydration(be,Oe),append_hydration(be,j),append_hydration(j,Ie),append_hydration(be,ue),append_hydration(be,he),append_hydration(he,je),append_hydration(be,ve),append_hydration(be,Fe),append_hydration(Fe,lt),append_hydration(be,rt),append_hydration(be,ut),append_hydration(ut,ze),append_hydration(Te,ge),append_hydration(Te,Me),xt.m(Me,null),append_hydration(Te,Ye),append_hydration(Te,ot),~nt&&Mt[nt].m(ot,null),append_hydration(ot,Pt),gt&&gt.m(ot,null),pt=!0,Tt||(qt=[listen(me,"click",l[27]),listen(Ve,"click",l[28]),listen($e,"click",l[29]),listen(Le,"click",l[30]),listen(Ke,"click",l[31]),listen(De,"click",l[32]),listen(j,"click",l[33]),listen(he,"click",l[34]),listen(Fe,"click",l[35])],Tt=!0)},p(pe,Ae){if(pe[8]?it?Ae[0]&256&&transition_in(it,1):(it=create_if_block_19(),it.c(),transition_in(it,1),it.m(d.parentNode,d)):it&&(group_outros(),transition_out(it,1,1,()=>{it=null}),check_outros()),pe[2]!==0?ht?ht.p(pe,Ae):(ht=create_if_block_18(pe),ht.c(),ht.m(v,k)):ht&&(ht.d(1),ht=null),Ae[0]&4227073){Ct=[1,2,3,4,5,6];let Je;for(Je=0;Je<6;Je+=1){const at=get_each_context_3(pe,Ct,Je);vt[Je]?vt[Je].p(at,Ae):(vt[Je]=create_each_block_3(at),vt[Je].c(),vt[Je].m(v,w))}for(;Je<6;Je+=1)vt[Je].d(1)}if(Ae[0]&4292609){At=Object.entries(pe[0]);let Je;for(Je=0;Je<At.length;Je+=1){const at=get_each_context_2(pe,At,Je);ct[Je]?ct[Je].p(at,Ae):(ct[Je]=create_each_block_2(at),ct[Je].c(),ct[Je].m(v,I))}for(;Je<ct.length;Je+=1)ct[Je].d(1);ct.length=At.length}(!pt||Ae[0]&2)&&A!==(A=pe[1].level+"")&&set_data(P,A),(!pt||Ae[0]&2&&L!==(L="font-bold "+(pe[1].level>69?"text-red-500":"text-cyan-400")))&&attr(M,"class",L),pe[14].showMineXPGain>=0?ft?ft.p(pe,Ae):(ft=create_if_block_13(pe),ft.c(),ft.m(E,x)):ft&&(ft.d(1),ft=null),(!pt||Ae[0]&2)&&T!==(T=pe[22](pe[1].xp,0)+"")&&set_data(Y,T),(!pt||Ae[0]&2)&&ne!==(ne=pe[22](pe[1].xpNextReq,0)+"")&&set_data(Z,ne),(!pt||Ae[0]&2&&V!==(V="col-span-3 text-center "+(pe[1].level>69?"text-red-500":"text-cyan-500")))&&attr(F,"class",V),(!pt||Ae[0]&2048)&&G!==(G=pe[22](pe[11],2)+"")&&set_data($,G),(!pt||Ae[0]&2&&W!==(W=(pe[1].level>69?"bg-red-500":"bg-cyan-500")+" h-2.5 rounded-full"))&&attr(ie,"class",W),(!pt||Ae[0]&8192)&&set_style(ie,"width",pe[13]+"%"),(!pt||Ae[0]&512)&&ke!==(ke=pe[9]?"-":"+")&&set_data(Se,ke),pe[9]?mt?mt.p(pe,Ae):(mt=create_if_block_12(pe),mt.c(),mt.m(v,null)):mt&&(mt.d(1),mt=null),(!pt||Ae[0]&32&&We!==(We="py-1 text-small save-btn control-btn "+(pe[5]?"bg-green-400":"")))&&attr(Ve,"class",We),(!pt||Ae[0]&64&&Qe!==(Qe="py-1 text-small save-btn control-btn "+(pe[6]?"bg-green-400":"")))&&attr(Le,"class",Qe),(!pt||Ae[0]&128)&&set_data(_t,pe[7]),(!pt||Ae[0]&32768&&se!==(se="py-1 px-1 text-small save-btn has-tooltip "+(pe[15].maxBuy?"game-btn-toggleon":"control-btn")))&&attr(De,"class",se),Ae[0]&1024&&safe_not_equal(qe,qe=pe[10])?(xt.d(1),xt=create_key_block(pe),xt.c(),xt.m(Me,null)):xt.p(pe,Ae);let dt=nt;nt=Jt(pe,Ae),nt!==dt&&(yt&&(group_outros(),transition_out(Mt[dt],1,1,()=>{Mt[dt]=null}),check_outros()),~nt?(yt=Mt[nt],yt||(yt=Mt[nt]=jt[nt](pe),yt.c()),transition_in(yt,1),yt.m(ot,Pt)):yt=null),Ae[0]&16&&(Bt=pe[23][pe[4]]&&!pe[23][pe[4]]()||!pe[23][pe[4]]),Bt?gt?gt.p(pe,Ae):(gt=create_if_block(pe),gt.c(),gt.m(ot,null)):gt&&(gt.d(1),gt=null)},i(pe){pt||(transition_in(it),transition_in(yt),pt=!0)},o(pe){transition_out(it),transition_out(yt),pt=!1},d(pe){it&&it.d(pe),pe&&detach(d),pe&&detach(_),ht&&ht.d(),destroy_each(vt,pe),destroy_each(ct,pe),ft&&ft.d(),mt&&mt.d(),xt.d(pe),~nt&&Mt[nt].d(),gt&&gt.d(),Tt=!1,run_all(qt)}}}let AUTOSAVE_INTERVAL=3e4;function instance(l,d,_){let m,g,y,b,v,k,w,I,E,S,N,M,A,P,L,D,x,U,C,F,J,T,Y,K,ne,Z,O,V,H,le,B,R,G,$,de,oe,X,te,q,ee,z,re,ie,W,Q,_e,Ee,ye,ce,ae;component_subscribe(l,flags,se=>_(14,b=se)),component_subscribe(l,saveVersion,se=>_(39,v=se)),component_subscribe(l,wallet,se=>_(0,k=se)),component_subscribe(l,automationItemsUnlocked,se=>_(40,w=se)),component_subscribe(l,settings,se=>_(15,I=se)),component_subscribe(l,miningUpgradeLevels,se=>_(41,E=se)),component_subscribe(l,miningUpgradeLevelsBought,se=>_(42,S=se)),component_subscribe(l,keysOpened,se=>_(43,N=se)),component_subscribe(l,visibleTier,se=>_(44,M=se)),component_subscribe(l,activityLogShow,se=>_(45,A=se)),component_subscribe(l,enchantUpgrades,se=>_(46,P=se)),component_subscribe(l,keyCraftMastery,se=>_(47,L=se)),component_subscribe(l,keyCraftAmount,se=>_(48,D=se)),component_subscribe(l,buttonUpgradeLevels,se=>_(49,x=se)),component_subscribe(l,buttonUpgrades,se=>_(50,U=se)),component_subscribe(l,miningUpgradeLevelsFree,se=>_(51,C=se)),component_subscribe(l,keyCraftTimes,se=>_(52,F=se)),component_subscribe(l,beaconActivations,se=>_(53,J=se)),component_subscribe(l,keyUpgradeLevels,se=>_(54,T=se)),component_subscribe(l,key1DropTable,se=>_(55,Y=se)),component_subscribe(l,resources,se=>_(56,K=se)),component_subscribe(l,enchantThreshold,se=>_(57,ne=se)),component_subscribe(l,unlockedRes,se=>_(16,Z=se)),component_subscribe(l,mineLevel,se=>_(1,O=se)),component_subscribe(l,challenge3Multi,se=>_(58,V=se)),component_subscribe(l,beaconSmartSplits,se=>_(59,H=se)),component_subscribe(l,challengesCompleted,se=>_(60,le=se)),component_subscribe(l,challengeActive,se=>_(2,B=se)),component_subscribe(l,antiFlickerFlags,se=>_(61,R=se)),component_subscribe(l,startOfGame,se=>_(62,G=se)),component_subscribe(l,buttonRadiumProgress,se=>_(63,$=se)),component_subscribe(l,stats,se=>_(64,de=se)),component_subscribe(l,buttonStats,se=>_(65,oe=se)),component_subscribe(l,buttonNumClicks,se=>_(66,X=se)),component_subscribe(l,beaconSpendAmt,se=>_(67,te=se)),component_subscribe(l,enchantUpgradeLevels,se=>_(68,q=se)),component_subscribe(l,beaconNextReqs,se=>_(69,ee=se)),component_subscribe(l,beaconUpgradeLevels,se=>_(70,z=se)),component_subscribe(l,beaconLevels,se=>_(71,re=se)),component_subscribe(l,beaconProgress,se=>_(72,ie=se)),component_subscribe(l,progress,se=>_(73,W=se)),component_subscribe(l,keyItemsUnlocked,se=>_(74,Q=se)),component_subscribe(l,miningUpgradeLevelsFreeTemp,se=>_(75,_e=se)),component_subscribe(l,miningUpgradeLevelsBoughtTemp,se=>_(76,Ee=se)),component_subscribe(l,miningUpgradeLevelsTemp,se=>_(77,ye=se)),component_subscribe(l,challengeGoals,se=>_(3,ce=se)),component_subscribe(l,activityLog,se=>_(17,ae=se));let me="mining",ke,Se,Ne=1,xe=!1,Pe=!0;const Be=()=>{_(9,Pe=!Pe)},Te=se=>{_(4,me=se),set_store_value(settings,I.activeTab=se,I)},be=()=>{Ne===1?_(7,Ne=10):Ne===10?_(7,Ne=100):Ne===100&&_(7,Ne=1),set_store_value(settings,I.buyAmount=Ne,I)},Ve=()=>{I.maxBuy||set_store_value(settings,I.maxBuy=!1,I),set_store_value(settings,I.maxBuy=!I.maxBuy,I)},He=(se,Oe=3)=>isNaN(se)||se===null?"???":se<1e9?se.toFixed(se<1e3?Oe:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):se.toExponential(3).toString().replace("+",""),We={mining:()=>!0,keys:()=>!0,beacons:()=>k.beacons||formula.sumArray(J)>0,sigils:()=>k.sigils&&k.sigils>.02,relocate:()=>formula.sumArray(N)>200||k.fame,enchants:()=>k.fame&&k.totalFame>=100||formula.sumArray(q)>0,automation:()=>k.fame&&k.fame>=.997||formula.sumArray(q)>0||E[10]>0||E[11]>0,button:()=>O.level>=8,default:()=>!1,help:()=>!0,settings:()=>!0,challenges:()=>w["game on"],artifacts:()=>k.artifacts&&k.artifacts>=1},Ze=async(se=!1)=>{localStorage.setItem("wallet",JSON.stringify(k)),localStorage.setItem("miningUpgradeLevels",JSON.stringify(E)),localStorage.setItem("miningUpgradeLevelsBought",JSON.stringify(S)),localStorage.setItem("miningUpgradeLevelsFree",JSON.stringify(C)),localStorage.setItem("miningUpgradeLevelsTemp",JSON.stringify(ye)),localStorage.setItem("miningUpgradeLevelsBoughtTemp",JSON.stringify(Ee)),localStorage.setItem("miningUpgradeLevelsFreeTemp",JSON.stringify(_e)),localStorage.setItem("unlockedRes",JSON.stringify([...Z]));let Oe={};for(let j of Object.keys(Q))Oe[j]=Array.from(Q[j]||[]);if(localStorage.setItem("keyItemsUnlocked",JSON.stringify(Oe)),localStorage.setItem("keysOpened",JSON.stringify(N)),localStorage.setItem("progress",JSON.stringify(W)),localStorage.setItem("dropTier",JSON.stringify(M)),localStorage.setItem("settings",JSON.stringify(I)),localStorage.setItem("beaconProgress",JSON.stringify(ie)),localStorage.setItem("beaconLevels",JSON.stringify(re)),localStorage.setItem("beaconUpgradeLevels",JSON.stringify(z)),localStorage.setItem("resources",JSON.stringify(K)),localStorage.setItem("beaconActivations",JSON.stringify(J)),localStorage.setItem("beaconNextReqs",JSON.stringify(ee)),localStorage.setItem("flags",JSON.stringify(b)),localStorage.setItem("enchantUpgradeLevels",JSON.stringify(q)),localStorage.setItem("beaconSpendAmt",JSON.stringify(te)),localStorage.setItem("mineLevel",JSON.stringify(O)),localStorage.setItem("buttonNumClicks",JSON.stringify(X)),localStorage.setItem("buttonUpgradeLevels",JSON.stringify(x)),localStorage.setItem("buttonStats",JSON.stringify(oe)),localStorage.setItem("stats",JSON.stringify(de)),localStorage.setItem("buttonRadiumProgress",JSON.stringify($)),localStorage.setItem("keyUpgradeLevels",JSON.stringify(T)),localStorage.setItem("keyCraftTimes",JSON.stringify(F)),localStorage.setItem("keyCraftAmount",JSON.stringify(D)),localStorage.setItem("keyCraftMastery",JSON.stringify(L)),localStorage.setItem("startOfGame",JSON.stringify(G)),localStorage.setItem("settings",JSON.stringify(I)),localStorage.setItem("antiFlickerFlags",JSON.stringify(R)),localStorage.setItem("saveVersion",JSON.stringify(v)),localStorage.setItem("automationItemsUnlocked",JSON.stringify(w)),localStorage.setItem("activityLogShow",JSON.stringify(A)),localStorage.setItem("challengeActive",JSON.stringify(B)),localStorage.setItem("challengesCompleted",JSON.stringify(le)),localStorage.setItem("beaconSmartSplits",JSON.stringify(H)),localStorage.setItem("challenge3Multi",JSON.stringify(V)),_(5,ke=!0),se){const j=Object.keys(localStorage),Ie={};j.forEach(he=>{Ie[he]=localStorage.getItem(he)});const ue=btoa(JSON.stringify(Ie));await parent.navigator.clipboard.writeText(ue),alert("Copied save to clipboard."),_(6,Se=!0)}setTimeout(()=>{_(5,ke=!1),_(6,Se=!1)},1e3),console.log(O)},$e=()=>{confirm("Are you sure? This is a HARD RESET!!!!")&&confirm("Are you SURE sure?")&&(localStorage.clear(),location.reload())},et=async(se=!1)=>{if(se){const Oe=prompt("Paste your save here.");if(Oe)try{const j=JSON.parse(atob(Oe));Object.keys(j).forEach(ue=>{localStorage.setItem(ue,j[ue])}),location.reload()}catch{alert("Save file invalid, using local save instead. Contact the developer on Discord if this is a mistake.")}else alert("Safe file empty, using local save instead.")}if(localStorage!==null){if(localStorage.getItem("wallet")){wallet.set(JSON.parse(localStorage.getItem("wallet")));for(let Oe of Object.keys(k))isNaN(k[Oe])&&set_store_value(wallet,k[Oe]=0,k)}if(localStorage.getItem("miningUpgradeLevels")&&miningUpgradeLevels.set(JSON.parse(localStorage.getItem("miningUpgradeLevels"))),localStorage.getItem("miningUpgradeLevelsTemp")&&miningUpgradeLevelsTemp.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsTemp"))),E.length<100&&set_store_value(miningUpgradeLevels,E=[...E,...Array(100-E.length).fill(0)],E),localStorage.getItem("miningUpgradeLevelsBought")&&miningUpgradeLevelsBought.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsBought"))),localStorage.getItem("miningUpgradeLevelsFree")&&miningUpgradeLevelsFree.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsFree"))),localStorage.getItem("miningUpgradeLevelsBoughtTemp")&&miningUpgradeLevelsBoughtTemp.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsBought"))),localStorage.getItem("miningUpgradeLevelsFreeTemp")&&miningUpgradeLevelsFreeTemp.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsFreeTemp"))),localStorage.getItem("buttonRadiumProgress")&&buttonRadiumProgress.set(JSON.parse(localStorage.getItem("buttonRadiumProgress"))),localStorage.getItem("stats")&&stats.set(JSON.parse(localStorage.getItem("stats"))),set_store_value(miningUpgradeLevels,E=E.map((Oe,j)=>S[j]+C[j]),E),localStorage.getItem("progress")&&unlockedRes.set(JSON.parse(localStorage.getItem("progress"))),localStorage.getItem("keysOpened")&&keysOpened.set(JSON.parse(localStorage.getItem("keysOpened"))),N.length>5&&set_store_value(keysOpened,N=N.slice(0,5),N),localStorage.getItem("keyItemsUnlocked")){const Oe=JSON.parse(localStorage.getItem("keyItemsUnlocked")),j={};for(let Ie in Oe)j[Ie]=new Set(Oe[Ie]);keyItemsUnlocked.set(j)}localStorage.getItem("beaconSpendAmt")&&beaconSpendAmt.set(JSON.parse(localStorage.getItem("beaconSpendAmt"))),set_store_value(unlockedRes,Z=new Set,Z);for(let[Oe,j]of Object.entries(k))j>0&&!Z.has(Oe)&&Z.add(Oe);return E[6]>0&&set_store_value(visibleTier,M=2,M),E[9]>0&&set_store_value(visibleTier,M=3,M),E[14]>0&&set_store_value(visibleTier,M=4,M),localStorage.getItem("settings")&&(settings.set(JSON.parse(localStorage.getItem("settings"))),_(7,Ne=I.buyAmount)),localStorage.getItem("beaconProgress")&&beaconProgress.set(JSON.parse(localStorage.getItem("beaconProgress"))),localStorage.getItem("beaconLevels")&&beaconLevels.set(JSON.parse(localStorage.getItem("beaconLevels"))),localStorage.getItem("beaconNextReqs")&&beaconNextReqs.set(JSON.parse(localStorage.getItem("beaconNextReqs"))),localStorage.getItem("beaconUpgradeLevels")&&beaconUpgradeLevels.set(JSON.parse(localStorage.getItem("beaconUpgradeLevels"))),localStorage.getItem("resources")&&resources.set(JSON.parse(localStorage.getItem("resources"))),localStorage.getItem("beaconActivations")&&beaconActivations.set(JSON.parse(localStorage.getItem("beaconActivations"))),localStorage.getItem("flags")&&flags.set(JSON.parse(localStorage.getItem("flags"))),localStorage.getItem("enchantUpgradeLevels")&&enchantUpgradeLevels.set(JSON.parse(localStorage.getItem("enchantUpgradeLevels"))),localStorage.getItem("mineLevel")&&mineLevel.set(JSON.parse(localStorage.getItem("mineLevel"))),localStorage.getItem("buttonNumClicks")&&buttonNumClicks.set(JSON.parse(localStorage.getItem("buttonNumClicks"))),localStorage.getItem("buttonUpgradeLevels")&&buttonUpgradeLevels.set(JSON.parse(localStorage.getItem("buttonUpgradeLevels"))),localStorage.getItem("buttonStats")&&buttonStats.set(JSON.parse(localStorage.getItem("buttonStats"))),localStorage.getItem("keyUpgradeLevels")&&keyUpgradeLevels.set(JSON.parse(localStorage.getItem("keyUpgradeLevels"))),localStorage.getItem("keyCraftTimes")&&keyCraftTimes.set(JSON.parse(localStorage.getItem("keyCraftTimes"))),localStorage.getItem("keyCraftAmount")&&keyCraftAmount.set(JSON.parse(localStorage.getItem("keyCraftAmount"))),localStorage.getItem("keyCraftMastery")&&keyCraftMastery.set(JSON.parse(localStorage.getItem("keyCraftMastery"))),localStorage.getItem("startOfGame")&&startOfGame.set(JSON.parse(localStorage.getItem("startOfGame"))),localStorage.getItem("settings")&&settings.set(JSON.parse(localStorage.getItem("settings"))),localStorage.getItem("antiFlickerFlags")&&antiFlickerFlags.set(JSON.parse(localStorage.getItem("antiFlickerFlags"))),localStorage.getItem("saveVersion")&&saveVersion.set(JSON.parse(localStorage.getItem("saveVersion"))),localStorage.getItem("automationItemsUnlocked")&&automationItemsUnlocked.set(JSON.parse(localStorage.getItem("automationItemsUnlocked"))),w.spellcaster&&set_store_value(enchantThreshold,ne.t1=90,ne),w["spellcaster ii"]&&set_store_value(enchantThreshold,ne.t1=81,ne),localStorage.getItem("activityLogShow")&&activityLogShow.set(JSON.parse(localStorage.getItem("activityLogShow"))),localStorage.getItem("challengeActive")&&challengeActive.set(JSON.parse(localStorage.getItem("challengeActive"))),localStorage.getItem("challengesCompleted")&&challengesCompleted.set(JSON.parse(localStorage.getItem("challengesCompleted"))),localStorage.getItem("beaconSmartSplits")&&beaconSmartSplits.set(JSON.parse(localStorage.getItem("beaconSmartSplits"))),localStorage.getItem("challenge3Multi")&&challenge3Multi.set(JSON.parse(localStorage.getItem("challenge3Multi"))),await Xe(),miningDropTable.updateTable(),K.beaconPower<0&&set_store_value(resources,K.beaconPower=0,K),console.log(Y),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable(),challengeGoals.updateChallengeReqs(),_(8,xe=!0),console.log(A),!0}};function Xe(){console.log(v);const se=v,Oe=23;if(se<=0&&(set_store_value(keyUpgradeLevels,T[0]=0,T),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),isNaN(k.slurry)&&set_store_value(wallet,k.slurry=0,k)),se<=1){E[6]>1&&set_store_value(miningUpgradeLevels,E[6]=1,E);for(let j in J)isNaN(J[j])&&set_store_value(beaconActivations,J[j]=0,J)}if(se<=2&&set_store_value(keyCraftTimes,F.energizedCrystal=[-1,-1],F),se<=3&&(set_store_value(miningUpgradeLevelsBought,S=Array(200).fill(0),S),set_store_value(miningUpgradeLevelsFree,C=Array(200).fill(0),C)),se<=4&&(set_store_value(keyCraftMastery,L.energizedCrystal=[1,0,3],L),localStorage.clear("miningUpgradeLevelsBought"),localStorage.clear("miningUpgradeLevelsFree")),se<=9){set_store_value(buttonUpgradeLevels,x=Array(200).fill(0),x);for(let j in x)U[j]&&(x[j]>U[j].maxLevel&&set_store_value(buttonUpgradeLevels,x[j]=U[j].maxLevel,x),x[j]||set_store_value(buttonUpgradeLevels,x[j]=0,x))}if(se<=10&&k.crystals>1e25&&set_store_value(wallet,k.crystals=1e6,k),se<13&&(set_store_value(keyCraftAmount,D.energizedCrystal=0,D),set_store_value(keyCraftMastery,L={energizedCrystal:[1,0,3],key3:[1,0,10],key4:[1,0,10],key5:[1,0,10],beacons:[1,0,10]},L)),se<14){for(let j=2;j<P.length;j++)set_store_value(activityLogShow,A[P[j].name.toLowerCase()]=!0,A);set_store_value(activityLogShow,A.crafting=!0,A),set_store_value(activityLogShow,A.mythical=!0,A),set_store_value(activityLogShow,A.challenges=!0,A)}if(se<16&&(set_store_value(miningUpgradeLevels,E[6]=0,E),set_store_value(miningUpgradeLevelsBought,S[6]=0,S),set_store_value(miningUpgradeLevels,E[9]=0,E),set_store_value(miningUpgradeLevelsBought,S[9]=0,S),set_store_value(visibleTier,M=1,M),E[6]>0&&set_store_value(visibleTier,M=2,M),E[9]>0&&set_store_value(visibleTier,M=3,M)),se<17){for(let j in N)(N[j]==1/0||isNaN(N[j]))&&set_store_value(keysOpened,N[j]=0,N);(isNaN(k.key1)||k.key1==1/0)&&set_store_value(wallet,k.key1=0,k),(isNaN(k.key2)||k.key2==1/0)&&set_store_value(wallet,k.key2=0,k),(isNaN(k.key3)||k.key3==1/0)&&set_store_value(wallet,k.key3=0,k),(isNaN(k.key4)||k.key4==1/0)&&set_store_value(wallet,k.key4=0,k),(isNaN(k.key5)||k.key5==1/0)&&set_store_value(wallet,k.key5=0,k);for(let j=0;j<200;j++)S[j]||set_store_value(miningUpgradeLevelsBought,S[j]=0,S),E[j]||set_store_value(miningUpgradeLevels,E[j]=0,E)}se<19&&(I.offlineProgress||set_store_value(settings,I.offlineProgress=!0,I)),se<21&&w["money piles"]&&set_store_value(wallet,k.trophies+=20,k),se<23&&(set_store_value(wallet,k.emagic=k.goldenSigils?k.goldenSigils:void 0,k),set_store_value(wallet,k.goldenSigils=void 0,k)),set_store_value(saveVersion,v=Oe,v),Ze()}async function Le(){await et(),setTimeout(()=>{miningDropTable.updateTable()},250)}let Re;onMount(()=>{Le(),setInterval(()=>{Ze()},AUTOSAVE_INTERVAL),setInterval(()=>{_(11,y=formula.getMineXPPerCycle())},1063),setInterval(()=>{for(let se of ref.tabs)We[se]&&We[se]();b.relocateNavBack&&(_(4,me="mining"),set_store_value(flags,b.relocateNavBack=!1,b)),_(10,Re=!Re)},1163)});const Qe=()=>Be(),Ge=()=>Ze(),Ke=()=>et(!0),Ue=()=>Ze(!0),_t=()=>be(),fe=()=>Ve(),De=()=>Te("help"),we=()=>Te("settings"),Ce=()=>$e(),kt=se=>Te(se);return l.$$.update=()=>{l.$$.dirty[0]&2&&_(13,m=Math.min(1,O.xp/O.xpNextReq)*100),l.$$.dirty[0]&13&&_(12,g=k.challengePoints/ce[B-1]*100)},_(11,y=formula.getMineXPPerCycle()),[k,O,B,ce,me,ke,Se,Ne,xe,Pe,Re,y,g,m,b,I,Z,ae,Be,Te,be,Ve,He,We,Ze,$e,et,Qe,Ge,Ke,Ue,_t,fe,De,we,Ce,kt]}class Page extends SvelteComponent{constructor(d){super(),init(this,d,instance,create_fragment,safe_not_equal,{},null,[-1,-1,-1,-1])}}export{Page as component};
