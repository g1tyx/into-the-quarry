var ta=Object.defineProperty;var aa=(l,d,_)=>d in l?ta(l,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):l[d]=_;var tt=(l,d,_)=>(aa(l,typeof d!="symbol"?d+"":d,_),_);import{J as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,e as empty,b as insert_hydration,H as noop,h as detach,I as component_subscribe,o as onMount,K as onDestroy,L as set_store_value,k as element,a as space,q as text,l as claim_element,m as children,c as claim_space,r as claim_text,n as attr,G as append_hydration,M as listen,u as set_data,N as destroy_each,O as run_all,P as set_input_value,g as transition_in,v as group_outros,f as check_outros,d as transition_out,y as create_component,z as claim_component,A as mount_component,B as destroy_component,p as set_style,Q as null_to_empty,R as prevent_default}from"../chunks/index.0fe73fbc.js";import{w as writable}from"../chunks/index.f47e400d.js";function getDefaultExportFromCjs(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var padEnd=function(l,d,_){if(l==null||d==null)return l;var m=String(l),y=typeof d=="number"?d:parseInt(d,10);if(isNaN(y)||!isFinite(y))return m;var g=m.length;if(g>=y)return m;var b=_==null?"":String(_);b===""&&(b=" ");for(var v=y-g;b.length<v;)b+=b;var w=b.length>v?b.substr(0,v):b;return m+w};const t=getDefaultExportFromCjs(padEnd);var n=9e15,e=function(){for(var l=[],d=-323;d<=308;d++)l.push(+("1e"+d));return function(_){return l[_+323]}}(),r=function(l){return l instanceof a?l:new a(l)},i=function(l,d){return new a().fromMantissaExponent(l,d)},o=function(l,d){return new a().fromMantissaExponent_noNormalize(l,d)};function u(l,d,_,m){var y=d.mul(_.pow(m));return a.floor(l.div(y).mul(_.sub(1)).add(1).log10()/_.log10())}function s(l,d,_,m){return d.mul(_.pow(m)).mul(a.sub(1,_.pow(l))).div(a.sub(1,_))}var a=function(){function l(d){this.mantissa=NaN,this.exponent=NaN,d===void 0?(this.m=0,this.e=0):d instanceof l?this.fromDecimal(d):typeof d=="number"?this.fromNumber(d):this.fromString(d)}return Object.defineProperty(l.prototype,"m",{get:function(){return this.mantissa},set:function(d){this.mantissa=d},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"e",{get:function(){return this.exponent},set:function(d){this.exponent=d},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"s",{get:function(){return this.sign()},set:function(d){if(d===0)return this.e=0,void(this.m=0);this.sgn()!==d&&(this.m=-this.m)},enumerable:!1,configurable:!0}),l.fromMantissaExponent=function(d,_){return new l().fromMantissaExponent(d,_)},l.fromMantissaExponent_noNormalize=function(d,_){return new l().fromMantissaExponent_noNormalize(d,_)},l.fromDecimal=function(d){return new l().fromDecimal(d)},l.fromNumber=function(d){return new l().fromNumber(d)},l.fromString=function(d){return new l().fromString(d)},l.fromValue=function(d){return new l().fromValue(d)},l.fromValue_noAlloc=function(d){return d instanceof l?d:new l(d)},l.abs=function(d){return r(d).abs()},l.neg=function(d){return r(d).neg()},l.negate=function(d){return r(d).neg()},l.negated=function(d){return r(d).neg()},l.sign=function(d){return r(d).sign()},l.sgn=function(d){return r(d).sign()},l.round=function(d){return r(d).round()},l.floor=function(d){return r(d).floor()},l.ceil=function(d){return r(d).ceil()},l.trunc=function(d){return r(d).trunc()},l.add=function(d,_){return r(d).add(_)},l.plus=function(d,_){return r(d).add(_)},l.sub=function(d,_){return r(d).sub(_)},l.subtract=function(d,_){return r(d).sub(_)},l.minus=function(d,_){return r(d).sub(_)},l.mul=function(d,_){return r(d).mul(_)},l.multiply=function(d,_){return r(d).mul(_)},l.times=function(d,_){return r(d).mul(_)},l.div=function(d,_){return r(d).div(_)},l.divide=function(d,_){return r(d).div(_)},l.recip=function(d){return r(d).recip()},l.reciprocal=function(d){return r(d).recip()},l.reciprocate=function(d){return r(d).reciprocate()},l.cmp=function(d,_){return r(d).cmp(_)},l.compare=function(d,_){return r(d).cmp(_)},l.eq=function(d,_){return r(d).eq(_)},l.equals=function(d,_){return r(d).eq(_)},l.neq=function(d,_){return r(d).neq(_)},l.notEquals=function(d,_){return r(d).notEquals(_)},l.lt=function(d,_){return r(d).lt(_)},l.lte=function(d,_){return r(d).lte(_)},l.gt=function(d,_){return r(d).gt(_)},l.gte=function(d,_){return r(d).gte(_)},l.max=function(d,_){return r(d).max(_)},l.min=function(d,_){return r(d).min(_)},l.clamp=function(d,_,m){return r(d).clamp(_,m)},l.clampMin=function(d,_){return r(d).clampMin(_)},l.clampMax=function(d,_){return r(d).clampMax(_)},l.cmp_tolerance=function(d,_,m){return r(d).cmp_tolerance(_,m)},l.compare_tolerance=function(d,_,m){return r(d).cmp_tolerance(_,m)},l.eq_tolerance=function(d,_,m){return r(d).eq_tolerance(_,m)},l.equals_tolerance=function(d,_,m){return r(d).eq_tolerance(_,m)},l.neq_tolerance=function(d,_,m){return r(d).neq_tolerance(_,m)},l.notEquals_tolerance=function(d,_,m){return r(d).notEquals_tolerance(_,m)},l.lt_tolerance=function(d,_,m){return r(d).lt_tolerance(_,m)},l.lte_tolerance=function(d,_,m){return r(d).lte_tolerance(_,m)},l.gt_tolerance=function(d,_,m){return r(d).gt_tolerance(_,m)},l.gte_tolerance=function(d,_,m){return r(d).gte_tolerance(_,m)},l.log10=function(d){return r(d).log10()},l.absLog10=function(d){return r(d).absLog10()},l.pLog10=function(d){return r(d).pLog10()},l.log=function(d,_){return r(d).log(_)},l.log2=function(d){return r(d).log2()},l.ln=function(d){return r(d).ln()},l.logarithm=function(d,_){return r(d).logarithm(_)},l.pow10=function(d){return Number.isInteger(d)?o(1,d):i(Math.pow(10,d%1),Math.trunc(d))},l.pow=function(d,_){return typeof d=="number"&&d===10&&typeof _=="number"&&Number.isInteger(_)?o(1,_):r(d).pow(_)},l.exp=function(d){return r(d).exp()},l.sqr=function(d){return r(d).sqr()},l.sqrt=function(d){return r(d).sqrt()},l.cube=function(d){return r(d).cube()},l.cbrt=function(d){return r(d).cbrt()},l.dp=function(d){return r(d).dp()},l.decimalPlaces=function(d){return r(d).dp()},l.affordGeometricSeries=function(d,_,m,y){return u(r(d),r(_),r(m),y)},l.sumGeometricSeries=function(d,_,m,y){return s(d,r(_),r(m),y)},l.affordArithmeticSeries=function(d,_,m,y){return function(g,b,v,w){var k=b.add(w.mul(v)).sub(v.div(2)),I=k.pow(2);return k.neg().add(I.add(v.mul(g).mul(2)).sqrt()).div(v).floor()}(r(d),r(_),r(m),r(y))},l.sumArithmeticSeries=function(d,_,m,y){return function(g,b,v,w){var k=b.add(w.mul(v));return g.div(2).mul(k.mul(2).plus(g.sub(1).mul(v)))}(r(d),r(_),r(m),r(y))},l.efficiencyOfPurchase=function(d,_,m){return function(y,g,b){return y.div(g).add(y.div(b))}(r(d),r(_),r(m))},l.randomDecimalForTesting=function(d){if(20*Math.random()<1)return o(0,0);var _=10*Math.random();10*Math.random()<1&&(_=Math.round(_)),_*=Math.sign(2*Math.random()-1);var m=Math.floor(Math.random()*d*2)-d;return i(_,m)},l.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var d=Math.floor(Math.log10(Math.abs(this.m)));return this.m=d===-324?10*this.m/1e-323:this.m/e(d),this.e+=d,this},l.prototype.fromMantissaExponent=function(d,_){return isFinite(d)&&isFinite(_)?(this.m=d,this.e=_,this.normalize(),this):(d=Number.NaN,_=Number.NaN,this)},l.prototype.fromMantissaExponent_noNormalize=function(d,_){return this.m=d,this.e=_,this},l.prototype.fromDecimal=function(d){return this.m=d.m,this.e=d.e,this},l.prototype.fromNumber=function(d){return isNaN(d)?(this.m=Number.NaN,this.e=Number.NaN):d===Number.POSITIVE_INFINITY?(this.m=1,this.e=n):d===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=n):d===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(d))),this.m=this.e===-324?10*d/1e-323:d/e(this.e),this.normalize()),this},l.prototype.fromString=function(d){if(d.indexOf("e")!==-1){var _=d.split("e");this.m=parseFloat(_[0]),this.e=parseFloat(_[1]),this.normalize()}else if(d==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(d)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+d);return this},l.prototype.fromValue=function(d){return d instanceof l?this.fromDecimal(d):typeof d=="number"?this.fromNumber(d):typeof d=="string"?this.fromString(d):(this.m=0,this.e=0,this)},l.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var d=this.m*e(this.e);if(!isFinite(d)||this.e<0)return d;var _=Math.round(d);return Math.abs(_-d)<1e-10?_:d},l.prototype.mantissaWithDecimalPlaces=function(d){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var _=d+1,m=Math.ceil(Math.log10(Math.abs(this.m))),y=Math.round(this.m*Math.pow(10,_-m))*Math.pow(10,m-_);return parseFloat(y.toFixed(Math.max(_-m,0)))},l.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=n?this.m>0?"Infinity":"-Infinity":this.e<=-n||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},l.prototype.toExponential=function(d){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=n)return this.m>0?"Infinity":"-Infinity";if(this.e<=-n||this.m===0)return"0"+(d>0?t(".",d+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(d);isFinite(d)||(d=17);var _=d+1,m=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,_-m))*Math.pow(10,m-_)).toFixed(Math.max(_-m,0))+"e"+(this.e>=0?"+":"")+this.e},l.prototype.toFixed=function(d){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=n?this.m>0?"Infinity":"-Infinity":this.e<=-n||this.m===0?"0"+(d>0?t(".",d+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(d>0?t(".",d+1,"0"):""):this.toNumber().toFixed(d)},l.prototype.toPrecision=function(d){return this.e<=-7?this.toExponential(d-1):d>this.e?this.toFixed(d-this.e-1):this.toExponential(d-1)},l.prototype.valueOf=function(){return this.toString()},l.prototype.toJSON=function(){return this.toString()},l.prototype.toStringWithDecimalPlaces=function(d){return this.toExponential(d)},l.prototype.abs=function(){return o(Math.abs(this.m),this.e)},l.prototype.neg=function(){return o(-this.m,this.e)},l.prototype.negate=function(){return this.neg()},l.prototype.negated=function(){return this.neg()},l.prototype.sign=function(){return Math.sign(this.m)},l.prototype.sgn=function(){return this.sign()},l.prototype.round=function(){return this.e<-1?new l(0):this.e<17?new l(Math.round(this.toNumber())):this},l.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new l(0):new l(-1):this.e<17?new l(Math.floor(this.toNumber())):this},l.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new l(1):new l(0):this.e<17?new l(Math.ceil(this.toNumber())):this},l.prototype.trunc=function(){return this.e<0?new l(0):this.e<17?new l(Math.trunc(this.toNumber())):this},l.prototype.add=function(d){var _,m,y=r(d);if(this.m===0)return y;if(y.m===0)return this;if(this.e>=y.e?(_=this,m=y):(_=y,m=this),_.e-m.e>17)return _;var g=Math.round(1e14*_.m+1e14*m.m*e(m.e-_.e));return i(g,_.e-14)},l.prototype.plus=function(d){return this.add(d)},l.prototype.sub=function(d){return this.add(r(d).neg())},l.prototype.subtract=function(d){return this.sub(d)},l.prototype.minus=function(d){return this.sub(d)},l.prototype.mul=function(d){if(typeof d=="number")return d<1e307&&d>-1e307?i(this.m*d,this.e):i(1e-307*this.m*d,this.e+307);var _=typeof d=="string"?new l(d):d;return i(this.m*_.m,this.e+_.e)},l.prototype.multiply=function(d){return this.mul(d)},l.prototype.times=function(d){return this.mul(d)},l.prototype.div=function(d){return this.mul(r(d).recip())},l.prototype.divide=function(d){return this.div(d)},l.prototype.divideBy=function(d){return this.div(d)},l.prototype.dividedBy=function(d){return this.div(d)},l.prototype.recip=function(){return i(1/this.m,-this.e)},l.prototype.reciprocal=function(){return this.recip()},l.prototype.reciprocate=function(){return this.recip()},l.prototype.cmp=function(d){var _=r(d);if(this.m===0){if(_.m===0)return 0;if(_.m<0)return 1;if(_.m>0)return-1}if(_.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return _.m<0||this.e>_.e?1:this.e<_.e?-1:this.m>_.m?1:this.m<_.m?-1:0;if(this.m<0)return _.m>0||this.e>_.e?-1:this.e<_.e||this.m>_.m?1:this.m<_.m?-1:0;throw Error("Unreachable code")},l.prototype.compare=function(d){return this.cmp(d)},l.prototype.eq=function(d){var _=r(d);return this.e===_.e&&this.m===_.m},l.prototype.equals=function(d){return this.eq(d)},l.prototype.neq=function(d){return!this.eq(d)},l.prototype.notEquals=function(d){return this.neq(d)},l.prototype.lt=function(d){var _=r(d);return this.m===0?_.m>0:_.m===0?this.m<=0:this.e===_.e?this.m<_.m:this.m>0?_.m>0&&this.e<_.e:_.m>0||this.e>_.e},l.prototype.lte=function(d){return!this.gt(d)},l.prototype.gt=function(d){var _=r(d);return this.m===0?_.m<0:_.m===0?this.m>0:this.e===_.e?this.m>_.m:this.m>0?_.m<0||this.e>_.e:_.m<0&&this.e<_.e},l.prototype.gte=function(d){return!this.lt(d)},l.prototype.max=function(d){var _=r(d);return this.lt(_)?_:this},l.prototype.min=function(d){var _=r(d);return this.gt(_)?_:this},l.prototype.clamp=function(d,_){return this.max(d).min(_)},l.prototype.clampMin=function(d){return this.max(d)},l.prototype.clampMax=function(d){return this.min(d)},l.prototype.cmp_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)?0:this.cmp(m)},l.prototype.compare_tolerance=function(d,_){return this.cmp_tolerance(d,_)},l.prototype.eq_tolerance=function(d,_){var m=r(d);return l.lte(this.sub(m).abs(),l.max(this.abs(),m.abs()).mul(_))},l.prototype.equals_tolerance=function(d,_){return this.eq_tolerance(d,_)},l.prototype.neq_tolerance=function(d,_){return!this.eq_tolerance(d,_)},l.prototype.notEquals_tolerance=function(d,_){return this.neq_tolerance(d,_)},l.prototype.lt_tolerance=function(d,_){var m=r(d);return!this.eq_tolerance(m,_)&&this.lt(m)},l.prototype.lte_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)||this.lt(m)},l.prototype.gt_tolerance=function(d,_){var m=r(d);return!this.eq_tolerance(m,_)&&this.gt(m)},l.prototype.gte_tolerance=function(d,_){var m=r(d);return this.eq_tolerance(m,_)||this.gt(m)},l.prototype.log10=function(){return this.e+Math.log10(this.m)},l.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},l.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},l.prototype.log=function(d){return Math.LN10/Math.log(d)*this.log10()},l.prototype.log2=function(){return 3.321928094887362*this.log10()},l.prototype.ln=function(){return 2.302585092994045*this.log10()},l.prototype.logarithm=function(d){return this.log(d)},l.prototype.pow=function(d){var _,m=d instanceof l?d.toNumber():d,y=this.e*m;if(Number.isSafeInteger(y)&&(_=Math.pow(this.m,m),isFinite(_)&&_!==0))return i(_,y);var g=Math.trunc(y),b=y-g;if(_=Math.pow(10,m*Math.log10(this.m)+b),isFinite(_)&&_!==0)return i(_,g);var v=l.pow10(m*this.absLog10());return this.sign()===-1?Math.abs(m%2)===1?v.neg():Math.abs(m%2)===0?v:new l(Number.NaN):v},l.prototype.pow_base=function(d){return r(d).pow(this)},l.prototype.factorial=function(){var d=this.toNumber()+1;return l.pow(d/Math.E*Math.sqrt(d*Math.sinh(1/d)+1/(810*Math.pow(d,6))),d).mul(Math.sqrt(2*Math.PI/d))},l.prototype.exp=function(){var d=this.toNumber();return-706<d&&d<709?l.fromNumber(Math.exp(d)):l.pow(Math.E,d)},l.prototype.sqr=function(){return i(Math.pow(this.m,2),2*this.e)},l.prototype.sqrt=function(){return this.m<0?new l(Number.NaN):this.e%2!=0?i(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):i(Math.sqrt(this.m),Math.floor(this.e/2))},l.prototype.cube=function(){return i(Math.pow(this.m,3),3*this.e)},l.prototype.cbrt=function(){var d=1,_=this.m;_<0&&(d=-1,_=-_);var m=d*Math.pow(_,1/3),y=this.e%3;return i(y===1||y===-1?2.154434690031883*m:y!==0?4.641588833612778*m:m,Math.floor(this.e/3))},l.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},l.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},l.prototype.tanh=function(){return this.sinh().div(this.cosh())},l.prototype.asinh=function(){return l.ln(this.add(this.sqr().add(1).sqrt()))},l.prototype.acosh=function(){return l.ln(this.add(this.sqr().sub(1).sqrt()))},l.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:l.ln(this.add(1).div(new l(1).sub(this)))/2},l.prototype.ascensionPenalty=function(d){return d===0?this:this.pow(Math.pow(10,-d))},l.prototype.egg=function(){return this.add(9)},l.prototype.lessThanOrEqualTo=function(d){return this.cmp(d)<1},l.prototype.lessThan=function(d){return this.cmp(d)<0},l.prototype.greaterThanOrEqualTo=function(d){return this.cmp(d)>-1},l.prototype.greaterThan=function(d){return this.cmp(d)>0},l.prototype.decimalPlaces=function(){return this.dp()},l.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var d=this.mantissa,_=-this.exponent,m=1;Math.abs(Math.round(d*m)/m-d)>1e-10;)m*=10,_++;return _>0?_:0},Object.defineProperty(l,"MAX_VALUE",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(l,"MIN_VALUE",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(l,"NUMBER_MAX_VALUE",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(l,"NUMBER_MIN_VALUE",{get:function(){return f},enumerable:!1,configurable:!0}),l}(),h=o(1,n),c=o(1,-n),p=r(Number.MAX_VALUE),f=r(Number.MIN_VALUE);class ref{}tt(ref,"colors",{default:"#ffffff",gems:"text-red-500",gold:"text-yellow-500",orbs:"text-neutral-400",key1:"text-green-400",key2:"text-blue-400",key3:"text-pink-400",key4:"text-violet-400",key5:"text-amber-400",beacons:"text-sky-400",beaconPower:"text-cyan-300",fame:"text-orange-400",crystals:"text-indigo-300",sigils:"text-fuchsia-600",slurry:"text-teal-400",artifacts:"text-slate-200"}),tt(ref,"displayNames",{key1:"[*] key",key2:"[**] key",key3:"[***] key",key4:"[****] key",key5:"[*****] key",beaconPower:"Beacon Power"}),tt(ref,"walletExclude",{totalFame:!0,energizedCrystal:!0}),tt(ref,"dropTiers",{default:1,gems:0,gold:1,key1:1,orbs:2,beacons:2,key2:3,key3:3,slurry:3,sigils:3,fame:3,artifacts:4}),tt(ref,"keyMainNames",{1:"T1 [*]",2:"T2 [**]",3:"T3 [***]",4:"T4 [****]",5:"T5 [*****]"}),tt(ref,"dropTierColors",{0:"text-white",1:"text-white",2:"text-green-200",3:"text-blue-300"}),tt(ref,"tabs",["mining","keys","beacons","button","relocate","enchants","automation","challenges","ascension","mastery"]),tt(ref,"tabNotUnlockedText",{beacons:"Find a beacon while mining to unlock.",sigils:"Find a sigil while mining to unlock.",relocate:"Use 1,000 total keys to unlock.",enchants:"Relocate and gain at least 100 fame to unlock.",automation:"Relocate and gain at least 1 fame to unlock.",challenges:"Buy challenges with fame to unlock.",artifacts:"Find an artifact with a T3 [***] or higher key to unlock.",mastery:"Reach level 10,000 on any mining upgrade to unlock.",ascension:"Have at least 1e25 fame and 10,000 challenge points to unlock.",button:"Reach Mining Level 8 to unlock."}),tt(ref,"miningUpgradeSortOrder",{haste:1,efficiency:2,fortune:3,shiny:4,"[*] key finder":5,"lootmaster i":6,"[**] key finder":7,"lootmaster ii":8,"[***] key finder":9,"lootmaster iii":10,"key mastery":11,legendary:12,"efficiency ii":13,"legendary ii":14,"efficiency iii":15,"legendary iii":16,expansive:17,clockwork:18,reflectors:19,mythical:20,overload:21,lockpicks:22,hardened:23,default:1e300});function single$3(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(b=>g?b-y:Math.max(b,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function array$6(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(b=>g?b-y:Math.max(b,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}const beaconBonuses=array$6(Array(30).fill(1)),beaconNameText=array$6(["Beacon Power Multiplier","Mine Speed Multiplier","Droprate Multiplier I","Gem Bonus","Fame Bonus","Key Finder Speed","Crafting Yield"].concat(Array(26).fill(""))),beaconMiningLevelReqs=array$6([0,0,0,12,14,16,24,27,36,40]),beaconFormulas=array$6([function(l){return 1+Math.pow(l,.65)*.01},function(l){return 1+3.125*(l/(l+4e4))},function(l){return 1+Math.pow(l,.8)*.003},function(l){return 1+Math.pow(l,.9)*.02},function(l){return 1+Math.pow(l,.5)*.02},function(l){return 1+Math.pow(l,.5)*.05},function(l){return 1+Math.pow(l,1.2)*25e-6}].concat(Array(25).fill(function(l){return 1}))),beaconNextReqs=array$6(Array(3).fill(700).concat(Array(3).fill(5e7)).concat(Array(2).fill(1e11).concat(Array(2).fill(1e17)))),baseBeaconNextReqs=array$6(Array(3).fill(700).concat(Array(3).fill(5e7)).concat(Array(2).fill(1e11).concat(Array(2).fill(1e17)))),beaconNums=array$6(Array(3).fill([700,1.0005]).concat(Array(3).fill([5e7,1.0005]).concat(Array(2).fill([1e11,1.0005]).concat(Array(2).fill([1e17,1.0005]))))),beaconMaxLevels=array$6(Array(10).fill(1e6)),beaconSpendAmt=single$3(1),beaconPowerFlavorText=single$3(1),beaconUpgrades=array$6([{name:"Supercharged",description:"Increases all beacon path progress.",cost:{beaconPower:5e3},ratio:1.33,formula:l=>1+.25*l,mineLevelReq:0,isPercent:!0,prefix:"+",maxLevel:300,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{name:"Shining Light",description:"Each level in a beacon path gives beacons.",cost:{beaconPower:1e5},ratio:2.5,formula:l=>.025*l,mineLevelReq:6,isPercent:!1,prefix:"+",suffix:" beacons per level",maxLevel:100,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{name:"Ramping Power",description:"Unspent beacon power boosts beacon path progress. Upgrades multiply this amount.",cost:{beaconPower:25e5},ratio:4,formula:l=>l===0?1:1+Math.log((l+1)*get_store_value(resources).beaconPower/1e3+1)/Math.log(5),mineLevelReq:12,isPercent:!0,suffix:" bonus",maxLevel:10,notes:""}]);function array$5(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(b=>g?b-y:Math.max(b,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function object$3(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>(g=y,g))},setItem(y,g){m(b=>(b[y.toString().toLowerCase()]=g,b))},add(y,g){m(b=>(b[y.toString().toLowerCase()]+=g,b))},sub(y,g,b=!1){m(v=>(b?v[y]-=g:v[y.toString().toLowerCase()]=Math.max(v[y],0),v))},multiply(y,g){m(b=>(b[y.toString().toLowerCase()]*=g,b))},divide(y,g){m(b=>(b[y.toString().toLowerCase()]/=g,b))}}}function dropTable$1(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y,g){m(b=>(b[y]=g,b))},add(y,g){m(b=>(b[y]+=g,b))},sub(y,g,b=!1){m(v=>(b?v[y]-=g:v[y]=Math.max(v[y],0),v))},multiply(y,g){m(b=>(b[y]*=g,b))},divide(y,g){m(b=>(b[y]/=g,b))},updateTable(){m(y=>{for(let[g,b]of Object.entries(y))g!="tier"&&(y[g]=[Math.min(g.toString().includes("key"+y.tier)?1/b[2]:g.toString().includes("key")?.33333333:1,b[3]*get_store_value(keyUpgrades)[0].formula(get_store_value(keyUpgradeLevels)[0])),b[1],b[2],b[3]]);return y})}}}const key1DropTable=dropTable$1({tier:1,gems:[.6,10,200,.6],orbs:[.4,1,5,.4],key1:[.1,1,3,.1],key2:[.001,1,1,.002]}),key2DropTable=dropTable$1({tier:2,gems:[.25,1e3,1e4,.25],orbs:[.15,150,750,.15],key1:[.15,3,10,.15],beacons:[.15,5,15,.15],key2:[.02,1,1,.05],sigils:[.01,1,2,.01],key3:[1/6e4,1,1,1/6e4]}),key3DropTable=dropTable$1({tier:3,gems:[.125,1e8,1e9,.125],gold:[.075,1e6,5e6,.075],crystals:[.06,1e3,1e4,.06],orbs:[.06,1500,4500,.06],key1:[.06,150,5e3,.06],key2:[.04,1,10,.04],beacons:[.04,1e3,3500,.04],sigils:[.025,10,75,.025],key3:[.001,1,1,.001],artifacts:[11e-6,1,1,11e-6],key4:[1/4e6,1,1,1/4e6]}),key4DropTable=dropTable$1({}),key5DropTable=dropTable$1({}),keyRewardText=object$3(""),keyGainFlavorText=object$3({});array$5(Array(20).fill(0));const keyUpgrades=array$5([{index:0,name:"Mysterious Potion",description:"Concoct a potion that improves key rates for ALL keys.",cost:{slurry:1e5,fame:1e5,sigils:1e3},ratio:1.3,formula:l=>1+.25*Math.pow(l,.9),unlockAt:()=>get_store_value(wallet).slurry>0,isPercent:!1,suffix:"x droprates",maxLevel:100,notes:""},{index:1,name:"Refinery",description:"Increases slurry gain.",cost:{sigils:500},ratio:1.3,formula:l=>1+.2*l,unlockAt:()=>get_store_value(wallet).sigils>=100&&get_store_value(wallet).slurry>0,isPercent:!1,suffix:"x slurry",maxLevel:400,notes:""},{index:2,name:"Rift Control",description:"Decreases the cost ratio for energized crystals.",cost:{sigils:5e5,artifacts:15},ratio:1.3,formula:l=>4-.063*Math.pow(l,.6),unlockAt:()=>get_store_value(wallet).sigils>=1e4,isPercent:!1,suffix:" cost ratio",maxLevel:100,notes:""}]),keyCrafts=array$5([{item:"energizedCrystal",name:"Energized Crystal",style:"text-emerald-300",stylebg:"bg-emerald-300",cost:{crystals:1e3},craftTime:30,baseAmount:1,ratio:3,unlockAt:()=>get_store_value(wallet).crystals>0},{item:"beacons",name:"Beacons",style:"text-sky-400",stylebg:"bg-sky-400",cost:{slurry:1e3,sigils:1},craftTime:60,baseAmount:100,ratio:1.025,unlockAt:()=>get_store_value(wallet).beacons>0},{item:"key3",name:"[***] Key",style:"text-pink-400",stylebg:"bg-pink-400",cost:{slurry:1e4,sigils:10},craftTime:240,baseAmount:1,ratio:1.04,unlockAt:()=>get_store_value(wallet).key3>0||get_store_value(keysOpened)[2]>0},{item:"key4",name:"[****] Key",style:"text-violet-400",stylebg:"bg-violet-400",cost:{slurry:1e7,sigils:100},craftTime:7200,baseAmount:1,ratio:1.05,unlockAt:()=>get_store_value(wallet).key4>0||get_store_value(keysOpened)[3]>0},{item:"key5",name:"[*****] Key",style:"text-amber-400",stylebg:"bg-amber-400",cost:{slurry:1e11,sigils:1e5},craftTime:86400,baseAmount:1,ratio:1.06,unlockAt:()=>get_store_value(wallet).key5>0||get_store_value(keysOpened)[4]>0}]);class formula{static rNorm(d=0,_=1){const m=1-Math.random(),y=Math.random();return Math.sqrt(-2*Math.log(m))*Math.cos(2*Math.PI*y)*_+d}static rNormTest(){console.log("rNorm Bias Test started");const d=Array(400).fill(0),_=Array(400).fill(0),m=Array(5).fill(0);for(let y=0;y<_.length;y++){for(let g=0;g<d.length;g++){for(let b=0;b<m.length;b++)d[b]=this.rNorm();_[g]=formula.sumArray(d)/1e3}m[y]=formula.sumArray(_)/400}return formula.sumArray(m)/5}static gSum(d,_,m){return d*(1-Math.pow(_,m))/(1-_)}static maxNumGeom(d,_,m){return Math.floor(Math.log(d/_*(m-1)+1)/Math.log(m))}static calculateMaxBuy(d,_,m){const y=1+_/100;return(d*(Math.pow(y,m/d)-1)/(y-1)).toFixed(2)}static sumArray(d){return d.reduce((_,m)=>_+m,0)}static productArray(d){return d.reduce((_,m)=>_*m,1)}static calcFameGainKeys(d){const _=[1,1,1,1,1];for(let m=0;m<d.length;m++)d[m]<1||(d[m]<10?_[m]=1.25+d[m]*.075:d[m]<1e4?_[m]=2+d[m]*(m+1)**2/5e3:_[m]=2+2*(m+1)**2+Math.pow((m+1)*((d[m]-1e4)/1e3),.4));return _}static calcFameGemMulti(d){return d>1e20?20+Math.pow(Math.log10(d-50),2.5):Math.log10(d+1)}static calcFameBeaconMulti(d){return d>1e6?11+Math.pow((d-1e6)/1e6,.75):d>150?1+(d-150)/1e5:d/150}static calcFameTimeMultiplier(d){if(get_store_value(buttonUpgradeLevels)[6]<1)return 1;const _=(Date.now()-d)/1e3;return 1+9*Math.pow(_/86400,2)}static calcMineSize(d){return Math.pow(d+5,2)}static calcMineQuality(d){return 10+d}static calcButtonStreakBonus(d){return get_store_value(buttonUpgradeLevels)[1]<1?1:1+Math.pow(d,.7)/60}static calcHardenedGemBonus(d){return get_store_value(miningUpgradeLevels)[20]<1?1:(1+.1*get_store_value(miningUpgradeLevels)[20])*(Math.log(d.good+2)/Math.log(9)+Math.log(d.great+2)/Math.log(7)+Math.log(d.excellent+2)/Math.log(5)+Math.log(d.incredible+2)/Math.log(3)+Math.log(d.perfect+2)/Math.log(2))}static dispCalcHardenedGemBonus(d,_){return _<1?1:(1+.1*_)*(Math.log(d.good/40+2)/Math.log(9)+Math.log(d.great/25+2)/Math.log(7)+Math.log(d.excellent/20+2)/Math.log(5)+Math.log(d.incredible/15+2)/Math.log(3)+Math.log(d.perfect/10+2)/Math.log(2))}static calcKeySlurryGain(d){let _=(d.key1||0)/800+(d.key2||0)/200+(d.key3||0)/50+(d.key4||0)/12+(d.key5||0)/3;return isNaN(_)?(alert('note: this feature is bugged, please report this on Discord - reduced slurry gained (using "safe" formula)'),d.key1/800):_*get_store_value(keyUpgrades)[1].formula(get_store_value(keyUpgradeLevels)[1])}static calcKeyCraftAmountGained(d){return get_store_value(keyCrafts)[d].baseAmount*Math.pow(1.1,get_store_value(keyCraftMastery).energizedCrystal[0]-1)*get_store_value(beaconBonuses)[6]}}function single$2(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(b=>g)},add(g){m(b=>b+g)},sub(g,b=!1){m(v=>b?v-g:Math.max(v,0))},multiply(g){m(b=>b*g)},divide(g){m(b=>b/g)}}}function array$4(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(b=>g)},add(g){m(b=>b+g)},sub(g,b=!1){m(v=>b?v-g:Math.max(v,0))},multiply(g){m(b=>b*g)},divide(g){m(b=>b/g)}}}function object$2(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g,b){m(v=>(v[g]=b,v))},add(g,b){m(v=>(v[g]+=b,v))},sub(g,b,v=!1){m(w=>(v?w[g]-=b:w[g]=Math.max(w[g],0),w))},multiply(g,b){m(v=>(v[g]*=b,v))},divide(g,b){m(v=>(v[g]/=b,v))}}}const progressThreshold=object$2({gems:167,key1:2e3,key2:5e4,key3:39e4}),miningUpgrades=array$4([{index:0,name:"Haste",description:"Increases base mining speed.",cost:{gems:5},ratio:1.15,formula:l=>l>100?11+Math.pow((l-100)*.1,.75):l*.1+1,unlockAt:()=>get_store_value(wallet).gems>=1,suffix:"x speed",isPercent:!1,maxLevel:1e3,notes:"0.25*lv until 36, (lv-36)*0.025 until 916, sqrt(lv-916)*0.025 after"},{index:1,name:"Efficiency",description:"Increases gem yield. Improved after level 100.",cost:{gems:10},ratio:1.15,unlockAt:()=>get_store_value(wallet).gems>=3&&get_store_value(miningUpgradeLevels)[0]>=1,formula:l=>l*(1+.01*l)*(l>100?1+.03*(l-100):1),isPercent:!1,prefix:"+",suffix:" gems",maxLevel:1e3,notes:"(1 + floor(level/10)) * level^0.6"},{index:2,name:"Fortune",description:"Improves mining droprates for gold and [*] keys.",cost:{gold:10},ratio:1.3,unlockAt:()=>get_store_value(wallet).gems>30&&get_store_value(wallet).gold>5,formula:l=>1+l*.075,isPercent:!0,prefix:"+",maxLevel:300,notes:"(1 + floor(level/10)) * level^0.6"},{index:3,name:"[*] Key Finder",description:`While mining, you will occasionally find a bundle of T1 [*] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:15},ratio:1.5,unlockAt:()=>get_store_value(wallet).key1>=1,formula:l=>1+Math.max(0,Math.pow(l-1,.6)*.15),isPercent:!1,suffix:"x speed",maxLevel:300,notes:"(1 + floor(level/10)) * level^0.6"},{index:4,name:"[**] Key Finder",description:`While mining, you will occasionally find a bundle of T2 [**] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:3e4,beacons:200},ratio:1.5,unlockAt:()=>get_store_value(wallet).key2>=1,formula:l=>1+Math.pow(l,.5)*.15,isPercent:!1,suffix:"x speed",maxLevel:300,notes:""},{index:5,name:"Key Mastery",description:"Increases the number of keys found when a Key Finder of any rarity triggers.",cost:{orbs:1e3},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[3]>0,formula:l=>1+l*.1,isPercent:!1,suffix:"x keys",maxLevel:100,notes:""},{index:6,name:"Lootmaster I",description:"Unlocks a new tier of findable drops.",cost:{gold:400},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10,formula:l=>l,isPercent:!1,maxLevel:1,notes:""},{index:7,name:"Shiny",description:"Gold drops are significantly improved.",cost:{gems:1e3},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10,formula:l=>1+l*.25,isPercent:!1,suffix:"x gold from drops",maxLevel:300,notes:""},{index:8,name:"Efficiency II",description:"Increases gem yield again.",cost:{gems:2500},ratio:1.25,unlockAt:()=>get_store_value(miningUpgradeLevels)[0]>=10&&get_store_value(miningUpgradeLevels)[1]>=10,formula:l=>1+l*(.25+.002*l),isPercent:!0,prefix:"+",suffix:" gems",maxLevel:300,notes:""},{index:9,name:"Lootmaster II",description:"Unlocks a new tier of findable drops.",cost:{gems:2e7,gold:4e5},ratio:1.25,unlockAt:()=>get_store_value(wallet).fame>1&&get_store_value(miningUpgradeLevels)[6]>=.997,formula:l=>0,isPercent:!1,suffix:" (no bonus)",maxLevel:1,notes:""},{index:10,name:"Expansive",description:"Significantly improves gem gains. Improved after level 100.",cost:{fame:5},ratio:1.5,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>l>100?151+(l-100)*6:1+l*1.5,isPercent:!0,prefix:"+",isFame:!0,suffix:" gem bonus",maxLevel:1e3,style:"game-btn-fame",notes:"index 10"},{index:11,name:"Clockwork",description:"Significantly improves drop amounts (mining only).",cost:{fame:5},ratio:1.5,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>1+l*.3,isPercent:!1,isFame:!0,suffix:"x amount from drops",maxLevel:1e3,style:"game-btn-fame",notes:""},{index:12,name:"Reflectors",description:"Significantly improves beacon path progress.",cost:{fame:10},ratio:1.5,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>1+l,isPercent:!0,prefix:"+",suffix:" beacon progress",isFame:!0,maxLevel:100,style:"game-btn-fame",notes:"index 10"},{index:13,name:"Mythical",description:"Gain a small chance to gain 1 fame per mining cycle.",cost:{fame:100},ratio:1.3,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>l==0?1:1+l**2*1e-5,isPercent:!0,isFame:!0,suffix:" chance for fame gain",maxLevel:100,style:"game-btn-fame",notes:""},{index:14,name:"Lootmaster III",description:"Unlocks a new tier of findable drops.",cost:{gems:1e19,gold:1e11,crystals:1e7,fame:1e7,beacons:1e6,sigils:1e4,key3:100},ratio:1e90,unlockAt:()=>get_store_value(wallet).fame>0&&get_store_value(miningUpgradeLevels)[9]>.003,formula:l=>0,isPercent:!0,isFame:!0,suffix:" (no bonus)",maxLevel:1,style:"game-btn-fame",notes:""},{index:15,name:"Overload",description:"Drop chances above 100% increase the amount of drops.",cost:{fame:500},ratio:200,unlockAt:()=>get_store_value(wallet).totalFame>200,formula:l=>0,isFame:!0,isPercent:!0,suffix:"  (N/A)",maxLevel:1,style:"game-btn-fame",notes:"index 15"},{index:16,name:"Legendary",description:"Increases fame gain on relocation.",cost:{gems:1e7},ratio:1.5,unlockAt:()=>get_store_value(wallet).totalFame>200,formula:l=>1+l*.13,isPercent:!0,suffix:"  fame bonus",maxLevel:100,isFame:!1,notes:"index 16"},{index:17,name:"Legendary II",description:"Increases fame gain on relocation.",cost:{gold:1e6},ratio:1.5,unlockAt:()=>get_store_value(wallet).totalFame>200,formula:l=>1+l*.13,isPercent:!0,suffix:"  fame bonus",maxLevel:100,isFame:!1,notes:"index 16"},{index:18,name:"[***] Key Finder",description:`While mining, you will occasionally find a bundle of T3 [***] keys.
Upgrades increase progress gained towards this milestone.`,cost:{orbs:1e6,sigils:2500},ratio:1.5,unlockAt:()=>get_store_value(wallet).key3>0,formula:l=>1+Math.max(0,Math.pow(l-1,.6)*.15),isPercent:!1,suffix:"x speed",maxLevel:100,notes:"(1 + floor(level/10)) * level^0.6"},{index:19,name:"Legendary III",description:"Increases fame gain on relocation.",cost:{sigils:2500},ratio:2,unlockAt:()=>get_store_value(wallet).sigil>25,formula:l=>1+.1*l,isPercent:!1,suffix:"x fame gain",style:"game-btn-sigil",maxLevel:200,notes:"(1 + floor(level/10)) * level^0.6"},{index:20,name:"Hardened",description:"Your lifetime number of quality button clicks increase gem gain.",cost:{crystals:400},ratio:1.33,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>formula.dispCalcHardenedGemBonus(get_store_value(buttonNumClicks),l),isPercent:!0,suffix:" gems",maxLevel:100,style:"game-btn-crystal",notes:"(1 + floor(level/10)) * level^0.6"},{index:21,name:"PLACEHOLDER",description:"---",cost:{crystals:1e299},ratio:1.33,unlockAt:()=>get_store_value(wallet).crystals>1e299,formula:l=>formula.dispCalcHardenedGemBonus(get_store_value(buttonNumClicks),l),isPercent:!0,suffix:" gems",maxLevel:100,style:"game-btn-crystal",notes:"(1 + floor(level/10)) * level^0.6"},{index:22,name:"Fortune II",description:"Increases all droprates.",cost:{gems:1e12},ratio:1.25,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+l/10,isPercent:!1,suffix:"x droprates",maxLevel:100},{index:23,name:"Geodes",description:"Increases crystal gain from the button.",cost:{gems:1e13},ratio:1.25,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+l/4,isPercent:!0,prefix:"+",suffix:" crystal gain",maxLevel:100},{index:24,name:"Blinding Lights",description:"Increases beacon path progress.",cost:{gems:1e14},ratio:1.25,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+l/4,isPercent:!0,prefix:"+",suffix:" beacon progress",maxLevel:100},{index:25,name:"Efficiency III",description:"Increases gem gain again.",cost:{crystals:1e6},ratio:1.3,unlockAt:()=>get_store_value(wallet).crystals>0,formula:l=>1+Math.pow(l,.9)*.75,isPercent:!0,prefix:"+",suffix:" gem gain",style:"game-btn-crystal",maxLevel:100},{index:26,name:"Lockpicks",description:"Key Finder speed/amount is dramatically increased.",cost:{fame:500},ratio:1.5,unlockAt:()=>get_store_value(wallet).fame>0,formula:l=>1+l*1.5,isFame:!0,isPercent:!1,suffix:"x speed/amount",maxLevel:25,style:"game-btn-fame",notes:""}]),gemGainFlavorText=single$2(0);function single$1(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(b=>g?b-y:Math.max(b,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function array$3(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>y)},add(y){m(g=>g+y)},sub(y,g=!1){m(b=>g?b-y:Math.max(b,0))},multiply(y){m(g=>g*y)},divide(y){m(g=>g/y)}}}function object$1(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y){m(g=>(g=y,g))},setItem(y,g){m(b=>(b[y.toString().toLowerCase()]=g,b))},add(y,g){m(b=>(b[y.toString().toLowerCase()]+=g,b))},sub(y,g,b=!1){m(v=>(b?v[y]-=g:v[y.toString().toLowerCase()]=Math.max(v[y],0),v))},multiply(y,g){m(b=>(b[y.toString().toLowerCase()]*=g,b))},divide(y,g){m(b=>(b[y.toString().toLowerCase()]/=g,b))}}}function dropTable(l){const{subscribe:d,set:_,update:m}=writable(l);return{subscribe:d,set(y,g){m(b=>(b[y]=g,b))},add(y,g){m(b=>(b[y]+=g,b))},sub(y,g,b=!1){m(v=>(b?v[y]-=g:v[y]=Math.max(v[y],0),v))},multiply(y,g){m(b=>(b[y]*=g,b))},divide(y,g){m(b=>(b[y]/=g,b))},updateTable(){m(y=>{y={};for(let[g,b]of Object.entries(get_store_value(baseMiningDropTable)))y[g]=[b[0]*(ref.dropTiers[g]===1?Math.max(get_store_value(miningUpgrades)[2].formula(get_store_value(miningUpgradeLevels)[2]),1):1)*Math.max(1,get_store_value(miningUpgrades)[6].formula(get_store_value(miningUpgradeLevels)[6]))*Math.max(1,get_store_value(miningUpgrades)[22].formula(get_store_value(miningUpgradeLevels)[22]))*Math.max(1,get_store_value(beaconBonuses)[2]),b[1]*get_store_value(miningUpgrades)[11].formula(get_store_value(miningUpgradeLevels)[11])*(g==="gold"?get_store_value(miningUpgrades)[7].formula(get_store_value(miningUpgradeLevels)[7]):1),b[2]*get_store_value(miningUpgrades)[11].formula(get_store_value(miningUpgradeLevels)[11])*(g==="gold"?get_store_value(miningUpgrades)[7].formula(get_store_value(miningUpgradeLevels)[7]):1)],y[g][1]+=Math.max(0,(y[g][0]-1)*y[g][1]),y[g][2]+=Math.max(0,(y[g][0]-1)*y[g][1]);return y})}}}const wallet=object$1({gems:0,gold:0}),resources=object$1({}),unlockedRes=single$1(new Set),visibleTier=single$1(1),progress=object$1({gems:0,key1:0}),miningUpgradeLevelsBought=array$3(Array(200).fill(0)),miningUpgradeLevelsFree=array$3(Array(200).fill(0)),miningUpgradeLevels=array$3(Array(200).fill(0)),keyUpgradeLevels=array$3(Array(50).fill(0)),baseMiningDropTable=dropTable({gold:[.2,1,3],key1:[.025,1,1],orbs:[.01,10,50],beacons:[.005,1,1],key2:[75e-5,1,1],key3:[1e-6,1,1],sigils:[3e-4,1,3]}),miningDropTable=dropTable({gold:[.2,1,3],key1:[.025,1,1],orbs:[.01,10,5e4],beacons:[.005,1,1],key2:[75e-5,1,1],key3:[1e-6,1,1],sigils:[3e-4,1,3]}),keysOpened=array$3(Array(5).fill(0)),settings=object$1({UPDATE_SPEED:20,buyAmount:1,activeTab:""}),flags=object$1({relocateNavBack:!1}),keyItemsUnlocked=object$1({key1:new Set,key2:new Set,key3:new Set,key4:new Set,key5:new Set}),progressThisTick=object$1({}),progressAverage=object$1({}),beaconActivations=array$3(Array(30).fill(0)),beaconLevels=array$3(Array(30).fill(0)),beaconProgress=array$3(Array(30).fill(0)),beaconUpgradeLevels=array$3(Array(20).fill(0)),enchantUpgradeLevels=array$3(Array(20).fill(0)),automationItemsUnlocked=object$1({}),enchantProgress=object$1({t1:0,t2:0,t3:0}),activityLog=array$3([]),mineLevel=object$1({level:0,xp:0,xpNextReq:100}),buttonNumClicks=object$1({okay:0,good:0,great:0,excellent:0,incredible:0,perfect:0}),buttonStats=object$1({clicksUntilFame:1e308,totalClicks:0,totalClicksToday:0,todayStartTime:Date.now(),hardenedBonus:1}),buttonUpgradeLevels=array$3(Array(20).fill(0)),stats=object$1({lastRelocate:Date.now()}),keyCraftTimes=object$1({energizedCrystal:[-1,-1],key3:[-1,-1],key4:[-1,-1],key5:[-1,-1],beacons:[-1,-1]}),keyCraftMastery=object$1({energizedCrystal:[1,0,3],key3:[1,0,100],key4:[1,0,100],key5:[1,0,100],beacons:[1,0,100]}),keyCraftAmount=object$1({energizedCrystal:0,key3:0,key4:0,key5:0,beacons:0}),antiFlickerFlags=object$1({gems:!1,key1:!1,key2:!1,key3:!1,crafting:!1,beacons:!1}),saveVersion=single$1(0),startOfGame=single$1(Date.now()),activityLogShow=object$1({});function array$2(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(b=>g)},add(g){m(b=>b+g)},sub(g,b=!1){m(v=>b?v-g:Math.max(v,0))},multiply(g){m(b=>b*g)},divide(g){m(b=>b/g)}}}function object(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g,b){m(v=>(v[g]=b,v))},add(g,b){m(v=>(v[g]+=b,v))},sub(g,b,v=!1){m(w=>(v?w[g]-=b:w[g]=Math.max(w[g],0),w))},multiply(g,b){m(v=>(v[g]*=b,v))},divide(g,b){m(v=>(v[g]/=b,v))}}}const pow=(l,d)=>Math.pow(l,d),enchantThreshold=object({t1:100,t2:4e4,t3:1e9}),enchantUpgrades=array$2([{name:"Mine Size",description:"Increases your mine size, which increases the effect of many enchants below..",cost:{fame:10},tier:1,ratio:1.25,formula:l=>pow(l+5,2),unlockAt:()=>!0,isPercent:!1,suffix:" tiles",maxLevel:1e3,notes:""},{name:"Mine Quality",description:"Increases the quality of your mine, which increases the effect of many enchants below.",cost:{fame:10},tier:1,ratio:1.25,formula:l=>l*l+10,unlockAt:()=>!0,isPercent:!1,suffix:" quality rating",maxLevel:1e3,notes:""},{name:"Burst",description:"Has a chance to clear a mine level, instantly giving mining cycles (the number of mining cycles is equal to mine size).",cost:{fame:30},tier:1,ratio:1.25,formula:l=>.15/400*l,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:" chance",maxLevel:400,notes:""},{name:"Orb Rush",description:"Has a chance to give orbs based on mine quality.",cost:{fame:30,gems:1e7},tier:1,ratio:1.25,formula:l=>.12/400*l,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""},{name:"Lightning Blast",description:"Has a chance to dramatically increase mining speed for 3 seconds (speed based on mine size).",cost:{fame:225},tier:1,ratio:1.25,formula:l=>.013/400*l,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""},{name:"Scavenger",description:"Has a chance to increase a random mining upgrade level by 1.",cost:{fame:900},tier:1,ratio:1.35,formula:l=>Math.pow(l/400,2)*.05,unlockAt:()=>get_store_value(wallet).fame>=100||get_store_value(enchantUpgradeLevels)[0]>0,isPercent:!0,suffix:"  chance",maxLevel:400,notes:""}]),automationUpgrades=array$2([{name:"Jumpstart",description:"Start with 5000 gems and 100 gold.",cost:{fame:1600},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{name:"Deep Pockets",description:"Lootmaster I and II stay unlocked on relocate.",cost:{fame:8e3},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{name:"Omnipotent",description:"Except for Lootmaster I and II, mining upgrades are not reset on relocation",cost:{fame:5e4},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"},{name:"Game On",description:"Unlocks challenges 1 - 3. [NOT IMPLEMENTED YET]",cost:{fame:1e5},unlockAt:()=>get_store_value(wallet).fame>=1,isPercent:!0,suffix:" chance"}]);function array$1(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(b=>g)},add(g){m(b=>b+g)},sub(g,b=!1){m(v=>b?v-g:Math.max(v,0))},multiply(g){m(b=>b*g)},divide(g){m(b=>b/g)}}}const buttonUpgrades=array$1([{name:"Stability",description:"The button moves less after each click.",cost:{crystals:1e3},ratio:4,formula:l=>1-Math.pow(l/10.25,.45),unlockAt:()=>!0,isPercent:!1,suffix:"x movement multiplier",maxLevel:10,notes:""},{name:"Hot Button",description:"Accumulate a multiplier to crystals as more clicks are made (max 10,000).",cost:{crystals:750},ratio:4e150,formula:l=>l,unlockAt:()=>!0,isPercent:!1,maxLevel:1,notes:""},{name:"I'm Feeling Nice",description:"The center of the button is highlighted.",cost:{crystals:4500},ratio:4e150,formula:l=>l,unlockAt:()=>!0,isPercent:!1,maxLevel:1,notes:""},{name:"Insanity!",description:"Your lifetime Incredible and Perfect clicks increase mining speed; Perfect clicks have a drastically higher impact.",cost:{crystals:12e3},ratio:4e150,formula:l=>1+Math.min(4,(get_store_value(buttonNumClicks).perfect*75e-5+get_store_value(buttonNumClicks).incredible*75e-6)*Math.min(1,l)),unlockAt:()=>!0,isPercent:!1,suffix:"x speed multiplier",maxLevel:1,notes:""},{name:"Fractals",description:"Button clicks give fame over time. [CURRENTLY DISABLED]",cost:{crystals:1e200},ratio:4,formula:l=>l===0?1e308:(11-l)**3,unlockAt:()=>get_store_value(wallet).crystals>1e3,isPercent:!1,prefix:"1,000 fame every ",suffix:" clicks",maxLevel:10,notes:""},{index:5,name:"The Duck",description:'Increases the chance you get "lucky" and multiply your crystals.',cost:{crystals:75e3},ratio:4,formula:l=>.025+l*.025,unlockAt:()=>get_store_value(wallet).crystals>1e4,isPercent:!0,suffix:" chance",maxLevel:10,notes:""},{index:6,name:"[PLACEHOLDER]",description:"PLACEHOLDER",cost:{crystals:2e200},ratio:4,formula:l=>l,unlockAt:()=>get_store_value(wallet).crystals>1e5,isPercent:!1,maxLevel:1,notes:""},{index:7,name:"Deadly Precision",description:"[NOT IMPLEMENTED] The precision point of the button is highlighted red. Incredible clicks that are lucky become Perfect instead.",cost:{crystals:4e7},ratio:4,formula:l=>l,unlockAt:()=>get_store_value(wallet).crystals>1e6,isPercent:!1,maxLevel:1,notes:""}]),MiningUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$g(l,d,_){const m=l.slice();return m[25]=d[_],m}function create_if_block$i(l){let d,_,m,y=l[7][l[0]].name+"",g,b,v=l[13](l[9][l[0]],0)+"",w,k,I=l[13](l[7][l[0]].maxLevel,0)+"",E,x,D,N,C,S,O=l[7][l[0]].description+"",M,A,U,L,P,J,V=(l[7][l[0]].prefix||"")+"",z,ne=(l[7][l[0]].isPercent?l[14](l[7][l[0]].formula(l[10][l[0]]),3,!0):l[13](l[7][l[0]].formula(l[10][l[0]]),3))+"",R,B=(l[7][l[0]].suffix||"")+"",W,j,F,$,te=(l[7][l[0]].prefix||"")+"",q,G=(l[7][l[0]].isPercent?l[14](l[7][l[0]].formula(l[10][l[0]]+l[5]),3,!0):l[13](l[7][l[0]].formula(l[10][l[0]]+l[5]),3))+"",Q,X=(l[7][l[0]].suffix||"")+"",ce,se,_e,ee,ae,oe,K,Y,T=l[11][l[0]]>0&&create_if_block_5$3(l),re=l[8].maxBuy&&l[4]&&l[5]>=1&&create_if_block_4$4(l),me=l[7][l[0]].name=="Expansive"&&create_if_block_3$7();function fe(H,ie){return H[10][H[0]]>=H[7][H[0]].maxLevel?create_if_block_1$e:create_else_block$8}let he=fe(l),ye=he(l);return{c(){d=element("div"),_=space(),m=element("div"),g=text(y),b=text(" [ "),w=text(v),k=text(" / "),E=text(I),x=space(),T&&T.c(),D=text(`] 
`),re&&re.c(),N=space(),C=element("span"),S=element("div"),M=text(O),A=space(),me&&me.c(),U=space(),L=element("div"),P=element("div"),J=element("span"),z=text(V),R=text(ne),W=text(B),j=space(),F=element("span"),$=text(`=> 
                    `),q=text(te),Q=text(G),ce=text(X),se=space(),_e=element("hr"),ee=space(),ae=element("div"),ye.c(),this.h()},l(H){d=claim_element(H,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(H),m=claim_element(H,"DIV",{class:!0});var ie=children(m);g=claim_text(ie,y),b=claim_text(ie," [ "),w=claim_text(ie,v),k=claim_text(ie," / "),E=claim_text(ie,I),x=claim_space(ie),T&&T.l(ie),D=claim_text(ie,`] 
`),re&&re.l(ie),N=claim_space(ie),C=claim_element(ie,"SPAN",{class:!0});var ge=children(C);S=claim_element(ge,"DIV",{class:!0});var be=children(S);M=claim_text(be,O),A=claim_space(be),me&&me.l(be),be.forEach(detach),U=claim_space(ge),L=claim_element(ge,"DIV",{class:!0});var xe=children(L);P=claim_element(xe,"DIV",{class:!0});var De=children(P);J=claim_element(De,"SPAN",{class:!0});var Le=children(J);z=claim_text(Le,V),R=claim_text(Le,ne),W=claim_text(Le,B),Le.forEach(detach),j=claim_space(De),F=claim_element(De,"SPAN",{class:!0});var Ae=children(F);$=claim_text(Ae,`=> 
                    `),q=claim_text(Ae,te),Q=claim_text(Ae,G),ce=claim_text(Ae,X),Ae.forEach(detach),De.forEach(detach),xe.forEach(detach),se=claim_space(ge),_e=claim_element(ge,"HR",{}),ee=claim_space(ge),ae=claim_element(ge,"DIV",{class:!0});var we=children(ae);ye.l(we),we.forEach(detach),ge.forEach(detach),ie.forEach(detach),this.h()},h(){attr(d,"class","pt-1"),attr(S,"class","title text-small-gray items-start text-center pb-1"),attr(J,"class","current text-[#cccccc]"),attr(F,"class","current text-[#999999]"),attr(P,"class","tooltip-text-xs text-[#cccccc]"),attr(L,"class","text-center effect-wrapper"),attr(ae,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(C,"class","px-2 mx-4 max-w-[275px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-10ri8s1"),attr(m,"class",oe="has-tooltip tooltip-text "+(l[2]&&l[9][l[0]]<l[7][l[0]].maxLevel?l[7][l[0]].style||"game-btn":(l[7][l[0]].style||"game-btn")+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(H,ie){insert_hydration(H,d,ie),insert_hydration(H,_,ie),insert_hydration(H,m,ie),append_hydration(m,g),append_hydration(m,b),append_hydration(m,w),append_hydration(m,k),append_hydration(m,E),append_hydration(m,x),T&&T.m(m,null),append_hydration(m,D),re&&re.m(m,null),append_hydration(m,N),append_hydration(m,C),append_hydration(C,S),append_hydration(S,M),append_hydration(S,A),me&&me.m(S,null),append_hydration(C,U),append_hydration(C,L),append_hydration(L,P),append_hydration(P,J),append_hydration(J,z),append_hydration(J,R),append_hydration(J,W),append_hydration(P,j),append_hydration(P,F),append_hydration(F,$),append_hydration(F,q),append_hydration(F,Q),append_hydration(F,ce),append_hydration(C,se),append_hydration(C,_e),append_hydration(C,ee),append_hydration(C,ae),ye.m(ae,null),K||(Y=listen(m,"click",l[16]),K=!0)},p(H,ie){ie&129&&y!==(y=H[7][H[0]].name+"")&&set_data(g,y),ie&513&&v!==(v=H[13](H[9][H[0]],0)+"")&&set_data(w,v),ie&129&&I!==(I=H[13](H[7][H[0]].maxLevel,0)+"")&&set_data(E,I),H[11][H[0]]>0?T?T.p(H,ie):(T=create_if_block_5$3(H),T.c(),T.m(m,D)):T&&(T.d(1),T=null),H[8].maxBuy&&H[4]&&H[5]>=1?re?re.p(H,ie):(re=create_if_block_4$4(H),re.c(),re.m(m,N)):re&&(re.d(1),re=null),ie&129&&O!==(O=H[7][H[0]].description+"")&&set_data(M,O),H[7][H[0]].name=="Expansive"?me||(me=create_if_block_3$7(),me.c(),me.m(S,null)):me&&(me.d(1),me=null),ie&129&&V!==(V=(H[7][H[0]].prefix||"")+"")&&set_data(z,V),ie&1153&&ne!==(ne=(H[7][H[0]].isPercent?H[14](H[7][H[0]].formula(H[10][H[0]]),3,!0):H[13](H[7][H[0]].formula(H[10][H[0]]),3))+"")&&set_data(R,ne),ie&129&&B!==(B=(H[7][H[0]].suffix||"")+"")&&set_data(W,B),ie&129&&te!==(te=(H[7][H[0]].prefix||"")+"")&&set_data(q,te),ie&1185&&G!==(G=(H[7][H[0]].isPercent?H[14](H[7][H[0]].formula(H[10][H[0]]+H[5]),3,!0):H[13](H[7][H[0]].formula(H[10][H[0]]+H[5]),3))+"")&&set_data(Q,G),ie&129&&X!==(X=(H[7][H[0]].suffix||"")+"")&&set_data(ce,X),he===(he=fe(H))&&ye?ye.p(H,ie):(ye.d(1),ye=he(H),ye&&(ye.c(),ye.m(ae,null))),ie&645&&oe!==(oe="has-tooltip tooltip-text "+(H[2]&&H[9][H[0]]<H[7][H[0]].maxLevel?H[7][H[0]].style||"game-btn":(H[7][H[0]].style||"game-btn")+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(m,"class",oe)},d(H){H&&detach(d),H&&detach(_),H&&detach(m),T&&T.d(),re&&re.d(),me&&me.d(),ye.d(),K=!1,Y()}}}function create_if_block_5$3(l){let d,_=l[13](l[11][l[0]],0)+"",m,y;return{c(){d=text("+ "),m=text(_),y=space()},l(g){d=claim_text(g,"+ "),m=claim_text(g,_),y=claim_space(g)},m(g,b){insert_hydration(g,d,b),insert_hydration(g,m,b),insert_hydration(g,y,b)},p(g,b){b&2049&&_!==(_=g[13](g[11][g[0]],0)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_if_block_4$4(l){let d,_,m;return{c(){d=text("(+"),_=text(l[5]),m=text(")")},l(y){d=claim_text(y,"(+"),_=claim_text(y,l[5]),m=claim_text(y,")")},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),insert_hydration(y,m,g)},p(y,g){g&32&&set_data(_,y[5])},d(y){y&&detach(d),y&&detach(_),y&&detach(m)}}}function create_if_block_3$7(l){let d,_;return{c(){d=element("span"),_=text("(Upgrades in orange aren't reset when you relocate.)"),this.h()},l(m){d=claim_element(m,"SPAN",{class:!0});var y=children(d);_=claim_text(y,"(Upgrades in orange aren't reset when you relocate.)"),y.forEach(detach),this.h()},h(){attr(d,"class","text-orange-400")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},d(m){m&&detach(d)}}}function create_else_block$8(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$g(get_each_context$g(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&12354){_=Object.entries(y[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$g(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block$g(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$e(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$c(l){let d,_=(l[6][l[25][0]]||l[12].has(l[25][0])?ref.displayNames[l[25][0]]?ref.displayNames[l[25][0]]:l[25][0]:"???")+"",m,y,g,b,v=l[13](l[25][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[25][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-10ri8s1"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I&4162&&_!==(_=(k[6][k[25][0]]||k[12].has(k[25][0])?ref.displayNames[k[25][0]]?ref.displayNames[k[25][0]]:k[25][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[k[25][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-10ri8s1")&&attr(d,"class",y),I&2&&v!==(v=k[13](k[25][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$g(l){let d,_=l[25][1]>=1&&create_if_block_2$c(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[25][1]>=1?_?_.p(m,y):(_=create_if_block_2$c(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$b(l){let d=l[7][l[0]].unlockAt()||l[3]||l[10][l[0]]>0,_,m=d&&create_if_block$i(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&1161&&(d=y[7][y[0]].unlockAt()||y[3]||y[10][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$i(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$l(l){let d=l[3]||l[2]||l[10][l[0]]>0,_,m=create_key_block$b(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&1037&&safe_not_equal(d,d=y[3]||y[2]||y[10][y[0]]>0)?(m.d(1),m=create_key_block$b(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$l(l,d,_){let m,y,g,b,v,w,k,I;component_subscribe(l,wallet,R=>_(6,m=R)),component_subscribe(l,miningUpgrades,R=>_(7,y=R)),component_subscribe(l,settings,R=>_(8,g=R)),component_subscribe(l,visibleTier,R=>_(19,b=R)),component_subscribe(l,miningUpgradeLevelsBought,R=>_(9,v=R)),component_subscribe(l,miningUpgradeLevels,R=>_(10,w=R)),component_subscribe(l,miningUpgradeLevelsFree,R=>_(11,k=R)),component_subscribe(l,unlockedRes,R=>_(12,I=R));let{index:E}=d,x=()=>{let R={};for(let[B,W]of Object.entries(y[E].cost))R[B]=L(W);return R},D={},N,C=w[E]>0,S,O=!1,M=g.buyAmount;onMount(()=>{setTimeout(()=>{_(1,D=x()),_(2,N=V()),y[E].unlockAt()&&_(3,C=!0),_(3,C=w[E]>0)},50),S=setInterval(()=>{_(2,N=V()),z(),y[E].unlockAt()&&_(3,C=!0),g.maxBuy?(_(5,M=P()),_(1,D=x())):_(5,M=g.buyAmount)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(S)});const A=(R,B=0)=>R<1e9?R.toFixed(R<1e3?B:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):R.toExponential(3).toString().replace("+",""),U=(R,B=3,W=!1)=>(W&&(R-=1),R<1e9?(R*100).toFixed(R*100<1e3?B:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(R*100).toExponential(B).toString().replace("+","")+"%");function L(R){const B=R*Math.pow(y[E].ratio,v[E]),W=y[E].ratio,j=Math.max(1,M);return formula.gSum(B,W,j)}function P(){_(4,O=!1);let R=1e9;for(let[B,W]of Object.entries(y[E].cost)){const j=W*Math.pow(y[E].ratio,v[E]);R=Math.min(R,formula.maxNumGeom(m[B],j,y[E].ratio))}return _(4,O=!0),R}function J(){if(!(v[E]>=y[E].maxLevel)){_(1,D=x());for(let[R,B]of Object.entries(D))if(B>=1&&(!m[R]||m[R]<B-.003))return;for(let[R,B]of Object.entries(D))B>=1&&set_store_value(wallet,m[R]-=B-.003,m);set_store_value(miningUpgradeLevels,w[E]+=Math.min(M,y[E].maxLevel-w[E]),w),set_store_value(miningUpgradeLevelsBought,v[E]+=Math.min(M,y[E].maxLevel-v[E]),v),_(1,D=x()),_(3,C=!0),miningDropTable.updateTable(),(y[E].name||"")=="Lootmaster I"&&set_store_value(visibleTier,b=2,b),(y[E].name||"")=="Lootmaster II"&&set_store_value(visibleTier,b=3,b),(y[E].name||"")=="Lootmaster III"&&set_store_value(visibleTier,b=4,b)}}function V(){if(g.maxBuy&&M==0)return!1;_(1,D=x());for(let[R,B]of Object.entries(D))if(B>=1&&m[R]<B-.003)return!1;return!0}function z(){for(let[R,B]of Object.entries(y[E].unlockAt))if(m[R]<B)return!1;return!0}const ne=()=>J();return l.$$set=R=>{"index"in R&&_(0,E=R.index)},[E,D,N,C,O,M,m,y,g,v,w,k,I,A,U,J,ne]}class MiningUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$l,create_fragment$l,safe_not_equal,{index:0})}}function create_fragment$k(l){let d,_,m,y,g,b,v,w;return{c(){d=element("div"),_=element("div"),m=text("+"),y=space(),g=element("div"),b=text("-"),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);_=claim_element(I,"DIV",{class:!0});var E=children(_);m=claim_text(E,"+"),E.forEach(detach),y=claim_space(I),g=claim_element(I,"DIV",{class:!0});var x=children(g);b=claim_text(x,"-"),x.forEach(detach),I.forEach(detach),this.h()},h(){attr(_,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid select-none m-1"),attr(g,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid select-none m-1"),attr(d,"class","grid grid-cols-2")},m(k,I){insert_hydration(k,d,I),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,b),v||(w=[listen(_,"click",l[3]),listen(g,"click",l[4])],v=!0)},p:noop,i:noop,o:noop,d(k){k&&detach(d),v=!1,run_all(w)}}}function instance$k(l,d,_){let m,y,g,b;component_subscribe(l,wallet,x=>_(5,m=x)),component_subscribe(l,miningUpgrades,x=>_(6,x)),component_subscribe(l,beaconActivations,x=>_(7,y=x)),component_subscribe(l,beaconSpendAmt,x=>_(8,g=x)),component_subscribe(l,miningUpgradeLevels,x=>_(9,b=x));let{index:v}=d;b[v]>0,onMount(()=>{}),onDestroy(()=>{});function w(){if((isNaN(g)||g<0||!g)&&set_store_value(beaconSpendAmt,g=1,g),!m.beacons||m.beacons===0)return;const x=Math.min(m.beacons,g);set_store_value(wallet,m.beacons-=x,m),set_store_value(beaconActivations,y[v]+=x,y)}function k(){(isNaN(g)||g<0||!g)&&set_store_value(beaconSpendAmt,g=1,g);const x=Math.min(y[v],g);set_store_value(beaconActivations,y[v]-=x,y),set_store_value(wallet,m.beacons+=x,m)}const I=()=>w(),E=()=>k();return l.$$set=x=>{"index"in x&&_(2,v=x.index)},[w,k,v,I,E]}class BeaconToggleButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$k,create_fragment$k,safe_not_equal,{index:2})}}const BeaconPowerUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$f(l,d,_){const m=l.slice();return m[17]=d[_],m}function create_else_block$7(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$f(get_each_context$f(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&130){_=Object.entries(y[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$f(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block$f(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block$h(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_1$d(l){let d,_=(ref.displayNames[l[17][0]]?ref.displayNames[l[17][0]]:l[17][0])+"",m,y,g,b,v=l[7](l[17][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[17][0]]||ref.colors.default)+" col-span-3 svelte-10ri8s1"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I&2&&_!==(_=(ref.displayNames[k[17][0]]?ref.displayNames[k[17][0]]:k[17][0])+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[k[17][0]]||ref.colors.default)+" col-span-3 svelte-10ri8s1")&&attr(d,"class",y),I&2&&v!==(v=k[7](k[17][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$f(l){let d,_=l[17][1]>=1&&create_if_block_1$d(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[17][1]>=1?_?_.p(m,y):(_=create_if_block_1$d(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$a(l){let d,_,m=l[6][l[0]].description+"",y,g,b,v,w,k=(l[6][l[0]].prefix||"")+"",I,E=(l[6][l[0]].isPercent?l[8](l[6][l[0]].formula(l[5][l[0]]),3,!0):l[7](l[6][l[0]].formula(l[5][l[0]]),3))+"",x,D=(l[6][l[0]].suffix||"")+"",N,C,S,O,M=(l[6][l[0]].prefix||"")+"",A,U=(l[6][l[0]].isPercent?l[8](l[6][l[0]].formula(l[5][l[0]]+l[4].buyAmount),3,!0):l[7](l[6][l[0]].formula(l[5][l[0]]+l[4].buyAmount),3))+"",L,P=(l[6][l[0]].suffix||"")+"",J,V,z,ne,R;function B(F,$){return F[5][F[0]]>=F[6][F[0]].maxLevel?create_if_block$h:create_else_block$7}let W=B(l),j=W(l);return{c(){d=element("span"),_=element("div"),y=text(m),g=space(),b=element("div"),v=element("div"),w=element("span"),I=text(k),x=text(E),N=text(D),C=space(),S=element("span"),O=text(`=> 
                    `),A=text(M),L=text(U),J=text(P),V=space(),z=element("hr"),ne=space(),R=element("div"),j.c(),this.h()},l(F){d=claim_element(F,"SPAN",{class:!0});var $=children(d);_=claim_element($,"DIV",{class:!0});var te=children(_);y=claim_text(te,m),te.forEach(detach),g=claim_space($),b=claim_element($,"DIV",{class:!0});var q=children(b);v=claim_element(q,"DIV",{class:!0});var G=children(v);w=claim_element(G,"SPAN",{class:!0});var Q=children(w);I=claim_text(Q,k),x=claim_text(Q,E),N=claim_text(Q,D),Q.forEach(detach),C=claim_space(G),S=claim_element(G,"SPAN",{class:!0});var X=children(S);O=claim_text(X,`=> 
                    `),A=claim_text(X,M),L=claim_text(X,U),J=claim_text(X,P),X.forEach(detach),G.forEach(detach),q.forEach(detach),V=claim_space($),z=claim_element($,"HR",{}),ne=claim_space($),R=claim_element($,"DIV",{class:!0});var ce=children(R);j.l(ce),ce.forEach(detach),$.forEach(detach),this.h()},h(){attr(_,"class","title text-small-gray items-start text-center pb-1"),attr(w,"class","current text-[#cccccc]"),attr(S,"class","current text-[#999999]"),attr(v,"class","tooltip-text-xs text-[#cccccc]"),attr(b,"class","text-center effect-wrapper"),attr(R,"class","pt-1 cost items-start text-center grid grid-cols-5"),attr(d,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-10ri8s1")},m(F,$){insert_hydration(F,d,$),append_hydration(d,_),append_hydration(_,y),append_hydration(d,g),append_hydration(d,b),append_hydration(b,v),append_hydration(v,w),append_hydration(w,I),append_hydration(w,x),append_hydration(w,N),append_hydration(v,C),append_hydration(v,S),append_hydration(S,O),append_hydration(S,A),append_hydration(S,L),append_hydration(S,J),append_hydration(d,V),append_hydration(d,z),append_hydration(d,ne),append_hydration(d,R),j.m(R,null)},p(F,$){$&65&&m!==(m=F[6][F[0]].description+"")&&set_data(y,m),$&65&&k!==(k=(F[6][F[0]].prefix||"")+"")&&set_data(I,k),$&97&&E!==(E=(F[6][F[0]].isPercent?F[8](F[6][F[0]].formula(F[5][F[0]]),3,!0):F[7](F[6][F[0]].formula(F[5][F[0]]),3))+"")&&set_data(x,E),$&65&&D!==(D=(F[6][F[0]].suffix||"")+"")&&set_data(N,D),$&65&&M!==(M=(F[6][F[0]].prefix||"")+"")&&set_data(A,M),$&113&&U!==(U=(F[6][F[0]].isPercent?F[8](F[6][F[0]].formula(F[5][F[0]]+F[4].buyAmount),3,!0):F[7](F[6][F[0]].formula(F[5][F[0]]+F[4].buyAmount),3))+"")&&set_data(L,U),$&65&&P!==(P=(F[6][F[0]].suffix||"")+"")&&set_data(J,P),W===(W=B(F))&&j?j.p(F,$):(j.d(1),j=W(F),j&&(j.c(),j.m(R,null)))},d(F){F&&detach(d),j.d()}}}function create_fragment$j(l){let d,_=l[6][l[0]].name+"",m,y,g=l[7](l[5][l[0]],0)+"",b,v,w=l[7](l[6][l[0]].maxLevel,0)+"",k,I,E=l[3].beaconPower,x,D,N,C=create_key_block$a(l);return{c(){d=element("div"),m=text(_),y=text(" ["),b=text(g),v=text(" / "),k=text(w),I=text(`]
        `),C.c(),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var O=children(d);m=claim_text(O,_),y=claim_text(O," ["),b=claim_text(O,g),v=claim_text(O," / "),k=claim_text(O,w),I=claim_text(O,`]
        `),C.l(O),O.forEach(detach),this.h()},h(){attr(d,"class",x="has-tooltip tooltip-text py-1 "+(l[2]?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(S,O){insert_hydration(S,d,O),append_hydration(d,m),append_hydration(d,y),append_hydration(d,b),append_hydration(d,v),append_hydration(d,k),append_hydration(d,I),C.m(d,null),D||(N=listen(d,"click",l[10]),D=!0)},p(S,[O]){O&65&&_!==(_=S[6][S[0]].name+"")&&set_data(m,_),O&33&&g!==(g=S[7](S[5][S[0]],0)+"")&&set_data(b,g),O&65&&w!==(w=S[7](S[6][S[0]].maxLevel,0)+"")&&set_data(k,w),O&8&&safe_not_equal(E,E=S[3].beaconPower)?(C.d(1),C=create_key_block$a(S),C.c(),C.m(d,null)):C.p(S,O),O&4&&x!==(x="has-tooltip tooltip-text py-1 "+(S[2]?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(d,"class",x)},i:noop,o:noop,d(S){S&&detach(d),C.d(S),D=!1,N()}}}function instance$j(l,d,_){let m,y,g,b;component_subscribe(l,resources,M=>_(3,m=M)),component_subscribe(l,settings,M=>_(4,y=M)),component_subscribe(l,beaconUpgradeLevels,M=>_(5,g=M)),component_subscribe(l,beaconUpgrades,M=>_(6,b=M));let{index:v}=d,w=()=>{let M={};for(let[A,U]of Object.entries(b[v].cost))M[A]=N(U);return M},k={},I;g[v]>0;let E;onMount(()=>{setTimeout(()=>{_(1,k=w()),_(2,I=S())},50),E=setInterval(()=>{_(2,I=S())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(E)});const x=(M,A=0)=>M<1e9?M.toFixed(M<1e3?A:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):M.toExponential(3).toString().replace("+",""),D=(M,A=3,U=!1)=>(U&&(M-=1),M<1e9?(M*100).toFixed(M<999?A:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(M*100).toExponential(A).toString().replace("+","")+"%");function N(M){const A=M*Math.pow(b[v].ratio,g[v]),U=b[v].ratio,L=y.buyAmount;return formula.gSum(A,U,L)}function C(){if(!isNaN(m.beaconPower)){_(1,k=w());for(let[M,A]of Object.entries(k))if(A>=1&&m[M]<A)return;for(let[M,A]of Object.entries(k))A>=1&&set_store_value(resources,m[M]-=A,m);set_store_value(beaconUpgradeLevels,g[v]+=y.buyAmount,g),_(1,k=w())}}function S(){if(isNaN(m.beaconPower))return!1;_(1,k=w());for(let[M,A]of Object.entries(k))if(A>=1&&m[M]<A)return!1;return!0}const O=()=>C();return l.$$set=M=>{"index"in M&&_(0,v=M.index)},[v,k,I,m,y,g,b,x,D,C,O]}class BeaconPowerUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$j,create_fragment$j,safe_not_equal,{index:0})}}function get_each_context$e(l,d,_){const m=l.slice();return m[27]=d[_],m[29]=_,m}function get_each_context_1$5(l,d,_){const m=l.slice();return m[27]=d[_],m[29]=_,m}function create_if_block_2$b(l){let d,_,m=l[3][l[29]]+"",y;return{c(){d=element("div"),_=text("Unlock at mining level "),y=text(m),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);_=claim_text(b,"Unlock at mining level "),y=claim_text(b,m),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-12 py-3 text-center text-large "+getTextColor(l[29]))},m(g,b){insert_hydration(g,d,b),append_hydration(d,_),append_hydration(d,y)},p(g,b){b&8&&m!==(m=g[3][g[29]]+"")&&set_data(y,m)},i:noop,o:noop,d(g){g&&detach(d)}}}function create_if_block$g(l){let d,_,m=l[29]<10&&create_if_block_1$c(l);return{c(){m&&m.c(),d=empty()},l(y){m&&m.l(y),d=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,d,g),_=!0},p(y,g){y[29]<10&&m.p(y,g)},i(y){_||(transition_in(m),_=!0)},o(y){transition_out(m),_=!1},d(y){m&&m.d(y),y&&detach(d)}}}function create_if_block_1$c(l){let d,_,m,y,g=l[16](l[2][l[29]],0)+"",b,v,w,k,I=l[16](l[9][l[29]],0)+"",E,x,D=l[18](l[10][l[29]],l[10][l[29]]>1e6?1:0)+"",N,C,S,O,M=l[17](Math.max(l[0][l[29]],1),3,!0)+"",A,U,L,P,J,V=l[11][l[29]]+"",z,ne,R,B,W=l[17](l[6][l[29]]/l[5][l[29]],l[6][l[29]]/l[5][l[29]]<1e-4?4:2)+"",j,F,$,te,q,G,Q;return _=new BeaconToggleButton({props:{index:l[29]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),y=element("div"),b=text(g),v=space(),w=element("div"),k=element("div"),E=text(I),x=text(" / "),N=text(D),C=space(),S=element("div"),O=text("+"),A=text(M),U=space(),L=element("div"),P=element("div"),J=element("div"),z=text(V),ne=space(),R=element("div"),B=text("[ "),j=text(W),F=text(" ]"),$=space(),te=element("div"),q=element("div"),G=element("div"),this.h()},l(X){d=claim_element(X,"DIV",{class:!0});var ce=children(d);claim_component(_.$$.fragment,ce),ce.forEach(detach),m=claim_space(X),y=claim_element(X,"DIV",{class:!0});var se=children(y);b=claim_text(se,g),se.forEach(detach),v=claim_space(X),w=claim_element(X,"DIV",{class:!0});var _e=children(w);k=claim_element(_e,"DIV",{class:!0});var ee=children(k);E=claim_text(ee,I),x=claim_text(ee," / "),N=claim_text(ee,D),ee.forEach(detach),C=claim_space(_e),S=claim_element(_e,"DIV",{class:!0});var ae=children(S);O=claim_text(ae,"+"),A=claim_text(ae,M),ae.forEach(detach),_e.forEach(detach),U=claim_space(X),L=claim_element(X,"DIV",{class:!0});var oe=children(L);P=claim_element(oe,"DIV",{class:!0});var K=children(P);J=claim_element(K,"DIV",{class:!0});var Y=children(J);z=claim_text(Y,V),Y.forEach(detach),ne=claim_space(K),R=claim_element(K,"DIV",{class:!0});var T=children(R);B=claim_text(T,"[ "),j=claim_text(T,W),F=claim_text(T," ]"),T.forEach(detach),K.forEach(detach),$=claim_space(oe),te=claim_element(oe,"DIV",{class:!0});var re=children(te);q=claim_element(re,"DIV",{class:!0});var me=children(q);G=claim_element(me,"DIV",{class:!0,style:!0}),children(G).forEach(detach),me.forEach(detach),re.forEach(detach),oe.forEach(detach),this.h()},h(){attr(d,"class","col-span-1"),attr(y,"class","col-span-1 my-1 text-center game-text"),attr(k,"class","row-span-1 text-center game-text text-small"),attr(S,"class","row-span-1 text-center game-text text-small"),attr(w,"class","col-span-3 grid grid-rows-2"),attr(J,"class","col-span-3 "+getTextColor(l[29])+" text-left"),attr(R,"class","col-span-2 text-right"),attr(P,"class","row-span-1 grid grid-cols-5 tooltip-text"),attr(G,"class",getBgColor(l[29])+" h-1.5 rounded-full"),set_style(G,"width",(l[12].beacons?"100":l[1][l[29]])+"%"),attr(q,"class","w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700"),attr(te,"class","mine-bar-wrapper align-middle"),attr(L,"class","col-span-7 grid grid-rows-2")},m(X,ce){insert_hydration(X,d,ce),mount_component(_,d,null),insert_hydration(X,m,ce),insert_hydration(X,y,ce),append_hydration(y,b),insert_hydration(X,v,ce),insert_hydration(X,w,ce),append_hydration(w,k),append_hydration(k,E),append_hydration(k,x),append_hydration(k,N),append_hydration(w,C),append_hydration(w,S),append_hydration(S,O),append_hydration(S,A),insert_hydration(X,U,ce),insert_hydration(X,L,ce),append_hydration(L,P),append_hydration(P,J),append_hydration(J,z),append_hydration(P,ne),append_hydration(P,R),append_hydration(R,B),append_hydration(R,j),append_hydration(R,F),append_hydration(L,$),append_hydration(L,te),append_hydration(te,q),append_hydration(q,G),Q=!0},p(X,ce){(!Q||ce&4)&&g!==(g=X[16](X[2][X[29]],0)+"")&&set_data(b,g),(!Q||ce&512)&&I!==(I=X[16](X[9][X[29]],0)+"")&&set_data(E,I),(!Q||ce&1024)&&D!==(D=X[18](X[10][X[29]],X[10][X[29]]>1e6?1:0)+"")&&set_data(N,D),(!Q||ce&1)&&M!==(M=X[17](Math.max(X[0][X[29]],1),3,!0)+"")&&set_data(A,M),(!Q||ce&2048)&&V!==(V=X[11][X[29]]+"")&&set_data(z,V),(!Q||ce&96)&&W!==(W=X[17](X[6][X[29]]/X[5][X[29]],X[6][X[29]]/X[5][X[29]]<1e-4?4:2)+"")&&set_data(j,W),(!Q||ce&4098)&&set_style(G,"width",(X[12].beacons?"100":X[1][X[29]])+"%")},i(X){Q||(transition_in(_.$$.fragment,X),Q=!0)},o(X){transition_out(_.$$.fragment,X),Q=!1},d(X){X&&detach(d),destroy_component(_),X&&detach(m),X&&detach(y),X&&detach(v),X&&detach(w),X&&detach(U),X&&detach(L)}}}function create_each_block_1$5(l){let d,_,m,y;const g=[create_if_block$g,create_if_block_2$b],b=[];function v(w,k){return w[4].level>=w[3][w[29]]?0:w[29]<10?1:-1}return~(d=v(l))&&(_=b[d]=g[d](l)),{c(){_&&_.c(),m=empty()},l(w){_&&_.l(w),m=empty()},m(w,k){~d&&b[d].m(w,k),insert_hydration(w,m,k),y=!0},p(w,k){let I=d;d=v(w),d===I?~d&&b[d].p(w,k):(_&&(group_outros(),transition_out(b[I],1,1,()=>{b[I]=null}),check_outros()),~d?(_=b[d],_?_.p(w,k):(_=b[d]=g[d](w),_.c()),transition_in(_,1),_.m(m.parentNode,m)):_=null)},i(w){y||(transition_in(_),y=!0)},o(w){transition_out(_),y=!1},d(w){~d&&b[d].d(w),w&&detach(m)}}}function create_each_block$e(l){let d,_,m,y;return m=new BeaconPowerUpgradeButton({props:{index:l[29]}}),{c(){d=element("div"),_=space(),create_component(m.$$.fragment),this.h()},l(g){d=claim_element(g,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(g),claim_component(m.$$.fragment,g),this.h()},h(){attr(d,"class","pt-1")},m(g,b){insert_hydration(g,d,b),insert_hydration(g,_,b),mount_component(m,g,b),y=!0},p:noop,i(g){y||(transition_in(m.$$.fragment,g),y=!0)},o(g){transition_out(m.$$.fragment,g),y=!1},d(g){g&&detach(d),g&&detach(_),destroy_component(m,g)}}}function create_fragment$i(l){let d,_,m,y,g=l[16](l[7].beaconPower||0)+"",b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W,j,F,$,te,q,G,Q,X,ce=l[9],se=[];for(let K=0;K<ce.length;K+=1)se[K]=create_each_block_1$5(get_each_context_1$5(l,ce,K));const _e=K=>transition_out(se[K],1,1,()=>{se[K]=null});let ee=l[13],ae=[];for(let K=0;K<ee.length;K+=1)ae[K]=create_each_block$e(get_each_context$e(l,ee,K));const oe=K=>transition_out(ae[K],1,1,()=>{ae[K]=null});return{c(){d=element("div"),_=element("div"),m=text("You have "),y=element("span"),b=text(g),v=text(" beacon power."),w=space(),k=element("div"),I=text("Earn more beacon power by leveling your beacon paths."),E=space(),x=element("div"),D=space(),N=element("div"),C=element("div"),S=element("input"),O=space(),M=element("div"),A=text("Split Beacons Evenly"),U=space(),L=element("div"),P=text("Recall Beacons"),J=space(),V=element("div"),z=space();for(let K=0;K<se.length;K+=1)se[K].c();ne=space(),R=element("div"),B=space();for(let K=0;K<ae.length;K+=1)ae[K].c();W=space(),j=element("div"),F=text("i"),$=space(),te=element("div"),q=text("s"),this.h()},l(K){d=claim_element(K,"DIV",{class:!0});var Y=children(d);_=claim_element(Y,"DIV",{class:!0});var T=children(_);m=claim_text(T,"You have "),y=claim_element(T,"SPAN",{class:!0});var re=children(y);b=claim_text(re,g),re.forEach(detach),v=claim_text(T," beacon power."),T.forEach(detach),w=claim_space(Y),k=claim_element(Y,"DIV",{class:!0});var me=children(k);I=claim_text(me,"Earn more beacon power by leveling your beacon paths."),me.forEach(detach),E=claim_space(Y),x=claim_element(Y,"DIV",{class:!0}),children(x).forEach(detach),D=claim_space(Y),N=claim_element(Y,"DIV",{class:!0});var fe=children(N);C=claim_element(fe,"DIV",{class:!0});var he=children(C);S=claim_element(he,"INPUT",{id:!0,class:!0,placeholder:!0}),he.forEach(detach),O=claim_space(fe),M=claim_element(fe,"DIV",{class:!0});var ye=children(M);A=claim_text(ye,"Split Beacons Evenly"),ye.forEach(detach),U=claim_space(fe),L=claim_element(fe,"DIV",{class:!0});var H=children(L);P=claim_text(H,"Recall Beacons"),H.forEach(detach),J=claim_space(fe),V=claim_element(fe,"DIV",{class:!0}),children(V).forEach(detach),z=claim_space(fe);for(let be=0;be<se.length;be+=1)se[be].l(fe);ne=claim_space(fe),R=claim_element(fe,"DIV",{class:!0}),children(R).forEach(detach),B=claim_space(fe);for(let be=0;be<ae.length;be+=1)ae[be].l(fe);W=claim_space(fe),j=claim_element(fe,"DIV",{class:!0});var ie=children(j);F=claim_text(ie,"i"),ie.forEach(detach),$=claim_space(fe),te=claim_element(fe,"DIV",{});var ge=children(te);q=claim_text(ge,"s"),ge.forEach(detach),fe.forEach(detach),Y.forEach(detach),this.h()},h(){attr(y,"class","text-cyan-300 font-bold"),attr(_,"class","beacon-power-display text-center text-large game-text"),attr(k,"class","beacon-power-tooltip text-center tooltip-text"),attr(x,"class","py-2"),attr(S,"id","max"),attr(S,"class","content-center w-20 bg-gray-700 text-white"),attr(S,"placeholder","1"),attr(C,"class","p-1 col-span-2"),attr(M,"class","game-btn m-1 text-med col-span-3"),attr(L,"class","game-btn m-1 text-med col-span-3"),attr(V,"class","col-span-4"),attr(R,"class","py-2"),attr(j,"class","col-span-12 pb-15"),attr(N,"class","beacon-assign-grid grid grid-cols-12"),attr(d,"class","wrapper py-2")},m(K,Y){insert_hydration(K,d,Y),append_hydration(d,_),append_hydration(_,m),append_hydration(_,y),append_hydration(y,b),append_hydration(_,v),append_hydration(d,w),append_hydration(d,k),append_hydration(k,I),append_hydration(d,E),append_hydration(d,x),append_hydration(d,D),append_hydration(d,N),append_hydration(N,C),append_hydration(C,S),set_input_value(S,l[8]),append_hydration(N,O),append_hydration(N,M),append_hydration(M,A),append_hydration(N,U),append_hydration(N,L),append_hydration(L,P),append_hydration(N,J),append_hydration(N,V),append_hydration(N,z);for(let T=0;T<se.length;T+=1)se[T]&&se[T].m(N,null);append_hydration(N,ne),append_hydration(N,R),append_hydration(N,B);for(let T=0;T<ae.length;T+=1)ae[T]&&ae[T].m(N,null);append_hydration(N,W),append_hydration(N,j),append_hydration(j,F),append_hydration(N,$),append_hydration(N,te),append_hydration(te,q),G=!0,Q||(X=[listen(S,"input",l[20]),listen(M,"click",l[21]),listen(L,"click",l[22])],Q=!0)},p(K,[Y]){if((!G||Y&128)&&g!==(g=K[16](K[7].beaconPower||0)+"")&&set_data(b,g),Y&256&&S.value!==K[8]&&set_input_value(S,K[8]),Y&466559){ce=K[9];let T;for(T=0;T<ce.length;T+=1){const re=get_each_context_1$5(K,ce,T);se[T]?(se[T].p(re,Y),transition_in(se[T],1)):(se[T]=create_each_block_1$5(re),se[T].c(),transition_in(se[T],1),se[T].m(N,ne))}for(group_outros(),T=ce.length;T<se.length;T+=1)_e(T);check_outros()}if(Y&8192){ee=K[13];let T;for(T=0;T<ee.length;T+=1){const re=get_each_context$e(K,ee,T);ae[T]?(ae[T].p(re,Y),transition_in(ae[T],1)):(ae[T]=create_each_block$e(re),ae[T].c(),transition_in(ae[T],1),ae[T].m(N,W))}for(group_outros(),T=ee.length;T<ae.length;T+=1)oe(T);check_outros()}},i(K){if(!G){for(let Y=0;Y<ce.length;Y+=1)transition_in(se[Y]);for(let Y=0;Y<ee.length;Y+=1)transition_in(ae[Y]);G=!0}},o(K){se=se.filter(Boolean);for(let Y=0;Y<se.length;Y+=1)transition_out(se[Y]);ae=ae.filter(Boolean);for(let Y=0;Y<ae.length;Y+=1)transition_out(ae[Y]);G=!1},d(K){K&&detach(d),destroy_each(se,K),destroy_each(ae,K),Q=!1,run_all(X)}}}function getBgColor(l){return l<3?"bg-emerald-400":l<6?"bg-yellow-400":l<8?"bg-orange-400":"bg-red-400"}function getTextColor(l){return l<3?"text-emerald-400":l<6?"text-yellow-400":l<8?"text-orange-400":"text-red-400"}function instance$i(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M;component_subscribe(l,beaconActivations,B=>_(2,y=B)),component_subscribe(l,wallet,B=>_(23,g=B)),component_subscribe(l,beaconMiningLevelReqs,B=>_(3,b=B)),component_subscribe(l,mineLevel,B=>_(4,v=B)),component_subscribe(l,settings,B=>_(24,w=B)),component_subscribe(l,beaconNextReqs,B=>_(5,k=B)),component_subscribe(l,beaconProgress,B=>_(6,I=B)),component_subscribe(l,beaconBonuses,B=>_(19,E=B)),component_subscribe(l,resources,B=>_(7,x=B)),component_subscribe(l,beaconSpendAmt,B=>_(8,D=B)),component_subscribe(l,beaconLevels,B=>_(9,N=B)),component_subscribe(l,beaconMaxLevels,B=>_(10,C=B)),component_subscribe(l,beaconNameText,B=>_(11,S=B)),component_subscribe(l,antiFlickerFlags,B=>_(12,O=B)),component_subscribe(l,beaconUpgrades,B=>_(13,M=B));let A=E;onMount(()=>{_(0,A=E),setInterval(()=>{for(let B=0;B<30;B++)_(1,m[B]=Math.min(100,I[B]/k[B]*100),m);_(1,m)},w.UPDATE_SPEED)}),onDestroy(()=>{});function U(){let B=!1,W=0;for(;!B&&W<10;)v.level<b[W]&&(B=!0),W++;if(W==10&&(W=11),W==1){set_store_value(beaconActivations,y[0]+=g.beacons,y),set_store_value(wallet,g.beacons=0,g);return}for(let $ in y)set_store_value(wallet,g.beacons+=y[$],g),set_store_value(beaconActivations,y[$]=0,y);let j=0;const F=g.beacons;for(let $=0;$<W-1;$++)set_store_value(beaconActivations,y[$]=Math.floor(F/(W-1)),y),j+=y[$];set_store_value(wallet,g.beacons-=j,g),j<formula.sumArray(y)&&set_store_value(wallet,g.beacons+=Math.floor(formula.sumArray(y)-j),g),console.log(g.beacons)}function L(){for(let B in y)set_store_value(wallet,g.beacons+=y[B],g),set_store_value(beaconActivations,y[B]=0,y)}const P=(B,W=0)=>B<1e9?B.toFixed(B<1e3?W:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):B.toExponential(3).toString().replace("+",""),J=(B,W=3,j=!1)=>(j&&(B-=1),B<1e9?(B*100).toFixed(B*100<1e3?W:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(B*100).toExponential(W).toString().replace("+","")+"%"),V=(B,W=3)=>B.toExponential(W).toString().replace("+","");function z(){D=this.value,beaconSpendAmt.set(D)}const ne=()=>U(),R=()=>L();return l.$$.update=()=>{l.$$.dirty&524288&&_(0,A=E)},_(1,m=Array(30).fill(0)),[A,m,y,b,v,k,I,x,D,N,C,S,O,M,U,L,P,J,V,E,z,ne,R]}class Beacons extends SvelteComponent{constructor(d){super(),init(this,d,instance$i,create_fragment$i,safe_not_equal,{})}}const PROGRESS_BASE=1;function instance$h(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W,j,F,$,te,q,G,Q,X,ce,se,_e,ee;component_subscribe(l,miningUpgrades,le=>_(7,m=le)),component_subscribe(l,miningUpgradeLevelsFree,le=>_(8,y=le)),component_subscribe(l,miningUpgradeLevels,le=>_(9,g=le)),component_subscribe(l,miningUpgradeLevelsBought,le=>_(10,b=le)),component_subscribe(l,enchantUpgradeLevels,le=>_(11,v=le)),component_subscribe(l,enchantUpgrades,le=>_(12,w=le)),component_subscribe(l,wallet,le=>_(13,k=le)),component_subscribe(l,beaconLevels,le=>_(14,I=le)),component_subscribe(l,beaconFormulas,le=>_(15,E=le)),component_subscribe(l,beaconBonuses,le=>_(16,x=le)),component_subscribe(l,beaconPowerFlavorText,le=>_(17,D=le)),component_subscribe(l,resources,le=>_(18,N=le)),component_subscribe(l,beaconUpgradeLevels,le=>_(19,C=le)),component_subscribe(l,beaconUpgrades,le=>_(20,S=le)),component_subscribe(l,beaconNums,le=>_(21,O=le)),component_subscribe(l,beaconNextReqs,le=>_(22,M=le)),component_subscribe(l,beaconProgress,le=>_(23,A=le)),component_subscribe(l,beaconActivations,le=>_(24,U=le)),component_subscribe(l,keyCrafts,le=>_(25,L=le)),component_subscribe(l,keyCraftMastery,le=>_(26,P=le)),component_subscribe(l,keyCraftTimes,le=>_(27,J=le)),component_subscribe(l,keyCraftAmount,le=>_(28,V=le)),component_subscribe(l,visibleTier,le=>_(29,z=le)),component_subscribe(l,miningDropTable,le=>_(30,ne=le)),component_subscribe(l,keyGainFlavorText,le=>_(31,R=le)),component_subscribe(l,progress,le=>_(32,B=le)),component_subscribe(l,gemGainFlavorText,le=>_(33,W=le)),component_subscribe(l,buttonStats,le=>_(34,j=le)),component_subscribe(l,progressAverage,le=>_(35,F=le)),component_subscribe(l,mineLevel,le=>_(36,$=le)),component_subscribe(l,enchantThreshold,le=>_(37,te=le)),component_subscribe(l,enchantProgress,le=>_(38,q=le)),component_subscribe(l,progressThisTick,le=>_(39,G=le)),component_subscribe(l,progressThreshold,le=>_(40,Q=le)),component_subscribe(l,unlockedRes,le=>_(41,X=le)),component_subscribe(l,automationItemsUnlocked,le=>_(42,ce=le)),component_subscribe(l,settings,le=>_(43,se=le)),component_subscribe(l,activityLog,le=>_(44,_e=le)),component_subscribe(l,activityLogShow,le=>_(45,ee=le));const ae=(le,ke=0)=>le<1e9?le.toFixed(ke).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):le.toExponential(3).toString().replace("+","");function oe(le,ke,Z){if(!ee[Z])return;const de=[le,ke];set_store_value(activityLog,_e=[..._e,de],_e),_e.length>100&&_e.shift()}let K=Date.now();const Y=se.UPDATE_SPEED;let T,re,me=0;onMount(()=>{Ee(),T=Date.now(),setInterval(()=>{re=(Date.now()-T)/Y,H(),fe(),Ae(),se.activeTab!=="beacons"?me>=10?(pe(re*10,!0),me=0):me++:(pe(re),me++),ce.beaconizer&&set_store_value(wallet,k.beacons=(k.beacons||0)+1e3/Y*re,k),T=Date.now()},Y),setInterval(()=>{for(let[le,ke]of Object.entries(k))ke>0&&!X.has(le)&&X.add(le)},773+Math.random()*227),setInterval(()=>{ye(re)},Y+Math.random()*3)});function fe(){$.xp>=$.xpNextReq&&(set_store_value(mineLevel,$.xp-=$.xpNextReq,$),set_store_value(mineLevel,$.level++,$),set_store_value(mineLevel,$.xpNextReq=500*$.level*Math.pow(1.25,$.level),$))}let he=1;function ye(le){const ke=PROGRESS_BASE*m[0].formula(g[0])*Math.max(1,x[1])*he;set_store_value(progressAverage,F.gems=ke,F),set_store_value(progressThisTick,G.gems=ke*le,G);const Z=(g[3]>0?PROGRESS_BASE*m[3].formula(g[3]):0)*m[26].formula(g[26])*x[5]*he;set_store_value(progressAverage,F.key1=Z,F),set_store_value(progressThisTick,G.key1=Z*le,G);const de=(g[4]>0?PROGRESS_BASE*m[4].formula(g[4]):0)*m[26].formula(g[26])*x[5]*he;set_store_value(progressAverage,F.key2=de,F),set_store_value(progressThisTick,G.key2=de*le,G);const Se=(g[18]>0?PROGRESS_BASE*m[18].formula(g[18]):0)*m[26].formula(g[26])*x[5]*he;set_store_value(progressAverage,F.key3=Se,F),set_store_value(progressThisTick,G.key3=Se*le,G)}function H(le){const ke=Q.gems,Z=[Q.key1,Q.key2,Q.key3,Q.key4,Q.key5];for(let[de,Se]of Object.entries(G))isNaN(B[de])&&set_store_value(progress,B[de]=0,B),set_store_value(progress,B[de]+=Se,B);if(B.gems>=ke){for(let[de,Se]of Object.entries(q))set_store_value(enchantProgress,q[de]+=Math.floor(B.gems/ke),q),q[de]>=te[de]&&(Ve(Math.floor(q[de]/te[de])),set_store_value(enchantProgress,q[de]%=te[de],q));ge(B.gems/ke,F.gems),Le(Math.floor(B.gems/ke)),set_store_value(mineLevel,$.xp+=B.gems/ke,$),F.gems,set_store_value(progress,B.gems=0,B)}B.key1>=Z[0]&&be(Math.floor(B.key1/Z[0]),Z),B.key2>=Z[1]&&xe(Math.floor(B.key2/Z[1]),Z),B.key3>=Z[2]&&De(Math.floor(B.key3/Z[2]),Z)}let ie=Date.now();function ge(le,ke){const de=(1+m[1].formula(g[1]))*m[8].formula(g[8])*Math.max(1,x[3])*Math.max(1,m[10].formula(g[10]))*Math.max(1,m[20].formula(g[20]))*Math.max(1,m[25].formula(g[25]))*j.hardenedBonus;Date.now()-ie>1e3&&(set_store_value(gemGainFlavorText,W=de,W),ie=Date.now()),set_store_value(wallet,k.gems+=de*le,k),Math.random()<m[13].formula(g[13])-1&&(set_store_value(wallet,k.fame=(k.fame||0)+1,k),oe("[Mythical] +1 fame","text-orange-400","mythical"))}function be(le,ke){const de=10*m[5].formula(g[5])*m[26].formula(g[26]);set_store_value(wallet,k.key1=(k.key1||0)+de*le,k),set_store_value(progress,B.key1%=ke[0],B),set_store_value(keyGainFlavorText,R.key1=de,R)}function xe(le,ke){const de=3*m[5].formula(g[5])*m[26].formula(g[26]);set_store_value(wallet,k.key2=(k.key2||0)+de*le,k),set_store_value(progress,B.key2%=ke[1],B),set_store_value(keyGainFlavorText,R.key2=de,R)}function De(le,ke){const de=2*m[5].formula(g[5])*m[26].formula(g[26]);set_store_value(wallet,k.key3=(k.key3||0)+de*le,k),set_store_value(progress,B.key3%=ke[2],B),set_store_value(keyGainFlavorText,R.key3=de,R)}function Le(le){let ke={};for(let[Z,de]of Object.entries(ne))if(z>=ref.dropTiers[Z]){if(de[0]>=1){ke[Z]=(ke[Z]||0)+de[1]+Math.random()*(de[2]-de[1]);continue}else if(le>1/de[0]){const Se=Math.sqrt(le*de[0]*(1-de[0])),ve=Array.from({length:Math.floor(Math.sqrt(le))},()=>Math.floor(de[1]+Math.random()*(de[2]-de[1]))),Me=Math.random()*2.83+.01,Be=de[0]*le+Math.max((Math.random()>.5?1:-1)*Se*Math.pow(Me/(Me-5),6),0),Oe=(ve[Math.floor(Math.random()*ve.length)]+ve[Math.floor(Math.random()*ve.length)]+ve[Math.floor(Math.random()*ve.length)])/3;ke[Z]=(ke[Z]||0)+Be*Oe}else if(Math.random()/le<de[0]){const Se=de[1]+Math.random()*(de[2]-de[1]);ke[Z]=(ke[Z]||0)+Se}}for(let[Z,de]of Object.entries(ke))set_store_value(wallet,k[Z]=(k[Z]||0)+de,k)}function Ae(){for(let[le,ke]of L.entries()){const Z=ke.item,de=J[Z][1];Date.now()>de&&de!=-1&&(set_store_value(keyCraftAmount,V[Z]++,V),set_store_value(wallet,k[Z]=(k[Z]||0)+formula.calcKeyCraftAmountGained(le),k),set_store_value(keyCraftTimes,J[Z][1]=-1,J),set_store_value(keyCraftMastery,P[Z][1]=parseInt(P[Z][1]||0)+1,P),P[Z][1]>=P[Z][2]&&(set_store_value(keyCraftMastery,P[Z][0]++,P),set_store_value(keyCraftMastery,P[Z][1]=0,P),Z=="energizedCrystal"?set_store_value(keyCraftMastery,P[Z][2]=3*P[Z][0]*Math.pow(1.24,P[Z][0]),P):set_store_value(keyCraftMastery,P[Z][2]=25*P[Z][0]*Math.pow(1.3,P[Z][0]),P),set_store_value(keyCraftMastery,P[Z][2]=Math.floor(P[Z][2]),P),oe("[Keys] Crafting Mastery for "+ke.name+"increased! ("+P[Z][0]+")","text-amber-400","crafting")),oe("[Keys] Crafting complete: +"+ae(formula.calcKeyCraftAmountGained(le))+" "+L[le].name,L[le].style||"text-white","crafting"))}}let we=new Set;function pe(le,ke=!1){isNaN(N.beaconPower)&&set_store_value(resources,N.beaconPower=0,N);const Z=U.map(ve=>ve*le*Math.max(1,S[0].formula(C[0]))*Math.max(1,S[2].formula(C[2]))*Math.max(1,m[12].formula(g[12]))*Math.max(1,m[24].formula(g[24])));set_store_value(beaconProgress,A=A.map((ve,Me)=>ve+Z[Me]),A);for(let ve=0;ve<A.length;ve++)if(isNaN(A[ve])&&set_store_value(beaconProgress,A[ve]=0,A),A[ve]>=M[ve]&&!we.has(ve)){we.add(ve);const Me=Math.max(1,formula.maxNumGeom(A[ve],M[ve],O[ve][1]));set_store_value(beaconProgress,A[ve]-=Math.max(M[ve],formula.gSum(M[ve],O[ve][1],Me)),A),set_store_value(beaconLevels,I[ve]+=Me,I),set_store_value(beaconBonuses,x[ve]=E[ve](I[ve]),x);const Be=1.0005;set_store_value(beaconNextReqs,M[ve]=(O[ve][0]+1)*I[ve]*Math.pow(Be,I[ve]),M),Date.now()-K>1e3&&(K=Date.now(),miningDropTable.updateTable()),set_store_value(wallet,k.beacons=(k.beacons||0)+S[1].formula(C[1]),k),we.delete(ve)}const de=Math.max(...I),Se=Math.log10(1+I.reduce((ve,Me)=>ve+Me/50*Math.max(.2,Math.pow(Me/de,2))),0)*le;set_store_value(resources,N.beaconPower=(N.beaconPower||0)+Se,N),set_store_value(beaconPowerFlavorText,D=Se,D)}function Ee(){for(let le=0;le<I.length;le++)set_store_value(beaconBonuses,x[le]=E[le](I[le]),x)}let Ie=!1;function Ve(le,ke){const Z=w[0].formula(v[0]),de=w[1].formula(v[1]);for(let[Se,ve]of w.entries())if(Math.random()/le<ve.formula(v[Se]))switch(Se){case 0:break;case 1:break;case 2:ge(Z),oe("[Burst] "+ae(Z)+" mining cycles","text-violet-300","burst");break;case 3:const Be=(Math.random()+.3)*Math.pow(30+Math.sqrt(de),3);set_store_value(wallet,k.orbs+=Be,k),oe("[Orb Rush] +"+ae(Be)+" orbs","text-violet-300","orb rush");break;case 4:if(Ie)break;he*=Math.sqrt(w[0].formula(v[0])),Ie=!0,setTimeout(()=>{he/=Math.sqrt(w[0].formula(v[0])),Math.abs(he-Math.round(he))<.1&&(he=Math.round(he)),Ie=!1},3e3),oe("[Lightning Blast] "+ae(Math.sqrt(w[0].formula(v[0])))+"x mining speed for 3 seconds!","text-violet-300","lightning blast");break;case 5:const Oe=[0,1,2,3,4,7,8];let Ye=!1;for(;!Ye;){const Ce=Math.floor(Math.random()*Oe.length),Ke=Oe[Ce];b[Ke]<m[Ke].maxLevel&&(set_store_value(miningUpgradeLevels,g[Ke]++,g),set_store_value(miningUpgradeLevelsFree,y[Ke]++,y),Ye=!0,oe("[Scavenger] Added 1 level of "+m[Ke].name+"!","text-violet-300","scavenger"))}break}}return[]}class Adders extends SvelteComponent{constructor(d){super(),init(this,d,instance$h,null,safe_not_equal,{},null,[-1,-1,-1])}}function get_each_context$d(l,d,_){const m=l.slice();return m[23]=d[_],m}function get_each_context_1$4(l,d,_){const m=l.slice();return m[26]=d[_],m}function create_if_block_3$6(l){let d,_,m,y=l[15][Math.max(0,ref.dropTiers[l[26][0]]-1)]+"",g,b,v,w,k,I=(ref.displayNames[l[26][0]]||l[26][0])+"",E,x,D,N,C=l[17](Math.min(1,l[26][1][0]),l[26][1][0]<.001?l[26][1][0]<1e-4?l[26][1][0]<1e-5?6:5:4:3)+"",S,O,M,A,U=l[16](l[26][1][1],0)+"",L,P,J=l[16](l[26][1][2],0)+"",V,z,ne;return{c(){d=element("div"),_=element("div"),m=text("["),g=text(y),b=text("]"),w=space(),k=element("div"),E=text(I),D=space(),N=element("div"),S=text(C),O=space(),M=element("div"),A=text("[ "),L=text(U),P=text(" - "),V=text(J),z=text(" ]"),ne=space(),this.h()},l(R){d=claim_element(R,"DIV",{class:!0});var B=children(d);_=claim_element(B,"DIV",{class:!0});var W=children(_);m=claim_text(W,"["),g=claim_text(W,y),b=claim_text(W,"]"),W.forEach(detach),w=claim_space(B),k=claim_element(B,"DIV",{class:!0});var j=children(k);E=claim_text(j,I),j.forEach(detach),D=claim_space(B),N=claim_element(B,"DIV",{class:!0});var F=children(N);S=claim_text(F,C),F.forEach(detach),O=claim_space(B),M=claim_element(B,"DIV",{class:!0});var $=children(M);A=claim_text($,"[ "),L=claim_text($,U),P=claim_text($," - "),V=claim_text($,J),z=claim_text($," ]"),$.forEach(detach),ne=claim_space(B),B.forEach(detach),this.h()},h(){attr(_,"class",v="col-span-1 text-left "+(ref.dropTierColors[ref.dropTiers[l[26][0]]]||"text-white")),attr(k,"class",x="col-span-3 text-left pl-[8px] "+(ref.colors[l[26][0]]||"text-white")),attr(N,"class","col-span-3 text-left pl-1"),attr(M,"class","col-span-2 text-right pl-1"),attr(d,"class","drop-table-disp grid grid-cols-9")},m(R,B){insert_hydration(R,d,B),append_hydration(d,_),append_hydration(_,m),append_hydration(_,g),append_hydration(_,b),append_hydration(d,w),append_hydration(d,k),append_hydration(k,E),append_hydration(d,D),append_hydration(d,N),append_hydration(N,S),append_hydration(d,O),append_hydration(d,M),append_hydration(M,A),append_hydration(M,L),append_hydration(M,P),append_hydration(M,V),append_hydration(M,z),append_hydration(d,ne)},p(R,B){B&1&&y!==(y=R[15][Math.max(0,ref.dropTiers[R[26][0]]-1)]+"")&&set_data(g,y),B&1&&v!==(v="col-span-1 text-left "+(ref.dropTierColors[ref.dropTiers[R[26][0]]]||"text-white"))&&attr(_,"class",v),B&1&&I!==(I=(ref.displayNames[R[26][0]]||R[26][0])+"")&&set_data(E,I),B&1&&x!==(x="col-span-3 text-left pl-[8px] "+(ref.colors[R[26][0]]||"text-white"))&&attr(k,"class",x),B&1&&C!==(C=R[17](Math.min(1,R[26][1][0]),R[26][1][0]<.001?R[26][1][0]<1e-4?R[26][1][0]<1e-5?6:5:4:3)+"")&&set_data(S,C),B&1&&U!==(U=R[16](R[26][1][1],0)+"")&&set_data(L,U),B&1&&J!==(J=R[16](R[26][1][2],0)+"")&&set_data(V,J)},d(R){R&&detach(d)}}}function create_each_block_1$4(l){let d,_=l[8]>=ref.dropTiers[l[26][0]]&&create_if_block_3$6(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[8]>=ref.dropTiers[m[26][0]]?_?_.p(m,y):(_=create_if_block_3$6(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$9(l){let d,_,m,y=Object.entries(l[0]).sort(func),g=[];for(let b=0;b<y.length;b+=1)g[b]=create_each_block_1$4(get_each_context_1$4(l,y,b));return{c(){d=element("div"),_=text(`Hover for Possible Drops
        `),m=element("span");for(let b=0;b<g.length;b+=1)g[b].c();this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var v=children(d);_=claim_text(v,`Hover for Possible Drops
        `),m=claim_element(v,"SPAN",{class:!0});var w=children(m);for(let k=0;k<g.length;k+=1)g[k].l(w);w.forEach(detach),v.forEach(detach),this.h()},h(){attr(m,"class","px-2 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-20 pointer-events-none"),attr(d,"class","has-tooltip mining-flavor game-btn text-med text-center items-right")},m(b,v){insert_hydration(b,d,v),append_hydration(d,_),append_hydration(d,m);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(m,null)},p(b,v){if(v&229633){y=Object.entries(b[0]).sort(func);let w;for(w=0;w<y.length;w+=1){const k=get_each_context_1$4(b,y,w);g[w]?g[w].p(k,v):(g[w]=create_each_block_1$4(k),g[w].c(),g[w].m(m,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=y.length}},d(b){b&&detach(d),destroy_each(g,b)}}}function create_if_block_2$a(l){let d,_,m,y,g,b,v,w,k,I=(l[14].key1>1?l[16](l[14].key1,0):"???")+"",E,x,D=l[16](l[9].key1*(1e3/l[11].UPDATE_SPEED)/l[1].key1,3)+"",N,C;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=space(),b=element("div"),v=element("div"),w=text("[*] "),k=element("strong"),E=text(I),x=text(`
                    x `),N=text(D),C=text(" / sec"),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var O=children(d);_=claim_element(O,"DIV",{class:!0});var M=children(_);m=claim_element(M,"DIV",{class:!0});var A=children(m);y=claim_element(A,"DIV",{class:!0,style:!0}),children(y).forEach(detach),A.forEach(detach),M.forEach(detach),O.forEach(detach),g=claim_space(S),b=claim_element(S,"DIV",{class:!0});var U=children(b);v=claim_element(U,"DIV",{class:!0});var L=children(v);w=claim_text(L,"[*] "),k=claim_element(L,"STRONG",{});var P=children(k);E=claim_text(P,I),P.forEach(detach),x=claim_text(L,`
                    x `),N=claim_text(L,D),C=claim_text(L," / sec"),L.forEach(detach),U.forEach(detach),this.h()},h(){attr(y,"class","bg-emerald-400 h-2.5 rounded-full"),set_style(y,"width",l[12].keyfinder?"100%":l[6]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(v,"class","text-[#989898] text-small"),attr(b,"class","col-span-3 pl-1 text-left align-text-middle")},m(S,O){insert_hydration(S,d,O),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(S,g,O),insert_hydration(S,b,O),append_hydration(b,v),append_hydration(v,w),append_hydration(v,k),append_hydration(k,E),append_hydration(v,x),append_hydration(v,N),append_hydration(v,C)},p(S,O){O&4160&&set_style(y,"width",S[12].keyfinder?"100%":S[6]),O&16384&&I!==(I=(S[14].key1>1?S[16](S[14].key1,0):"???")+"")&&set_data(E,I),O&2562&&D!==(D=S[16](S[9].key1*(1e3/S[11].UPDATE_SPEED)/S[1].key1,3)+"")&&set_data(N,D)},d(S){S&&detach(d),S&&detach(g),S&&detach(b)}}}function create_if_block_1$b(l){let d,_,m,y,g,b,v,w,k,I=(l[14].key2>1?l[16](l[14].key2,0):"???")+"",E,x,D=l[16](l[9].key2*(1e3/l[11].UPDATE_SPEED)/l[1].key2,3)+"",N,C;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=space(),b=element("div"),v=element("div"),w=text("[**] "),k=element("strong"),E=text(I),x=text(`
                    x `),N=text(D),C=text(" / sec"),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var O=children(d);_=claim_element(O,"DIV",{class:!0});var M=children(_);m=claim_element(M,"DIV",{class:!0});var A=children(m);y=claim_element(A,"DIV",{class:!0,style:!0}),children(y).forEach(detach),A.forEach(detach),M.forEach(detach),O.forEach(detach),g=claim_space(S),b=claim_element(S,"DIV",{class:!0});var U=children(b);v=claim_element(U,"DIV",{class:!0});var L=children(v);w=claim_text(L,"[**] "),k=claim_element(L,"STRONG",{});var P=children(k);E=claim_text(P,I),P.forEach(detach),x=claim_text(L,`
                    x `),N=claim_text(L,D),C=claim_text(L," / sec"),L.forEach(detach),U.forEach(detach),this.h()},h(){attr(y,"class","bg-blue-400 h-2.5 rounded-full"),set_style(y,"width",l[12].keyfinder?"100%":l[5]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(v,"class","text-[#989898] text-small"),attr(b,"class","col-span-3 pl-1 text-left align-text-middle")},m(S,O){insert_hydration(S,d,O),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(S,g,O),insert_hydration(S,b,O),append_hydration(b,v),append_hydration(v,w),append_hydration(v,k),append_hydration(k,E),append_hydration(v,x),append_hydration(v,N),append_hydration(v,C)},p(S,O){O&4128&&set_style(y,"width",S[12].keyfinder?"100%":S[5]),O&16384&&I!==(I=(S[14].key2>1?S[16](S[14].key2,0):"???")+"")&&set_data(E,I),O&2562&&D!==(D=S[16](S[9].key2*(1e3/S[11].UPDATE_SPEED)/S[1].key2,3)+"")&&set_data(N,D)},d(S){S&&detach(d),S&&detach(g),S&&detach(b)}}}function create_if_block$f(l){let d,_,m,y,g,b,v,w,k,I=(l[14].key3>1?l[16](l[14].key3,0):"???")+"",E,x,D=l[16](l[9].key3*(1e3/l[11].UPDATE_SPEED)/l[1].key3,3)+"",N,C;return{c(){d=element("div"),_=element("div"),m=element("div"),y=element("div"),g=space(),b=element("div"),v=element("div"),w=text("[***] "),k=element("strong"),E=text(I),x=text(`
                    x `),N=text(D),C=text(" / sec"),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var O=children(d);_=claim_element(O,"DIV",{class:!0});var M=children(_);m=claim_element(M,"DIV",{class:!0});var A=children(m);y=claim_element(A,"DIV",{class:!0,style:!0}),children(y).forEach(detach),A.forEach(detach),M.forEach(detach),O.forEach(detach),g=claim_space(S),b=claim_element(S,"DIV",{class:!0});var U=children(b);v=claim_element(U,"DIV",{class:!0});var L=children(v);w=claim_text(L,"[***] "),k=claim_element(L,"STRONG",{});var P=children(k);E=claim_text(P,I),P.forEach(detach),x=claim_text(L,`
                    x `),N=claim_text(L,D),C=claim_text(L," / sec"),L.forEach(detach),U.forEach(detach),this.h()},h(){attr(y,"class","bg-pink-400 h-2.5 rounded-full"),set_style(y,"width",l[12].keyfinder?"100%":l[4]),attr(m,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(_,"class","mine-bar-wrapper align-middle"),attr(d,"class","col-span-9"),attr(v,"class","text-[#989898] text-small"),attr(b,"class","col-span-3 pl-1 text-left align-text-middle")},m(S,O){insert_hydration(S,d,O),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),insert_hydration(S,g,O),insert_hydration(S,b,O),append_hydration(b,v),append_hydration(v,w),append_hydration(v,k),append_hydration(k,E),append_hydration(v,x),append_hydration(v,N),append_hydration(v,C)},p(S,O){O&4112&&set_style(y,"width",S[12].keyfinder?"100%":S[4]),O&16384&&I!==(I=(S[14].key3>1?S[16](S[14].key3,0):"???")+"")&&set_data(E,I),O&2562&&D!==(D=S[16](S[9].key3*(1e3/S[11].UPDATE_SPEED)/S[1].key3,3)+"")&&set_data(N,D)},d(S){S&&detach(d),S&&detach(g),S&&detach(b)}}}function create_each_block$d(l){let d,_,m,y;return _=new MiningUpgradeButton({props:{index:l[23]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-1 mine-upgrade-button-wrapper")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},p(g,b){const v={};b&8&&(v.index=g[23]),_.$set(v)},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_fragment$h(l){let d,_=l[2],m,y,g,b,v=l[9].gems>l[1].gems?"~":"",w,k,I=(l[10]>1?l[16](l[10],0):1)+"",E,x,D=l[16](l[9].gems*(1e3/l[11].UPDATE_SPEED)/l[1].gems,2)+"",N,C,S,O,M,A,U,L,P,J,V,z,ne,R=create_key_block$9(l),B=l[13][3]>0&&create_if_block_2$a(l),W=l[13][4]>0&&create_if_block_1$b(l),j=l[13][18]>0&&create_if_block$f(l),F=l[3],$=[];for(let q=0;q<F.length;q+=1)$[q]=create_each_block$d(get_each_context$d(l,F,q));const te=q=>transition_out($[q],1,1,()=>{$[q]=null});return{c(){d=element("div"),R.c(),m=space(),y=element("div"),g=text(`gem progress [ 
        `),b=element("strong"),w=text(v),k=space(),E=text(I),x=text(`
         x `),N=text(D),C=text(" times / sec ]"),S=space(),O=element("div"),M=element("div"),A=element("div"),U=space(),L=element("div"),B&&B.c(),P=space(),W&&W.c(),J=space(),j&&j.c(),V=space(),z=element("div");for(let q=0;q<$.length;q+=1)$[q].c();this.h()},l(q){d=claim_element(q,"DIV",{class:!0});var G=children(d);R.l(G),m=claim_space(G),y=claim_element(G,"DIV",{class:!0});var Q=children(y);g=claim_text(Q,`gem progress [ 
        `),b=claim_element(Q,"STRONG",{});var X=children(b);w=claim_text(X,v),k=claim_space(X),E=claim_text(X,I),X.forEach(detach),x=claim_text(Q,`
         x `),N=claim_text(Q,D),C=claim_text(Q," times / sec ]"),Q.forEach(detach),S=claim_space(G),O=claim_element(G,"DIV",{class:!0});var ce=children(O);M=claim_element(ce,"DIV",{class:!0});var se=children(M);A=claim_element(se,"DIV",{class:!0,style:!0}),children(A).forEach(detach),se.forEach(detach),ce.forEach(detach),U=claim_space(G),L=claim_element(G,"DIV",{class:!0});var _e=children(L);B&&B.l(_e),P=claim_space(_e),W&&W.l(_e),J=claim_space(_e),j&&j.l(_e),_e.forEach(detach),V=claim_space(G),z=claim_element(G,"DIV",{class:!0});var ee=children(z);for(let ae=0;ae<$.length;ae+=1)$[ae].l(ee);ee.forEach(detach),G.forEach(detach),this.h()},h(){attr(y,"class","text-[#989898] text-small pt-4"),attr(A,"class","bg-red-300 h-2.5 rounded-full"),set_style(A,"width",l[12].gems?"100%":l[7]),attr(M,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(O,"class","mine-bar-wrapper pb-2"),attr(L,"class","grid grid-cols-12 align-middle"),attr(z,"class","mine-upgrade-wrapper grid grid-cols-2"),attr(d,"class","wrapper py-2")},m(q,G){insert_hydration(q,d,G),R.m(d,null),append_hydration(d,m),append_hydration(d,y),append_hydration(y,g),append_hydration(y,b),append_hydration(b,w),append_hydration(b,k),append_hydration(b,E),append_hydration(y,x),append_hydration(y,N),append_hydration(y,C),append_hydration(d,S),append_hydration(d,O),append_hydration(O,M),append_hydration(M,A),append_hydration(d,U),append_hydration(d,L),B&&B.m(L,null),append_hydration(L,P),W&&W.m(L,null),append_hydration(L,J),j&&j.m(L,null),append_hydration(d,V),append_hydration(d,z);for(let Q=0;Q<$.length;Q+=1)$[Q]&&$[Q].m(z,null);ne=!0},p(q,[G]){if(G&4&&safe_not_equal(_,_=q[2])?(R.d(1),R=create_key_block$9(q),R.c(),R.m(d,m)):R.p(q,G),(!ne||G&514)&&v!==(v=q[9].gems>q[1].gems?"~":"")&&set_data(w,v),(!ne||G&1024)&&I!==(I=(q[10]>1?q[16](q[10],0):1)+"")&&set_data(E,I),(!ne||G&2562)&&D!==(D=q[16](q[9].gems*(1e3/q[11].UPDATE_SPEED)/q[1].gems,2)+"")&&set_data(N,D),(!ne||G&4224)&&set_style(A,"width",q[12].gems?"100%":q[7]),q[13][3]>0?B?B.p(q,G):(B=create_if_block_2$a(q),B.c(),B.m(L,P)):B&&(B.d(1),B=null),q[13][4]>0?W?W.p(q,G):(W=create_if_block_1$b(q),W.c(),W.m(L,J)):W&&(W.d(1),W=null),q[13][18]>0?j?j.p(q,G):(j=create_if_block$f(q),j.c(),j.m(L,null)):j&&(j.d(1),j=null),G&8){F=q[3];let Q;for(Q=0;Q<F.length;Q+=1){const X=get_each_context$d(q,F,Q);$[Q]?($[Q].p(X,G),transition_in($[Q],1)):($[Q]=create_each_block$d(X),$[Q].c(),transition_in($[Q],1),$[Q].m(z,null))}for(group_outros(),Q=F.length;Q<$.length;Q+=1)te(Q);check_outros()}},i(q){if(!ne){for(let G=0;G<F.length;G+=1)transition_in($[G]);ne=!0}},o(q){$=$.filter(Boolean);for(let G=0;G<$.length;G+=1)transition_out($[G]);ne=!1},d(q){q&&detach(d),R.d(q),B&&B.d(),W&&W.d(),j&&j.d(),destroy_each($,q)}}}const func=(l,d)=>d[1][0]-l[1][0];function instance$g(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M;component_subscribe(l,miningDropTable,V=>_(0,w=V)),component_subscribe(l,miningUpgrades,V=>_(18,k=V)),component_subscribe(l,progressThreshold,V=>_(1,I=V)),component_subscribe(l,progress,V=>_(19,E=V)),component_subscribe(l,visibleTier,V=>_(8,x=V)),component_subscribe(l,progressAverage,V=>_(9,D=V)),component_subscribe(l,gemGainFlavorText,V=>_(10,N=V)),component_subscribe(l,settings,V=>_(11,C=V)),component_subscribe(l,antiFlickerFlags,V=>_(12,S=V)),component_subscribe(l,miningUpgradeLevels,V=>_(13,O=V)),component_subscribe(l,keyGainFlavorText,V=>_(14,M=V));let A=!1;onMount(()=>{setInterval(()=>{_(2,A=!A)},517),setInterval(()=>{Object.entries(w).sort((V,z)=>z[1][0]-V[1][0])},5e3)});const U=["I","II","III","IV","V","VI","VII","VIII","IX","X"],L=(V,z=0)=>V<1e9?V.toFixed(V<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):V.toExponential(3).toString().replace("+",""),P=(V,z=3,ne=!1)=>(ne&&(V-=1),V<1e9?(V*100).toFixed(V<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(V*100).toExponential(z).toString().replace("+","")+"%"),J=(V,z)=>{const ne=ref.miningUpgradeSortOrder[(V[1].name||"default").toLowerCase()]||ref.miningUpgradeSortOrder.default,R=ref.miningUpgradeSortOrder[(z[1].name||"default").toLowerCase()]||ref.miningUpgradeSortOrder.default;return ne-R};return l.$$.update=()=>{l.$$.dirty&524290&&_(7,m=`${E.gems/I.gems*100}%`),l.$$.dirty&524290&&_(6,y=`${E.key1/I.key1*100}%`),l.$$.dirty&524290&&_(5,g=`${E.key2/I.key2*100}%`),l.$$.dirty&524290&&_(4,b=`${E.key3/I.key3*100}%`),l.$$.dirty&1,l.$$.dirty&262144&&_(3,v=k.map((V,z)=>z).sort((V,z)=>J([V,k[V]],[z,k[z]])))},[w,I,A,v,b,g,y,m,x,D,N,C,S,O,M,U,L,P,k,E]}class Mining extends SvelteComponent{constructor(d){super(),init(this,d,instance$g,create_fragment$h,safe_not_equal,{})}}const KeyOpenButton_svelte_svelte_type_style_lang="";function create_else_block_2$1(l){let d;return{c(){d=text("---")},l(_){d=claim_text(_,"---")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_5$2(l){let d=l[8]()+"",_;return{c(){_=text(d)},l(m){_=claim_text(m,d)},m(m,y){insert_hydration(m,_,y)},p:noop,d(m){m&&detach(_)}}}function create_if_block_3$5(l){let d;function _(g,b){return g[1]==1?create_if_block_4$3:create_else_block_1$2}let m=_(l),y=m(l);return{c(){y.c(),d=empty()},l(g){y.l(g),d=empty()},m(g,b){y.m(g,b),insert_hydration(g,d,b)},p(g,b){m!==(m=_(g))&&(y.d(1),y=m(g),y&&(y.c(),y.m(d.parentNode,d)))},d(g){y.d(g),g&&detach(d)}}}function create_if_block$e(l){let d;function _(g,b){return g[1]==1?create_if_block_1$a:g[1]=="max"?create_if_block_2$9:create_else_block$6}let m=_(l),y=m(l);return{c(){y.c(),d=empty()},l(g){y.l(g),d=empty()},m(g,b){y.m(g,b),insert_hydration(g,d,b)},p(g,b){m===(m=_(g))&&y?y.p(g,b):(y.d(1),y=m(g),y&&(y.c(),y.m(d.parentNode,d)))},d(g){y.d(g),g&&detach(d)}}}function create_else_block_1$2(l){let d;return{c(){d=text("---")},l(_){d=claim_text(_,"---")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_if_block_4$3(l){let d;return{c(){d=text("Find a key of this rarity to use it.")},l(_){d=claim_text(_,"Find a key of this rarity to use it.")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_else_block$6(l){let d,_=l[4](parseInt(l[1]),0)+"",m;return{c(){d=text("x"),m=text(_)},l(y){d=claim_text(y,"x"),m=claim_text(y,_)},m(y,g){insert_hydration(y,d,g),insert_hydration(y,m,g)},p(y,g){g&2&&_!==(_=y[4](parseInt(y[1]),0)+"")&&set_data(m,_)},d(y){y&&detach(d),y&&detach(m)}}}function create_if_block_2$9(l){let d;return{c(){d=text("Open All")},l(_){d=claim_text(_,"Open All")},m(_,m){insert_hydration(_,d,m)},p:noop,d(_){_&&detach(d)}}}function create_if_block_1$a(l){let d,_,m=l[6]()+"",y,g,b;return{c(){d=text("Use "),_=element("span"),y=text(m),b=text(" Key"),this.h()},l(v){d=claim_text(v,"Use "),_=claim_element(v,"SPAN",{class:!0});var w=children(_);y=claim_text(w,m),w.forEach(detach),b=claim_text(v," Key"),this.h()},h(){attr(_,"class",g=null_to_empty(ref.colors["key"+l[0]])+" svelte-10ri8s1")},m(v,w){insert_hydration(v,d,w),insert_hydration(v,_,w),append_hydration(_,y),insert_hydration(v,b,w)},p(v,w){w&1&&g!==(g=null_to_empty(ref.colors["key"+v[0]])+" svelte-10ri8s1")&&attr(_,"class",g)},d(v){v&&detach(d),v&&detach(_),v&&detach(b)}}}function create_fragment$g(l){let d,_,m,y,g,b;function v(I,E){return E&8&&(_=null),_==null&&(_=!!(I[3]&&I[7]())),_?create_if_block$e:(m==null&&(m=!!I[7]()),m?create_if_block_3$5:I[1]==1?create_if_block_5$2:create_else_block_2$1)}let w=v(l,-1),k=w(l);return{c(){d=element("div"),k.c(),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);k.l(E),E.forEach(detach),this.h()},h(){attr(d,"class",y="has-tooltip tooltip-text "+((l[2]||l[1]==="max")&&l[7]()?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")},m(I,E){insert_hydration(I,d,E),k.m(d,null),g||(b=listen(d,"click",l[9]),g=!0)},p(I,[E]){w===(w=v(I,E))&&k?k.p(I,E):(k.d(1),k=w(I),k&&(k.c(),k.m(d,null))),E&6&&y!==(y="has-tooltip tooltip-text "+((I[2]||I[1]==="max")&&I[7]()?"game-btn":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-10ri8s1")&&attr(d,"class",y)},i:noop,o:noop,d(I){I&&detach(d),k.d(),g=!1,b()}}}function instance$f(l,d,_){let m,y,g,b,v;component_subscribe(l,wallet,V=>_(12,m=V)),component_subscribe(l,beaconLevels,V=>_(13,y=V)),component_subscribe(l,keysOpened,V=>_(14,g=V)),component_subscribe(l,keyRewardText,V=>_(15,b=V)),component_subscribe(l,keyItemsUnlocked,V=>_(16,v=V));let{rarity:w,amt:k}=d,I,E,x;onMount(()=>{setTimeout(()=>{_(2,I=M())},50),x=setInterval(()=>{_(2,I=M()),_(3,E=A())},100+Math.random()*20)}),onDestroy(()=>{clearInterval(x)});const D=(V,z=0)=>V<1e9?V.toFixed(V<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):V.toExponential(3).toString().replace("+","");function N(){if(k=="max"){const V=m["key"+w.toString()];set_store_value(wallet,m["key"+w.toString()]=0,m),C(V)}else L()&&m["key"+w.toString()]>=k&&(set_store_value(wallet,m["key"+w.toString()]-=parseInt(k),m),set_store_value(keysOpened,g["key"+(w-1)]+=parseInt(k),g),C(k))}function C(V){V=Number(V);let z={};set_store_value(keysOpened,g[w-1]+=Number(V),g);let ne;switch(w){case 1:ne=get_store_value(key1DropTable);break;case 2:ne=get_store_value(key2DropTable);break;case 3:ne=get_store_value(key3DropTable);break;case 4:ne=get_store_value(key4DropTable);break;case 5:ne=get_store_value(key5DropTable);break}for(let[B,W]of Object.entries(ne))if(B!="tier")if(Number(V)*W[0]>=1){const j=Math.min(V,4e7),F=formula.sumArray(Array.from({length:Math.floor(Math.sqrt(j))},()=>Math.floor(W[1]+Math.random()*(W[2]-W[1]))).sort(()=>.5-Math.random()).slice(0,3))/3,$=formula.sumArray(Array.from({length:Math.floor(Math.sqrt(j))},()=>formula.rNorm()).sort(()=>.5-Math.random()).slice(0,3))/3,q=Math.sqrt(j*W[0]*(1-W[0]))*$,G=W[0]*j+q;let Q=Math.max(G*W[1],G*F);V>j&&(Q*=V/j),B.includes("key")&&B[3]==ne.tier&&Q>V*.33&&(Q=V*.33),z[B]=(z[B]||0)+Q}else if(Number(V)==1){z[B]=Math.random()<W[0]?W[1]+Math.random()*(W[2]-W[1]):0;continue}else{const j=V,F=W[0],$=Math.random();let te=Math.exp(-1*j*F),q=0,G=!1;const Q=[0,1,2,6,24,120,720,5040,40320,362880];for(;!G&&q<9;)$<1-te?(q++,te+=Math.exp(-1*j*F)*Math.pow(j*F,q)/Q[q]):G=!0;j*F>.97&&(q+=(V-q)*(1-F**25+F**25*Math.random()));const X=Math.sqrt(j*F);z[B]+=q*(W[1]+Math.random()*(W[2]-W[1])+formula.rNorm()*X)}const R={};for(let[B,W]of Object.entries(z))z[B]=Math.floor(W),z[B]>0&&(set_store_value(wallet,m[B]=(m[B]||0)+W,m),v["key"+w].add(B),R[B]=W);O(R)}let S;function O(V){set_store_value(keyRewardText,b=V,b),Object.keys(V).length===0&&set_store_value(keyRewardText,b={},b),S&&clearTimeout(S),S=setTimeout(()=>{set_store_value(keyRewardText,b="",b)},5e3)}function M(){return m["key"+w.toString()]>=k}function A(){return m["key"+w.toString()]>0||g["key"+(w-1)]>0}function U(){return["T1 [*]","T2 [**]","T3 [***]","T4 [****]","T5 [*****]"][w-1]}function L(){switch(w){case 1:return m.key1&&m.key1>=1;case 2:return m.beacons&&m.beacons>=1||formula.sumArray(y)>0;case 3:return m.sigils&&m.sigils>=1;case 4:return m.artifactsTotal&&m.artifactsTotal>=1;case 5:return m.holyLight&&m.holyLight>=1}}function P(){switch(w){case 1:return"Requires 1 [*] key";case 2:return"Requires 1 beacon";case 3:return"Requires 1 sigil";case 4:return"Requires 1 artifact (any kind)";case 5:return"Requires 1 holy light"}}const J=()=>N();return l.$$set=V=>{"rarity"in V&&_(0,w=V.rarity),"amt"in V&&_(1,k=V.amt)},[w,k,I,E,D,N,U,L,P,J]}class KeyOpenButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$f,create_fragment$g,safe_not_equal,{rarity:0,amt:1})}}const KeySlurryConvertButton_svelte_svelte_type_style_lang="";function create_if_block$d(l){let d,_,m,y,g=l[3](Math.floor(l[1]))+"",b,v,w,k,I,E,x,D,N,C,S=l[3](l[1])+"",O,M,A,U;return{c(){d=element("div"),_=text("Convert Keys Into Slurry "),m=element("span"),y=text("[ +"),b=text(g),v=text(" ]"),w=space(),k=element("span"),I=element("div"),E=text("Converts all keys into key slurry."),x=space(),D=element("div"),N=element("div"),C=text("You will gain "),O=text(S),M=text(" slurry."),this.h()},l(L){d=claim_element(L,"DIV",{class:!0});var P=children(d);_=claim_text(P,"Convert Keys Into Slurry "),m=claim_element(P,"SPAN",{class:!0});var J=children(m);y=claim_text(J,"[ +"),b=claim_text(J,g),v=claim_text(J," ]"),J.forEach(detach),w=claim_space(P),k=claim_element(P,"SPAN",{class:!0});var V=children(k);I=claim_element(V,"DIV",{class:!0});var z=children(I);E=claim_text(z,"Converts all keys into key slurry."),z.forEach(detach),x=claim_space(V),D=claim_element(V,"DIV",{class:!0});var ne=children(D);N=claim_element(ne,"DIV",{class:!0});var R=children(N);C=claim_text(R,"You will gain "),O=claim_text(R,S),M=claim_text(R," slurry."),R.forEach(detach),ne.forEach(detach),V.forEach(detach),P.forEach(detach),this.h()},h(){attr(m,"class","text-teal-400"),attr(I,"class","title text-small-gray items-start text-center pb-1"),attr(N,"class","text-small game-text"),attr(D,"class","text-center effect-wrapper"),attr(k,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class","has-tooltip tooltip-text game-btn text-teal-400 py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(L,P){insert_hydration(L,d,P),append_hydration(d,_),append_hydration(d,m),append_hydration(m,y),append_hydration(m,b),append_hydration(m,v),append_hydration(d,w),append_hydration(d,k),append_hydration(k,I),append_hydration(I,E),append_hydration(k,x),append_hydration(k,D),append_hydration(D,N),append_hydration(N,C),append_hydration(N,O),append_hydration(N,M),A||(U=listen(d,"click",l[6]),A=!0)},p(L,P){P&2&&g!==(g=L[3](Math.floor(L[1]))+"")&&set_data(b,g),P&2&&S!==(S=L[3](L[1])+"")&&set_data(O,S)},d(L){L&&detach(d),A=!1,U()}}}function create_key_block$8(l){let d,_=(l[2].gold>1e6||l[2].slurry>0)&&create_if_block$d(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[2].gold>1e6||m[2].slurry>0?_?_.p(m,y):(_=create_if_block$d(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$f(l){let d=l[0],_,m=create_key_block$8(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&1&&safe_not_equal(d,d=y[0])?(m.d(1),m=create_key_block$8(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$e(l,d,_){let m,y;component_subscribe(l,wallet,E=>_(2,y=E));let g,b,v={key1:y.key1,key2:y.key2,key3:y.key3,key4:y.key4,key5:y.key5};onMount(()=>{_(0,g=!1),b=setInterval(()=>{_(5,v={key1:y.key1,key2:y.key2,key3:y.key3,key4:y.key4,key5:y.key5}),_(0,g=!g)},503)}),onDestroy(()=>{clearInterval(b)});const w=(E,x=0)=>E<1e9?E.toFixed(E<1e3?x:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):E.toExponential(3).toString().replace("+","");function k(){console.log(y.slurry),console.log(m),set_store_value(wallet,y.slurry+=m,y);for(let E of Object.keys(y))E.includes("key")&&set_store_value(wallet,y[E]=0,y)}const I=()=>k();return l.$$.update=()=>{l.$$.dirty&32&&_(1,m=formula.calcKeySlurryGain(v))},[g,m,y,w,k,v,I]}class KeySlurryConvertButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$e,create_fragment$f,safe_not_equal,{})}}const SlurryUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$c(l,d,_){const m=l.slice();return m[20]=d[_],m}function create_if_block$c(l){let d,_=l[5][l[0]].name+"",m,y,g,b,v,w=l[7][l[0]]+"",k,I,E=l[5][l[0]].maxLevel+"",x,D,N=l[5][l[0]].description+"",C,S,O,M,A,U=(l[5][l[0]].prefix||"")+"",L,P=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[7][l[0]]),3,!1):l[9](l[5][l[0]].formula(l[7][l[0]]),3))+"",J,V=(l[5][l[0]].suffix||"")+"",z,ne,R,B,W=(l[5][l[0]].prefix||"")+"",j,F=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[7][l[0]]+l[6].buyAmount),3,!1):l[9](l[5][l[0]].formula(l[7][l[0]]+l[6].buyAmount),3))+"",$,te=(l[5][l[0]].suffix||"")+"",q,G,Q,X,ce,se,_e,ee;function ae(Y,T){return Y[7][Y[0]]>=Y[5][Y[0]].maxLevel?create_if_block_1$9:create_else_block$5}let oe=ae(l),K=oe(l);return{c(){d=element("div"),m=text(_),y=space(),g=element("span"),b=element("div"),v=text("["),k=text(w),I=text(" / "),x=text(E),D=text(`] 
           `),C=text(N),S=space(),O=element("div"),M=element("div"),A=element("span"),L=text(U),J=text(P),z=text(V),ne=space(),R=element("span"),B=text(`=> 
                    `),j=text(W),$=text(F),q=text(te),G=space(),Q=element("hr"),X=space(),ce=element("div"),K.c(),this.h()},l(Y){d=claim_element(Y,"DIV",{class:!0});var T=children(d);m=claim_text(T,_),y=claim_space(T),g=claim_element(T,"SPAN",{class:!0});var re=children(g);b=claim_element(re,"DIV",{class:!0});var me=children(b);v=claim_text(me,"["),k=claim_text(me,w),I=claim_text(me," / "),x=claim_text(me,E),D=claim_text(me,`] 
           `),C=claim_text(me,N),me.forEach(detach),S=claim_space(re),O=claim_element(re,"DIV",{class:!0});var fe=children(O);M=claim_element(fe,"DIV",{class:!0});var he=children(M);A=claim_element(he,"SPAN",{class:!0});var ye=children(A);L=claim_text(ye,U),J=claim_text(ye,P),z=claim_text(ye,V),ye.forEach(detach),ne=claim_space(he),R=claim_element(he,"SPAN",{class:!0});var H=children(R);B=claim_text(H,`=> 
                    `),j=claim_text(H,W),$=claim_text(H,F),q=claim_text(H,te),H.forEach(detach),he.forEach(detach),fe.forEach(detach),G=claim_space(re),Q=claim_element(re,"HR",{}),X=claim_space(re),ce=claim_element(re,"DIV",{class:!0});var ie=children(ce);K.l(ie),ie.forEach(detach),re.forEach(detach),T.forEach(detach),this.h()},h(){attr(b,"class","title text-small-gray items-start text-center pb-1"),attr(A,"class","current text-[#cccccc]"),attr(R,"class","current text-[#999999]"),attr(M,"class","tooltip-text-xs text-[#cccccc]"),attr(O,"class","text-center effect-wrapper"),attr(ce,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(g,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",se="has-tooltip tooltip-text "+(l[7][l[0]]>=l[5][l[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":l[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(Y,T){insert_hydration(Y,d,T),append_hydration(d,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,b),append_hydration(b,v),append_hydration(b,k),append_hydration(b,I),append_hydration(b,x),append_hydration(b,D),append_hydration(b,C),append_hydration(g,S),append_hydration(g,O),append_hydration(O,M),append_hydration(M,A),append_hydration(A,L),append_hydration(A,J),append_hydration(A,z),append_hydration(M,ne),append_hydration(M,R),append_hydration(R,B),append_hydration(R,j),append_hydration(R,$),append_hydration(R,q),append_hydration(g,G),append_hydration(g,Q),append_hydration(g,X),append_hydration(g,ce),K.m(ce,null),_e||(ee=listen(d,"click",l[12]),_e=!0)},p(Y,T){T&33&&_!==(_=Y[5][Y[0]].name+"")&&set_data(m,_),T&129&&w!==(w=Y[7][Y[0]]+"")&&set_data(k,w),T&33&&E!==(E=Y[5][Y[0]].maxLevel+"")&&set_data(x,E),T&33&&N!==(N=Y[5][Y[0]].description+"")&&set_data(C,N),T&33&&U!==(U=(Y[5][Y[0]].prefix||"")+"")&&set_data(L,U),T&161&&P!==(P=(Y[5][Y[0]].isPercent?Y[10](Y[5][Y[0]].formula(Y[7][Y[0]]),3,!1):Y[9](Y[5][Y[0]].formula(Y[7][Y[0]]),3))+"")&&set_data(J,P),T&33&&V!==(V=(Y[5][Y[0]].suffix||"")+"")&&set_data(z,V),T&33&&W!==(W=(Y[5][Y[0]].prefix||"")+"")&&set_data(j,W),T&225&&F!==(F=(Y[5][Y[0]].isPercent?Y[10](Y[5][Y[0]].formula(Y[7][Y[0]]+Y[6].buyAmount),3,!1):Y[9](Y[5][Y[0]].formula(Y[7][Y[0]]+Y[6].buyAmount),3))+"")&&set_data($,F),T&33&&te!==(te=(Y[5][Y[0]].suffix||"")+"")&&set_data(q,te),oe===(oe=ae(Y))&&K?K.p(Y,T):(K.d(1),K=oe(Y),K&&(K.c(),K.m(ce,null))),T&165&&se!==(se="has-tooltip tooltip-text "+(Y[7][Y[0]]>=Y[5][Y[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":Y[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",se)},d(Y){Y&&detach(d),K.d(),_e=!1,ee()}}}function create_else_block$5(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$c(get_each_context$c(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&786){_=Object.entries(y[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$c(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block$c(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$9(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$8(l){let d,_=(l[4][l[20][0]]||l[8].has(l[20][0])?ref.displayNames[l[20][0]]?ref.displayNames[l[20][0]]:l[20][0]:"???")+"",m,y,g,b,v=l[9](l[20][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[20][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I&274&&_!==(_=(k[4][k[20][0]]||k[8].has(k[20][0])?ref.displayNames[k[20][0]]?ref.displayNames[k[20][0]]:k[20][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[k[20][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I&2&&v!==(v=k[9](k[20][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$c(l){let d,_=l[20][1]>=1&&create_if_block_2$8(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[20][1]>=1?_?_.p(m,y):(_=create_if_block_2$8(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$7(l){let d=l[5][l[0]].unlockAt()||l[3]||l[7][l[0]]>0,_,m=d&&create_if_block$c(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&169&&(d=y[5][y[0]].unlockAt()||y[3]||y[7][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$c(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$e(l){let d=l[3]||l[2]||l[7][l[0]]>0,_,m=create_key_block$7(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&141&&safe_not_equal(d,d=y[3]||y[2]||y[7][y[0]]>0)?(m.d(1),m=create_key_block$7(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$d(l,d,_){let m,y,g,b,v;component_subscribe(l,wallet,P=>_(4,m=P)),component_subscribe(l,keyUpgrades,P=>_(5,y=P)),component_subscribe(l,settings,P=>_(6,g=P)),component_subscribe(l,keyUpgradeLevels,P=>_(7,b=P)),component_subscribe(l,unlockedRes,P=>_(8,v=P));let{index:w}=d,k=()=>{let P={};for(let[J,V]of Object.entries(y[w].cost))P[J]=S(V);return P},I={},E,x=b[w]>0,D;onMount(()=>{setTimeout(()=>{_(1,I=k()),_(2,E=A()),y[w].unlockAt()&&_(3,x=!0),_(3,x=b[w]>0)},50),D=setInterval(()=>{_(2,E=A()),U(),y[w].unlockAt()&&_(3,x=!0)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(D)});const N=(P,J=0)=>P<1e9?P.toFixed(P<1e3?J:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):P.toExponential(3).toString().replace("+",""),C=(P,J=3,V=!1)=>(V&&(P-=1),P<1e9?(P*100).toFixed(P*100<1e3?J:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(P*100).toExponential(J).toString().replace("+","")+"%");function S(P){const J=P*Math.pow(y[w].ratio,b[w]),V=y[w].ratio,z=g.buyAmount;return formula.gSum(J,V,z)}function O(){_(1,I=k());for(let[P,J]of Object.entries(I))if(J>=1&&m[P]<J||!m[P])return;for(let[P,J]of Object.entries(I))J>=1&&set_store_value(wallet,m[P]-=J,m);set_store_value(keyUpgradeLevels,b[w]+=g.buyAmount,b),_(1,I=k()),_(3,x=!0),M()}function M(){key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable()}function A(){_(1,I=k());for(let[P,J]of Object.entries(I))if(J>=1&&m[P]<J)return!1;return!0}function U(){for(let[P,J]of Object.entries(y[w].unlockAt))if(m[P]<J)return!1;return!0}const L=()=>O();return l.$$set=P=>{"index"in P&&_(0,w=P.index)},[w,I,E,x,m,y,g,b,v,N,C,O,L]}class SlurryUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$d,create_fragment$e,safe_not_equal,{index:0})}}const SlurryCraftButton_svelte_svelte_type_style_lang="";function get_each_context$b(l,d,_){const m=l.slice();return m[34]=d[_],m}function create_if_block$b(l){let d,_,m=l[4],y,g,b,v,w,k,I,E,x,D,N,C,S,O,M,A,U=l[13](l[2][l[12]][0])+"",L,P,J,V,z,ne,R,B,W=l[13](l[2][l[12]][1])+"",j,F,$=l[13](l[2][l[12]][2])+"",te,q,G,Q,X,ce,se=create_key_block_1(l);function _e(T,re){return T[4]>T[7]?create_if_block_2$7:create_else_block_1$1}let ee=_e(l),ae=ee(l);function oe(T,re){return T[12]=="energizedCrystal"?create_if_block_1$8:create_else_block$4}let Y=oe(l)(l);return{c(){d=element("div"),_=element("div"),se.c(),y=space(),g=element("span"),b=element("div"),ae.c(),k=space(),I=element("div"),E=element("div"),x=element("div"),D=element("div"),N=element("div"),S=space(),O=element("div"),M=element("div"),A=text("Skill "),L=text(U),P=space(),Y.c(),J=space(),V=element("div"),z=element("div"),ne=element("span"),R=element("span"),B=text("[ "),j=text(W),F=text(" / "),te=text($),q=text(" crafts ]"),G=space(),Q=element("div"),this.h()},l(T){d=claim_element(T,"DIV",{class:!0});var re=children(d);_=claim_element(re,"DIV",{class:!0});var me=children(_);se.l(me),y=claim_space(me),g=claim_element(me,"SPAN",{class:!0});var fe=children(g);b=claim_element(fe,"DIV",{class:!0});var he=children(b);ae.l(he),he.forEach(detach),fe.forEach(detach),me.forEach(detach),k=claim_space(re),I=claim_element(re,"DIV",{class:!0});var ye=children(I);E=claim_element(ye,"DIV",{class:!0});var H=children(E);x=claim_element(H,"DIV",{class:!0});var ie=children(x);D=claim_element(ie,"DIV",{class:!0});var ge=children(D);N=claim_element(ge,"DIV",{class:!0,style:!0}),children(N).forEach(detach),ge.forEach(detach),ie.forEach(detach),H.forEach(detach),S=claim_space(ye),O=claim_element(ye,"DIV",{class:!0});var be=children(O);M=claim_element(be,"DIV",{class:!0});var xe=children(M);A=claim_text(xe,"Skill "),L=claim_text(xe,U),P=claim_space(xe),Y.l(xe),xe.forEach(detach),J=claim_space(be),V=claim_element(be,"DIV",{class:!0});var De=children(V);z=claim_element(De,"DIV",{class:!0});var Le=children(z);ne=claim_element(Le,"SPAN",{class:!0});var Ae=children(ne);R=claim_element(Ae,"SPAN",{class:!0});var we=children(R);B=claim_text(we,"[ "),j=claim_text(we,W),F=claim_text(we," / "),te=claim_text(we,$),q=claim_text(we," crafts ]"),we.forEach(detach),Ae.forEach(detach),G=claim_space(Le),Q=claim_element(Le,"DIV",{class:!0,style:!0}),children(Q).forEach(detach),Le.forEach(detach),De.forEach(detach),be.forEach(detach),ye.forEach(detach),re.forEach(detach),this.h()},h(){attr(b,"class","cost items-center text-center grid grid-cols-4"),attr(g,"class",v="px-2 mx-4 "+(l[4]>l[7]?"max-w-[90px]":"max-w-[300px]")+" tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(_,"class",w="has-tooltip tooltip-text "+(l[3]&&l[4]<=l[7]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 pr-2 items-center text-center border-solid mr-3 col-span-4 select-none svelte-uygk22"),attr(N,"class",C=l[1][l[0]].stylebg+" h-2.5 rounded-full svelte-uygk22"),set_style(N,"width",l[5]+"%"),attr(D,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(x,"class","mine-bar-wrapper align-middle"),attr(E,"class","row-span-1"),attr(M,"class","col-span-3 text-left text-small text-amber-400"),attr(R,"class","col-span-1 text-center text-amber-400 pb-1"),attr(ne,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none grid grid-cols-1 svelte-uygk22"),attr(Q,"class","bg-amber-400 h-1 rounded-full"),set_style(Q,"width",l[6]+"%"),attr(z,"class","has-tooltip w-full my-1 bg-gray-200 rounded-full h-1 dark:bg-gray-700 svelte-uygk22"),attr(V,"class","col-span-6 mine-bar-wrapper align-middle"),attr(O,"class","row-span-1 grid grid-cols-9"),attr(I,"class","col-span-8 grid grid-rows-2 align-middle items-right"),attr(d,"class","wrapper grid grid-cols-12 py-1")},m(T,re){insert_hydration(T,d,re),append_hydration(d,_),se.m(_,null),append_hydration(_,y),append_hydration(_,g),append_hydration(g,b),ae.m(b,null),append_hydration(d,k),append_hydration(d,I),append_hydration(I,E),append_hydration(E,x),append_hydration(x,D),append_hydration(D,N),append_hydration(I,S),append_hydration(I,O),append_hydration(O,M),append_hydration(M,A),append_hydration(M,L),append_hydration(M,P),Y.m(M,null),append_hydration(O,J),append_hydration(O,V),append_hydration(V,z),append_hydration(z,ne),append_hydration(ne,R),append_hydration(R,B),append_hydration(R,j),append_hydration(R,F),append_hydration(R,te),append_hydration(R,q),append_hydration(z,G),append_hydration(z,Q),X||(ce=listen(_,"click",l[15]),X=!0)},p(T,re){re[0]&16&&safe_not_equal(m,m=T[4])?(se.d(1),se=create_key_block_1(T),se.c(),se.m(_,y)):se.p(T,re),ee===(ee=_e(T))&&ae?ae.p(T,re):(ae.d(1),ae=ee(T),ae&&(ae.c(),ae.m(b,null))),re[0]&144&&v!==(v="px-2 mx-4 "+(T[4]>T[7]?"max-w-[90px]":"max-w-[300px]")+" tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22")&&attr(g,"class",v),re[0]&152&&w!==(w="has-tooltip tooltip-text "+(T[3]&&T[4]<=T[7]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 pr-2 items-center text-center border-solid mr-3 col-span-4 select-none svelte-uygk22")&&attr(_,"class",w),re[0]&3&&C!==(C=T[1][T[0]].stylebg+" h-2.5 rounded-full svelte-uygk22")&&attr(N,"class",C),re[0]&32&&set_style(N,"width",T[5]+"%"),re[0]&4&&U!==(U=T[13](T[2][T[12]][0])+"")&&set_data(L,U),Y.p(T,re),re[0]&4&&W!==(W=T[13](T[2][T[12]][1])+"")&&set_data(j,W),re[0]&4&&$!==($=T[13](T[2][T[12]][2])+"")&&set_data(te,$),re[0]&64&&set_style(Q,"width",T[6]+"%")},d(T){T&&detach(d),se.d(T),ae.d(),Y.d(),X=!1,ce()}}}function create_else_block_2(l){let d,_,m=l[1][l[0]].name+"",y,g;return{c(){d=text(`Craft 
        `),_=element("span"),y=text(m),this.h()},l(b){d=claim_text(b,`Craft 
        `),_=claim_element(b,"SPAN",{class:!0});var v=children(_);y=claim_text(v,m),v.forEach(detach),this.h()},h(){attr(_,"class",g=null_to_empty(l[1][l[0]].style||"text-white")+" svelte-uygk22")},m(b,v){insert_hydration(b,d,v),insert_hydration(b,_,v),append_hydration(_,y)},p(b,v){v[0]&3&&m!==(m=b[1][b[0]].name+"")&&set_data(y,m),v[0]&3&&g!==(g=null_to_empty(b[1][b[0]].style||"text-white")+" svelte-uygk22")&&attr(_,"class",g)},d(b){b&&detach(d),b&&detach(_)}}}function create_if_block_4$2(l){let d,_=l[13](l[5],2)+"",m,y;return{c(){d=text("Crafting... "),m=text(_),y=text("%")},l(g){d=claim_text(g,"Crafting... "),m=claim_text(g,_),y=claim_text(g,"%")},m(g,b){insert_hydration(g,d,b),insert_hydration(g,m,b),insert_hydration(g,y,b)},p(g,b){b[0]&32&&_!==(_=g[13](g[5],2)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_key_block_1(l){let d;function _(g,b){return g[4]>g[7]?create_if_block_4$2:create_else_block_2}let m=_(l),y=m(l);return{c(){y.c(),d=empty()},l(g){y.l(g),d=empty()},m(g,b){y.m(g,b),insert_hydration(g,d,b)},p(g,b){m===(m=_(g))&&y?y.p(g,b):(y.d(1),y=m(g),y&&(y.c(),y.m(d.parentNode,d)))},d(g){y.d(g),g&&detach(d)}}}function create_else_block_1$1(l){let d,_,m,y,g,b,v,w,k=l[13](l[1][l[0]].craftTime*Math.pow(.9,l[9]-1),0)+"",I,E,x=Object.entries(l[8]),D=[];for(let N=0;N<x.length;N+=1)D[N]=create_each_block$b(get_each_context$b(l,x,N));return{c(){for(let N=0;N<D.length;N+=1)D[N].c();d=space(),_=element("div"),m=element("hr"),y=space(),g=element("div"),b=text("time"),v=space(),w=element("div"),I=text(k),E=text(" seconds"),this.h()},l(N){for(let M=0;M<D.length;M+=1)D[M].l(N);d=claim_space(N),_=claim_element(N,"DIV",{class:!0});var C=children(_);m=claim_element(C,"HR",{}),C.forEach(detach),y=claim_space(N),g=claim_element(N,"DIV",{class:!0});var S=children(g);b=claim_text(S,"time"),S.forEach(detach),v=claim_space(N),w=claim_element(N,"DIV",{class:!0});var O=children(w);I=claim_text(O,k),E=claim_text(O," seconds"),O.forEach(detach),this.h()},h(){attr(_,"class","col-span-4 py-1 items-center justify-center line"),attr(g,"class","text-teal-100 text-left text-xs pr-3 col-span-2"),attr(w,"class","col-span-2 text-xs text-left")},m(N,C){for(let S=0;S<D.length;S+=1)D[S]&&D[S].m(N,C);insert_hydration(N,d,C),insert_hydration(N,_,C),append_hydration(_,m),insert_hydration(N,y,C),insert_hydration(N,g,C),append_hydration(g,b),insert_hydration(N,v,C),insert_hydration(N,w,C),append_hydration(w,I),append_hydration(w,E)},p(N,C){if(C[0]&11520){x=Object.entries(N[8]);let S;for(S=0;S<x.length;S+=1){const O=get_each_context$b(N,x,S);D[S]?D[S].p(O,C):(D[S]=create_each_block$b(O),D[S].c(),D[S].m(d.parentNode,d))}for(;S<D.length;S+=1)D[S].d(1);D.length=x.length}C[0]&515&&k!==(k=N[13](N[1][N[0]].craftTime*Math.pow(.9,N[9]-1),0)+"")&&set_data(I,k)},d(N){destroy_each(D,N),N&&detach(d),N&&detach(_),N&&detach(y),N&&detach(g),N&&detach(v),N&&detach(w)}}}function create_if_block_2$7(l){let d,_;return{c(){d=element("div"),_=text("Crafting..."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Crafting..."),y.forEach(detach),this.h()},h(){attr(d,"class","tooltip-text text-center")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_3$4(l){let d,_=(l[10][l[34][0]]||l[11].has(l[34][0])?ref.displayNames[l[34][0]]?ref.displayNames[l[34][0]]:l[34][0]:"???")+"",m,y,g,b,v=l[13](l[34][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[34][0]]||ref.colors.default)+" text-left pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I[0]&3328&&_!==(_=(k[10][k[34][0]]||k[11].has(k[34][0])?ref.displayNames[k[34][0]]?ref.displayNames[k[34][0]]:k[34][0]:"???")+"")&&set_data(m,_),I[0]&256&&y!==(y=(ref.colors[k[34][0]]||ref.colors.default)+" text-left pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I[0]&256&&v!==(v=k[13](k[34][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$b(l){let d,_=l[34][1]>=1&&create_if_block_3$4(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[34][1]>=1?_?_.p(m,y):(_=create_if_block_3$4(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_else_block$4(l){let d,_=l[13](1/Math.pow(.9,l[9]-1),1)+"",m,y;return{c(){d=text("["),m=text(_),y=text("x speed]")},l(g){d=claim_text(g,"["),m=claim_text(g,_),y=claim_text(g,"x speed]")},m(g,b){insert_hydration(g,d,b),insert_hydration(g,m,b),insert_hydration(g,y,b)},p(g,b){b[0]&512&&_!==(_=g[13](1/Math.pow(.9,g[9]-1),1)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_if_block_1$8(l){let d,_=l[13](Math.pow(1.1,l[9]-1),1)+"",m,y;return{c(){d=text("["),m=text(_),y=text("x craft yields]")},l(g){d=claim_text(g,"["),m=claim_text(g,_),y=claim_text(g,"x craft yields]")},m(g,b){insert_hydration(g,d,b),insert_hydration(g,m,b),insert_hydration(g,y,b)},p(g,b){b[0]&512&&_!==(_=g[13](Math.pow(1.1,g[9]-1),1)+"")&&set_data(m,_)},d(g){g&&detach(d),g&&detach(m),g&&detach(y)}}}function create_key_block$6(l){let d=l[1][l[0]].unlockAt(),_,m=d&&create_if_block$b(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&3&&(d=y[1][y[0]].unlockAt()),d?m?m.p(y,g):(m=create_if_block$b(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$d(l){let d=l[2][l[12]][1],_,m=create_key_block$6(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&4&&safe_not_equal(d,d=y[2][y[12]][1])?(m.d(1),m=create_key_block$6(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$c(l,d,_){let m,y,g,b,v,w,k,I,E,x,D;component_subscribe(l,wallet,q=>_(10,b=q)),component_subscribe(l,keyCrafts,q=>_(1,v=q)),component_subscribe(l,keyCraftTimes,q=>_(22,w=q)),component_subscribe(l,keyCraftMastery,q=>_(2,k=q)),component_subscribe(l,keyUpgradeLevels,q=>_(23,I=q)),component_subscribe(l,keyUpgrades,q=>_(24,E=q)),component_subscribe(l,keyCraftAmount,q=>_(25,x=q)),component_subscribe(l,unlockedRes,q=>_(11,D=q));let{index:N}=d,C,S,O=v[N].item,M=w[O][0],A=w[O][1],U=0,L=q=>A!=M?Math.min(100,A>q?(q-M)/(A-M)*100:0):0,P=0;const J=()=>k[O][1]/k[O][2]*100;let V,z,ne=Date.now();onMount(()=>{setTimeout(()=>{_(8,y=m()),_(3,C=F())},209),V=setInterval(()=>{_(7,ne=Date.now()),_(5,U=L(ne)),_(6,P=J())},23+Math.random()*11),M=w[O][0],_(4,A=w[O][1]),z=setInterval(()=>{_(8,y=m())},793),S=setInterval(()=>{_(3,C=F()),$()},100+Math.random()*20)}),onDestroy(()=>{clearInterval(S),clearInterval(V),clearInterval(z)});const R=(q,G=0)=>q<1e9?q.toFixed(q<1e3?G:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):q.toExponential(3).toString().replace("+","");function B(q){const G=q*Math.pow(O=="energizedCrystal"?E[2].formula(I[2]):v[N].ratio,x[O]),Q=O=="energizedCrystal"?E[2].formula(I[2]):v[N].ratio,X=1;return formula.gSum(G,Q,X)}function W(){let q=v[N].craftTime;return q*=Math.pow(.9,k[O][0]-1),q*1e3}function j(){if(A>ne||b.slurry<1)return;_(8,y=m());for(let[G,Q]of Object.entries(y))if(Q>=1&&b[G]<Q)return;for(let[G,Q]of Object.entries(y))Q>=1&&set_store_value(wallet,b[G]-=Q,b);_(8,y=m()),M=Date.now(),set_store_value(keyCraftTimes,w[O][0]=M,w);const q=M+W();_(4,A=q),set_store_value(keyCraftTimes,w[O][1]=q,w)}function F(){_(8,y=m());for(let[q,G]of Object.entries(y))if(G>=1&&b[q]<G)return!1;return!0}function $(){for(let[q,G]of Object.entries(v[N].unlockAt))if(b[q]<G)return!1;return!0}const te=()=>j();return l.$$set=q=>{"index"in q&&_(0,N=q.index)},l.$$.update=()=>{l.$$.dirty[0]&3&&(m=()=>{let q={};for(let[G,Q]of Object.entries(v[N].cost))q[G]=B(Q);return q}),l.$$.dirty[0]&4&&_(9,g=k[O][0])},_(8,y={}),[N,v,k,C,A,U,P,ne,y,g,b,D,O,R,j,te]}class SlurryCraftButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$c,create_fragment$d,safe_not_equal,{index:0},null,[-1,-1])}}function get_each_context$a(l,d,_){const m=l.slice();return m[16]=d[_],m[18]=_,m}function get_each_context_1$3(l,d,_){const m=l.slice();return m[16]=d[_],m[18]=_,m}function get_each_context_2$1(l,d,_){const m=l.slice();return m[20]=d[_],m}function get_each_context_3$1(l,d,_){const m=l.slice();return m[18]=d[_],m}function get_each_context_4$1(l,d,_){const m=l.slice();return m[25]=d[_],m}function get_each_context_5(l,d,_){const m=l.slice();return m[16]=d[_],m[18]=_,m}function create_if_block_6$1(l){let d;return{c(){d=text("+")},l(_){d=claim_text(_,"+")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block_5(l){let d,_=" "+l[8](l[16],0),m,y,g,b=l[18]+1<l[1].length&&create_if_block_6$1();return{c(){d=element("span"),m=text(_),y=space(),b&&b.c(),g=empty(),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var w=children(d);m=claim_text(w,_),w.forEach(detach),y=claim_space(v),b&&b.l(v),g=empty(),this.h()},h(){attr(d,"class",ref.colors["key"+(l[18]+1).toString()])},m(v,w){insert_hydration(v,d,w),append_hydration(d,m),insert_hydration(v,y,w),b&&b.m(v,w),insert_hydration(v,g,w)},p(v,w){w&2&&_!==(_=" "+v[8](v[16],0))&&set_data(m,_),v[18]+1<v[1].length?b||(b=create_if_block_6$1(),b.c(),b.m(g.parentNode,g)):b&&(b.d(1),b=null)},d(v){v&&detach(d),v&&detach(y),b&&b.d(v),v&&detach(g)}}}function create_if_block_5$1(l){let d,_,m=(ref.displayNames[l[25][0]]||l[25][0])+"",y,g,b,v,w=l[9](l[25][1][0],3)+"",k,I,E,x,D=l[8](l[25][1][1],0)+"",N,C,S=l[8](l[25][1][2],0)+"",O,M;return{c(){d=element("div"),_=element("div"),y=text(m),b=space(),v=element("div"),k=text(w),I=space(),E=element("div"),x=text("[ "),N=text(D),C=text(" - "),O=text(S),M=text(" ]"),this.h()},l(A){d=claim_element(A,"DIV",{class:!0});var U=children(d);_=claim_element(U,"DIV",{class:!0});var L=children(_);y=claim_text(L,m),L.forEach(detach),b=claim_space(U),v=claim_element(U,"DIV",{class:!0});var P=children(v);k=claim_text(P,w),P.forEach(detach),I=claim_space(U),E=claim_element(U,"DIV",{class:!0});var J=children(E);x=claim_text(J,"[ "),N=claim_text(J,D),C=claim_text(J," - "),O=claim_text(J,S),M=claim_text(J," ]"),J.forEach(detach),U.forEach(detach),this.h()},h(){attr(_,"class",g="col-span-3 text-left pl-[8px] "+(ref.colors[l[25][0]]||"text-white")),attr(v,"class","col-span-3 text-left pl-1"),attr(E,"class","col-span-3 text-right pl-1"),attr(d,"class","drop-table-disp grid grid-cols-10")},m(A,U){insert_hydration(A,d,U),append_hydration(d,_),append_hydration(_,y),append_hydration(d,b),append_hydration(d,v),append_hydration(v,k),append_hydration(d,I),append_hydration(d,E),append_hydration(E,x),append_hydration(E,N),append_hydration(E,C),append_hydration(E,O),append_hydration(E,M)},p(A,U){U&1&&m!==(m=(ref.displayNames[A[25][0]]||A[25][0])+"")&&set_data(y,m),U&1&&g!==(g="col-span-3 text-left pl-[8px] "+(ref.colors[A[25][0]]||"text-white"))&&attr(_,"class",g),U&1&&w!==(w=A[9](A[25][1][0],3)+"")&&set_data(k,w),U&1&&D!==(D=A[8](A[25][1][1],0)+"")&&set_data(N,D),U&1&&S!==(S=A[8](A[25][1][2],0)+"")&&set_data(O,S)},d(A){A&&detach(d)}}}function create_each_block_4$1(l){let d=l[25][0]!="tier"&&l[4]["key"+l[18]].has(l[25][0]),_,m=d&&create_if_block_5$1(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&17&&(d=y[25][0]!="tier"&&y[4]["key"+y[18]].has(y[25][0])),d?m?m.p(y,g):(m=create_if_block_5$1(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_if_block_4$1(l){let d,_,m,y,g,b,v,w=Object.entries(l[0][l[18]-1]).length-l[4]["key"+l[18]].size+"",k,I;return{c(){d=element("div"),_=element("div"),m=text("???"),y=space(),g=element("div"),b=text("There are "),v=element("span"),k=text(w),I=text(`
                                    more items that can drop from this key.`),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var x=children(d);_=claim_element(x,"DIV",{class:!0});var D=children(_);m=claim_text(D,"???"),D.forEach(detach),y=claim_space(x),g=claim_element(x,"DIV",{class:!0});var N=children(g);b=claim_text(N,"There are "),v=claim_element(N,"SPAN",{class:!0});var C=children(v);k=claim_text(C,w),C.forEach(detach),I=claim_text(N,`
                                    more items that can drop from this key.`),N.forEach(detach),x.forEach(detach),this.h()},h(){attr(_,"class","col-span-2 text-left pl-[8px] text-white"),attr(v,"class","text-white font-bold"),attr(g,"class","col-span-7 text-center pl-1"),attr(d,"class","drop-table-disp grid grid-cols-10")},m(E,x){insert_hydration(E,d,x),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,b),append_hydration(g,v),append_hydration(v,k),append_hydration(g,I)},p(E,x){x&17&&w!==(w=Object.entries(E[0][E[18]-1]).length-E[4]["key"+E[18]].size+"")&&set_data(k,w)},d(E){E&&detach(d)}}}function create_key_block$5(ctx){let span,t,show_if=ctx[4]["key"+ctx[18]].size<Object.entries(get_store_value(eval("key"+ctx[18]+"DropTable"))).length,each_value_4=Object.entries(ctx[0][ctx[18]-1]),each_blocks=[];for(let l=0;l<each_value_4.length;l+=1)each_blocks[l]=create_each_block_4$1(get_each_context_4$1(ctx,each_value_4,l));let if_block=show_if&&create_if_block_4$1(ctx);return{c(){span=element("span");for(let l=0;l<each_blocks.length;l+=1)each_blocks[l].c();t=space(),if_block&&if_block.c(),this.h()},l(l){span=claim_element(l,"SPAN",{class:!0});var d=children(span);for(let _=0;_<each_blocks.length;_+=1)each_blocks[_].l(d);t=claim_space(d),if_block&&if_block.l(d),d.forEach(detach),this.h()},h(){attr(span,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-8 pointer-events-none")},m(l,d){insert_hydration(l,span,d);for(let _=0;_<each_blocks.length;_+=1)each_blocks[_]&&each_blocks[_].m(span,null);append_hydration(span,t),if_block&&if_block.m(span,null)},p(ctx,dirty){if(dirty&785){each_value_4=Object.entries(ctx[0][ctx[18]-1]);let l;for(l=0;l<each_value_4.length;l+=1){const d=get_each_context_4$1(ctx,each_value_4,l);each_blocks[l]?each_blocks[l].p(d,dirty):(each_blocks[l]=create_each_block_4$1(d),each_blocks[l].c(),each_blocks[l].m(span,t))}for(;l<each_blocks.length;l+=1)each_blocks[l].d(1);each_blocks.length=each_value_4.length}dirty&16&&(show_if=ctx[4]["key"+ctx[18]].size<Object.entries(get_store_value(eval("key"+ctx[18]+"DropTable"))).length),show_if?if_block?if_block.p(ctx,dirty):(if_block=create_if_block_4$1(ctx),if_block.c(),if_block.m(span,null)):if_block&&(if_block.d(1),if_block=null)},d(l){l&&detach(span),destroy_each(each_blocks,l),if_block&&if_block.d()}}}function create_each_block_3$1(l){let d,_=(l[2]["key"+l[18]]>=1||l[3]>=l[18]?ref.keyMainNames[l[18]]:"?????")+"",m,y,g,b=l[8](Math.floor(l[2]["key"+l[18]]))+"",v,w,k,I,E=l[1],x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W=create_key_block$5(l);return N=new KeyOpenButton({props:{rarity:l[18],amt:"1"}}),O=new KeyOpenButton({props:{rarity:l[18],amt:"25"}}),U=new KeyOpenButton({props:{rarity:l[18],amt:"500"}}),J=new KeyOpenButton({props:{rarity:l[18],amt:"10000"}}),ne=new KeyOpenButton({props:{rarity:l[18],amt:"max"}}),{c(){d=element("div"),m=text(_),y=space(),g=element("div"),v=text(b),w=space(),k=element("div"),I=text(`[drops]
                    `),W.c(),x=space(),D=element("div"),create_component(N.$$.fragment),C=space(),S=element("div"),create_component(O.$$.fragment),M=space(),A=element("div"),create_component(U.$$.fragment),L=space(),P=element("div"),create_component(J.$$.fragment),V=space(),z=element("div"),create_component(ne.$$.fragment),R=space(),this.h()},l(j){d=claim_element(j,"DIV",{class:!0});var F=children(d);m=claim_text(F,_),F.forEach(detach),y=claim_space(j),g=claim_element(j,"DIV",{class:!0});var $=children(g);v=claim_text($,b),$.forEach(detach),w=claim_space(j),k=claim_element(j,"DIV",{class:!0});var te=children(k);I=claim_text(te,`[drops]
                    `),W.l(te),te.forEach(detach),x=claim_space(j),D=claim_element(j,"DIV",{class:!0});var q=children(D);claim_component(N.$$.fragment,q),q.forEach(detach),C=claim_space(j),S=claim_element(j,"DIV",{class:!0});var G=children(S);claim_component(O.$$.fragment,G),G.forEach(detach),M=claim_space(j),A=claim_element(j,"DIV",{class:!0});var Q=children(A);claim_component(U.$$.fragment,Q),Q.forEach(detach),L=claim_space(j),P=claim_element(j,"DIV",{class:!0});var X=children(P);claim_component(J.$$.fragment,X),X.forEach(detach),V=claim_space(j),z=claim_element(j,"DIV",{class:!0});var ce=children(z);claim_component(ne.$$.fragment,ce),R=claim_space(ce),ce.forEach(detach),this.h()},h(){attr(d,"class","col-span-1 py-1 "+ref.colors["key"+l[18]]),attr(g,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(k,"class","has-tooltip tooltip-text game-btn py-2 items-center text-center border-solid m-1 ml-1 mr-1 col-span-1 select-none"),attr(D,"class","col-span-3 py-1 text-left "+ref.colors["key"+l[18]]),attr(S,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(A,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(P,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]]),attr(z,"class","col-span-1 py-1 text-left "+ref.colors["key"+l[18]])},m(j,F){insert_hydration(j,d,F),append_hydration(d,m),insert_hydration(j,y,F),insert_hydration(j,g,F),append_hydration(g,v),insert_hydration(j,w,F),insert_hydration(j,k,F),append_hydration(k,I),W.m(k,null),insert_hydration(j,x,F),insert_hydration(j,D,F),mount_component(N,D,null),insert_hydration(j,C,F),insert_hydration(j,S,F),mount_component(O,S,null),insert_hydration(j,M,F),insert_hydration(j,A,F),mount_component(U,A,null),insert_hydration(j,L,F),insert_hydration(j,P,F),mount_component(J,P,null),insert_hydration(j,V,F),insert_hydration(j,z,F),mount_component(ne,z,null),append_hydration(z,R),B=!0},p(j,F){(!B||F&12)&&_!==(_=(j[2]["key"+j[18]]>=1||j[3]>=j[18]?ref.keyMainNames[j[18]]:"?????")+"")&&set_data(m,_),(!B||F&4)&&b!==(b=j[8](Math.floor(j[2]["key"+j[18]]))+"")&&set_data(v,b),F&2&&safe_not_equal(E,E=j[1])?(W.d(1),W=create_key_block$5(j),W.c(),W.m(k,null)):W.p(j,F)},i(j){B||(transition_in(N.$$.fragment,j),transition_in(O.$$.fragment,j),transition_in(U.$$.fragment,j),transition_in(J.$$.fragment,j),transition_in(ne.$$.fragment,j),B=!0)},o(j){transition_out(N.$$.fragment,j),transition_out(O.$$.fragment,j),transition_out(U.$$.fragment,j),transition_out(J.$$.fragment,j),transition_out(ne.$$.fragment,j),B=!1},d(j){j&&detach(d),j&&detach(y),j&&detach(g),j&&detach(w),j&&detach(k),W.d(j),j&&detach(x),j&&detach(D),destroy_component(N),j&&detach(C),j&&detach(S),destroy_component(O),j&&detach(M),j&&detach(A),destroy_component(U),j&&detach(L),j&&detach(P),destroy_component(J),j&&detach(V),j&&detach(z),destroy_component(ne)}}}function create_else_block_1(l){let d,_;return{c(){d=element("div"),_=text("Nothing :("),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Nothing :("),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-8 game-text text-center")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$6(l){let d,_=Object.entries(l[5]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block_2$1(get_each_context_2$1(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&288){_=Object.entries(y[5]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context_2$1(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block_2$1(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_3$3(l){let d,_,m,y=(ref.displayNames[l[20][0]]?ref.displayNames[l[20][0]]:l[20][0])+"",g,b,v,w,k,I=l[8](Number(l[20][1]),0)+"",E,x,D,N;return{c(){d=element("div"),_=space(),m=element("div"),g=text(y),b=text(":"),w=space(),k=element("div"),E=text(I),D=space(),N=element("div"),this.h()},l(C){d=claim_element(C,"DIV",{class:!0}),children(d).forEach(detach),_=claim_space(C),m=claim_element(C,"DIV",{class:!0});var S=children(m);g=claim_text(S,y),b=claim_text(S,":"),S.forEach(detach),w=claim_space(C),k=claim_element(C,"DIV",{class:!0});var O=children(k);E=claim_text(O,I),O.forEach(detach),D=claim_space(C),N=claim_element(C,"DIV",{class:!0}),children(N).forEach(detach),this.h()},h(){attr(d,"class","col-span-3"),attr(m,"class",v="col-span-1 text-left py-1 "+(ref.colors[l[20][0]]||"text-white")),attr(k,"class",x="col-span-1 py-1 text-left "+(ref.colors[l[20][0]]||"text-white")),attr(N,"class","col-span-3")},m(C,S){insert_hydration(C,d,S),insert_hydration(C,_,S),insert_hydration(C,m,S),append_hydration(m,g),append_hydration(m,b),insert_hydration(C,w,S),insert_hydration(C,k,S),append_hydration(k,E),insert_hydration(C,D,S),insert_hydration(C,N,S)},p(C,S){S&32&&y!==(y=(ref.displayNames[C[20][0]]?ref.displayNames[C[20][0]]:C[20][0])+"")&&set_data(g,y),S&32&&v!==(v="col-span-1 text-left py-1 "+(ref.colors[C[20][0]]||"text-white"))&&attr(m,"class",v),S&32&&I!==(I=C[8](Number(C[20][1]),0)+"")&&set_data(E,I),S&32&&x!==(x="col-span-1 py-1 text-left "+(ref.colors[C[20][0]]||"text-white"))&&attr(k,"class",x)},d(C){C&&detach(d),C&&detach(_),C&&detach(m),C&&detach(w),C&&detach(k),C&&detach(D),C&&detach(N)}}}function create_each_block_2$1(l){let d=Number(l[20][1])>=.99997,_,m=d&&create_if_block_3$3(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&32&&(d=Number(y[20][1])>=.99997),d?m?m.p(y,g):(m=create_if_block_3$3(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_else_block$3(l){let d,_;return{c(){d=element("div"),_=text("Unlock a new feature at 1,000,000 gold"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"Unlock a new feature at 1,000,000 gold"),y.forEach(detach),this.h()},h(){attr(d,"class","game-btn-noafford text-center py-2")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},i:noop,o:noop,d(m){m&&detach(d)}}}function create_if_block_1$7(l){let d,_;return d=new KeySlurryConvertButton({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_each_block_1$3(l){let d,_,m,y;return _=new SlurryUpgradeButton({props:{index:l[18]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-3")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},p:noop,i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_if_block$a(l){let d,_,m=l[7],y=[];for(let b=0;b<m.length;b+=1)y[b]=create_each_block$a(get_each_context$a(l,m,b));const g=b=>transition_out(y[b],1,1,()=>{y[b]=null});return{c(){d=element("div");for(let b=0;b<y.length;b+=1)y[b].c();this.h()},l(b){d=claim_element(b,"DIV",{class:!0});var v=children(d);for(let w=0;w<y.length;w+=1)y[w].l(v);v.forEach(detach),this.h()},h(){attr(d,"class","grid grid-cols-12 pt-2")},m(b,v){insert_hydration(b,d,v);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(d,null);_=!0},p(b,v){if(v&128){m=b[7];let w;for(w=0;w<m.length;w+=1){const k=get_each_context$a(b,m,w);y[w]?(y[w].p(k,v),transition_in(y[w],1)):(y[w]=create_each_block$a(k),y[w].c(),transition_in(y[w],1),y[w].m(d,null))}for(group_outros(),w=m.length;w<y.length;w+=1)g(w);check_outros()}},i(b){if(!_){for(let v=0;v<m.length;v+=1)transition_in(y[v]);_=!0}},o(b){y=y.filter(Boolean);for(let v=0;v<y.length;v+=1)transition_out(y[v]);_=!1},d(b){b&&detach(d),destroy_each(y,b)}}}function create_each_block$a(l){let d,_,m,y;return _=new SlurryCraftButton({props:{index:l[18]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-12")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},p:noop,i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_fragment$c(l){let d,_,m,y,g=(formula.sumArray(l[1]),0+""),b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B=l[1],W=[];for(let oe=0;oe<B.length;oe+=1)W[oe]=create_each_block_5(get_each_context_5(l,B,oe));let j=[1,2,3,4,5],F=[];for(let oe=0;oe<5;oe+=1)F[oe]=create_each_block_3$1(get_each_context_3$1(l,j,oe));const $=oe=>transition_out(F[oe],1,1,()=>{F[oe]=null});function te(oe,K){return K&32&&(S=null),S==null&&(S=Object.keys(oe[5]).length>0),S?create_if_block_2$6:create_else_block_1}let q=te(l,-1),G=q(l);const Q=[create_if_block_1$7,create_else_block$3],X=[];function ce(oe,K){return oe[2].gold>1e6||oe[2].slurry>0?0:1}U=ce(l),L=X[U]=Q[U](l);let se=l[6],_e=[];for(let oe=0;oe<se.length;oe+=1)_e[oe]=create_each_block_1$3(get_each_context_1$3(l,se,oe));const ee=oe=>transition_out(_e[oe],1,1,()=>{_e[oe]=null});let ae=l[2].slurry>1&&create_if_block$a(l);return{c(){d=element("div"),_=element("div"),m=element("div"),y=text("Total Keys Opened: "),b=text(g),v=text(`
            [ 
                `);for(let oe=0;oe<W.length;oe+=1)W[oe].c();w=text(`
         ]`),k=space();for(let oe=0;oe<5;oe+=1)F[oe].c();I=space(),E=element("div"),x=element("div"),D=element("div"),N=text("You received the following rewards:"),C=space(),G.c(),O=space(),M=element("div"),A=element("div"),L.c(),P=space(),J=element("div");for(let oe=0;oe<_e.length;oe+=1)_e[oe].c();V=space(),z=element("div"),ne=space(),ae&&ae.c(),this.h()},l(oe){d=claim_element(oe,"DIV",{class:!0});var K=children(d);_=claim_element(K,"DIV",{class:!0});var Y=children(_);m=claim_element(Y,"DIV",{class:!0});var T=children(m);y=claim_text(T,"Total Keys Opened: "),b=claim_text(T,g),v=claim_text(T,`
            [ 
                `);for(let ie=0;ie<W.length;ie+=1)W[ie].l(T);w=claim_text(T,`
         ]`),T.forEach(detach),k=claim_space(Y);for(let ie=0;ie<5;ie+=1)F[ie].l(Y);Y.forEach(detach),I=claim_space(K),E=claim_element(K,"DIV",{class:!0});var re=children(E);x=claim_element(re,"DIV",{class:!0});var me=children(x);D=claim_element(me,"DIV",{class:!0});var fe=children(D);N=claim_text(fe,"You received the following rewards:"),fe.forEach(detach),C=claim_space(me),G.l(me),me.forEach(detach),re.forEach(detach),O=claim_space(K),M=claim_element(K,"DIV",{class:!0});var he=children(M);A=claim_element(he,"DIV",{class:!0});var ye=children(A);L.l(ye),ye.forEach(detach),he.forEach(detach),P=claim_space(K),J=claim_element(K,"DIV",{class:!0});var H=children(J);for(let ie=0;ie<_e.length;ie+=1)_e[ie].l(H);H.forEach(detach),V=claim_space(K),z=claim_element(K,"DIV",{class:!0}),children(z).forEach(detach),ne=claim_space(K),ae&&ae.l(K),K.forEach(detach),this.h()},h(){attr(m,"class","col-span-10 pt-3 pb-2 tooltip-text text-center"),attr(_,"class","grid grid-cols-10"),attr(D,"class","col-span-8 game-text text-left"),attr(x,"class","grid grid-cols-8"),attr(E,"class","reward-disp-wrapper items-center"),attr(A,"class","wrapper"),attr(M,"class","pt-6"),attr(J,"class","grid grid-cols-12 pt-2"),attr(z,"class","py-3"),attr(d,"class","key-amount-wrapper items-center")},m(oe,K){insert_hydration(oe,d,K),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(m,b),append_hydration(m,v);for(let Y=0;Y<W.length;Y+=1)W[Y]&&W[Y].m(m,null);append_hydration(m,w),append_hydration(_,k);for(let Y=0;Y<5;Y+=1)F[Y]&&F[Y].m(_,null);append_hydration(d,I),append_hydration(d,E),append_hydration(E,x),append_hydration(x,D),append_hydration(D,N),append_hydration(x,C),G.m(x,null),append_hydration(d,O),append_hydration(d,M),append_hydration(M,A),X[U].m(A,null),append_hydration(d,P),append_hydration(d,J);for(let Y=0;Y<_e.length;Y+=1)_e[Y]&&_e[Y].m(J,null);append_hydration(d,V),append_hydration(d,z),append_hydration(d,ne),ae&&ae.m(d,null),R=!0},p(oe,[K]){if((!R||K&2)&&g!==(g=(formula.sumArray(oe[1]),0+""))&&set_data(b,g),K&258){B=oe[1];let T;for(T=0;T<B.length;T+=1){const re=get_each_context_5(oe,B,T);W[T]?W[T].p(re,K):(W[T]=create_each_block_5(re),W[T].c(),W[T].m(m,w))}for(;T<W.length;T+=1)W[T].d(1);W.length=B.length}if(K&799){j=[1,2,3,4,5];let T;for(T=0;T<5;T+=1){const re=get_each_context_3$1(oe,j,T);F[T]?(F[T].p(re,K),transition_in(F[T],1)):(F[T]=create_each_block_3$1(re),F[T].c(),transition_in(F[T],1),F[T].m(_,null))}for(group_outros(),T=5;T<5;T+=1)$(T);check_outros()}q===(q=te(oe,K))&&G?G.p(oe,K):(G.d(1),G=q(oe),G&&(G.c(),G.m(x,null)));let Y=U;if(U=ce(oe),U!==Y&&(group_outros(),transition_out(X[Y],1,1,()=>{X[Y]=null}),check_outros(),L=X[U],L||(L=X[U]=Q[U](oe),L.c()),transition_in(L,1),L.m(A,null)),K&64){se=oe[6];let T;for(T=0;T<se.length;T+=1){const re=get_each_context_1$3(oe,se,T);_e[T]?(_e[T].p(re,K),transition_in(_e[T],1)):(_e[T]=create_each_block_1$3(re),_e[T].c(),transition_in(_e[T],1),_e[T].m(J,null))}for(group_outros(),T=se.length;T<_e.length;T+=1)ee(T);check_outros()}oe[2].slurry>1?ae?(ae.p(oe,K),K&4&&transition_in(ae,1)):(ae=create_if_block$a(oe),ae.c(),transition_in(ae,1),ae.m(d,null)):ae&&(group_outros(),transition_out(ae,1,1,()=>{ae=null}),check_outros())},i(oe){if(!R){for(let K=0;K<5;K+=1)transition_in(F[K]);transition_in(L);for(let K=0;K<se.length;K+=1)transition_in(_e[K]);transition_in(ae),R=!0}},o(oe){F=F.filter(Boolean);for(let K=0;K<5;K+=1)transition_out(F[K]);transition_out(L),_e=_e.filter(Boolean);for(let K=0;K<_e.length;K+=1)transition_out(_e[K]);transition_out(ae),R=!1},d(oe){oe&&detach(d),destroy_each(W,oe),destroy_each(F,oe),G.d(),X[U].d(),destroy_each(_e,oe),ae&&ae.d()}}}function instance$b(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C;component_subscribe(l,key5DropTable,M=>_(10,y=M)),component_subscribe(l,key4DropTable,M=>_(11,g=M)),component_subscribe(l,key3DropTable,M=>_(12,b=M)),component_subscribe(l,key2DropTable,M=>_(13,v=M)),component_subscribe(l,key1DropTable,M=>_(14,w=M)),component_subscribe(l,keysOpened,M=>_(1,k=M)),component_subscribe(l,wallet,M=>_(2,I=M)),component_subscribe(l,visibleTier,M=>_(3,E=M)),component_subscribe(l,keyItemsUnlocked,M=>_(4,x=M)),component_subscribe(l,keyRewardText,M=>_(5,D=M)),component_subscribe(l,keyUpgrades,M=>_(6,N=M)),component_subscribe(l,keyCrafts,M=>_(7,C=M)),onMount(()=>{console.log(m)});const S=(M,A=0)=>(M=Number(M),M<1e9?M.toFixed(M<1e3?A:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):M.toExponential(3).toString().replace("+","")),O=(M,A=3,U=!1)=>(U&&(M-=1),M<1e9?(M*100).toFixed(M<1e3?A:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(M*100).toExponential(A).toString().replace("+","")+"%");return l.$$.update=()=>{l.$$.dirty&31744&&_(0,m=[w,v,b,g,y])},[m,k,I,E,x,D,N,C,S,O,y,g,b,v,w]}class Keys extends SvelteComponent{constructor(d){super(),init(this,d,instance$b,create_fragment$c,safe_not_equal,{})}}const EnchantUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$9(l,d,_){const m=l.slice();return m[22]=d[_],m}function create_if_block$9(l){let d,_=l[7][l[0]].name+"",m,y,g=l[11](l[9][l[0]],0)+"",b,v,w=l[11](l[7][l[0]].maxLevel,0)+"",k,I,E,x,D,N=l[7][l[0]].description+"",C,S,O,M,A,U=(l[7][l[0]].prefix||"")+"",L,P=(l[7][l[0]].isPercent?l[12](l[7][l[0]].formula(l[9][l[0]]),3,!1):l[11](l[7][l[0]].formula(l[9][l[0]]),3))+"",J,V=(l[7][l[0]].suffix||"")+"",z,ne,R,B,W=(l[7][l[0]].prefix||"")+"",j,F=(l[7][l[0]].isPercent?l[12](l[7][l[0]].formula(l[9][l[0]]+l[5]),3,!1):l[11](l[7][l[0]].formula(l[9][l[0]]+l[5]),3))+"",$,te=(l[7][l[0]].suffix||"")+"",q,G,Q,X,ce,se,_e,ee,ae=l[8].maxBuy&&l[4]&&l[5]>=1&&create_if_block_3$2(l);function oe(T,re){return T[9][T[0]]>=T[7][T[0]].maxLevel?create_if_block_1$6:create_else_block$2}let K=oe(l),Y=K(l);return{c(){d=element("div"),m=text(_),y=text(" ["),b=text(g),v=text(" / "),k=text(w),I=text(`] 
`),ae&&ae.c(),E=space(),x=element("span"),D=element("div"),C=text(N),S=space(),O=element("div"),M=element("div"),A=element("span"),L=text(U),J=text(P),z=text(V),ne=space(),R=element("span"),B=text(`=> 
                    `),j=text(W),$=text(F),q=text(te),G=space(),Q=element("hr"),X=space(),ce=element("div"),Y.c(),this.h()},l(T){d=claim_element(T,"DIV",{class:!0});var re=children(d);m=claim_text(re,_),y=claim_text(re," ["),b=claim_text(re,g),v=claim_text(re," / "),k=claim_text(re,w),I=claim_text(re,`] 
`),ae&&ae.l(re),E=claim_space(re),x=claim_element(re,"SPAN",{class:!0});var me=children(x);D=claim_element(me,"DIV",{class:!0});var fe=children(D);C=claim_text(fe,N),fe.forEach(detach),S=claim_space(me),O=claim_element(me,"DIV",{class:!0});var he=children(O);M=claim_element(he,"DIV",{class:!0});var ye=children(M);A=claim_element(ye,"SPAN",{class:!0});var H=children(A);L=claim_text(H,U),J=claim_text(H,P),z=claim_text(H,V),H.forEach(detach),ne=claim_space(ye),R=claim_element(ye,"SPAN",{class:!0});var ie=children(R);B=claim_text(ie,`=> 
                    `),j=claim_text(ie,W),$=claim_text(ie,F),q=claim_text(ie,te),ie.forEach(detach),ye.forEach(detach),he.forEach(detach),G=claim_space(me),Q=claim_element(me,"HR",{}),X=claim_space(me),ce=claim_element(me,"DIV",{class:!0});var ge=children(ce);Y.l(ge),ge.forEach(detach),me.forEach(detach),re.forEach(detach),this.h()},h(){attr(D,"class","title text-small-gray items-start text-center pb-1"),attr(A,"class","current text-[#cccccc]"),attr(R,"class","current text-[#999999]"),attr(M,"class","tooltip-text-xs text-[#cccccc]"),attr(O,"class","text-center effect-wrapper"),attr(ce,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(x,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",se="has-tooltip tooltip-text "+(l[2]&&l[4]&&l[9][l[0]]<l[7][l[0]].maxLevel?"game-btn-encht"+l[7][l[0]].tier:"game-btn-encht"+l[7][l[0]].tier+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(T,re){insert_hydration(T,d,re),append_hydration(d,m),append_hydration(d,y),append_hydration(d,b),append_hydration(d,v),append_hydration(d,k),append_hydration(d,I),ae&&ae.m(d,null),append_hydration(d,E),append_hydration(d,x),append_hydration(x,D),append_hydration(D,C),append_hydration(x,S),append_hydration(x,O),append_hydration(O,M),append_hydration(M,A),append_hydration(A,L),append_hydration(A,J),append_hydration(A,z),append_hydration(M,ne),append_hydration(M,R),append_hydration(R,B),append_hydration(R,j),append_hydration(R,$),append_hydration(R,q),append_hydration(x,G),append_hydration(x,Q),append_hydration(x,X),append_hydration(x,ce),Y.m(ce,null),_e||(ee=listen(d,"click",l[14]),_e=!0)},p(T,re){re&129&&_!==(_=T[7][T[0]].name+"")&&set_data(m,_),re&513&&g!==(g=T[11](T[9][T[0]],0)+"")&&set_data(b,g),re&129&&w!==(w=T[11](T[7][T[0]].maxLevel,0)+"")&&set_data(k,w),T[8].maxBuy&&T[4]&&T[5]>=1?ae?ae.p(T,re):(ae=create_if_block_3$2(T),ae.c(),ae.m(d,E)):ae&&(ae.d(1),ae=null),re&129&&N!==(N=T[7][T[0]].description+"")&&set_data(C,N),re&129&&U!==(U=(T[7][T[0]].prefix||"")+"")&&set_data(L,U),re&641&&P!==(P=(T[7][T[0]].isPercent?T[12](T[7][T[0]].formula(T[9][T[0]]),3,!1):T[11](T[7][T[0]].formula(T[9][T[0]]),3))+"")&&set_data(J,P),re&129&&V!==(V=(T[7][T[0]].suffix||"")+"")&&set_data(z,V),re&129&&W!==(W=(T[7][T[0]].prefix||"")+"")&&set_data(j,W),re&673&&F!==(F=(T[7][T[0]].isPercent?T[12](T[7][T[0]].formula(T[9][T[0]]+T[5]),3,!1):T[11](T[7][T[0]].formula(T[9][T[0]]+T[5]),3))+"")&&set_data($,F),re&129&&te!==(te=(T[7][T[0]].suffix||"")+"")&&set_data(q,te),K===(K=oe(T))&&Y?Y.p(T,re):(Y.d(1),Y=K(T),Y&&(Y.c(),Y.m(ce,null))),re&661&&se!==(se="has-tooltip tooltip-text "+(T[2]&&T[4]&&T[9][T[0]]<T[7][T[0]].maxLevel?"game-btn-encht"+T[7][T[0]].tier:"game-btn-encht"+T[7][T[0]].tier+"-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",se)},d(T){T&&detach(d),ae&&ae.d(),Y.d(),_e=!1,ee()}}}function create_if_block_3$2(l){let d,_,m;return{c(){d=text("(+"),_=text(l[5]),m=text(")")},l(y){d=claim_text(y,"(+"),_=claim_text(y,l[5]),m=claim_text(y,")")},m(y,g){insert_hydration(y,d,g),insert_hydration(y,_,g),insert_hydration(y,m,g)},p(y,g){g&32&&set_data(_,y[5])},d(y){y&&detach(d),y&&detach(_),y&&detach(m)}}}function create_else_block$2(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$9(get_each_context$9(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&3138){_=Object.entries(y[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$9(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block$9(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$6(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$5(l){let d,_=(l[6][l[22][0]]||l[10].has(l[22][0])?ref.displayNames[l[22][0]]?ref.displayNames[l[22][0]]:l[22][0]:"???")+"",m,y,g,b,v=l[11](l[22][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[22][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I&1090&&_!==(_=(k[6][k[22][0]]||k[10].has(k[22][0])?ref.displayNames[k[22][0]]?ref.displayNames[k[22][0]]:k[22][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[k[22][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I&2&&v!==(v=k[11](k[22][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$9(l){let d,_=l[22][1]>=1&&create_if_block_2$5(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[22][1]>=1?_?_.p(m,y):(_=create_if_block_2$5(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$4(l){let d=l[7][l[0]].unlockAt()||l[3]||l[9][l[0]]>0,_,m=d&&create_if_block$9(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&649&&(d=y[7][y[0]].unlockAt()||y[3]||y[9][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$9(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$b(l){let d=l[3]||l[2]||l[9][l[0]]>0,_,m=create_key_block$4(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&525&&safe_not_equal(d,d=y[3]||y[2]||y[9][y[0]]>0)?(m.d(1),m=create_key_block$4(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$a(l,d,_){let m,y,g,b,v;component_subscribe(l,wallet,V=>_(6,m=V)),component_subscribe(l,enchantUpgrades,V=>_(7,y=V)),component_subscribe(l,settings,V=>_(8,g=V)),component_subscribe(l,enchantUpgradeLevels,V=>_(9,b=V)),component_subscribe(l,unlockedRes,V=>_(10,v=V));let{index:w}=d,k=()=>{let V={};for(let[z,ne]of Object.entries(y[w].cost))V[z]=M(ne);return V},I={},E,x=b[w]>0,D,N=!0,C=g.buyAmount;onMount(()=>{setTimeout(()=>{_(1,I=k()),_(2,E=L()),y[w].unlockAt()&&_(3,x=!0),_(3,x=b[w]>0)},50),D=setInterval(()=>{_(2,E=L()),P(),y[w].unlockAt()&&_(3,x=!0),g.maxBuy?(_(5,C=U()),_(1,I=k())):_(5,C=g.buyAmount)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(D)});const S=(V,z=0)=>V<1e9?V.toFixed(V<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):V.toExponential(3).toString().replace("+",""),O=(V,z=3,ne=!1)=>(ne&&(V-=1),V<1e9?(V*100).toFixed(V*100<1e3?z:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(V*100).toExponential(z).toString().replace("+","")+"%");function M(V){const z=V*Math.pow(y[w].ratio,b[w]),ne=y[w].ratio,R=Math.max(1,C);return formula.gSum(z,ne,R)}function A(){_(1,I=k());for(let[V,z]of Object.entries(I))if(z>=1&&m[V]<z)return;for(let[V,z]of Object.entries(I))z>=1&&set_store_value(wallet,m[V]-=z,m);set_store_value(enchantUpgradeLevels,b[w]+=C,b),_(1,I=k()),_(3,x=!0)}function U(){_(4,N=!1);let V=1e9;for(let[z,ne]of Object.entries(y[w].cost)){const R=ne*Math.pow(y[w].ratio,b[w]);V=Math.min(V,formula.maxNumGeom(m[z],R,y[w].ratio))}return _(4,N=!0),V}function L(){if(g.maxBuy&&C==0)return!1;_(1,I=k());for(let[V,z]of Object.entries(I))if(z>=1&&m[V]<z)return!1;return!0}function P(){for(let[V,z]of Object.entries(y[w].unlockAt))if(m[V]<z)return!1;return!0}const J=()=>A();return l.$$set=V=>{"index"in V&&_(0,w=V.index)},[w,I,E,x,N,C,m,y,g,b,v,S,O,A,J]}class EnchantUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$a,create_fragment$b,safe_not_equal,{index:0})}}function get_each_context$8(l,d,_){const m=l.slice();return m[44]=d[_],m[46]=_,m}function get_each_context_1$2(l,d,_){const m=l.slice();return m[47]=d[_],m[46]=_,m}function create_if_block_2$4(l){let d;return{c(){d=text("*")},l(_){d=claim_text(_,"*")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block_1$2(l){let d,_=" "+l[3](l[2][l[46]],2),m,y,g,b=l[46]+1<l[0].length&&create_if_block_2$4();return{c(){d=element("span"),m=text(_),y=space(),b&&b.c(),g=empty(),this.h()},l(v){d=claim_element(v,"SPAN",{class:!0});var w=children(d);m=claim_text(w,_),w.forEach(detach),y=claim_space(v),b&&b.l(v),g=empty(),this.h()},h(){attr(d,"class",ref.colors["key"+(l[46]+1).toString()])},m(v,w){insert_hydration(v,d,w),append_hydration(d,m),insert_hydration(v,y,w),b&&b.m(v,w),insert_hydration(v,g,w)},p(v,w){w[0]&4&&_!==(_=" "+v[3](v[2][v[46]],2))&&set_data(m,_),v[46]+1<v[0].length?b||(b=create_if_block_2$4(),b.c(),b.m(g.parentNode,g)):b&&(b.d(1),b=null)},d(v){v&&detach(d),v&&detach(y),b&&b.d(v),v&&detach(g)}}}function create_if_block_1$5(l){let d,_,m,y,g,b,v=l[3](l[44].value(),3)+"",w,k,I;return{c(){d=element("div"),_=text("???"),m=space(),y=element("div"),g=element("span"),b=text("x"),w=text(v),k=space(),I=element("div"),this.h()},l(E){d=claim_element(E,"DIV",{class:!0});var x=children(d);_=claim_text(x,"???"),x.forEach(detach),m=claim_space(E),y=claim_element(E,"DIV",{class:!0});var D=children(y);g=claim_element(D,"SPAN",{class:!0});var N=children(g);b=claim_text(N,"x"),w=claim_text(N,v),N.forEach(detach),D.forEach(detach),k=claim_space(E),I=claim_element(E,"DIV",{class:!0}),children(I).forEach(detach),this.h()},h(){attr(d,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-3 text-left py-1"),attr(g,"class","font-bold"),attr(y,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-2 text-right py-1"),attr(I,"class","col-span-7")},m(E,x){insert_hydration(E,d,x),append_hydration(d,_),insert_hydration(E,m,x),insert_hydration(E,y,x),append_hydration(y,g),append_hydration(g,b),append_hydration(g,w),insert_hydration(E,k,x),insert_hydration(E,I,x)},p:noop,d(E){E&&detach(d),E&&detach(m),E&&detach(y),E&&detach(k),E&&detach(I)}}}function create_if_block$8(l){let d,_=l[44].name+"",m,y,g,b,v,w,k=l[3](l[44].value(),3)+"",I,E,x;return{c(){d=element("div"),m=text(_),y=text(":"),g=space(),b=element("div"),v=element("span"),w=text("x"),I=text(k),E=space(),x=element("div"),this.h()},l(D){d=claim_element(D,"DIV",{class:!0});var N=children(d);m=claim_text(N,_),y=claim_text(N,":"),N.forEach(detach),g=claim_space(D),b=claim_element(D,"DIV",{class:!0});var C=children(b);v=claim_element(C,"SPAN",{class:!0});var S=children(v);w=claim_text(S,"x"),I=claim_text(S,k),S.forEach(detach),C.forEach(detach),E=claim_space(D),x=claim_element(D,"DIV",{class:!0}),children(x).forEach(detach),this.h()},h(){attr(d,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-3 text-left py-1"),attr(v,"class",""),attr(b,"class",""+(ref.colors[l[44].colorRef]||"text-white")+" col-span-2 text-right py-1"),attr(x,"class","col-span-7")},m(D,N){insert_hydration(D,d,N),append_hydration(d,m),append_hydration(d,y),insert_hydration(D,g,N),insert_hydration(D,b,N),append_hydration(b,v),append_hydration(v,w),append_hydration(v,I),insert_hydration(D,E,N),insert_hydration(D,x,N)},p:noop,d(D){D&&detach(d),D&&detach(g),D&&detach(b),D&&detach(E),D&&detach(x)}}}function create_each_block$8(l){let d;function _(g,b){if(g[46]>0&&g[44].criteria())return create_if_block$8;if(g[46]>0)return create_if_block_1$5}let m=_(l),y=m&&m(l);return{c(){y&&y.c(),d=empty()},l(g){y&&y.l(g),d=empty()},m(g,b){y&&y.m(g,b),insert_hydration(g,d,b)},p(g,b){y&&y.p(g,b)},d(g){y&&y.d(g),g&&detach(d)}}}function create_key_block$3(l){let d,_,m,y,g,b,v=l[3](formula.productArray(l[2]),3)+"",w,k,I,E,x,D,N,C=l[0],S=[];for(let A=0;A<C.length;A+=1)S[A]=create_each_block_1$2(get_each_context_1$2(l,C,A));let O=l[4],M=[];for(let A=0;A<O.length;A+=1)M[A]=create_each_block$8(get_each_context$8(l,O,A));return{c(){d=element("div"),_=text("Keys Used:"),m=space(),y=element("div"),g=element("span"),b=text("+"),w=text(v),k=space(),I=element("div"),E=text(`[ 
        `);for(let A=0;A<S.length;A+=1)S[A].c();x=text(`
         ]`),D=space();for(let A=0;A<M.length;A+=1)M[A].c();N=empty(),this.h()},l(A){d=claim_element(A,"DIV",{class:!0});var U=children(d);_=claim_text(U,"Keys Used:"),U.forEach(detach),m=claim_space(A),y=claim_element(A,"DIV",{class:!0});var L=children(y);g=claim_element(L,"SPAN",{class:!0});var P=children(g);b=claim_text(P,"+"),w=claim_text(P,v),P.forEach(detach),L.forEach(detach),k=claim_space(A),I=claim_element(A,"DIV",{class:!0});var J=children(I);E=claim_text(J,`[ 
        `);for(let V=0;V<S.length;V+=1)S[V].l(J);x=claim_text(J,`
         ]`),J.forEach(detach),D=claim_space(A);for(let V=0;V<M.length;V+=1)M[V].l(A);N=empty(),this.h()},h(){attr(d,"class","col-span-3 game-text text-left py-1"),attr(g,"class",""),attr(y,"class","col-span-2 py-1 game-text text-right"),attr(I,"class","col-span-7 game-text text-center px-2 py-1")},m(A,U){insert_hydration(A,d,U),append_hydration(d,_),insert_hydration(A,m,U),insert_hydration(A,y,U),append_hydration(y,g),append_hydration(g,b),append_hydration(g,w),insert_hydration(A,k,U),insert_hydration(A,I,U),append_hydration(I,E);for(let L=0;L<S.length;L+=1)S[L]&&S[L].m(I,null);append_hydration(I,x),insert_hydration(A,D,U);for(let L=0;L<M.length;L+=1)M[L]&&M[L].m(A,U);insert_hydration(A,N,U)},p(A,U){if(U[0]&4&&v!==(v=A[3](formula.productArray(A[2]),3)+"")&&set_data(w,v),U[0]&13){C=A[0];let L;for(L=0;L<C.length;L+=1){const P=get_each_context_1$2(A,C,L);S[L]?S[L].p(P,U):(S[L]=create_each_block_1$2(P),S[L].c(),S[L].m(I,x))}for(;L<S.length;L+=1)S[L].d(1);S.length=C.length}if(U[0]&24){O=A[4];let L;for(L=0;L<O.length;L+=1){const P=get_each_context$8(A,O,L);M[L]?M[L].p(P,U):(M[L]=create_each_block$8(P),M[L].c(),M[L].m(N.parentNode,N))}for(;L<M.length;L+=1)M[L].d(1);M.length=O.length}},d(A){A&&detach(d),A&&detach(m),A&&detach(y),A&&detach(k),A&&detach(I),destroy_each(S,A),A&&detach(D),destroy_each(M,A),A&&detach(N)}}}function create_fragment$a(l){let d,_,m,y,g,b,v,w,k,I,E,x,D,N,C=l[3](Math.floor(l[5]()),0)+"",S,O,M,A,U,L,P,J,V=l[5]()>=10?"Relocate":"You need to gain at least 10 fame to relocate.",z,ne,R,B,W,j,F=l[1],$,te,q=create_key_block$3(l);return{c(){d=element("div"),_=element("div"),m=element("div"),y=text(`Relocate to a new mine and gain
        fame based on your past success.`),g=space(),b=element("div"),v=text("Relocating resets all previous resources and upgrades."),w=space(),k=element("div"),I=text("High-tier keys are not reset."),E=space(),x=element("div"),D=text(`You will gain 
        `),N=element("span"),S=text(C),O=text(" fame by relocating."),M=space(),A=element("div"),U=element("hr"),L=space(),P=element("div"),J=element("div"),z=text(V),ne=space(),R=element("div"),B=element("hr"),W=space(),j=element("div"),q.c(),this.h()},l(G){d=claim_element(G,"DIV",{class:!0});var Q=children(d);_=claim_element(Q,"DIV",{class:!0});var X=children(_);m=claim_element(X,"DIV",{class:!0});var ce=children(m);y=claim_text(ce,`Relocate to a new mine and gain
        fame based on your past success.`),ce.forEach(detach),g=claim_space(X),b=claim_element(X,"DIV",{class:!0});var se=children(b);v=claim_text(se,"Relocating resets all previous resources and upgrades."),se.forEach(detach),w=claim_space(X),k=claim_element(X,"DIV",{class:!0});var _e=children(k);I=claim_text(_e,"High-tier keys are not reset."),_e.forEach(detach),E=claim_space(X),x=claim_element(X,"DIV",{class:!0});var ee=children(x);D=claim_text(ee,`You will gain 
        `),N=claim_element(ee,"SPAN",{class:!0});var ae=children(N);S=claim_text(ae,C),ae.forEach(detach),O=claim_text(ee," fame by relocating."),ee.forEach(detach),M=claim_space(X),A=claim_element(X,"DIV",{class:!0});var oe=children(A);U=claim_element(oe,"HR",{}),oe.forEach(detach),L=claim_space(X),P=claim_element(X,"DIV",{class:!0});var K=children(P);J=claim_element(K,"DIV",{class:!0});var Y=children(J);z=claim_text(Y,V),Y.forEach(detach),K.forEach(detach),X.forEach(detach),ne=claim_space(Q),R=claim_element(Q,"DIV",{class:!0});var T=children(R);B=claim_element(T,"HR",{}),T.forEach(detach),W=claim_space(Q),j=claim_element(Q,"DIV",{class:!0});var re=children(j);q.l(re),re.forEach(detach),Q.forEach(detach),this.h()},h(){attr(m,"class","col-span-12"),attr(b,"class","col-span-12"),attr(k,"class","col-span-12"),attr(N,"class","text-orange-400 font-bold"),attr(x,"class","col-span-12 py-1"),attr(A,"class","col-span-12 py-1"),attr(J,"class",(l[5]()>=10?"game-btn":"game-btn-noafford")+" text-center"),attr(P,"class","col-span-12 pt-3"),attr(_,"class","grid grid-cols-12 game-text text-center"),attr(R,"class","py-2"),attr(j,"class","grid grid-cols-12"),attr(d,"class","wrapper pt-1")},m(G,Q){insert_hydration(G,d,Q),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(_,g),append_hydration(_,b),append_hydration(b,v),append_hydration(_,w),append_hydration(_,k),append_hydration(k,I),append_hydration(_,E),append_hydration(_,x),append_hydration(x,D),append_hydration(x,N),append_hydration(N,S),append_hydration(x,O),append_hydration(_,M),append_hydration(_,A),append_hydration(A,U),append_hydration(_,L),append_hydration(_,P),append_hydration(P,J),append_hydration(J,z),append_hydration(d,ne),append_hydration(d,R),append_hydration(R,B),append_hydration(d,W),append_hydration(d,j),q.m(j,null),$||(te=listen(J,"click",l[12]),$=!0)},p(G,Q){Q[0]&2&&safe_not_equal(F,F=G[1])?(q.d(1),q=create_key_block$3(G),q.c(),q.m(j,null)):q.p(G,Q)},i:noop,o:noop,d(G){G&&detach(d),q.d(G),$=!1,te()}}}function instance$9(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W,j,F;component_subscribe(l,keyCraftAmount,ee=>_(19,b=ee)),component_subscribe(l,visibleTier,ee=>_(20,v=ee)),component_subscribe(l,miningUpgradeLevelsBought,ee=>_(21,w=ee)),component_subscribe(l,miningUpgradeLevels,ee=>_(22,k=ee)),component_subscribe(l,automationItemsUnlocked,ee=>_(23,I=ee)),component_subscribe(l,wallet,ee=>_(7,E=ee)),component_subscribe(l,beaconUpgradeLevels,ee=>_(24,x=ee)),component_subscribe(l,miningUpgrades,ee=>_(25,D=ee)),component_subscribe(l,miningUpgradeLevelsFree,ee=>_(26,N=ee)),component_subscribe(l,beaconBonuses,ee=>_(8,C=ee)),component_subscribe(l,keysOpened,ee=>_(0,S=ee)),component_subscribe(l,baseBeaconNextReqs,ee=>_(27,O=ee)),component_subscribe(l,beaconLevels,ee=>_(9,M=ee)),component_subscribe(l,beaconNextReqs,ee=>_(28,A=ee)),component_subscribe(l,beaconActivations,ee=>_(29,U=ee)),component_subscribe(l,beaconProgress,ee=>_(30,L=ee)),component_subscribe(l,progressThisTick,ee=>_(31,P=ee)),component_subscribe(l,progressAverage,ee=>_(32,J=ee)),component_subscribe(l,progress,ee=>_(33,V=ee)),component_subscribe(l,resources,ee=>_(34,z=ee)),component_subscribe(l,stats,ee=>_(35,ne=ee)),component_subscribe(l,flags,ee=>_(36,R=ee)),component_subscribe(l,beaconFormulas,ee=>_(37,B=ee)),component_subscribe(l,mineLevel,ee=>_(38,W=ee)),component_subscribe(l,enchantThreshold,ee=>_(10,j=ee)),component_subscribe(l,enchantProgress,ee=>_(11,F=ee));let $=!0,te;onMount(()=>{setTimeout(()=>{_(2,m=formula.calcFameGainKeys(S)),y=formula.calcFameGemMulti(E.gems),g=formula.calcFameBeaconMulti(formula.sumArray(M))},100),te=setInterval(()=>{_(1,$=!$),console.log(formula.productArray(m))},1049)}),onDestroy(()=>{clearInterval(te)});const q=(ee,ae=0)=>ee<1e9?ee.toFixed(ee<1e3?ae:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):ee.toExponential(3).toString().replace("+",""),G=[{name:"Keys Used",value:()=>formula.productArray(m||[]),criteria:!0},{name:"Mining Level",value:()=>W.level**1.5*.15+1,colorRef:"gold",criteria:()=>E.gems>0},{name:"Gem Amount",value:()=>y,colorRef:"gems",criteria:()=>E.gems>0},{name:"Beacon Paths",value:()=>g,colorRef:"beacons",criteria:()=>E.beacons>0||formula.sumArray(M)>0},{name:"Fame Bonus (Beacons)",value:()=>B[4](M[4]),colorRef:"beacons",criteria:()=>E.beacons>0||formula.sumArray(M)>0},{name:"Legendary Upgrades",value:()=>D[16].formula(k[16])*D[17].formula(k[17])*D[19].formula(k[19]),colorRef:"",criteria:()=>E.totalFame>200},{name:"Time Multiplier (Everlasting)",value:()=>formula.calcFameTimeMultiplier(ne.lastRelocate),colorRef:"crystals",criteria:()=>E.crystals>1e5}];function Q(){return formula.productArray(m)*(W.level**1.5*.15+1)*y*g*D[16].formula(k[16])*D[17].formula(k[17])*D[19].formula(k[19])*B[4](M[4])*formula.calcFameTimeMultiplier(ne.lastRelocate)}const X=["gems","gold","orbs","beacons","key1","key2"],ce=["beaconPower"];function se(){if(Q()>=10&&confirm("你确定吗？ 搬迁将重置所有以前的进度。")){set_store_value(flags,R.relocateNavBack=!0,R),set_store_value(wallet,E.fame=(E.fame||0)+Q(),E),set_store_value(wallet,E.totalFame=(E.fame||0)+Q(),E),set_store_value(stats,ne.lastRelocate=Date.now(),ne);for(let ee of X)set_store_value(wallet,E[ee]=0,E);for(let ee of ce)set_store_value(resources,z[ee]=0,z);for(let ee of Object.entries(V))set_store_value(progress,V[ee[0]]=0,V),set_store_value(progressAverage,J[ee[0]]=0,J),set_store_value(progressThisTick,P[ee[0]]=0,P);for(let ee in M)set_store_value(beaconLevels,M[ee]=0,M),set_store_value(beaconProgress,L[ee]=0,L),set_store_value(beaconActivations,U[ee]=0,U);for(let ee in A)set_store_value(beaconNextReqs,A[ee]=(M[ee]+1)*O[ee],A);set_store_value(keysOpened,S=Array(S.length).fill(0),S),set_store_value(beaconBonuses,C=Array(30).fill(1),C),set_store_value(miningUpgradeLevels,k[6]=0,k),set_store_value(miningUpgradeLevelsBought,w[6]=0,w),set_store_value(miningUpgradeLevels,k[9]=0,k),set_store_value(miningUpgradeLevelsBought,w[9]=0,w),set_store_value(visibleTier,v=1,v);for(let ee in D)set_store_value(miningUpgradeLevels,k[ee]=w[ee],k),set_store_value(miningUpgradeLevelsFree,N[ee]=0,N),I.omnipotent||D[ee].isFame||(set_store_value(miningUpgradeLevelsBought,w[ee]=0,w),set_store_value(miningUpgradeLevels,k[ee]=0,k));console.log(I),set_store_value(beaconUpgradeLevels,x=Array(x.length).fill(0),x),I.jumpstart&&(set_store_value(wallet,E.gems=5e3,E),set_store_value(wallet,E.gold=100,E)),I["deep pockets"]&&(set_store_value(miningUpgradeLevels,k[6]=1,k),set_store_value(miningUpgradeLevelsBought,w[6]=1,w),set_store_value(miningUpgradeLevels,k[9]=1,k),set_store_value(miningUpgradeLevelsBought,w[9]=1,w),set_store_value(visibleTier,v=3,v));for(let ee of Object.keys(b))set_store_value(keyCraftAmount,b[ee]=0,b)}}const _e=()=>se();return l.$$.update=()=>{l.$$.dirty[0]&3072&&F.t1/j.t1*100,l.$$.dirty[0]&256,l.$$.dirty[0]&1&&_(2,m=formula.calcFameGainKeys(S)),l.$$.dirty[0]&128&&(y=formula.calcFameGemMulti(E.gems)),l.$$.dirty[0]&512&&(g=formula.calcFameBeaconMulti(formula.sumArray(M)))},Array(30).fill(0),[S,$,m,q,G,Q,se,E,C,M,j,F,_e]}class Relocate extends SvelteComponent{constructor(d){super(),init(this,d,instance$9,create_fragment$a,safe_not_equal,{},null,[-1,-1])}}function get_each_context$7(l,d,_){const m=l.slice();return m[27]=d[_],m[29]=_,m}function get_each_context_1$1(l,d,_){const m=l.slice();return m[27]=d[_],m[29]=_,m}function create_if_block_1$4(l){let d,_,m,y;return _=new EnchantUpgradeButton({props:{index:l[29]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block_1$1(l){let d,_,m=l[29]<2&&create_if_block_1$4(l);return{c(){m&&m.c(),d=empty()},l(y){m&&m.l(y),d=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,d,g),_=!0},p:noop,i(y){_||(transition_in(m),_=!0)},o(y){transition_out(m),_=!1},d(y){m&&m.d(y),y&&detach(d)}}}function create_if_block$7(l){let d,_,m,y;return _=new EnchantUpgradeButton({props:{index:l[29]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$7(l){let d=l[29]>=2&&l[3][l[29]].unlockAt(),_,m,y=d&&create_if_block$7(l);return{c(){y&&y.c(),_=empty()},l(g){y&&y.l(g),_=empty()},m(g,b){y&&y.m(g,b),insert_hydration(g,_,b),m=!0},p(g,b){b&8&&(d=g[29]>=2&&g[3][g[29]].unlockAt()),d?y?b&8&&transition_in(y,1):(y=create_if_block$7(g),y.c(),transition_in(y,1),y.m(_.parentNode,_)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(g){m||(transition_in(y),m=!0)},o(g){transition_out(y),m=!1},d(g){y&&y.d(g),g&&detach(_)}}}function create_fragment$9(l){let d,_,m,y,g,b=l[8](.01*l[4].gems*(1e3/l[5].UPDATE_SPEED)/l[6].gems,2)+"",v,w,k,I,E,x,D,N,C,S,O,M,A,U=l[7].enchants?"":l[8](l[1].t1,0)+" / "+l[8](l[0].t1,0),L,P,J,V,z,ne,R=Object.entries(l[3]),B=[];for(let te=0;te<R.length;te+=1)B[te]=create_each_block_1$1(get_each_context_1$1(l,R,te));const W=te=>transition_out(B[te],1,1,()=>{B[te]=null});let j=Object.entries(l[3]),F=[];for(let te=0;te<j.length;te+=1)F[te]=create_each_block$7(get_each_context$7(l,j,te));const $=te=>transition_out(F[te],1,1,()=>{F[te]=null});return{c(){d=element("div"),_=element("div");for(let te=0;te<B.length;te+=1)B[te].c();m=space(),y=element("div"),g=text(`enchant progress
        [ `),v=text(b),w=text(" / sec ]"),k=space(),I=element("div"),E=element("div"),x=element("div"),D=element("div"),N=element("div"),S=space(),O=element("div"),M=element("div"),A=element("strong"),L=text(U),J=space(),V=element("div"),z=element("div");for(let te=0;te<F.length;te+=1)F[te].c();this.h()},l(te){d=claim_element(te,"DIV",{class:!0});var q=children(d);_=claim_element(q,"DIV",{class:!0});var G=children(_);for(let T=0;T<B.length;T+=1)B[T].l(G);G.forEach(detach),m=claim_space(q),y=claim_element(q,"DIV",{class:!0});var Q=children(y);g=claim_text(Q,`enchant progress
        [ `),v=claim_text(Q,b),w=claim_text(Q," / sec ]"),Q.forEach(detach),k=claim_space(q),I=claim_element(q,"DIV",{class:!0});var X=children(I);E=claim_element(X,"DIV",{class:!0});var ce=children(E);x=claim_element(ce,"DIV",{class:!0});var se=children(x);D=claim_element(se,"DIV",{class:!0});var _e=children(D);N=claim_element(_e,"DIV",{class:!0,style:!0}),children(N).forEach(detach),_e.forEach(detach),se.forEach(detach),ce.forEach(detach),S=claim_space(X),O=claim_element(X,"DIV",{class:!0});var ee=children(O);M=claim_element(ee,"DIV",{class:!0});var ae=children(M);A=claim_element(ae,"STRONG",{});var oe=children(A);L=claim_text(oe,U),oe.forEach(detach),ae.forEach(detach),ee.forEach(detach),X.forEach(detach),J=claim_space(q),V=claim_element(q,"DIV",{class:!0});var K=children(V);z=claim_element(K,"DIV",{class:!0});var Y=children(z);for(let T=0;T<F.length;T+=1)F[T].l(Y);Y.forEach(detach),K.forEach(detach),q.forEach(detach),this.h()},h(){attr(_,"class","fame-upgrade-wrapper grid grid-cols-2"),attr(y,"class","text-[#989898] text-small pt-4"),attr(N,"class","bg-violet-300 h-2.5 rounded-full"),set_style(N,"width",l[7].enchants?"100%":l[2]),attr(D,"class","w-full my-1 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(x,"class","ench-t1-wrapper align-middle"),attr(E,"class",C=l[7].enchants?"col-span-12":"col-span-10"),attr(M,"class","text-[#989898] text-small"),attr(O,"class",P=(l[7].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle"),attr(I,"class","grid grid-cols-12 pt-1"),attr(z,"class","fame-upgrade-wrapper grid grid-cols-2 pt-2"),attr(V,"class","py-2"),attr(d,"class","wrapper py-2")},m(te,q){insert_hydration(te,d,q),append_hydration(d,_);for(let G=0;G<B.length;G+=1)B[G]&&B[G].m(_,null);append_hydration(d,m),append_hydration(d,y),append_hydration(y,g),append_hydration(y,v),append_hydration(y,w),append_hydration(d,k),append_hydration(d,I),append_hydration(I,E),append_hydration(E,x),append_hydration(x,D),append_hydration(D,N),append_hydration(I,S),append_hydration(I,O),append_hydration(O,M),append_hydration(M,A),append_hydration(A,L),append_hydration(d,J),append_hydration(d,V),append_hydration(V,z);for(let G=0;G<F.length;G+=1)F[G]&&F[G].m(z,null);ne=!0},p(te,[q]){if(q&8){R=Object.entries(te[3]);let G;for(G=0;G<R.length;G+=1){const Q=get_each_context_1$1(te,R,G);B[G]?(B[G].p(Q,q),transition_in(B[G],1)):(B[G]=create_each_block_1$1(Q),B[G].c(),transition_in(B[G],1),B[G].m(_,null))}for(group_outros(),G=R.length;G<B.length;G+=1)W(G);check_outros()}if((!ne||q&112)&&b!==(b=te[8](.01*te[4].gems*(1e3/te[5].UPDATE_SPEED)/te[6].gems,2)+"")&&set_data(v,b),(!ne||q&132)&&set_style(N,"width",te[7].enchants?"100%":te[2]),(!ne||q&128&&C!==(C=te[7].enchants?"col-span-12":"col-span-10"))&&attr(E,"class",C),(!ne||q&131)&&U!==(U=te[7].enchants?"":te[8](te[1].t1,0)+" / "+te[8](te[0].t1,0))&&set_data(L,U),(!ne||q&128&&P!==(P=(te[7].enchants?"":"col-span-2")+" pl-1 text-center align-text-middle"))&&attr(O,"class",P),q&8){j=Object.entries(te[3]);let G;for(G=0;G<j.length;G+=1){const Q=get_each_context$7(te,j,G);F[G]?(F[G].p(Q,q),transition_in(F[G],1)):(F[G]=create_each_block$7(Q),F[G].c(),transition_in(F[G],1),F[G].m(z,null))}for(group_outros(),G=j.length;G<F.length;G+=1)$(G);check_outros()}},i(te){if(!ne){for(let q=0;q<R.length;q+=1)transition_in(B[q]);for(let q=0;q<j.length;q+=1)transition_in(F[q]);ne=!0}},o(te){B=B.filter(Boolean);for(let q=0;q<B.length;q+=1)transition_out(B[q]);F=F.filter(Boolean);for(let q=0;q<F.length;q+=1)transition_out(F[q]);ne=!1},d(te){te&&detach(d),destroy_each(B,te),destroy_each(F,te)}}}function instance$8(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C,S,O;component_subscribe(l,wallet,U=>_(9,v=U)),component_subscribe(l,beaconLevels,U=>_(10,w=U)),component_subscribe(l,keysOpened,U=>_(11,k=U)),component_subscribe(l,beaconBonuses,U=>_(12,I=U)),component_subscribe(l,enchantThreshold,U=>_(0,E=U)),component_subscribe(l,enchantProgress,U=>_(1,x=U)),component_subscribe(l,enchantUpgrades,U=>_(3,D=U)),component_subscribe(l,progressAverage,U=>_(4,N=U)),component_subscribe(l,settings,U=>_(5,C=U)),component_subscribe(l,progressThreshold,U=>_(6,S=U)),component_subscribe(l,antiFlickerFlags,U=>_(7,O=U));let M;onMount(()=>{setTimeout(()=>{y=formula.calcFameGainKeys(k),g=formula.calcFameGemMulti(v.gems),b=formula.calcFameBeaconMulti(formula.sumArray(w))},100),M=setInterval(()=>{},1049)}),onDestroy(()=>{clearInterval(M)});const A=(U,L=0)=>U<1e9?U.toFixed(U<1e3?L:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):U.toExponential(3).toString().replace("+","");return v.gems>0,v.beacons>0,l.$$.update=()=>{l.$$.dirty&3&&_(2,m=`${x.t1/E.t1*100}%`),l.$$.dirty&4096,l.$$.dirty&2048&&(y=formula.calcFameGainKeys(k)),l.$$.dirty&512&&(g=formula.calcFameGemMulti(v.gems)),l.$$.dirty&1024&&(b=formula.calcFameBeaconMulti(formula.sumArray(w)))},Array(30).fill(0),[E,x,m,D,N,C,S,O,A,v,w,k,I]}class Enchants extends SvelteComponent{constructor(d){super(),init(this,d,instance$8,create_fragment$9,safe_not_equal,{})}}const AutomationUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$6(l,d,_){const m=l.slice();return m[19]=d[_],m}function create_if_block$6(l){let d,_=l[5][l[0]].name+"",m,y,g,b,v=l[5][l[0]].description+"",w,k,I,E,x,D,N,C;function S(A,U){return A[6][A[5][A[0]].id]?create_if_block_1$3:create_else_block$1}let O=S(l),M=O(l);return{c(){d=element("div"),m=text(_),y=space(),g=element("span"),b=element("div"),w=text(v),k=space(),I=element("hr"),E=space(),x=element("div"),M.c(),this.h()},l(A){d=claim_element(A,"DIV",{class:!0});var U=children(d);m=claim_text(U,_),y=claim_space(U),g=claim_element(U,"SPAN",{class:!0});var L=children(g);b=claim_element(L,"DIV",{class:!0});var P=children(b);w=claim_text(P,v),P.forEach(detach),k=claim_space(L),I=claim_element(L,"HR",{}),E=claim_space(L),x=claim_element(L,"DIV",{class:!0});var J=children(x);M.l(J),J.forEach(detach),L.forEach(detach),U.forEach(detach),this.h()},h(){attr(b,"class","title text-small-gray items-start text-center pb-1"),attr(x,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(g,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-1f4i5s3"),attr(d,"class",D="has-tooltip tooltip-text "+(l[2]?l[6][l[5][l[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn":l[6][l[5][l[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-1f4i5s3")},m(A,U){insert_hydration(A,d,U),append_hydration(d,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,b),append_hydration(b,w),append_hydration(g,k),append_hydration(g,I),append_hydration(g,E),append_hydration(g,x),M.m(x,null),N||(C=listen(d,"click",l[11]),N=!0)},p(A,U){U&33&&_!==(_=A[5][A[0]].name+"")&&set_data(m,_),U&33&&v!==(v=A[5][A[0]].description+"")&&set_data(w,v),O===(O=S(A))&&M?M.p(A,U):(M.d(1),M=O(A),M&&(M.c(),M.m(x,null))),U&101&&D!==(D="has-tooltip tooltip-text "+(A[2]?A[6][A[5][A[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn":A[6][A[5][A[0]].name.toLowerCase()]?"game-btn-automation-maxed":"game-btn-noafford")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-1f4i5s3")&&attr(d,"class",D)},d(A){A&&detach(d),M.d(),N=!1,C()}}}function create_else_block$1(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$6(get_each_context$6(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&786){_=Object.entries(y[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$6(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block$6(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$3(l){let d,_;return{c(){d=element("div"),_=text("This automation has been purchased!"),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This automation has been purchased!"),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$3(l){let d,_=(l[4][l[19][0]]||l[8].has(l[19][0])?ref.displayNames[l[19][0]]?ref.displayNames[l[19][0]]:l[19][0]:"???")+"",m,y,g,b,v=l[9](l[19][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[19][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-1f4i5s3"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I&274&&_!==(_=(k[4][k[19][0]]||k[8].has(k[19][0])?ref.displayNames[k[19][0]]?ref.displayNames[k[19][0]]:k[19][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[k[19][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-1f4i5s3")&&attr(d,"class",y),I&2&&v!==(v=k[9](k[19][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$6(l){let d,_=l[19][1]>=1&&create_if_block_2$3(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[19][1]>=1?_?_.p(m,y):(_=create_if_block_2$3(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$2(l){let d=l[5][l[0]].unlockAt()||l[3]||l[7][l[0]]>0,_,m=d&&create_if_block$6(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&169&&(d=y[5][y[0]].unlockAt()||y[3]||y[7][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$6(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$8(l){let d=l[2],_,m=create_key_block$2(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&4&&safe_not_equal(d,d=y[2])?(m.d(1),m=create_key_block$2(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$7(l,d,_){let m,y,g,b,v,w;component_subscribe(l,wallet,U=>_(4,m=U)),component_subscribe(l,enchantUpgrades,U=>_(14,y=U)),component_subscribe(l,automationUpgrades,U=>_(5,g=U)),component_subscribe(l,automationItemsUnlocked,U=>_(6,b=U)),component_subscribe(l,enchantUpgradeLevels,U=>_(7,v=U)),component_subscribe(l,unlockedRes,U=>_(8,w=U));let{index:k}=d,I=()=>{let U={};for(let[L,P]of Object.entries(g[k].cost))U[L]=P;return U},E={},x,D=v[k]>0,N;onMount(()=>{setTimeout(()=>{_(1,E=I()),_(2,x=O()),y[k].unlockAt()&&_(3,D=!0),_(3,D=v[k]>0)},50),N=setInterval(()=>{_(2,x=O()),M(),y[k].unlockAt()&&_(3,D=!0)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(N)});const C=(U,L=0)=>U<1e9?U.toFixed(U<1e3?L:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):U.toExponential(3).toString().replace("+","");function S(){if(!b[g[k].name.toLowerCase()]){_(1,E=I());for(let[U,L]of Object.entries(E))if(L>=1&&m[U]<L)return;for(let[U,L]of Object.entries(E))L>=1&&set_store_value(wallet,m[U]-=L,m);set_store_value(automationItemsUnlocked,b[g[k].name.toLowerCase()]=!0,b)}}function O(){_(1,E=I());for(let[U,L]of Object.entries(E))if(L>=1&&m[U]<L)return!1;return!0}function M(){for(let[U,L]of Object.entries(y[k].unlockAt))if(m[U]<L)return!1;return!0}const A=()=>S();return l.$$set=U=>{"index"in U&&_(0,k=U.index)},[k,E,x,D,m,g,b,v,w,C,S,A]}class AutomationUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$7,create_fragment$8,safe_not_equal,{index:0})}}function get_each_context$5(l,d,_){const m=l.slice();return m[23]=d[_],m[25]=_,m}function create_if_block$5(l){let d,_,m,y;return _=new AutomationUpgradeButton({props:{index:l[25]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","py-1 col-span-1 mine-upgrade-button-wrapper")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_each_block$5(l){let d=l[0][l[25]].unlockAt(),_,m,y=d&&create_if_block$5(l);return{c(){y&&y.c(),_=empty()},l(g){y&&y.l(g),_=empty()},m(g,b){y&&y.m(g,b),insert_hydration(g,_,b),m=!0},p(g,b){b&1&&(d=g[0][g[25]].unlockAt()),d?y?b&1&&transition_in(y,1):(y=create_if_block$5(g),y.c(),transition_in(y,1),y.m(_.parentNode,_)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(g){m||(transition_in(y),m=!0)},o(g){transition_out(y),m=!1},d(g){y&&y.d(g),g&&detach(_)}}}function create_fragment$7(l){let d,_,m,y,g=Object.entries(l[0]),b=[];for(let w=0;w<g.length;w+=1)b[w]=create_each_block$5(get_each_context$5(l,g,w));const v=w=>transition_out(b[w],1,1,()=>{b[w]=null});return{c(){d=element("div"),_=element("div"),m=element("div");for(let w=0;w<b.length;w+=1)b[w].c();this.h()},l(w){d=claim_element(w,"DIV",{class:!0});var k=children(d);_=claim_element(k,"DIV",{class:!0});var I=children(_);m=claim_element(I,"DIV",{class:!0});var E=children(m);for(let x=0;x<b.length;x+=1)b[x].l(E);E.forEach(detach),I.forEach(detach),k.forEach(detach),this.h()},h(){attr(m,"class","fame-upgrade-wrapper grid grid-cols-2 pt-2"),attr(_,"class","py-2"),attr(d,"class","wrapper py-2")},m(w,k){insert_hydration(w,d,k),append_hydration(d,_),append_hydration(_,m);for(let I=0;I<b.length;I+=1)b[I]&&b[I].m(m,null);y=!0},p(w,[k]){if(k&1){g=Object.entries(w[0]);let I;for(I=0;I<g.length;I+=1){const E=get_each_context$5(w,g,I);b[I]?(b[I].p(E,k),transition_in(b[I],1)):(b[I]=create_each_block$5(E),b[I].c(),transition_in(b[I],1),b[I].m(m,null))}for(group_outros(),I=g.length;I<b.length;I+=1)v(I);check_outros()}},i(w){if(!y){for(let k=0;k<g.length;k+=1)transition_in(b[k]);y=!0}},o(w){b=b.filter(Boolean);for(let k=0;k<b.length;k+=1)transition_out(b[k]);y=!1},d(w){w&&detach(d),destroy_each(b,w)}}}function instance$6(l,d,_){let m,y,g,b,v,w,k,I,E,x;component_subscribe(l,wallet,N=>_(1,b=N)),component_subscribe(l,beaconLevels,N=>_(2,v=N)),component_subscribe(l,keysOpened,N=>_(3,w=N)),component_subscribe(l,beaconBonuses,N=>_(4,k=N)),component_subscribe(l,enchantThreshold,N=>_(5,I=N)),component_subscribe(l,enchantProgress,N=>_(6,E=N)),component_subscribe(l,automationUpgrades,N=>_(0,x=N));let D;return onMount(()=>{setTimeout(()=>{m=formula.calcFameGainKeys(w),y=formula.calcFameGemMulti(b.gems),g=formula.calcFameBeaconMulti(formula.sumArray(v))},100),D=setInterval(()=>{},1049)}),onDestroy(()=>{clearInterval(D)}),b.gems>0,b.beacons>0,l.$$.update=()=>{l.$$.dirty&96&&E.t1/I.t1*100,l.$$.dirty&16,l.$$.dirty&8&&(m=formula.calcFameGainKeys(w)),l.$$.dirty&2&&(y=formula.calcFameGemMulti(b.gems)),l.$$.dirty&4&&(g=formula.calcFameBeaconMulti(formula.sumArray(v)))},Array(30).fill(0),[x,b,v,w,k,I,E]}class Automation extends SvelteComponent{constructor(d){super(),init(this,d,instance$6,create_fragment$7,safe_not_equal,{})}}function create_if_block_3$1(l){let d,_;return{c(){d=element("div"),_=text("You have not unlocked key-bound button clicking yet; holding enter disables the button."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"You have not unlocked key-bound button clicking yet; holding enter disables the button."),y.forEach(detach),this.h()},h(){attr(d,"class","game-text text-small text-center")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},d(m){m&&detach(d)}}}function create_if_block_2$2(l){let d,_,m;return{c(){d=element("div"),_=text(l[1]),this.h()},l(y){d=claim_element(y,"DIV",{class:!0,style:!0});var g=children(d);_=claim_text(g,l[1]),g.forEach(detach),this.h()},h(){attr(d,"class",m="absolute flex w-[350px] h-[35px] "+l[2]+" text-center items-center justify-center"),set_style(d,"top",l[4].y+"px"),set_style(d,"left",l[4].x+"px")},m(y,g){insert_hydration(y,d,g),append_hydration(d,_)},p(y,g){g&2&&set_data(_,y[1]),g&4&&m!==(m="absolute flex w-[350px] h-[35px] "+y[2]+" text-center items-center justify-center")&&attr(d,"class",m),g&16&&set_style(d,"top",y[4].y+"px"),g&16&&set_style(d,"left",y[4].x+"px")},d(y){y&&detach(d)}}}function create_if_block_1$2(l){let d,_,m;return{c(){d=element("button"),this.h()},l(y){d=claim_element(y,"BUTTON",{id:!0,class:!0,style:!0});var g=children(d);g.forEach(detach),this.h()},h(){attr(d,"id","button"),attr(d,"class","absolute w-[20px] h-[20px] bg-gray-400 text-white flex items-center justify-center rounded-full cursor-pointer transition-all duration-300"),set_style(d,"top",l[3].y+40+"px"),set_style(d,"left",l[3].x+40+"px")},m(y,g){insert_hydration(y,d,g),_||(m=listen(d,"click",l[9]),_=!0)},p(y,g){g&8&&set_style(d,"top",y[3].y+40+"px"),g&8&&set_style(d,"left",y[3].x+40+"px")},d(y){y&&detach(d),_=!1,m()}}}function create_if_block$4(l){let d,_,m;return{c(){d=element("button"),this.h()},l(y){d=claim_element(y,"BUTTON",{id:!0,class:!0,style:!0}),children(d).forEach(detach),this.h()},h(){attr(d,"id","button"),attr(d,"class","absolute w-[4px] h-[4px] bg-red-400 text-white flex items-center justify-center rounded-full cursor-pointer transition-all duration-300"),set_style(d,"top",l[3].y+48+"px"),set_style(d,"left",l[3].x+48+"px")},m(y,g){insert_hydration(y,d,g),_||(m=listen(d,"click",l[9]),_=!0)},p(y,g){g&8&&set_style(d,"top",y[3].y+48+"px"),g&8&&set_style(d,"left",y[3].x+48+"px")},d(y){y&&detach(d),_=!1,m()}}}function create_fragment$6(l){let d,_,m,y,g,b,v,w,k=l[5]&&!0&&create_if_block_3$1(),I=l[0]&&create_if_block_2$2(l),E=l[6][2]>0&&create_if_block_1$2(l),x=l[6][7]>0&&create_if_block$4(l);return{c(){k&&k.c(),d=space(),I&&I.c(),_=space(),m=element("button"),y=space(),E&&E.c(),g=space(),x&&x.c(),b=empty(),this.h()},l(D){k&&k.l(D),d=claim_space(D),I&&I.l(D),_=claim_space(D),m=claim_element(D,"BUTTON",{id:!0,class:!0,style:!0}),children(m).forEach(detach),y=claim_space(D),E&&E.l(D),g=claim_space(D),x&&x.l(D),b=empty(),this.h()},h(){attr(m,"id","button"),attr(m,"class","absolute w-[100px] h-[100px] border-4 border-white text-white flex items-center justify-center rounded-full cursor-pointer transition-all duration-300"),set_style(m,"top",l[3].y+"px"),set_style(m,"left",l[3].x+"px")},m(D,N){k&&k.m(D,N),insert_hydration(D,d,N),I&&I.m(D,N),insert_hydration(D,_,N),insert_hydration(D,m,N),insert_hydration(D,y,N),E&&E.m(D,N),insert_hydration(D,g,N),x&&x.m(D,N),insert_hydration(D,b,N),v||(w=[listen(window,"keydown",prevent_default(l[7])),listen(window,"keyup",l[8]),listen(m,"click",l[9])],v=!0)},p(D,[N]){D[5]?k||(k=create_if_block_3$1(),k.c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null),D[0]?I?I.p(D,N):(I=create_if_block_2$2(D),I.c(),I.m(_.parentNode,_)):I&&(I.d(1),I=null),N&8&&set_style(m,"top",D[3].y+"px"),N&8&&set_style(m,"left",D[3].x+"px"),D[6][2]>0?E?E.p(D,N):(E=create_if_block_1$2(D),E.c(),E.m(g.parentNode,g)):E&&(E.d(1),E=null),D[6][7]>0?x?x.p(D,N):(x=create_if_block$4(D),x.c(),x.m(b.parentNode,b)):x&&(x.d(1),x=null)},i:noop,o:noop,d(D){k&&k.d(D),D&&detach(d),I&&I.d(D),D&&detach(_),D&&detach(m),D&&detach(y),E&&E.d(D),D&&detach(g),x&&x.d(D),D&&detach(b),v=!1,run_all(w)}}}const BUTTON_SIZE=100;function instance$5(l,d,_){let m,y,g,b,v,w,k,I;component_subscribe(l,buttonUpgradeLevels,J=>_(6,m=J)),component_subscribe(l,buttonUpgrades,J=>_(11,y=J)),component_subscribe(l,buttonNumClicks,J=>_(12,g=J)),component_subscribe(l,buttonStats,J=>_(13,b=J)),component_subscribe(l,wallet,J=>_(14,v=J)),component_subscribe(l,miningUpgradeLevels,J=>_(15,w=J)),component_subscribe(l,miningUpgrades,J=>_(16,k=J)),component_subscribe(l,mineLevel,J=>_(17,I=J));let E=!1,x="",D="",N={x:0,y:0},C={x:0,y:0};function S(J){J.keyCode==13&&_(5,M=!0)}function O(J){J.keyCode==13&&_(5,M=!1)}let M=!1;const A=J=>{if(M)return;_(4,C={x:N.x-100,y:N.y-18});const V=J?J.clientX:0,z=J?J.clientY:0,ne=Math.sqrt(Math.abs(V-N.x-BUTTON_SIZE/2)**2+Math.abs(z-N.y-BUTTON_SIZE/2)**2);let R=0;set_store_value(buttonStats,b.totalClicks++,b),set_store_value(buttonStats,b.clicksUntilFame--,b),b.clicksUntilFame<=0&&(set_store_value(buttonStats,b.clicksUntilFame=y[0].formula(m[0]),b),set_store_value(wallet,v.fame+=1e3,v)),ne<1?(R=100,_(1,x="PERFECT! +"),_(2,D="text-large text-amber-500 border-amber-500 font-bold"),set_store_value(buttonNumClicks,g.perfect++,g),set_store_value(mineLevel,I.xp+=3,I)):ne<=2?(R=12,_(1,x="INCREDIBLE +"),_(2,D="text-large text-pink-500 border-pink-500 font-bold"),set_store_value(buttonNumClicks,g.incredible++,g),set_store_value(mineLevel,I.xp+=3,I)):ne<=4?(R=4,_(1,x="Excellent +"),_(2,D="text-med text-violet-500 border-violet-500"),set_store_value(buttonNumClicks,g.excellent++,g),set_store_value(mineLevel,I.xp+=2,I)):ne<=7?(R=3,_(1,x="Great +"),_(2,D="text-med text-sky-500 border-sky-500"),set_store_value(buttonNumClicks,g.great++,g),set_store_value(mineLevel,I.xp+=1,I)):ne<=10?(R=2,_(1,x="Good +"),_(2,D="text-med text-green-500 border-green-500"),set_store_value(buttonNumClicks,g.good++,g),set_store_value(mineLevel,I.xp+=1,I)):(R=1,_(1,x="Okay +"),_(2,D="text-small text-gray-500 border-gray-500"),set_store_value(buttonNumClicks,g.okay++,g),set_store_value(mineLevel,I.xp+=1,I)),R=R*formula.calcButtonStreakBonus(b.totalClicks)*k[23].formula(w[23]);const B=Math.random()<y[5].formula(m[5]);let W;B&&(W=8+Math.round(Math.random()*12),R*=W),_(1,x+=P(R,R>100?0:1)),B&&_(1,x+=" [ LUCKY! x"+P(W,0)+" ]"),set_store_value(wallet,v.crystals+=R,v),set_store_value(buttonStats,b.hardenedBonus=formula.calcHardenedGemBonus(g),b),document.getElementById("box");const j=350,F=950,$=300,te=550,q=y[0].formula(m[0]);let G,Q;N.x>j&&N.y>$?(G=N.x,Q=N.y):(G=j,Q=$);const X=(300*q)**2,ce=(Math.random()*.7+.3)*X,se=X-ce,_e=Math.random()<.5?-1:1,ee=Math.random()<.5?-1:1;let ae,oe;ae=Math.max(j,Math.min(F,G+_e*Math.sqrt(ce))),oe=Math.max($,Math.min(te,Q+ee*Math.sqrt(se))),_(3,N={x:ae,y:oe}),L(B)};let U;function L(J){clearTimeout(U),_(0,E=!0),U=setTimeout(()=>{_(0,E=!1)},J?900:500)}onMount(()=>{A()});const P=(J,V=0)=>J<1e9?J.toFixed(J<1e3?V:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):J.toExponential(3).toString().replace("+","");return[E,x,D,N,C,M,m,S,O,A]}class ButtonItem extends SvelteComponent{constructor(d){super(),init(this,d,instance$5,create_fragment$6,safe_not_equal,{})}}const ButtonUpgradeButton_svelte_svelte_type_style_lang="";function get_each_context$4(l,d,_){const m=l.slice();return m[19]=d[_],m}function create_if_block$3(l){let d,_=l[5][l[0]].name+"",m,y,g=l[9](l[6][l[0]],0)+"",b,v,w=l[9](l[5][l[0]].maxLevel,0)+"",k,I,E,x,D=l[5][l[0]].description+"",N,C,S,O,M,A=(l[5][l[0]].prefix||"")+"",U,L=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[6][l[0]]),3,!1):l[9](l[5][l[0]].formula(l[6][l[0]]),3))+"",P,J=(l[5][l[0]].suffix||"")+"",V,z,ne,R,B=(l[5][l[0]].prefix||"")+"",W,j=(l[5][l[0]].isPercent?l[10](l[5][l[0]].formula(l[6][l[0]]+l[7].buyAmount),3,!1):l[9](l[5][l[0]].formula(l[6][l[0]]+l[7].buyAmount),3))+"",F,$=(l[5][l[0]].suffix||"")+"",te,q,G,Q,X,ce,se,_e;function ee(K,Y){return K[6][K[0]]>=K[5][K[0]].maxLevel?create_if_block_1$1:create_else_block}let ae=ee(l),oe=ae(l);return{c(){d=element("div"),m=text(_),y=text(" ["),b=text(g),v=text(" / "),k=text(w),I=text(`]
         `),E=element("span"),x=element("div"),N=text(D),C=space(),S=element("div"),O=element("div"),M=element("span"),U=text(A),P=text(L),V=text(J),z=space(),ne=element("span"),R=text(`=> 
                    `),W=text(B),F=text(j),te=text($),q=space(),G=element("hr"),Q=space(),X=element("div"),oe.c(),this.h()},l(K){d=claim_element(K,"DIV",{class:!0});var Y=children(d);m=claim_text(Y,_),y=claim_text(Y," ["),b=claim_text(Y,g),v=claim_text(Y," / "),k=claim_text(Y,w),I=claim_text(Y,`]
         `),E=claim_element(Y,"SPAN",{class:!0});var T=children(E);x=claim_element(T,"DIV",{class:!0});var re=children(x);N=claim_text(re,D),re.forEach(detach),C=claim_space(T),S=claim_element(T,"DIV",{class:!0});var me=children(S);O=claim_element(me,"DIV",{class:!0});var fe=children(O);M=claim_element(fe,"SPAN",{class:!0});var he=children(M);U=claim_text(he,A),P=claim_text(he,L),V=claim_text(he,J),he.forEach(detach),z=claim_space(fe),ne=claim_element(fe,"SPAN",{class:!0});var ye=children(ne);R=claim_text(ye,`=> 
                    `),W=claim_text(ye,B),F=claim_text(ye,j),te=claim_text(ye,$),ye.forEach(detach),fe.forEach(detach),me.forEach(detach),q=claim_space(T),G=claim_element(T,"HR",{}),Q=claim_space(T),X=claim_element(T,"DIV",{class:!0});var H=children(X);oe.l(H),H.forEach(detach),T.forEach(detach),Y.forEach(detach),this.h()},h(){attr(x,"class","title text-small-gray items-start text-center pb-1"),attr(M,"class","current text-[#cccccc]"),attr(ne,"class","current text-[#999999]"),attr(O,"class","tooltip-text-xs text-[#cccccc]"),attr(S,"class","text-center effect-wrapper"),attr(X,"class","pt-1 cost items-start text-center grid grid-cols-4"),attr(E,"class","px-2 mx-4 max-w-[300px] tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none svelte-uygk22"),attr(d,"class",ce="has-tooltip tooltip-text "+(l[6][l[0]]>=l[5][l[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":l[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")},m(K,Y){insert_hydration(K,d,Y),append_hydration(d,m),append_hydration(d,y),append_hydration(d,b),append_hydration(d,v),append_hydration(d,k),append_hydration(d,I),append_hydration(d,E),append_hydration(E,x),append_hydration(x,N),append_hydration(E,C),append_hydration(E,S),append_hydration(S,O),append_hydration(O,M),append_hydration(M,U),append_hydration(M,P),append_hydration(M,V),append_hydration(O,z),append_hydration(O,ne),append_hydration(ne,R),append_hydration(ne,W),append_hydration(ne,F),append_hydration(ne,te),append_hydration(E,q),append_hydration(E,G),append_hydration(E,Q),append_hydration(E,X),oe.m(X,null),se||(_e=listen(d,"click",l[12]),se=!0)},p(K,Y){Y&33&&_!==(_=K[5][K[0]].name+"")&&set_data(m,_),Y&65&&g!==(g=K[9](K[6][K[0]],0)+"")&&set_data(b,g),Y&33&&w!==(w=K[9](K[5][K[0]].maxLevel,0)+"")&&set_data(k,w),Y&33&&D!==(D=K[5][K[0]].description+"")&&set_data(N,D),Y&33&&A!==(A=(K[5][K[0]].prefix||"")+"")&&set_data(U,A),Y&97&&L!==(L=(K[5][K[0]].isPercent?K[10](K[5][K[0]].formula(K[6][K[0]]),3,!1):K[9](K[5][K[0]].formula(K[6][K[0]]),3))+"")&&set_data(P,L),Y&33&&J!==(J=(K[5][K[0]].suffix||"")+"")&&set_data(V,J),Y&33&&B!==(B=(K[5][K[0]].prefix||"")+"")&&set_data(W,B),Y&225&&j!==(j=(K[5][K[0]].isPercent?K[10](K[5][K[0]].formula(K[6][K[0]]+K[7].buyAmount),3,!1):K[9](K[5][K[0]].formula(K[6][K[0]]+K[7].buyAmount),3))+"")&&set_data(F,j),Y&33&&$!==($=(K[5][K[0]].suffix||"")+"")&&set_data(te,$),ae===(ae=ee(K))&&oe?oe.p(K,Y):(oe.d(1),oe=ae(K),oe&&(oe.c(),oe.m(X,null))),Y&101&&ce!==(ce="has-tooltip tooltip-text "+(K[6][K[0]]>=K[5][K[0]].maxLevel?"game-btn-noafford text-indigo-300 bg-indigo-800":K[2]?"game-btn text-indigo-300":"game-btn-noafford text-indigo-300")+" py-2 items-center text-center border-solid ml-1 mr-1 col-span-12 select-none svelte-uygk22")&&attr(d,"class",ce)},d(K){K&&detach(d),oe.d(),se=!1,_e()}}}function create_else_block(l){let d,_=Object.entries(l[1]),m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block$4(get_each_context$4(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g&786){_=Object.entries(y[1]);let b;for(b=0;b<_.length;b+=1){const v=get_each_context$4(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block$4(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_1$1(l){let d,_;return{c(){d=element("div"),_=text("This upgrade is at max level."),this.h()},l(m){d=claim_element(m,"DIV",{class:!0});var y=children(d);_=claim_text(y,"This upgrade is at max level."),y.forEach(detach),this.h()},h(){attr(d,"class","col-span-4 text-[#999999]")},m(m,y){insert_hydration(m,d,y),append_hydration(d,_)},p:noop,d(m){m&&detach(d)}}}function create_if_block_2$1(l){let d,_=(l[4][l[19][0]]||l[8].has(l[19][0])?ref.displayNames[l[19][0]]?ref.displayNames[l[19][0]]:l[19][0]:"???")+"",m,y,g,b,v=l[9](l[19][1])+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=(ref.colors[l[19][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22"),attr(b,"class","col-span-2 text-left")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I&274&&_!==(_=(k[4][k[19][0]]||k[8].has(k[19][0])?ref.displayNames[k[19][0]]?ref.displayNames[k[19][0]]:k[19][0]:"???")+"")&&set_data(m,_),I&2&&y!==(y=(ref.colors[k[19][0]]||ref.colors.default)+" text-right pr-3 col-span-2 svelte-uygk22")&&attr(d,"class",y),I&2&&v!==(v=k[9](k[19][1])+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block$4(l){let d,_=l[19][1]>=1&&create_if_block_2$1(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[19][1]>=1?_?_.p(m,y):(_=create_if_block_2$1(m),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},d(m){_&&_.d(m),m&&detach(d)}}}function create_key_block$1(l){let d=l[5][l[0]].unlockAt()||l[3]||l[6][l[0]]>0,_,m=d&&create_if_block$3(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g&105&&(d=y[5][y[0]].unlockAt()||y[3]||y[6][y[0]]>0),d?m?m.p(y,g):(m=create_if_block$3(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_fragment$5(l){let d=l[3]||l[2]||l[6][l[0]]>0,_,m=create_key_block$1(l);return{c(){m.c(),_=empty()},l(y){m.l(y),_=empty()},m(y,g){m.m(y,g),insert_hydration(y,_,g)},p(y,[g]){g&77&&safe_not_equal(d,d=y[3]||y[2]||y[6][y[0]]>0)?(m.d(1),m=create_key_block$1(y),m.c(),m.m(_.parentNode,_)):m.p(y,g)},i:noop,o:noop,d(y){y&&detach(_),m.d(y)}}}function instance$4(l,d,_){let m,y,g,b,v;component_subscribe(l,wallet,L=>_(4,m=L)),component_subscribe(l,buttonUpgrades,L=>_(5,y=L)),component_subscribe(l,buttonUpgradeLevels,L=>_(6,g=L)),component_subscribe(l,settings,L=>_(7,b=L)),component_subscribe(l,unlockedRes,L=>_(8,v=L));let{index:w}=d,k=()=>{let L={};for(let[P,J]of Object.entries(y[w].cost))L[P]=S(J);return L},I={},E,x=g[w]>0,D;onMount(()=>{setTimeout(()=>{_(1,I=k()),_(2,E=M()),y[w].unlockAt()&&_(3,x=!0),_(3,x=g[w]>0)},50),D=setInterval(()=>{_(2,E=M()),A(),y[w].unlockAt()&&_(3,x=!0)},100+Math.random()*20)}),onDestroy(()=>{clearInterval(D)});const N=(L,P=0)=>L<1e9?L.toFixed(L<1e3?P:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):L.toExponential(3).toString().replace("+",""),C=(L,P=3,J=!1)=>(J&&(L-=1),L<1e9?(L*100).toFixed(L*100<1e3?P:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")+"%":(L*100).toExponential(P).toString().replace("+","")+"%");function S(L){const P=L*Math.pow(y[w].ratio,g[w]),J=y[w].ratio,V=b.buyAmount;return formula.gSum(P,J,V)}function O(){_(1,I=k());for(let[L,P]of Object.entries(I))if(P>=1&&m[L]<P)return;for(let[L,P]of Object.entries(I))P>=1&&set_store_value(wallet,m[L]-=P,m);set_store_value(buttonUpgradeLevels,g[w]+=Math.min(b.buyAmount,y[w].maxLevel-g[w]),g),_(3,x=!0)}function M(){_(1,I=k());for(let[L,P]of Object.entries(I))if(P>=1&&m[L]<P)return!1;return!0}function A(){for(let[L,P]of Object.entries(y[w].unlockAt))if(m[L]<P)return!1;return!0}const U=()=>O();return l.$$set=L=>{"index"in L&&_(0,w=L.index)},[w,I,E,x,m,y,g,b,v,N,C,O,U]}class ButtonUpgradeButton extends SvelteComponent{constructor(d){super(),init(this,d,instance$4,create_fragment$5,safe_not_equal,{index:0})}}function get_each_context$3(l,d,_){const m=l.slice();return m[6]=d[_],m[8]=_,m}function create_each_block$3(l){let d,_,m,y;return _=new ButtonUpgradeButton({props:{index:l[8]}}),{c(){d=element("div"),create_component(_.$$.fragment),m=space(),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);claim_component(_.$$.fragment,b),m=claim_space(b),b.forEach(detach),this.h()},h(){attr(d,"class","col-span-3 pb-1 ")},m(g,b){insert_hydration(g,d,b),mount_component(_,d,null),append_hydration(d,m),y=!0},p:noop,i(g){y||(transition_in(_.$$.fragment,g),y=!0)},o(g){transition_out(_.$$.fragment,g),y=!1},d(g){g&&detach(d),destroy_component(_)}}}function create_fragment$4(l){let d,_,m,y,g=l[3](l[0].totalClicks)+"",b,v,w,k=l[3](l[1].perfect,0)+"",I,E,x,D=l[3](l[1].incredible,0)+"",N,C,S,O=l[3](l[1].excellent,0)+"",M,A,U,L=l[3](l[1].great,0)+"",P,J,V,z=l[3](l[1].good,0)+"",ne,R,B,W=l[3](l[1].okay,0)+"",j,F,$,te,q,G=l[3](l[0].totalClicks)+"",Q,X,ce,se=l[3](formula.calcButtonStreakBonus(l[0].totalClicks),3)+"",_e,ee,ae,oe,K,Y,T,re,me,fe=l[2],he=[];for(let H=0;H<fe.length;H+=1)he[H]=create_each_block$3(get_each_context$3(l,fe,H));const ye=H=>transition_out(he[H],1,1,()=>{he[H]=null});return re=new ButtonItem({}),{c(){d=element("div"),_=element("div"),m=element("div"),y=text("Total Clicks: "),b=text(g),v=text(` 
          [ 
          `),w=element("span"),I=text(k),E=text(` + 
          `),x=element("span"),N=text(D),C=text(` + 
          `),S=element("span"),M=text(O),A=text(` + 
          `),U=element("span"),P=text(L),J=text(` + 
          `),V=element("span"),ne=text(z),R=text(` + 
          `),B=element("span"),j=text(W),F=text(`
           ]`),$=space(),te=element("div"),q=text("Clicks Today: "),Q=text(G),X=text(`
          [ `),ce=element("span"),_e=text(se),ee=text(`x 
              `),ae=element("span"),oe=text("crystal bonus"),K=text(" ]"),Y=space();for(let H=0;H<he.length;H+=1)he[H].c();T=space(),create_component(re.$$.fragment),this.h()},l(H){d=claim_element(H,"DIV",{class:!0});var ie=children(d);_=claim_element(ie,"DIV",{class:!0});var ge=children(_);m=claim_element(ge,"DIV",{class:!0});var be=children(m);y=claim_text(be,"Total Clicks: "),b=claim_text(be,g),v=claim_text(be,` 
          [ 
          `),w=claim_element(be,"SPAN",{class:!0});var xe=children(w);I=claim_text(xe,k),xe.forEach(detach),E=claim_text(be,` + 
          `),x=claim_element(be,"SPAN",{class:!0});var De=children(x);N=claim_text(De,D),De.forEach(detach),C=claim_text(be,` + 
          `),S=claim_element(be,"SPAN",{class:!0});var Le=children(S);M=claim_text(Le,O),Le.forEach(detach),A=claim_text(be,` + 
          `),U=claim_element(be,"SPAN",{class:!0});var Ae=children(U);P=claim_text(Ae,L),Ae.forEach(detach),J=claim_text(be,` + 
          `),V=claim_element(be,"SPAN",{class:!0});var we=children(V);ne=claim_text(we,z),we.forEach(detach),R=claim_text(be,` + 
          `),B=claim_element(be,"SPAN",{class:!0});var pe=children(B);j=claim_text(pe,W),pe.forEach(detach),F=claim_text(be,`
           ]`),be.forEach(detach),$=claim_space(ge),te=claim_element(ge,"DIV",{class:!0});var Ee=children(te);q=claim_text(Ee,"Clicks Today: "),Q=claim_text(Ee,G),X=claim_text(Ee,`
          [ `),ce=claim_element(Ee,"SPAN",{class:!0});var Ie=children(ce);_e=claim_text(Ie,se),ee=claim_text(Ie,`x 
              `),ae=claim_element(Ie,"SPAN",{class:!0});var Ve=children(ae);oe=claim_text(Ve,"crystal bonus"),Ve.forEach(detach),Ie.forEach(detach),K=claim_text(Ee," ]"),Ee.forEach(detach),Y=claim_space(ge);for(let le=0;le<he.length;le+=1)he[le].l(ge);ge.forEach(detach),T=claim_space(ie),claim_component(re.$$.fragment,ie),ie.forEach(detach),this.h()},h(){attr(w,"class","text-amber-500 font-bold"),attr(x,"class","text-pink-500"),attr(S,"class","text-violet-500"),attr(U,"class","text-sky-500"),attr(V,"class","text-green-500"),attr(B,"class","text-gray-500"),attr(m,"class","text-center pb-3 text-med game-text col-span-12"),attr(ae,"class","text-indigo-300"),attr(ce,"class","game-text"),attr(te,"class","col-span-12 pb-3 game-text text-center"),attr(_,"class","grid grid-cols-12"),attr(d,"class","wrapper pt-2")},m(H,ie){insert_hydration(H,d,ie),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(m,b),append_hydration(m,v),append_hydration(m,w),append_hydration(w,I),append_hydration(m,E),append_hydration(m,x),append_hydration(x,N),append_hydration(m,C),append_hydration(m,S),append_hydration(S,M),append_hydration(m,A),append_hydration(m,U),append_hydration(U,P),append_hydration(m,J),append_hydration(m,V),append_hydration(V,ne),append_hydration(m,R),append_hydration(m,B),append_hydration(B,j),append_hydration(m,F),append_hydration(_,$),append_hydration(_,te),append_hydration(te,q),append_hydration(te,Q),append_hydration(te,X),append_hydration(te,ce),append_hydration(ce,_e),append_hydration(ce,ee),append_hydration(ce,ae),append_hydration(ae,oe),append_hydration(te,K),append_hydration(_,Y);for(let ge=0;ge<he.length;ge+=1)he[ge]&&he[ge].m(_,null);append_hydration(d,T),mount_component(re,d,null),me=!0},p(H,[ie]){if((!me||ie&1)&&g!==(g=H[3](H[0].totalClicks)+"")&&set_data(b,g),(!me||ie&2)&&k!==(k=H[3](H[1].perfect,0)+"")&&set_data(I,k),(!me||ie&2)&&D!==(D=H[3](H[1].incredible,0)+"")&&set_data(N,D),(!me||ie&2)&&O!==(O=H[3](H[1].excellent,0)+"")&&set_data(M,O),(!me||ie&2)&&L!==(L=H[3](H[1].great,0)+"")&&set_data(P,L),(!me||ie&2)&&z!==(z=H[3](H[1].good,0)+"")&&set_data(ne,z),(!me||ie&2)&&W!==(W=H[3](H[1].okay,0)+"")&&set_data(j,W),(!me||ie&1)&&G!==(G=H[3](H[0].totalClicks)+"")&&set_data(Q,G),(!me||ie&1)&&se!==(se=H[3](formula.calcButtonStreakBonus(H[0].totalClicks),3)+"")&&set_data(_e,se),ie&4){fe=H[2];let ge;for(ge=0;ge<fe.length;ge+=1){const be=get_each_context$3(H,fe,ge);he[ge]?(he[ge].p(be,ie),transition_in(he[ge],1)):(he[ge]=create_each_block$3(be),he[ge].c(),transition_in(he[ge],1),he[ge].m(_,null))}for(group_outros(),ge=fe.length;ge<he.length;ge+=1)ye(ge);check_outros()}},i(H){if(!me){for(let ie=0;ie<fe.length;ie+=1)transition_in(he[ie]);transition_in(re.$$.fragment,H),me=!0}},o(H){he=he.filter(Boolean);for(let ie=0;ie<he.length;ie+=1)transition_out(he[ie]);transition_out(re.$$.fragment,H),me=!1},d(H){H&&detach(d),destroy_each(he,H),destroy_component(re)}}}function instance$3(l,d,_){let m,y,g;return component_subscribe(l,buttonStats,v=>_(0,m=v)),component_subscribe(l,buttonNumClicks,v=>_(1,y=v)),component_subscribe(l,buttonUpgrades,v=>_(2,g=v)),[m,y,g,(v,w=0)=>v<1e9?v.toFixed(v<1e3?w:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):v.toExponential(3).toString().replace("+","")]}class Button extends SvelteComponent{constructor(d){super(),init(this,d,instance$3,create_fragment$4,safe_not_equal,{})}}function create_fragment$3(l){let d,_,m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W,j,F,$,te,q,G,Q,X,ce,se,_e,ee,ae,oe,K,Y,T,re,me,fe,he,ye,H,ie,ge,be,xe,De,Le,Ae;return{c(){d=element("div"),_=element("div"),m=text("Discord Server"),y=space(),g=element("div"),b=element("a"),v=text("Join our Discord for updates, discussion, and more!"),w=space(),k=element("div"),I=text("Mining"),E=space(),x=element("div"),D=text("Each time the red progress bar fills up, gain gems and have a chance for additional drops. "),N=element("br"),C=text(" Use your currencies on upgrades to your mining rig."),S=space(),O=element("div"),M=text("Keys"),A=space(),U=element("div"),L=text(`Use your found keys here! You unlock more information on drops after receiving at least one of the respective item from the respective key.
        `),P=element("br"),J=text(" Slurry (unlocked later) - Break down your keys into slurry. With the help of mysterious sigils, you can craft some of the most powerful items in the game (assuming you have already obtained at least one of that item)."),V=space(),z=element("div"),ne=text("Beacons"),R=space(),B=element("div"),W=text(`Allocate beacons into paths, leveling them up over time and gaining bonuses. Each color tier requires drastically more power than the previous one, so you'll need to work up to the later paths. 
    `),j=element("br"),F=text("You gain beacon power based on your beacon levels. Beacon power can augment your beacon paths."),$=space(),te=element("div"),q=text("Enchants"),G=space(),Q=element("div"),X=text("When the enchant bar of each respective color fills, there's a chance for all enchants of the same color as the bar to fire (chance shown on tooltips), giving a very powerful bonus. Upgrade your enchants to increase the proc chance."),ce=space(),se=element("div"),_e=text("Relocate"),ee=space(),ae=element("div"),oe=text(`Reset to gain fame. Fame can be spent on powerful mining upgrades and enchants. It's recommended for your first relocation to gain at least 25 fame, which should take about 1-2 hours. 
    `),K=element("br"),Y=text("HINT: Are you stuck? Each fame multiplier is color-coded based on the resource it deals with. If you are struggling to increase fame gains, you may be able to increase a specific multiplier by checking the tab where that resource is generated/used."),T=space(),re=element("div"),me=text("Button"),fe=space(),he=element("div"),ye=text("Click the button to gain crystals, which are used in a variety of upgrades. The center of the button gives better rewards, but you'll have to be precise."),H=space(),ie=element("div"),ge=text("Notes"),be=space(),xe=element("div"),De=text(`This game is balanced around playing manually without the use of any tools. Most things are automatic by default, and the mechanics that require active play do it for a reason, and/or can be automated in a reasonable time.
        `),Le=element("br"),Ae=text(" You are free to play however you want, but using autoclickers/scripts will likely ruin some of the experience of the game."),this.h()},l(we){d=claim_element(we,"DIV",{class:!0});var pe=children(d);_=claim_element(pe,"DIV",{class:!0});var Ee=children(_);m=claim_text(Ee,"Discord Server"),Ee.forEach(detach),y=claim_space(pe),g=claim_element(pe,"DIV",{class:!0});var Ie=children(g);b=claim_element(Ie,"A",{href:!0,class:!0,target:!0});var Ve=children(b);v=claim_text(Ve,"Join our Discord for updates, discussion, and more!"),Ve.forEach(detach),Ie.forEach(detach),w=claim_space(pe),k=claim_element(pe,"DIV",{class:!0});var le=children(k);I=claim_text(le,"Mining"),le.forEach(detach),E=claim_space(pe),x=claim_element(pe,"DIV",{class:!0});var ke=children(x);D=claim_text(ke,"Each time the red progress bar fills up, gain gems and have a chance for additional drops. "),N=claim_element(ke,"BR",{}),C=claim_text(ke," Use your currencies on upgrades to your mining rig."),ke.forEach(detach),S=claim_space(pe),O=claim_element(pe,"DIV",{class:!0});var Z=children(O);M=claim_text(Z,"Keys"),Z.forEach(detach),A=claim_space(pe),U=claim_element(pe,"DIV",{class:!0});var de=children(U);L=claim_text(de,`Use your found keys here! You unlock more information on drops after receiving at least one of the respective item from the respective key.
        `),P=claim_element(de,"BR",{}),J=claim_text(de," Slurry (unlocked later) - Break down your keys into slurry. With the help of mysterious sigils, you can craft some of the most powerful items in the game (assuming you have already obtained at least one of that item)."),de.forEach(detach),V=claim_space(pe),z=claim_element(pe,"DIV",{class:!0});var Se=children(z);ne=claim_text(Se,"Beacons"),Se.forEach(detach),R=claim_space(pe),B=claim_element(pe,"DIV",{class:!0});var ve=children(B);W=claim_text(ve,`Allocate beacons into paths, leveling them up over time and gaining bonuses. Each color tier requires drastically more power than the previous one, so you'll need to work up to the later paths. 
    `),j=claim_element(ve,"BR",{}),F=claim_text(ve,"You gain beacon power based on your beacon levels. Beacon power can augment your beacon paths."),ve.forEach(detach),$=claim_space(pe),te=claim_element(pe,"DIV",{class:!0});var Me=children(te);q=claim_text(Me,"Enchants"),Me.forEach(detach),G=claim_space(pe),Q=claim_element(pe,"DIV",{class:!0});var Be=children(Q);X=claim_text(Be,"When the enchant bar of each respective color fills, there's a chance for all enchants of the same color as the bar to fire (chance shown on tooltips), giving a very powerful bonus. Upgrade your enchants to increase the proc chance."),Be.forEach(detach),ce=claim_space(pe),se=claim_element(pe,"DIV",{class:!0});var Oe=children(se);_e=claim_text(Oe,"Relocate"),Oe.forEach(detach),ee=claim_space(pe),ae=claim_element(pe,"DIV",{class:!0});var Ye=children(ae);oe=claim_text(Ye,`Reset to gain fame. Fame can be spent on powerful mining upgrades and enchants. It's recommended for your first relocation to gain at least 25 fame, which should take about 1-2 hours. 
    `),K=claim_element(Ye,"BR",{}),Y=claim_text(Ye,"HINT: Are you stuck? Each fame multiplier is color-coded based on the resource it deals with. If you are struggling to increase fame gains, you may be able to increase a specific multiplier by checking the tab where that resource is generated/used."),Ye.forEach(detach),T=claim_space(pe),re=claim_element(pe,"DIV",{class:!0});var Ce=children(re);me=claim_text(Ce,"Button"),Ce.forEach(detach),fe=claim_space(pe),he=claim_element(pe,"DIV",{class:!0});var Ke=children(he);ye=claim_text(Ke,"Click the button to gain crystals, which are used in a variety of upgrades. The center of the button gives better rewards, but you'll have to be precise."),Ke.forEach(detach),H=claim_space(pe),ie=claim_element(pe,"DIV",{class:!0});var ze=children(ie);ge=claim_text(ze,"Notes"),ze.forEach(detach),be=claim_space(pe),xe=claim_element(pe,"DIV",{class:!0});var Qe=children(xe);De=claim_text(Qe,`This game is balanced around playing manually without the use of any tools. Most things are automatic by default, and the mechanics that require active play do it for a reason, and/or can be automated in a reasonable time.
        `),Le=claim_element(Qe,"BR",{}),Ae=claim_text(Qe," You are free to play however you want, but using autoclickers/scripts will likely ruin some of the experience of the game."),Qe.forEach(detach),pe.forEach(detach),this.h()},h(){attr(_,"class","text-large text-left pb-2 text-gray-300"),attr(b,"href","https://discord.gg/BNp27Vvcqm"),attr(b,"class","border-2 border-violet-300 bg-violet-600 hover:bg-violet-400 p-1"),attr(b,"target","_blank"),attr(g,"class","text-small text-white pb-4"),attr(k,"class","text-large text-left pb-2 text-gray-300"),attr(x,"class","text-small text-white pb-4"),attr(O,"class","text-large text-left pb-2 text-gray-300"),attr(U,"class","text-small text-white pb-4"),attr(z,"class","text-large text-left pb-2 text-gray-300"),attr(B,"class","text-small text-white pb-4"),attr(te,"class","text-large text-left pb-2 text-gray-300"),attr(Q,"class","text-small text-white pb-4"),attr(se,"class","text-large text-left pb-2 text-gray-300"),attr(ae,"class","text-small text-white pb-4"),attr(re,"class","text-large text-left pb-2 text-gray-300"),attr(he,"class","text-small text-white pb-4"),attr(ie,"class","text-large text-left pb-2 text-gray-300"),attr(xe,"class","text-small text-white pb-4"),attr(d,"class","wrapper pt-3")},m(we,pe){insert_hydration(we,d,pe),append_hydration(d,_),append_hydration(_,m),append_hydration(d,y),append_hydration(d,g),append_hydration(g,b),append_hydration(b,v),append_hydration(d,w),append_hydration(d,k),append_hydration(k,I),append_hydration(d,E),append_hydration(d,x),append_hydration(x,D),append_hydration(x,N),append_hydration(x,C),append_hydration(d,S),append_hydration(d,O),append_hydration(O,M),append_hydration(d,A),append_hydration(d,U),append_hydration(U,L),append_hydration(U,P),append_hydration(U,J),append_hydration(d,V),append_hydration(d,z),append_hydration(z,ne),append_hydration(d,R),append_hydration(d,B),append_hydration(B,W),append_hydration(B,j),append_hydration(B,F),append_hydration(d,$),append_hydration(d,te),append_hydration(te,q),append_hydration(d,G),append_hydration(d,Q),append_hydration(Q,X),append_hydration(d,ce),append_hydration(d,se),append_hydration(se,_e),append_hydration(d,ee),append_hydration(d,ae),append_hydration(ae,oe),append_hydration(ae,K),append_hydration(ae,Y),append_hydration(d,T),append_hydration(d,re),append_hydration(re,me),append_hydration(d,fe),append_hydration(d,he),append_hydration(he,ye),append_hydration(d,H),append_hydration(d,ie),append_hydration(ie,ge),append_hydration(d,be),append_hydration(d,xe),append_hydration(xe,De),append_hydration(xe,Le),append_hydration(xe,Ae)},p:noop,i:noop,o:noop,d(we){we&&detach(d)}}}class Help extends SvelteComponent{constructor(d){super(),init(this,d,null,create_fragment$3,safe_not_equal,{})}}function get_each_context$2(l,d,_){const m=l.slice();return m[13]=d[_],m}function create_if_block$2(l){let d,_,m=l[13].name+"",y,g,b,v,w;function k(){return l[12](l[13])}return{c(){d=element("div"),_=element("div"),y=text(m),b=space(),this.h()},l(I){d=claim_element(I,"DIV",{class:!0});var E=children(d);_=claim_element(E,"DIV",{class:!0});var x=children(_);y=claim_text(x,m),x.forEach(detach),b=claim_space(E),E.forEach(detach),this.h()},h(){attr(_,"class",g="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[0][l[13].name.toLowerCase()]?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(d,"class","col-span-3 grid-cols-3 pt-1")},m(I,E){insert_hydration(I,d,E),append_hydration(d,_),append_hydration(_,y),append_hydration(d,b),v||(w=listen(_,"click",k),v=!0)},p(I,E){l=I,E&4&&m!==(m=l[13].name+"")&&set_data(y,m),E&5&&g!==(g="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[0][l[13].name.toLowerCase()]?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(_,"class",g)},d(I){I&&detach(d),v=!1,w()}}}function create_each_block$2(l){let d,_=!(l[13].name=="Mine Size"||l[13].name=="Mine Quality")&&create_if_block$2(l);return{c(){_&&_.c(),d=empty()},l(m){_&&_.l(m),d=empty()},m(m,y){_&&_.m(m,y),insert_hydration(m,d,y)},p(m,y){m[13].name=="Mine Size"||m[13].name=="Mine Quality"?_&&(_.d(1),_=null):_?_.p(m,y):(_=create_if_block$2(m),_.c(),_.m(d.parentNode,d))},d(m){_&&_.d(m),m&&detach(d)}}}function create_fragment$2(l){let d,_,m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W,j,F,$,te,q,G,Q,X,ce,se,_e,ee,ae,oe,K,Y,T,re,me,fe,he,ye,H,ie,ge,be,xe,De,Le,Ae=l[2],we=[];for(let pe=0;pe<Ae.length;pe+=1)we[pe]=create_each_block$2(get_each_context$2(l,Ae,pe));return{c(){d=element("div"),_=element("div"),m=element("div"),y=text("Anti-Flickering - Bar will appear as solid when enabled"),g=space(),b=element("div"),v=element("div"),w=element("div"),k=text("Mining (gems)"),E=space(),x=element("div"),D=text("Mining (key finder)"),C=space(),S=element("div"),O=text("Crafting"),A=space(),U=element("div"),L=text("Beacons"),J=space(),V=element("div"),z=element("div"),ne=text("Enchants"),B=space(),W=element("div"),j=space(),F=element("div"),$=element("div"),te=text("Enable/disable activity log entries"),q=space(),G=element("div"),Q=element("div"),X=element("div"),ce=text("Crafting"),_e=space(),ee=element("div"),ae=element("div"),oe=text("Mythical"),Y=space(),T=element("div"),re=space();for(let pe=0;pe<we.length;pe+=1)we[pe].c();me=space(),fe=element("div"),he=text("About"),ye=space(),H=element("div"),ie=text("version 0.0.3 (alpha)"),ge=space(),be=element("div"),xe=text("created by bejewelled, all rights reserved"),this.h()},l(pe){d=claim_element(pe,"DIV",{class:!0});var Ee=children(d);_=claim_element(Ee,"DIV",{class:!0});var Ie=children(_);m=claim_element(Ie,"DIV",{class:!0});var Ve=children(m);y=claim_text(Ve,"Anti-Flickering - Bar will appear as solid when enabled"),Ve.forEach(detach),g=claim_space(Ie),b=claim_element(Ie,"DIV",{class:!0});var le=children(b);v=claim_element(le,"DIV",{class:!0});var ke=children(v);w=claim_element(ke,"DIV",{class:!0});var Z=children(w);k=claim_text(Z,"Mining (gems)"),Z.forEach(detach),E=claim_space(ke),x=claim_element(ke,"DIV",{class:!0});var de=children(x);D=claim_text(de,"Mining (key finder)"),de.forEach(detach),C=claim_space(ke),S=claim_element(ke,"DIV",{class:!0});var Se=children(S);O=claim_text(Se,"Crafting"),Se.forEach(detach),A=claim_space(ke),U=claim_element(ke,"DIV",{class:!0});var ve=children(U);L=claim_text(ve,"Beacons"),ve.forEach(detach),ke.forEach(detach),J=claim_space(le),V=claim_element(le,"DIV",{class:!0});var Me=children(V);z=claim_element(Me,"DIV",{class:!0});var Be=children(z);ne=claim_text(Be,"Enchants"),Be.forEach(detach),Me.forEach(detach),le.forEach(detach),Ie.forEach(detach),B=claim_space(Ee),W=claim_element(Ee,"DIV",{class:!0}),children(W).forEach(detach),j=claim_space(Ee),F=claim_element(Ee,"DIV",{class:!0});var Oe=children(F);$=claim_element(Oe,"DIV",{class:!0});var Ye=children($);te=claim_text(Ye,"Enable/disable activity log entries"),Ye.forEach(detach),q=claim_space(Oe),G=claim_element(Oe,"DIV",{class:!0});var Ce=children(G);Q=claim_element(Ce,"DIV",{class:!0});var Ke=children(Q);X=claim_element(Ke,"DIV",{class:!0});var ze=children(X);ce=claim_text(ze,"Crafting"),ze.forEach(detach),Ke.forEach(detach),_e=claim_space(Ce),ee=claim_element(Ce,"DIV",{class:!0});var Qe=children(ee);ae=claim_element(Qe,"DIV",{class:!0});var ot=children(ae);oe=claim_text(ot,"Mythical"),ot.forEach(detach),Qe.forEach(detach),Y=claim_space(Ce),T=claim_element(Ce,"DIV",{class:!0}),children(T).forEach(detach),re=claim_space(Ce);for(let $e=0;$e<we.length;$e+=1)we[$e].l(Ce);Ce.forEach(detach),Oe.forEach(detach),Ee.forEach(detach),me=claim_space(pe),fe=claim_element(pe,"DIV",{class:!0});var Ze=children(fe);he=claim_text(Ze,"About"),Ze.forEach(detach),ye=claim_space(pe),H=claim_element(pe,"DIV",{class:!0});var it=children(H);ie=claim_text(it,"version 0.0.3 (alpha)"),it.forEach(detach),ge=claim_space(pe),be=claim_element(pe,"DIV",{class:!0});var st=children(be);xe=claim_text(st,"created by bejewelled, all rights reserved"),st.forEach(detach),this.h()},h(){attr(m,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(w,"class",I="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[1].gems?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(x,"class",N="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[1].keyfinder?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(S,"class",M="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[1].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(U,"class",P="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[1].beacons?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(v,"class","wrapper col-span-1 grid grid-cols-8"),attr(z,"class",R="setting col-span-2 mx-1 px-1 py-1 text-center "+(l[1].enchants?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(V,"class","wrapper col-span-1 py-1 grid grid-cols-8"),attr(b,"class","wrapper grid grid-cols-1 py-1"),attr(_,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600 pb-1"),attr(W,"class","py-3"),attr($,"class","w-full text-left py-1 pl-1 text-medium text-gray-400"),attr(X,"class",se="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[0].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(Q,"class","col-span-3 grid-cols-3 pt-1"),attr(ae,"class",K="setting col-span-3 mx-1 px-1 py-1 text-center "+(l[0].mythical?"game-btn-toggleon":"game-btn-toggleoff")+" py-1"),attr(ee,"class","col-span-3 grid-cols-3 pt-1"),attr(T,"class","col-span-6 py-1"),attr(G,"class","grid grid-cols-12 py-1"),attr(F,"class","wrapper bg-gray-700 my-1 border-2 border-gray-600 pb-1"),attr(d,"class","wrapper pt-3"),attr(fe,"class","text-large text-gray-300 text-left pb-2"),attr(H,"class","text-small tooltip-text"),attr(be,"class","text-small tooltip-text")},m(pe,Ee){insert_hydration(pe,d,Ee),append_hydration(d,_),append_hydration(_,m),append_hydration(m,y),append_hydration(_,g),append_hydration(_,b),append_hydration(b,v),append_hydration(v,w),append_hydration(w,k),append_hydration(v,E),append_hydration(v,x),append_hydration(x,D),append_hydration(v,C),append_hydration(v,S),append_hydration(S,O),append_hydration(v,A),append_hydration(v,U),append_hydration(U,L),append_hydration(b,J),append_hydration(b,V),append_hydration(V,z),append_hydration(z,ne),append_hydration(d,B),append_hydration(d,W),append_hydration(d,j),append_hydration(d,F),append_hydration(F,$),append_hydration($,te),append_hydration(F,q),append_hydration(F,G),append_hydration(G,Q),append_hydration(Q,X),append_hydration(X,ce),append_hydration(G,_e),append_hydration(G,ee),append_hydration(ee,ae),append_hydration(ae,oe),append_hydration(G,Y),append_hydration(G,T),append_hydration(G,re);for(let Ie=0;Ie<we.length;Ie+=1)we[Ie]&&we[Ie].m(G,null);insert_hydration(pe,me,Ee),insert_hydration(pe,fe,Ee),append_hydration(fe,he),insert_hydration(pe,ye,Ee),insert_hydration(pe,H,Ee),append_hydration(H,ie),insert_hydration(pe,ge,Ee),insert_hydration(pe,be,Ee),append_hydration(be,xe),De||(Le=[listen(w,"click",l[5]),listen(x,"click",l[6]),listen(S,"click",l[7]),listen(U,"click",l[8]),listen(z,"click",l[9]),listen(X,"click",l[10]),listen(ae,"click",l[11])],De=!0)},p(pe,[Ee]){if(Ee&2&&I!==(I="setting col-span-2 mx-1 px-1 py-1 text-center "+(pe[1].gems?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(w,"class",I),Ee&2&&N!==(N="setting col-span-2 mx-1 px-1 py-1 text-center "+(pe[1].keyfinder?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(x,"class",N),Ee&2&&M!==(M="setting col-span-2 mx-1 px-1 py-1 text-center "+(pe[1].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(S,"class",M),Ee&2&&P!==(P="setting col-span-2 mx-1 px-1 py-1 text-center "+(pe[1].beacons?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(U,"class",P),Ee&2&&R!==(R="setting col-span-2 mx-1 px-1 py-1 text-center "+(pe[1].enchants?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(z,"class",R),Ee&1&&se!==(se="setting col-span-3 mx-1 px-1 py-1 text-center "+(pe[0].crafting?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(X,"class",se),Ee&1&&K!==(K="setting col-span-3 mx-1 px-1 py-1 text-center "+(pe[0].mythical?"game-btn-toggleon":"game-btn-toggleoff")+" py-1")&&attr(ae,"class",K),Ee&21){Ae=pe[2];let Ie;for(Ie=0;Ie<Ae.length;Ie+=1){const Ve=get_each_context$2(pe,Ae,Ie);we[Ie]?we[Ie].p(Ve,Ee):(we[Ie]=create_each_block$2(Ve),we[Ie].c(),we[Ie].m(G,null))}for(;Ie<we.length;Ie+=1)we[Ie].d(1);we.length=Ae.length}},i:noop,o:noop,d(pe){pe&&detach(d),destroy_each(we,pe),pe&&detach(me),pe&&detach(fe),pe&&detach(ye),pe&&detach(H),pe&&detach(ge),pe&&detach(be),De=!1,run_all(Le)}}}function instance$2(l,d,_){let m,y,g;component_subscribe(l,activityLogShow,S=>_(0,m=S)),component_subscribe(l,antiFlickerFlags,S=>_(1,y=S)),component_subscribe(l,enchantUpgrades,S=>_(2,g=S));function b(S){set_store_value(antiFlickerFlags,y[S]=!y[S],y)}function v(S){set_store_value(activityLogShow,m[S]=!m[S],m)}return[m,y,g,b,v,()=>b("gems"),()=>b("keyfinder"),()=>b("crafting"),()=>b("beacons"),()=>b("enchants"),()=>v("crafting"),()=>v("mythical"),S=>v(S.name.toLowerCase())]}class Settings extends SvelteComponent{constructor(d){super(),init(this,d,instance$2,create_fragment$2,safe_not_equal,{})}}function single(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(b=>g)},add(g){m(b=>b+g)},sub(g,b=!1){m(v=>b?v-g:Math.max(v,0))},multiply(g){m(b=>b*g)},divide(g){m(b=>b/g)}}}function array(l){const{subscribe:d,set:_,update:m,get:y}=writable(l);return{subscribe:d,set(g){m(b=>g)},add(g){m(b=>b+g)},sub(g,b=!1){m(v=>b?v-g:Math.max(v,0))},multiply(g){m(b=>b*g)},divide(g){m(b=>b/g)}}}array([Array(10).fill(()=>!0)]);const challengeNames=array(["Challenge 1: Rusty","Challenge 2: Clicker Hell"]),challengeDescriptions=array(["Each time your mine collects gems, your mine speed is decreased by 0.01% (multiplicatively).","You start unable to buy upgrades. Every 20 button clicks allows you to buy 1 upgrade level."]),challengeActive=single(0);function get_each_context$1(l,d,_){const m=l.slice();return m[9]=d[_],m[11]=_,m}function create_if_block$1(l){let d;return{c(){d=text("Exit")},l(_){d=claim_text(_,"Exit")},m(_,m){insert_hydration(_,d,m)},d(_){_&&detach(d)}}}function create_each_block$1(l){let d,_=l[9]+"",m,y,g,b=l[3][l[11]]+"",v,w,k,I,E,x,D,N=l[0]==l[11]&&create_if_block$1();function C(){return l[6](l[11])}return{c(){d=element("div"),m=text(_),y=space(),g=element("div"),v=text(b),w=space(),k=element("div"),N&&N.c(),I=space(),this.h()},l(S){d=claim_element(S,"DIV",{class:!0});var O=children(d);m=claim_text(O,_),O.forEach(detach),y=claim_space(S),g=claim_element(S,"DIV",{class:!0});var M=children(g);v=claim_text(M,b),M.forEach(detach),w=claim_space(S),k=claim_element(S,"DIV",{class:!0});var A=children(k);N&&N.l(A),I=claim_space(A),A.forEach(detach),this.h()},h(){attr(d,"class","col-span-3 game-text text-large text-left"),attr(g,"class","col-span-5 tooltip-text text-xs"),attr(k,"class",E="col-span-4 ml-2 align-middle mt-1 text-center "+(l[0]==l[11]?"game-btn-toggleon":"game-btn"))},m(S,O){insert_hydration(S,d,O),append_hydration(d,m),insert_hydration(S,y,O),insert_hydration(S,g,O),append_hydration(g,v),insert_hydration(S,w,O),insert_hydration(S,k,O),N&&N.m(k,null),append_hydration(k,I),x||(D=listen(k,"click",C),x=!0)},p(S,O){l=S,O&4&&_!==(_=l[9]+"")&&set_data(m,_),O&8&&b!==(b=l[3][l[11]]+"")&&set_data(v,b),l[0]==l[11]?N||(N=create_if_block$1(),N.c(),N.m(k,I)):N&&(N.d(1),N=null),O&1&&E!==(E="col-span-4 ml-2 align-middle mt-1 text-center "+(l[0]==l[11]?"game-btn-toggleon":"game-btn"))&&attr(k,"class",E)},d(S){S&&detach(d),S&&detach(y),S&&detach(g),S&&detach(w),S&&detach(k),N&&N.d(),x=!1,D()}}}function create_fragment$1(l){let d,_,m,y,g=l[4](l[1].challengePoints||0)+"",b,v,w,k,I,E,x,D,N,C,S,O,M=l[2],A=[];for(let U=0;U<M.length;U+=1)A[U]=create_each_block$1(get_each_context$1(l,M,U));return{c(){d=element("div"),_=element("div"),m=text("You have "),y=element("span"),b=text(g),v=text(" challenge points"),w=space(),k=element("div"),I=text("Multiplying global game speed by 1.000x"),E=space(),x=element("div"),D=text("THIS TAB IS NOT IMPLEMENTED YET"),N=space(),C=element("div"),S=space(),O=element("div");for(let U=0;U<A.length;U+=1)A[U].c();this.h()},l(U){d=claim_element(U,"DIV",{class:!0});var L=children(d);_=claim_element(L,"DIV",{class:!0});var P=children(_);m=claim_text(P,"You have "),y=claim_element(P,"SPAN",{class:!0});var J=children(y);b=claim_text(J,g),J.forEach(detach),v=claim_text(P," challenge points"),P.forEach(detach),w=claim_space(L),k=claim_element(L,"DIV",{class:!0});var V=children(k);I=claim_text(V,"Multiplying global game speed by 1.000x"),V.forEach(detach),E=claim_space(L),x=claim_element(L,"DIV",{class:!0});var z=children(x);D=claim_text(z,"THIS TAB IS NOT IMPLEMENTED YET"),z.forEach(detach),N=claim_space(L),C=claim_element(L,"DIV",{class:!0});var ne=children(C);ne.forEach(detach),S=claim_space(L),O=claim_element(L,"DIV",{class:!0});var R=children(O);for(let B=0;B<A.length;B+=1)A[B].l(R);R.forEach(detach),L.forEach(detach),this.h()},h(){attr(y,"class","text-fuchsia-500 font-bold"),attr(_,"class","beacon-power-display text-center text-large game-text py-1"),attr(k,"class","beacon-power-display text-center text-small game-text pb-1"),attr(x,"class","game-text text-center py-1"),attr(C,"class","py-2"),attr(O,"class","grid grid-cols-12"),attr(d,"class","wrapper py-2")},m(U,L){insert_hydration(U,d,L),append_hydration(d,_),append_hydration(_,m),append_hydration(_,y),append_hydration(y,b),append_hydration(_,v),append_hydration(d,w),append_hydration(d,k),append_hydration(k,I),append_hydration(d,E),append_hydration(d,x),append_hydration(x,D),append_hydration(d,N),append_hydration(d,C),append_hydration(d,S),append_hydration(d,O);for(let P=0;P<A.length;P+=1)A[P]&&A[P].m(O,null)},p(U,[L]){if(L&2&&g!==(g=U[4](U[1].challengePoints||0)+"")&&set_data(b,g),L&45){M=U[2];let P;for(P=0;P<M.length;P+=1){const J=get_each_context$1(U,M,P);A[P]?A[P].p(J,L):(A[P]=create_each_block$1(J),A[P].c(),A[P].m(O,null))}for(;P<A.length;P+=1)A[P].d(1);A.length=M.length}},i:noop,o:noop,d(U){U&&detach(d),destroy_each(A,U)}}}function instance$1(l,d,_){let m,y,g,b;component_subscribe(l,challengeActive,I=>_(0,m=I)),component_subscribe(l,resources,I=>_(1,y=I)),component_subscribe(l,challengeNames,I=>_(2,g=I)),component_subscribe(l,challengeDescriptions,I=>_(3,b=I));const v=(I,E=0)=>I<1e9?I.toFixed(I<1e3?E:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):I.toExponential(3).toString().replace("+","");function w(I){m==I?set_store_value(challengeActive,m=0,m):set_store_value(challengeActive,m=I,m)}return[m,y,g,b,v,w,I=>w(I)]}class Challenges extends SvelteComponent{constructor(d){super(),init(this,d,instance$1,create_fragment$1,safe_not_equal,{})}}const _page_svelte_svelte_type_style_lang="";function get_each_context(l,d,_){const m=l.slice();return m[69]=d[_],m}function get_each_context_1(l,d,_){const m=l.slice();return m[72]=d[_],m}function get_each_context_2(l,d,_){const m=l.slice();return m[75]=d[_],m}function get_each_context_3(l,d,_){const m=l.slice();return m[78]=d[_],m}function get_each_context_4(l,d,_){const m=l.slice();return m[75]=d[_],m}function create_if_block_14(l){let d,_;return d=new Adders({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_13(l){let d,_=(ref.displayNames[l[75][0]]||l[75][0])+"",m,y,g,b,v=l[17](Math.floor(l[75][1]),0)+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=ref.colors[l[75][0]]+" res-name col-span-7"),attr(b,"class","game-text res-amount col-span-5")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I[0]&512&&_!==(_=(ref.displayNames[k[75][0]]||k[75][0])+"")&&set_data(m,_),I[0]&512&&y!==(y=ref.colors[k[75][0]]+" res-name col-span-7")&&attr(d,"class",y),I[0]&512&&v!==(v=k[17](Math.floor(k[75][1]),0)+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block_4(l){let d=l[9][l[75][0]]&&l[9][l[75][0]]>=1&&!l[75][0].includes("key")&&!ref.walletExclude[l[75][0]]&&(ref.dropTiers[l[75][0]]||ref.dropTiers.default)==l[78],_,m=d&&create_if_block_13(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&512&&(d=y[9][y[75][0]]&&y[9][y[75][0]]>=1&&!y[75][0].includes("key")&&!ref.walletExclude[y[75][0]]&&(ref.dropTiers[y[75][0]]||ref.dropTiers.default)==y[78]),d?m?m.p(y,g):(m=create_if_block_13(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_each_block_3(l){let d,_,m=Object.entries(l[9]),y=[];for(let g=0;g<m.length;g+=1)y[g]=create_each_block_4(get_each_context_4(l,m,g));return{c(){for(let g=0;g<y.length;g+=1)y[g].c();d=space(),_=element("div"),this.h()},l(g){for(let b=0;b<y.length;b+=1)y[b].l(g);d=claim_space(g),_=claim_element(g,"DIV",{class:!0}),children(_).forEach(detach),this.h()},h(){attr(_,"class","res-break py-2 col-span-12")},m(g,b){for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(g,b);insert_hydration(g,d,b),insert_hydration(g,_,b)},p(g,b){if(b[0]&131584){m=Object.entries(g[9]);let v;for(v=0;v<m.length;v+=1){const w=get_each_context_4(g,m,v);y[v]?y[v].p(w,b):(y[v]=create_each_block_4(w),y[v].c(),y[v].m(d.parentNode,d))}for(;v<y.length;v+=1)y[v].d(1);y.length=m.length}},d(g){destroy_each(y,g),g&&detach(d),g&&detach(_)}}}function create_if_block_12(l){let d,_=(ref.displayNames[l[75][0]]||l[75][0])+"",m,y,g,b,v=l[17](Math.floor(l[75][1]),0)+"",w;return{c(){d=element("div"),m=text(_),g=space(),b=element("div"),w=text(v),this.h()},l(k){d=claim_element(k,"DIV",{class:!0});var I=children(d);m=claim_text(I,_),I.forEach(detach),g=claim_space(k),b=claim_element(k,"DIV",{class:!0});var E=children(b);w=claim_text(E,v),E.forEach(detach),this.h()},h(){attr(d,"class",y=ref.colors[l[75][0]]+" res-name col-span-7"),attr(b,"class","game-text res-amount col-span-5")},m(k,I){insert_hydration(k,d,I),append_hydration(d,m),insert_hydration(k,g,I),insert_hydration(k,b,I),append_hydration(b,w)},p(k,I){I[0]&512&&_!==(_=(ref.displayNames[k[75][0]]||k[75][0])+"")&&set_data(m,_),I[0]&512&&y!==(y=ref.colors[k[75][0]]+" res-name col-span-7")&&attr(d,"class",y),I[0]&512&&v!==(v=k[17](Math.floor(k[75][1]),0)+"")&&set_data(w,v)},d(k){k&&detach(d),k&&detach(g),k&&detach(b)}}}function create_each_block_2(l){let d=(l[9][l[75][0]]||l[11].has(l[75][0]))&&l[75][0].includes("key"),_,m=d&&create_if_block_12(l);return{c(){m&&m.c(),_=empty()},l(y){m&&m.l(y),_=empty()},m(y,g){m&&m.m(y,g),insert_hydration(y,_,g)},p(y,g){g[0]&2560&&(d=(y[9][y[75][0]]||y[11].has(y[75][0]))&&y[75][0].includes("key")),d?m?m.p(y,g):(m=create_if_block_12(y),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null)},d(y){m&&m.d(y),y&&detach(_)}}}function create_if_block_11(l){let d,_,m=l[12].slice().reverse(),y=[];for(let g=0;g<m.length;g+=1)y[g]=create_each_block_1(get_each_context_1(l,m,g));return{c(){d=element("div"),_=element("div");for(let g=0;g<y.length;g+=1)y[g].c();this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);_=claim_element(b,"DIV",{class:!0});var v=children(_);for(let w=0;w<y.length;w+=1)y[w].l(v);v.forEach(detach),b.forEach(detach),this.h()},h(){attr(_,"class","scrollable-area absolute inset-0 overflow-y-auto"),attr(d,"class","alog-cont col-span-12 h-64 relative bg-gray-700 border-4 border-gray-600")},m(g,b){insert_hydration(g,d,b),append_hydration(d,_);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(_,null)},p(g,b){if(b[0]&4096){m=g[12].slice().reverse();let v;for(v=0;v<m.length;v+=1){const w=get_each_context_1(g,m,v);y[v]?y[v].p(w,b):(y[v]=create_each_block_1(w),y[v].c(),y[v].m(_,null))}for(;v<y.length;v+=1)y[v].d(1);y.length=m.length}},d(g){g&&detach(d),destroy_each(y,g)}}}function create_each_block_1(l){let d,_=l[72][0]+"",m,y;return{c(){d=element("div"),m=text(_),this.h()},l(g){d=claim_element(g,"DIV",{class:!0});var b=children(d);m=claim_text(b,_),b.forEach(detach),this.h()},h(){attr(d,"class",y="alog-text text-small "+l[72][1]+" col-span-12 pt-1 pl-1")},m(g,b){insert_hydration(g,d,b),append_hydration(d,m)},p(g,b){b[0]&4096&&_!==(_=g[72][0]+"")&&set_data(m,_),b[0]&4096&&y!==(y="alog-text text-small "+g[72][1]+" col-span-12 pt-1 pl-1")&&attr(d,"class",y)},d(g){g&&detach(d)}}}function create_each_block(l){let d,_=l[69]+"",m,y,g,b;function v(){return l[31](l[69])}return{c(){d=element("button"),m=text(_),this.h()},l(w){d=claim_element(w,"BUTTON",{class:!0});var k=children(d);m=claim_text(k,_),k.forEach(detach),this.h()},h(){attr(d,"class",y="px-1 py-1 text-small "+(l[18][l[69]]&&l[18][l[69]]()?l[69]===l[1]?"control-btn-selected":"control-btn":"control-btn-nounlock"))},m(w,k){insert_hydration(w,d,k),append_hydration(d,m),g||(b=listen(d,"click",v),g=!0)},p(w,k){l=w,k[0]&2&&y!==(y="px-1 py-1 text-small "+(l[18][l[69]]&&l[18][l[69]]()?l[69]===l[1]?"control-btn-selected":"control-btn":"control-btn-nounlock"))&&attr(d,"class",y)},d(w){w&&detach(d),g=!1,b()}}}function create_key_block(l){let d,_=ref.tabs,m=[];for(let y=0;y<_.length;y+=1)m[y]=create_each_block(get_each_context(l,_,y));return{c(){for(let y=0;y<m.length;y+=1)m[y].c();d=empty()},l(y){for(let g=0;g<m.length;g+=1)m[g].l(y);d=empty()},m(y,g){for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(y,g);insert_hydration(y,d,g)},p(y,g){if(g[0]&278530){_=ref.tabs;let b;for(b=0;b<_.length;b+=1){const v=get_each_context(y,_,b);m[b]?m[b].p(v,g):(m[b]=create_each_block(v),m[b].c(),m[b].m(d.parentNode,d))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},d(y){destroy_each(m,y),y&&detach(d)}}}function create_if_block_10(l){let d,_;return d=new Settings({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_9(l){let d,_;return d=new Help({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_8(l){let d,_;return d=new Challenges({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_7(l){let d,_;return d=new Automation({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_6(l){let d,_;return d=new Button({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_5(l){let d,_;return d=new Enchants({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_4(l){let d,_;return d=new Relocate({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_3(l){let d,_;return d=new Beacons({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_2(l){let d,_;return d=new Keys({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block_1(l){let d,_;return d=new Mining({}),{c(){create_component(d.$$.fragment)},l(m){claim_component(d.$$.fragment,m)},m(m,y){mount_component(d,m,y),_=!0},i(m){_||(transition_in(d.$$.fragment,m),_=!0)},o(m){transition_out(d.$$.fragment,m),_=!1},d(m){destroy_component(d,m)}}}function create_if_block(l){let d,_=(ref.tabNotUnlockedText[l[1]]||"")+"",m;return{c(){d=element("div"),m=text(_),this.h()},l(y){d=claim_element(y,"DIV",{class:!0});var g=children(d);m=claim_text(g,_),g.forEach(detach),this.h()},h(){attr(d,"class","game-text")},m(y,g){insert_hydration(y,d,g),append_hydration(d,m)},p(y,g){g[0]&2&&_!==(_=(ref.tabNotUnlockedText[y[1]]||"")+"")&&set_data(m,_)},d(y){y&&detach(d)}}}function create_fragment(l){let d,_,m,y,g,b,v,w,k,I,E,x,D,N=l[0].level+"",C,S,O,M,A,U,L=l[17](l[0].xp,0)+"",P,J,V=l[17](l[0].xpNextReq,0)+"",z,ne,R,B,W,j,F,$,te,q,G,Q,X,ce,se,_e,ee,ae,oe,K,Y=l[6]?"-":"+",T,re,me,fe,he,ye,H,ie,ge,be,xe,De,Le,Ae,we,pe,Ee,Ie,Ve,le,ke,Z,de,Se,ve,Me,Be,Oe,Ye,Ce,Ke,ze,Qe,ot,Ze,it,st,$e,Et,St,nt,Ut=l[7],Nt,et,mt,ut,ht,ft,yt,gt,bt,vt,He,Je,kt,xt=l[18][l[1]]&&!l[18][l[1]]()||!l[18][l[1]],We,Mt,Vt,Pe=l[5]&&create_if_block_14(),Dt=[1,2,3,4],Xe=[];for(let ue=0;ue<4;ue+=1)Xe[ue]=create_each_block_3(get_each_context_3(l,Dt,ue));let ct=Object.entries(l[9]),qe=[];for(let ue=0;ue<ct.length;ue+=1)qe[ue]=create_each_block_2(get_each_context_2(l,ct,ue));let je=l[6]&&create_if_block_11(l),at=create_key_block(l);const Bt=[create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_10],lt=[];function Ot(ue,Ne){return Ne[0]&2&&(mt=null),Ne[0]&2&&(ut=null),Ne[0]&2&&(ht=null),Ne[0]&2&&(ft=null),Ne[0]&2&&(yt=null),Ne[0]&2&&(gt=null),Ne[0]&2&&(bt=null),Ne[0]&2&&(vt=null),mt==null&&(mt=!!(ue[1]==="mining"&&ue[18].mining())),mt?0:(ut==null&&(ut=!!(ue[1]==="keys"&&ue[18].mining())),ut?1:(ht==null&&(ht=!!(ue[1]==="beacons"&&ue[18].beacons())),ht?2:(ft==null&&(ft=!!(ue[1]==="relocate"&&ue[18].relocate())),ft?3:(yt==null&&(yt=!!(ue[1]==="enchants"&&ue[18].enchants())),yt?4:(gt==null&&(gt=!!(ue[1]==="button"&&ue[18].button())),gt?5:(bt==null&&(bt=!!(ue[1]==="automation"&&ue[18].automation())),bt?6:(vt==null&&(vt=!!(ue[1]==="challenges"&&ue[18].challenges())),vt?7:ue[1]==="help"?8:ue[1]==="settings"?9:-1)))))))}~(He=Ot(l,[-1,-1,-1]))&&(Je=lt[He]=Bt[He](l));let Ge=xt&&create_if_block(l);return{c(){Pe&&Pe.c(),d=space(),_=element("div"),m=element("div"),y=element("div"),g=element("div"),b=space(),v=element("div");for(let ue=0;ue<4;ue+=1)Xe[ue].c();w=space();for(let ue=0;ue<qe.length;ue+=1)qe[ue].c();k=space(),I=element("div"),E=element("div"),x=text(`Mining Level 
                    `),D=element("span"),C=text(N),S=space(),O=element("span"),M=element("div"),A=element("div"),U=text("[ "),P=text(L),J=text(" / "),z=text(V),ne=text(" ]"),R=space(),B=element("div"),W=text("Each mine operation gives 1 xp."),j=space(),F=element("div"),$=text("Each button hit gives 1 - 3 xp."),te=space(),q=element("div"),G=element("div"),Q=element("div"),X=element("div"),ce=space(),se=element("div"),_e=space(),ee=element("div"),ae=text("Activity Log"),oe=space(),K=element("div"),T=text(Y),re=space(),me=element("div"),fe=space(),je&&je.c(),he=space(),ye=element("div"),H=element("div"),ie=element("button"),ge=text("Save"),xe=space(),De=element("button"),Le=text("Reset"),Ae=space(),we=element("button"),pe=text("Import"),Ee=space(),Ie=element("button"),Ve=text("Export"),ke=space(),Z=element("button"),de=text("Buy x"),Se=text(l[4]),ve=space(),Me=element("button"),Be=text(`Buy Max
                    `),Oe=element("span"),Ye=text("Buy Max only works on Mining and Enchant upgrades."),Ke=space(),ze=element("button"),Qe=text("Help!"),ot=space(),Ze=element("button"),it=text("Settings"),st=space(),$e=element("button"),Et=text("v0.0.3A-17"),St=space(),nt=element("div"),at.c(),Nt=space(),et=element("div"),Je&&Je.c(),kt=space(),Ge&&Ge.c(),this.h()},l(ue){Pe&&Pe.l(ue),d=claim_space(ue),_=claim_element(ue,"DIV",{class:!0});var Ne=children(_);m=claim_element(Ne,"DIV",{class:!0});var Fe=children(m);y=claim_element(Fe,"DIV",{class:!0});var Te=children(y);g=claim_element(Te,"DIV",{class:!0}),children(g).forEach(detach),b=claim_space(Te),v=claim_element(Te,"DIV",{class:!0});var Ue=children(v);for(let rt=0;rt<4;rt+=1)Xe[rt].l(Ue);w=claim_space(Ue);for(let rt=0;rt<qe.length;rt+=1)qe[rt].l(Ue);k=claim_space(Ue),I=claim_element(Ue,"DIV",{class:!0});var wt=children(I);E=claim_element(wt,"DIV",{class:!0});var At=children(E);x=claim_text(At,`Mining Level 
                    `),D=claim_element(At,"SPAN",{class:!0});var Pt=children(D);C=claim_text(Pt,N),Pt.forEach(detach),At.forEach(detach),S=claim_space(wt),O=claim_element(wt,"SPAN",{class:!0});var Ct=children(O);M=claim_element(Ct,"DIV",{class:!0});var dt=children(M);A=claim_element(dt,"DIV",{class:!0});var _t=children(A);U=claim_text(_t,"[ "),P=claim_text(_t,L),J=claim_text(_t," / "),z=claim_text(_t,V),ne=claim_text(_t," ]"),_t.forEach(detach),R=claim_space(dt),B=claim_element(dt,"DIV",{class:!0});var Ft=children(B);W=claim_text(Ft,"Each mine operation gives 1 xp."),Ft.forEach(detach),j=claim_space(dt),F=claim_element(dt,"DIV",{class:!0});var Rt=children(F);$=claim_text(Rt,"Each button hit gives 1 - 3 xp."),Rt.forEach(detach),dt.forEach(detach),Ct.forEach(detach),wt.forEach(detach),te=claim_space(Ue),q=claim_element(Ue,"DIV",{class:!0});var qt=children(q);G=claim_element(qt,"DIV",{class:!0});var jt=children(G);Q=claim_element(jt,"DIV",{class:!0});var Gt=children(Q);X=claim_element(Gt,"DIV",{class:!0,style:!0}),children(X).forEach(detach),Gt.forEach(detach),jt.forEach(detach),qt.forEach(detach),ce=claim_space(Ue),se=claim_element(Ue,"DIV",{class:!0}),children(se).forEach(detach),_e=claim_space(Ue),ee=claim_element(Ue,"DIV",{class:!0});var Kt=children(ee);ae=claim_text(Kt,"Activity Log"),Kt.forEach(detach),oe=claim_space(Ue),K=claim_element(Ue,"DIV",{class:!0});var Jt=children(K);T=claim_text(Jt,Y),Jt.forEach(detach),re=claim_space(Ue),me=claim_element(Ue,"DIV",{class:!0}),children(me).forEach(detach),fe=claim_space(Ue),je&&je.l(Ue),Ue.forEach(detach),Te.forEach(detach),he=claim_space(Fe),ye=claim_element(Fe,"DIV",{class:!0});var pt=children(ye);H=claim_element(pt,"DIV",{class:!0});var Re=children(H);ie=claim_element(Re,"BUTTON",{class:!0});var Yt=children(ie);ge=claim_text(Yt,"Save"),Yt.forEach(detach),xe=claim_space(Re),De=claim_element(Re,"BUTTON",{class:!0});var Ht=children(De);Le=claim_text(Ht,"Reset"),Ht.forEach(detach),Ae=claim_space(Re),we=claim_element(Re,"BUTTON",{class:!0});var zt=children(we);pe=claim_text(zt,"Import"),zt.forEach(detach),Ee=claim_space(Re),Ie=claim_element(Re,"BUTTON",{class:!0});var Wt=children(Ie);Ve=claim_text(Wt,"Export"),Wt.forEach(detach),ke=claim_space(Re),Z=claim_element(Re,"BUTTON",{class:!0});var Tt=children(Z);de=claim_text(Tt,"Buy x"),Se=claim_text(Tt,l[4]),Tt.forEach(detach),ve=claim_space(Re),Me=claim_element(Re,"BUTTON",{class:!0});var Lt=children(Me);Be=claim_text(Lt,`Buy Max
                    `),Oe=claim_element(Lt,"SPAN",{class:!0});var Xt=children(Oe);Ye=claim_text(Xt,"Buy Max only works on Mining and Enchant upgrades."),Xt.forEach(detach),Lt.forEach(detach),Ke=claim_space(Re),ze=claim_element(Re,"BUTTON",{class:!0});var Qt=children(ze);Qe=claim_text(Qt,"Help!"),Qt.forEach(detach),ot=claim_space(Re),Ze=claim_element(Re,"BUTTON",{class:!0});var Zt=children(Ze);it=claim_text(Zt,"Settings"),Zt.forEach(detach),st=claim_space(Re),$e=claim_element(Re,"BUTTON",{class:!0});var $t=children($e);Et=claim_text($t,"v0.0.3A-17"),$t.forEach(detach),Re.forEach(detach),St=claim_space(pt),nt=claim_element(pt,"DIV",{class:!0});var ea=children(nt);at.l(ea),ea.forEach(detach),Nt=claim_space(pt),et=claim_element(pt,"DIV",{class:!0});var It=children(et);Je&&Je.l(It),kt=claim_space(It),Ge&&Ge.l(It),It.forEach(detach),pt.forEach(detach),Fe.forEach(detach),Ne.forEach(detach),this.h()},h(){attr(g,"class","res-display-space py-2"),attr(D,"class","font-bold text-cyan-400"),attr(E,"class","text-[#989898] text-small pt-4 pb-1"),attr(A,"class","col-span-3 text-center text-cyan-500"),attr(B,"class","col-span-3 text-center"),attr(F,"class","col-span-3 text-center"),attr(M,"class","grid grid-cols-3"),attr(O,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none max-w-[300px] text-center weight-bold"),attr(I,"class","col-span-12 has-tooltip"),attr(X,"class","bg-cyan-500 h-2.5 rounded-full"),set_style(X,"width",l[8]+"%"),attr(Q,"class","w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"),attr(G,"class","mine-bar-wrapper pb-2"),attr(q,"class","col-span-12"),attr(se,"class","alog-break pt-4 col-span-12"),attr(ee,"class","alog-title game-text col-span-9 "),attr(K,"class","alog-minimize col-span-3 game-btn text-center game-text"),attr(me,"class","col-span-12 py-1"),attr(v,"class","res-display-wrap grid grid-cols-12"),attr(y,"class","px-2 res-display col-span-3"),attr(ie,"class",be="py-1 text-small save-btn control-btn "+(l[2]?"bg-green-400":"")),attr(De,"class","py-1 text-small save-btn control-btn"),attr(we,"class","py-1 text-small save-btn control-btn"),attr(Ie,"class",le="py-1 text-small save-btn control-btn "+(l[3]?"bg-green-400":"")),attr(Z,"class","py-1 px-1 text-small save-btn control-btn"),attr(Oe,"class","px-2 mx-4 tooltip tooltip-text shadow-lg p-1 border-white border-double border bg-[#222529] ml-16 pointer-events-none max-w-[300px] text-center weight-bold"),attr(Me,"class",Ce="py-1 px-1 text-small save-btn has-tooltip "+(l[10].maxBuy?"game-btn-toggleon":"control-btn")),attr(ze,"class","py-1 px-1 text-small save-btn control-btn"),attr(Ze,"class","py-1 px-1 text-small save-btn control-btn"),attr($e,"class","text-xs text-gray-600"),attr(H,"class","py-1 control-buttons resize-none"),attr(nt,"class","row-span-1 tab-buttons"),attr(et,"class","row-span-10 main-panel-display"),attr(ye,"class","px-2 py-2 main-panel col-span-8 flexbox"),attr(m,"class","main-page grid grid-cols-12"),attr(_,"class","wrapper")},m(ue,Ne){Pe&&Pe.m(ue,Ne),insert_hydration(ue,d,Ne),insert_hydration(ue,_,Ne),append_hydration(_,m),append_hydration(m,y),append_hydration(y,g),append_hydration(y,b),append_hydration(y,v);for(let Fe=0;Fe<4;Fe+=1)Xe[Fe]&&Xe[Fe].m(v,null);append_hydration(v,w);for(let Fe=0;Fe<qe.length;Fe+=1)qe[Fe]&&qe[Fe].m(v,null);append_hydration(v,k),append_hydration(v,I),append_hydration(I,E),append_hydration(E,x),append_hydration(E,D),append_hydration(D,C),append_hydration(I,S),append_hydration(I,O),append_hydration(O,M),append_hydration(M,A),append_hydration(A,U),append_hydration(A,P),append_hydration(A,J),append_hydration(A,z),append_hydration(A,ne),append_hydration(M,R),append_hydration(M,B),append_hydration(B,W),append_hydration(M,j),append_hydration(M,F),append_hydration(F,$),append_hydration(v,te),append_hydration(v,q),append_hydration(q,G),append_hydration(G,Q),append_hydration(Q,X),append_hydration(v,ce),append_hydration(v,se),append_hydration(v,_e),append_hydration(v,ee),append_hydration(ee,ae),append_hydration(v,oe),append_hydration(v,K),append_hydration(K,T),append_hydration(v,re),append_hydration(v,me),append_hydration(v,fe),je&&je.m(v,null),append_hydration(m,he),append_hydration(m,ye),append_hydration(ye,H),append_hydration(H,ie),append_hydration(ie,ge),append_hydration(H,xe),append_hydration(H,De),append_hydration(De,Le),append_hydration(H,Ae),append_hydration(H,we),append_hydration(we,pe),append_hydration(H,Ee),append_hydration(H,Ie),append_hydration(Ie,Ve),append_hydration(H,ke),append_hydration(H,Z),append_hydration(Z,de),append_hydration(Z,Se),append_hydration(H,ve),append_hydration(H,Me),append_hydration(Me,Be),append_hydration(Me,Oe),append_hydration(Oe,Ye),append_hydration(H,Ke),append_hydration(H,ze),append_hydration(ze,Qe),append_hydration(H,ot),append_hydration(H,Ze),append_hydration(Ze,it),append_hydration(H,st),append_hydration(H,$e),append_hydration($e,Et),append_hydration(ye,St),append_hydration(ye,nt),at.m(nt,null),append_hydration(ye,Nt),append_hydration(ye,et),~He&&lt[He].m(et,null),append_hydration(et,kt),Ge&&Ge.m(et,null),We=!0,Mt||(Vt=[listen(K,"click",l[22]),listen(ie,"click",l[23]),listen(De,"click",l[24]),listen(we,"click",l[25]),listen(Ie,"click",l[26]),listen(Z,"click",l[27]),listen(Me,"click",l[28]),listen(ze,"click",l[29]),listen(Ze,"click",l[30])],Mt=!0)},p(ue,Ne){if(ue[5]?Pe?Ne[0]&32&&transition_in(Pe,1):(Pe=create_if_block_14(),Pe.c(),transition_in(Pe,1),Pe.m(d.parentNode,d)):Pe&&(group_outros(),transition_out(Pe,1,1,()=>{Pe=null}),check_outros()),Ne[0]&131584){Dt=[1,2,3,4];let Te;for(Te=0;Te<4;Te+=1){const Ue=get_each_context_3(ue,Dt,Te);Xe[Te]?Xe[Te].p(Ue,Ne):(Xe[Te]=create_each_block_3(Ue),Xe[Te].c(),Xe[Te].m(v,w))}for(;Te<4;Te+=1)Xe[Te].d(1)}if(Ne[0]&133632){ct=Object.entries(ue[9]);let Te;for(Te=0;Te<ct.length;Te+=1){const Ue=get_each_context_2(ue,ct,Te);qe[Te]?qe[Te].p(Ue,Ne):(qe[Te]=create_each_block_2(Ue),qe[Te].c(),qe[Te].m(v,k))}for(;Te<qe.length;Te+=1)qe[Te].d(1);qe.length=ct.length}(!We||Ne[0]&1)&&N!==(N=ue[0].level+"")&&set_data(C,N),(!We||Ne[0]&1)&&L!==(L=ue[17](ue[0].xp,0)+"")&&set_data(P,L),(!We||Ne[0]&1)&&V!==(V=ue[17](ue[0].xpNextReq,0)+"")&&set_data(z,V),(!We||Ne[0]&256)&&set_style(X,"width",ue[8]+"%"),(!We||Ne[0]&64)&&Y!==(Y=ue[6]?"-":"+")&&set_data(T,Y),ue[6]?je?je.p(ue,Ne):(je=create_if_block_11(ue),je.c(),je.m(v,null)):je&&(je.d(1),je=null),(!We||Ne[0]&4&&be!==(be="py-1 text-small save-btn control-btn "+(ue[2]?"bg-green-400":"")))&&attr(ie,"class",be),(!We||Ne[0]&8&&le!==(le="py-1 text-small save-btn control-btn "+(ue[3]?"bg-green-400":"")))&&attr(Ie,"class",le),(!We||Ne[0]&16)&&set_data(Se,ue[4]),(!We||Ne[0]&1024&&Ce!==(Ce="py-1 px-1 text-small save-btn has-tooltip "+(ue[10].maxBuy?"game-btn-toggleon":"control-btn")))&&attr(Me,"class",Ce),Ne[0]&128&&safe_not_equal(Ut,Ut=ue[7])?(at.d(1),at=create_key_block(ue),at.c(),at.m(nt,null)):at.p(ue,Ne);let Fe=He;He=Ot(ue,Ne),He!==Fe&&(Je&&(group_outros(),transition_out(lt[Fe],1,1,()=>{lt[Fe]=null}),check_outros()),~He?(Je=lt[He],Je||(Je=lt[He]=Bt[He](ue),Je.c()),transition_in(Je,1),Je.m(et,kt)):Je=null),Ne[0]&2&&(xt=ue[18][ue[1]]&&!ue[18][ue[1]]()||!ue[18][ue[1]]),xt?Ge?Ge.p(ue,Ne):(Ge=create_if_block(ue),Ge.c(),Ge.m(et,null)):Ge&&(Ge.d(1),Ge=null)},i(ue){We||(transition_in(Pe),transition_in(Je),We=!0)},o(ue){transition_out(Pe),transition_out(Je),We=!1},d(ue){Pe&&Pe.d(ue),ue&&detach(d),ue&&detach(_),destroy_each(Xe,ue),destroy_each(qe,ue),je&&je.d(),at.d(ue),~He&&lt[He].d(),Ge&&Ge.d(),Mt=!1,run_all(Vt)}}}let AUTOSAVE_INTERVAL=3e4;function instance(l,d,_){let m,y,g,b,v,w,k,I,E,x,D,N,C,S,O,M,A,U,L,P,J,V,z,ne,R,B,W,j,F,$,te,q,G,Q,X,ce;component_subscribe(l,flags,Z=>_(33,y=Z)),component_subscribe(l,saveVersion,Z=>_(34,g=Z)),component_subscribe(l,miningUpgradeLevels,Z=>_(35,b=Z)),component_subscribe(l,miningUpgradeLevelsBought,Z=>_(36,v=Z)),component_subscribe(l,wallet,Z=>_(9,w=Z)),component_subscribe(l,keysOpened,Z=>_(37,k=Z)),component_subscribe(l,visibleTier,Z=>_(38,I=Z)),component_subscribe(l,activityLogShow,Z=>_(39,E=Z)),component_subscribe(l,enchantUpgrades,Z=>_(40,Z)),component_subscribe(l,keyCraftMastery,Z=>_(41,x=Z)),component_subscribe(l,keyCraftAmount,Z=>_(42,D=Z)),component_subscribe(l,buttonUpgradeLevels,Z=>_(43,N=Z)),component_subscribe(l,buttonUpgrades,Z=>_(44,Z)),component_subscribe(l,miningUpgradeLevelsFree,Z=>_(45,C=Z)),component_subscribe(l,keyCraftTimes,Z=>_(46,S=Z)),component_subscribe(l,beaconActivations,Z=>_(47,O=Z)),component_subscribe(l,keyUpgradeLevels,Z=>_(48,M=Z)),component_subscribe(l,key1DropTable,Z=>_(49,A=Z)),component_subscribe(l,resources,Z=>_(50,U=Z)),component_subscribe(l,beaconNums,Z=>_(51,L=Z)),component_subscribe(l,beaconNextReqs,Z=>_(52,P=Z)),component_subscribe(l,beaconLevels,Z=>_(53,J=Z)),component_subscribe(l,settings,Z=>_(10,V=Z)),component_subscribe(l,unlockedRes,Z=>_(11,z=Z)),component_subscribe(l,automationItemsUnlocked,Z=>_(54,ne=Z)),component_subscribe(l,antiFlickerFlags,Z=>_(55,R=Z)),component_subscribe(l,startOfGame,Z=>_(56,B=Z)),component_subscribe(l,buttonStats,Z=>_(57,W=Z)),component_subscribe(l,buttonNumClicks,Z=>_(58,j=Z)),component_subscribe(l,mineLevel,Z=>_(0,F=Z)),component_subscribe(l,beaconSpendAmt,Z=>_(59,$=Z)),component_subscribe(l,enchantUpgradeLevels,Z=>_(60,te=Z)),component_subscribe(l,beaconUpgradeLevels,Z=>_(61,q=Z)),component_subscribe(l,beaconProgress,Z=>_(62,G=Z)),component_subscribe(l,progress,Z=>_(63,Q=Z)),component_subscribe(l,keyItemsUnlocked,Z=>_(64,X=Z)),component_subscribe(l,activityLog,Z=>_(12,ce=Z));let se="mining",_e,ee,ae=1,oe=!1,K=!0;const Y=()=>{_(6,K=!K)},T=Z=>{_(1,se=Z),set_store_value(settings,V.activeTab=Z,V)},re=()=>{ae===1?_(4,ae=10):ae===10?_(4,ae=100):ae===100&&_(4,ae=1),set_store_value(settings,V.buyAmount=ae,V)},me=()=>{V.maxBuy||set_store_value(settings,V.maxBuy=!1,V),set_store_value(settings,V.maxBuy=!V.maxBuy,V)},fe=(Z,de=3)=>Z<1e9?Z.toFixed(Z<1e3?de:0).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","):Z.toExponential(3).toString().replace("+",""),he={mining:()=>!0,keys:()=>!0,beacons:()=>w.beacons||formula.sumArray(O)>0,sigils:()=>w.sigils&&w.sigils>.02,relocate:()=>formula.sumArray(k)>1e3||w.fame,enchants:()=>w.fame&&w.fame>=100||formula.sumArray(te)>0,automation:()=>w.fame&&w.fame>=.997||formula.sumArray(te)>0||b[10]>0||b[11]>0,button:()=>F.level>=8,default:()=>!1,help:()=>!0,settings:()=>!0,challenges:()=>ne["game on"]},ye={mining:!0,keys:!0,beacons:!1,sigils:!1,relocate:!1,default:!1},H=async(Z=!1)=>{localStorage.setItem("wallet",JSON.stringify(w)),localStorage.setItem("miningUpgradeLevels",JSON.stringify(b)),localStorage.setItem("miningUpgradeLevelsBought",JSON.stringify(v)),localStorage.setItem("miningUpgradeLevelsFree",JSON.stringify(C)),localStorage.setItem("unlockedRes",JSON.stringify([...z]));let de={};for(let Se of Object.keys(X))de[Se]=Array.from(X[Se]||[]);if(localStorage.setItem("keyItemsUnlocked",JSON.stringify(de)),localStorage.setItem("keysOpened",JSON.stringify(k)),localStorage.setItem("progress",JSON.stringify(Q)),localStorage.setItem("dropTier",JSON.stringify(I)),localStorage.setItem("settings",JSON.stringify(V)),localStorage.setItem("beaconProgress",JSON.stringify(G)),localStorage.setItem("beaconLevels",JSON.stringify(J)),localStorage.setItem("beaconUpgradeLevels",JSON.stringify(q)),localStorage.setItem("resources",JSON.stringify(U)),localStorage.setItem("beaconActivations",JSON.stringify(O)),localStorage.setItem("beaconNextReqs",JSON.stringify(P)),localStorage.setItem("flags",JSON.stringify(y)),localStorage.setItem("enchantUpgradeLevels",JSON.stringify(te)),localStorage.setItem("beaconSpendAmt",JSON.stringify($)),localStorage.setItem("mineLevel",JSON.stringify(F)),localStorage.setItem("buttonNumClicks",JSON.stringify(j)),localStorage.setItem("buttonUpgradeLevels",JSON.stringify(N)),localStorage.setItem("buttonStats",JSON.stringify(W)),localStorage.setItem("keyUpgradeLevels",JSON.stringify(M)),localStorage.setItem("keyCraftTimes",JSON.stringify(S)),localStorage.setItem("keyCraftAmount",JSON.stringify(D)),localStorage.setItem("keyCraftMastery",JSON.stringify(x)),localStorage.setItem("startOfGame",JSON.stringify(B)),localStorage.setItem("settings",JSON.stringify(V)),localStorage.setItem("antiFlickerFlags",JSON.stringify(R)),localStorage.setItem("saveVersion",JSON.stringify(g)),localStorage.setItem("automationItemsUnlocked",JSON.stringify(ne)),localStorage.setItem("activityLogShow",JSON.stringify(E)),_(2,_e=!0),Z){const Se=Object.keys(localStorage),ve={};Se.forEach(Be=>{ve[Be]=localStorage.getItem(Be)});const Me=btoa(JSON.stringify(ve));await parent.navigator.clipboard.writeText(Me),alert("Copied save to clipboard."),_(3,ee=!0)}setTimeout(()=>{_(2,_e=!1),_(3,ee=!1)},1e3)},ie=()=>{confirm("你确定吗？ 这是硬重置！！！！")&&confirm("你十分确定吗？")&&(localStorage.clear(),location.reload())},ge=async(Z=!1)=>{if(Z){const de=prompt("Paste your save here.");if(de)try{const Se=JSON.parse(atob(de));Object.keys(Se).forEach(Me=>{localStorage.setItem(Me,Se[Me])}),location.reload()}catch{alert("Save file invalid, using local save instead. Contact the developer on Discord if this is a mistake.")}else alert("Safe file empty, using local save instead.")}if(localStorage!==null){if(localStorage.getItem("wallet")){wallet.set(JSON.parse(localStorage.getItem("wallet")));for(let de of Object.keys(w))isNaN(w[de])&&set_store_value(wallet,w[de]=0,w)}if(localStorage.getItem("miningUpgradeLevels")&&miningUpgradeLevels.set(JSON.parse(localStorage.getItem("miningUpgradeLevels"))),b.length<100&&set_store_value(miningUpgradeLevels,b=[...b,...Array(100-b.length).fill(0)],b),localStorage.getItem("miningUpgradeLevelsBought")&&miningUpgradeLevelsBought.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsBought"))),localStorage.getItem("miningUpgradeLevelsFree")&&miningUpgradeLevelsFree.set(JSON.parse(localStorage.getItem("miningUpgradeLevelsFree"))),localStorage.getItem("progress")&&unlockedRes.set(JSON.parse(localStorage.getItem("progress"))),localStorage.getItem("keysOpened")&&keysOpened.set(JSON.parse(localStorage.getItem("keysOpened"))),k.length>5&&set_store_value(keysOpened,k=k.slice(0,5),k),localStorage.getItem("keyItemsUnlocked")){const de=JSON.parse(localStorage.getItem("keyItemsUnlocked")),Se={};for(let ve in de)Se[ve]=new Set(de[ve]);keyItemsUnlocked.set(Se)}localStorage.getItem("beaconSpendAmt")&&beaconSpendAmt.set(JSON.parse(localStorage.getItem("beaconSpendAmt"))),set_store_value(unlockedRes,z=new Set,z);for(let[de,Se]of Object.entries(w))Se>0&&!z.has(de)&&z.add(de);b[6]>0&&set_store_value(visibleTier,I=2,I),b[9]>0&&set_store_value(visibleTier,I=3,I),localStorage.getItem("settings")&&(settings.set(JSON.parse(localStorage.getItem("settings"))),_(4,ae=V.buyAmount)),localStorage.getItem("beaconProgress")&&beaconProgress.set(JSON.parse(localStorage.getItem("beaconProgress"))),localStorage.getItem("beaconLevels")&&beaconLevels.set(JSON.parse(localStorage.getItem("beaconLevels"))),localStorage.getItem("beaconNextReqs")&&beaconNextReqs.set(JSON.parse(localStorage.getItem("beaconNextReqs")));for(let de=0;de<P.length;de++)J[de]==0&&set_store_value(beaconNextReqs,P[de]=L[de][0],P);return localStorage.getItem("beaconUpgradeLevels")&&beaconUpgradeLevels.set(JSON.parse(localStorage.getItem("beaconUpgradeLevels"))),localStorage.getItem("resources")&&resources.set(JSON.parse(localStorage.getItem("resources"))),localStorage.getItem("beaconActivations")&&beaconActivations.set(JSON.parse(localStorage.getItem("beaconActivations"))),localStorage.getItem("flags")&&flags.set(JSON.parse(localStorage.getItem("flags"))),localStorage.getItem("enchantUpgradeLevels")&&enchantUpgradeLevels.set(JSON.parse(localStorage.getItem("enchantUpgradeLevels"))),localStorage.getItem("mineLevel")&&mineLevel.set(JSON.parse(localStorage.getItem("mineLevel"))),localStorage.getItem("buttonNumClicks")&&buttonNumClicks.set(JSON.parse(localStorage.getItem("buttonNumClicks"))),localStorage.getItem("buttonUpgradeLevels")&&buttonUpgradeLevels.set(JSON.parse(localStorage.getItem("buttonUpgradeLevels"))),localStorage.getItem("buttonStats")&&buttonStats.set(JSON.parse(localStorage.getItem("buttonStats"))),localStorage.getItem("keyUpgradeLevels")&&keyUpgradeLevels.set(JSON.parse(localStorage.getItem("keyUpgradeLevels"))),localStorage.getItem("keyCraftTimes")&&keyCraftTimes.set(JSON.parse(localStorage.getItem("keyCraftTimes"))),localStorage.getItem("keyCraftAmount")&&keyCraftAmount.set(JSON.parse(localStorage.getItem("keyCraftAmount"))),localStorage.getItem("keyCraftMastery")&&keyCraftMastery.set(JSON.parse(localStorage.getItem("keyCraftMastery"))),localStorage.getItem("startOfGame")&&startOfGame.set(JSON.parse(localStorage.getItem("startOfGame"))),localStorage.getItem("settings")&&settings.set(JSON.parse(localStorage.getItem("settings"))),localStorage.getItem("antiFlickerFlags")&&antiFlickerFlags.set(JSON.parse(localStorage.getItem("antiFlickerFlags"))),localStorage.getItem("saveVersion")&&saveVersion.set(JSON.parse(localStorage.getItem("saveVersion"))),localStorage.getItem("automationItemsUnlocked")&&automationItemsUnlocked.set(JSON.parse(localStorage.getItem("automationItemsUnlocked"))),localStorage.getItem("activityLogShow")&&activityLogShow.set(JSON.parse(localStorage.getItem("activityLogShow"))),await be(),miningDropTable.updateTable(),U.beaconPower<0&&set_store_value(resources,U.beaconPower=0,U),console.log(A),key1DropTable.updateTable(),key2DropTable.updateTable(),key3DropTable.updateTable(),key4DropTable.updateTable(),key5DropTable.updateTable(),_(5,oe=!0),console.log(E),!0}};function be(){console.log(g);const Z=17;{for(let de in k)(k[de]==1/0||isNaN(k[de]))&&set_store_value(keysOpened,k[de]=0,k);(isNaN(w.key1)||w.key1==1/0)&&set_store_value(wallet,w.key1=0,w),(isNaN(w.key2)||w.key2==1/0)&&set_store_value(wallet,w.key2=0,w),(isNaN(w.key3)||w.key3==1/0)&&set_store_value(wallet,w.key3=0,w),(isNaN(w.key4)||w.key4==1/0)&&set_store_value(wallet,w.key4=0,w),(isNaN(w.key5)||w.key5==1/0)&&set_store_value(wallet,w.key5=0,w);for(let de=0;de<200;de++)v[de]||set_store_value(miningUpgradeLevelsBought,v[de]=0,v),b[de]||set_store_value(miningUpgradeLevels,b[de]=0,b)}set_store_value(saveVersion,g=Z,g),H()}async function xe(){await ge(),setTimeout(()=>{miningDropTable.updateTable()},250)}onMount(()=>{xe(),setInterval(()=>{H()},AUTOSAVE_INTERVAL),setInterval(()=>{},1e3),setInterval(()=>{for(let Z of ref.tabs)_(7,ye[Z]=he[Z]?he[Z]():!1,ye);y.relocateNavBack&&(_(1,se="mining"),set_store_value(flags,y.relocateNavBack=!1,y))},1163)});const De=()=>Y(),Le=()=>H(),Ae=()=>ie(),we=()=>ge(!0),pe=()=>H(!0),Ee=()=>re(),Ie=()=>me(),Ve=()=>T("help"),le=()=>T("settings"),ke=Z=>T(Z);return l.$$.update=()=>{l.$$.dirty[0]&1&&_(8,m=F.xp/F.xpNextReq*100)},[F,se,_e,ee,ae,oe,K,ye,m,w,V,z,ce,Y,T,re,me,fe,he,H,ie,ge,De,Le,Ae,we,pe,Ee,Ie,Ve,le,ke]}class Page extends SvelteComponent{constructor(d){super(),init(this,d,instance,create_fragment,safe_not_equal,{},null,[-1,-1,-1])}}export{Page as component};
